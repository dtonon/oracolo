<!doctype html>
<html lang="en">
  <head>
    <!-- Configure with your npub/nprofile -->
    <meta name="author" value="npub1jlrs53pkdfjnts29kveljul2sm0actt6n8dxrrzqcersttvcuv3qdjynqn" />

    <!-- Personalize your relays list -->
    <meta name="relays" value="wss://nos.lol, wss://relay.damus.io, wss://relay.nostr.band, wss://nostr.wine" />

    <!-- Show top notes with images, use a even value, zero to disable -->
    <meta name="top-notes" value="2" />

    <!-- Enable short notes with X minimum characters, zero to disable -->
    <meta name="short-chars" value="800" />

    <!-- Enable navigation by topics (tags), empty to disable -->
    <meta name="topics" value="coracle, privacy, nostr" />

    <!-- Enable comments, 'yes' to enable -->
    <meta name="comments" value="yes" />

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <script type="module" crossorigin>var dv=Object.defineProperty;var fv=(e,t,n)=>t in e?dv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ce=(e,t,n)=>(fv(e,typeof t!="symbol"?t+"":t,n),n);function hv(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const pv="modulepreload",gv=function(e,t){return new URL(e,t).href},Ch={},wv=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),f=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.all(n.map(d=>{if(d=gv(d,r),d in Ch)return;Ch[d]=!0;const h=d.endsWith(".css"),y=h?'[rel="stylesheet"]':"";if(!!r)for(let T=s.length-1;T>=0;T--){const C=s[T];if(C.href===d&&(!h||C.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${y}`))return;const _=document.createElement("link");if(_.rel=h?"stylesheet":pv,h||(_.as="script",_.crossOrigin=""),_.href=d,f&&_.setAttribute("nonce",f),document.head.appendChild(_),h)return new Promise((T,C)=>{_.addEventListener("load",T),_.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${d}`)))})}))}return o.then(()=>t()).catch(s=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s})};function Mt(){}function Rn(e,t){for(const n in t)e[n]=t[n];return e}function lg(e){return e()}function Lh(){return Object.create(null)}function gs(e){e.forEach(lg)}function dg(e){return typeof e=="function"}function cr(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let qs;function Fr(e,t){return e===t?!0:(qs||(qs=document.createElement("a")),qs.href=t,e===qs.href)}function bv(e){return Object.keys(e).length===0}function za(e,t,n,r){if(e){const o=fg(e,t,n,r);return e[0](o)}}function fg(e,t,n,r){return e[1]&&r?Rn(n.ctx.slice(),e[1](r(t))):n.ctx}function Ua(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const s=[],c=Math.max(t.dirty.length,o.length);for(let f=0;f<c;f+=1)s[f]=t.dirty[f]|o[f];return s}return t.dirty|o}return t.dirty}function Ma(e,t,n,r,o,s){if(o){const c=fg(t,n,r,s);e.p(c,o)}}function Ha(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Zl(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function pi(e,t){const n={};t=new Set(t);for(const r in e)!t.has(r)&&r[0]!=="$"&&(n[r]=e[r]);return n}function we(e,t){e.appendChild(t)}function Ue(e,t,n){e.insertBefore(t,n||null)}function Re(e){e.parentNode&&e.parentNode.removeChild(e)}function ja(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Pe(e){return document.createElement(e)}function Je(e){return document.createTextNode(e)}function Ye(){return Je(" ")}function Ro(){return Je("")}function Ee(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const mv=["width","height"];function gi(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)t[r]==null?e.removeAttribute(r):r==="style"?e.style.cssText=t[r]:r==="__value"?e.value=e[r]=t[r]:n[r]&&n[r].set&&mv.indexOf(r)===-1?e[r]=t[r]:Ee(e,r,t[r])}function Vs(e,t,n){const r=t.toLowerCase();r in e?e[r]=typeof e[r]=="boolean"&&n===""?!0:n:t in e?e[t]=typeof e[t]=="boolean"&&n===""?!0:n:Ee(e,t,n)}function yv(e){return Array.from(e.childNodes)}function At(e,t){t=""+t,e.data!==t&&(e.data=t)}function vv(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let ns;function Ji(e){ns=e}function Da(){if(!ns)throw new Error("Function called outside component initialization");return ns}function qa(e){Da().$$.on_mount.push(e)}function _v(e){Da().$$.after_update.push(e)}function Ev(e){Da().$$.on_destroy.push(e)}function kv(){const e=Da();return(t,n,{cancelable:r=!1}={})=>{const o=e.$$.callbacks[t];if(o){const s=vv(t,n,{cancelable:r});return o.slice().forEach(c=>{c.call(e,s)}),!s.defaultPrevented}return!0}}const Qo=[],tl=[];let ii=[];const Ih=[],Av=Promise.resolve();let nl=!1;function Sv(){nl||(nl=!0,Av.then(Ur))}function rl(e){ii.push(e)}const _u=new Set;let Wo=0;function Ur(){if(Wo!==0)return;const e=ns;do{try{for(;Wo<Qo.length;){const t=Qo[Wo];Wo++,Ji(t),$v(t.$$)}}catch(t){throw Qo.length=0,Wo=0,t}for(Ji(null),Qo.length=0,Wo=0;tl.length;)tl.pop()();for(let t=0;t<ii.length;t+=1){const n=ii[t];_u.has(n)||(_u.add(n),n())}ii.length=0}while(Qo.length);for(;Ih.length;)Ih.pop()();nl=!1,_u.clear(),Ji(e)}function $v(e){if(e.fragment!==null){e.update(),gs(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(rl)}}function xv(e){const t=[],n=[];ii.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),ii=t}const Xs=new Set;let So;function eo(){So={r:0,c:[],p:So}}function to(){So.r||gs(So.c),So=So.p}function Fe(e,t){e&&e.i&&(Xs.delete(e),e.i(t))}function Ge(e,t,n,r){if(e&&e.o){if(Xs.has(e))return;Xs.add(e),So.c.push(()=>{Xs.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Kr(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Yl(e,t){const n={},r={},o={$$scope:1};let s=e.length;for(;s--;){const c=e[s],f=t[s];if(f){for(const d in c)d in f||(r[d]=1);for(const d in f)o[d]||(n[d]=f[d],o[d]=1);e[s]=f}else for(const d in c)o[d]=1}for(const c in r)c in n||(n[c]=void 0);return n}function no(e){e&&e.c()}function ur(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),rl(()=>{const s=e.$$.on_mount.map(lg).filter(dg);e.$$.on_destroy?e.$$.on_destroy.push(...s):gs(s),e.$$.on_mount=[]}),o.forEach(rl)}function lr(e,t){const n=e.$$;n.fragment!==null&&(xv(n.after_update),gs(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Tv(e,t){e.$$.dirty[0]===-1&&(Qo.push(e),Sv(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function zo(e,t,n,r,o,s,c=null,f=[-1]){const d=ns;Ji(e);const h=e.$$={fragment:null,ctx:[],props:s,update:Mt,not_equal:o,bound:Lh(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:Lh(),dirty:f,skip_bound:!1,root:t.target||d.$$.root};c&&c(h.root);let y=!1;if(h.ctx=n?n(e,t.props||{},(b,_,...T)=>{const C=T.length?T[0]:_;return h.ctx&&o(h.ctx[b],h.ctx[b]=C)&&(!h.skip_bound&&h.bound[b]&&h.bound[b](C),y&&Tv(e,b)),_}):[],h.update(),y=!0,gs(h.before_update),h.fragment=r?r(h.ctx):!1,t.target){if(t.hydrate){const b=yv(t.target);h.fragment&&h.fragment.l(b),b.forEach(Re)}else h.fragment&&h.fragment.c();t.intro&&Fe(e.$$.fragment),ur(e,t.target,t.anchor),Ur()}Ji(d)}class Uo{constructor(){Ce(this,"$$");Ce(this,"$$set")}$destroy(){lr(this,1),this.$destroy=Mt}$on(t,n){if(!dg(n))return Mt;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!bv(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Pv="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pv);const Eu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jl=e=>e instanceof Uint8Array,ku=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),$n=(e,t)=>e<<32-t|e>>>t,Bv=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Bv)throw new Error("Non little-endian hardware is not supported");const Cv=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function wt(e){if(!Jl(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Cv[e[n]];return t}function Po(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,s=e.slice(o,o+2),c=Number.parseInt(s,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");n[r]=c}return n}function hg(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function rs(e){if(typeof e=="string"&&(e=hg(e)),!Jl(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function ca(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Jl(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let pg=class{clone(){return this._cloneInto()}};function gg(e){const t=r=>e().update(rs(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function wg(e=32){if(Eu&&typeof Eu.getRandomValues=="function")return Eu.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Pi(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function dr(...e){const t=(o,s)=>c=>o(s(c)),n=Array.from(e).reverse().reduce((o,s)=>o?t(o,s.encode):s.encode,void 0),r=e.reduce((o,s)=>o?t(o,s.decode):s.decode,void 0);return{encode:n,decode:r}}function fr(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(Pi(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function hr(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Va(e,t="="){if(Pi(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of n)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function bg(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function Oh(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],s=Array.from(e);for(s.forEach(c=>{if(Pi(c),c<0||c>=t)throw new Error(`Wrong integer: ${c}`)});;){let c=0,f=!0;for(let d=r;d<s.length;d++){const h=s[d],y=t*c+h;if(!Number.isSafeInteger(y)||t*c/t!==c||y-h!==t*c)throw new Error("convertRadix: carry overflow");if(c=y%n,s[d]=Math.floor(y/n),!Number.isSafeInteger(s[d])||s[d]*n+c!==y)throw new Error("convertRadix: carry overflow");if(f)s[d]?f=!1:r=d;else continue}if(o.push(c),f)break}for(let c=0;c<e.length-1&&e[c]===0;c++)o.push(0);return o.reverse()}const mg=(e,t)=>t?mg(t,e%t):e,ua=(e,t)=>e+(t-mg(e,t));function ol(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(ua(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${ua(t,n)}`);let o=0,s=0;const c=2**n-1,f=[];for(const d of e){if(Pi(d),d>=2**t)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);if(o=o<<t|d,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)f.push((o>>s-n&c)>>>0);o&=2**s-1}if(o=o<<n-s&c,!r&&s>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&s>0&&f.push(o>>>0),f}function Lv(e){return Pi(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Oh(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Oh(t,e,2**8))}}}function ro(e,t=!1){if(Pi(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(ua(8,e)>32||ua(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return ol(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(ol(n,e,8,t))}}}function Nh(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}const Iv=dr(ro(4),fr("0123456789ABCDEF"),hr("")),Ov=dr(ro(5),fr("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Va(5),hr(""));dr(ro(5),fr("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Va(5),hr(""));dr(ro(5),fr("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),hr(""),bg(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const or=dr(ro(6),fr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Va(6),hr("")),Nv=dr(ro(6),fr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Va(6),hr("")),Xl=e=>dr(Lv(58),fr(e),hr("")),il=Xl("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");Xl("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");Xl("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const Rh=[0,2,3,5,6,7,9,10,11],Rv={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=il.encode(r).padStart(Rh[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=Rh.indexOf(r.length),s=il.decode(r);for(let c=0;c<s.length-o;c++)if(s[c]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(t)}},sl=dr(fr("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),hr("")),zh=[996825010,642813549,513874426,1027748829,705979059];function qi(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<zh.length;r++)(t>>r&1)===1&&(n^=zh[r]);return n}function Uh(e,t,n=1){const r=e.length;let o=1;for(let s=0;s<r;s++){const c=e.charCodeAt(s);if(c<33||c>126)throw new Error(`Invalid prefix (${e})`);o=qi(o)^c>>5}o=qi(o);for(let s=0;s<r;s++)o=qi(o)^e.charCodeAt(s)&31;for(let s of t)o=qi(o)^s;for(let s=0;s<6;s++)o=qi(o);return o^=n,sl.encode(ol([o%2**30],30,5,!1))}function yg(e){const t=e==="bech32"?1:734539939,n=ro(5),r=n.decode,o=n.encode,s=Nh(r);function c(y,b,_=90){if(typeof y!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof y}`);if(!Array.isArray(b)||b.length&&typeof b[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof b}`);const T=y.length+7+b.length;if(_!==!1&&T>_)throw new TypeError(`Length ${T} exceeds limit ${_}`);return y=y.toLowerCase(),`${y}1${sl.encode(b)}${Uh(y,b,t)}`}function f(y,b=90){if(typeof y!="string")throw new Error(`bech32.decode input should be string, not ${typeof y}`);if(y.length<8||b!==!1&&y.length>b)throw new TypeError(`Wrong string length: ${y.length} (${y}). Expected (8..${b})`);const _=y.toLowerCase();if(y!==_&&y!==y.toUpperCase())throw new Error("String must be lowercase or uppercase");y=_;const T=y.lastIndexOf("1");if(T===0||T===-1)throw new Error('Letter "1" must be present between prefix and data only');const C=y.slice(0,T),A=y.slice(T+1);if(A.length<6)throw new Error("Data must be at least 6 characters long");const L=sl.decode(A).slice(0,-6),H=Uh(C,L,t);if(!A.endsWith(H))throw new Error(`Invalid checksum in ${y}: expected "${H}"`);return{prefix:C,words:L}}const d=Nh(f);function h(y){const{prefix:b,words:_}=f(y,!1);return{prefix:b,words:_,bytes:r(_)}}return{encode:c,decode:f,decodeToBytes:h,decodeUnsafe:d,fromWords:r,fromWordsUnsafe:s,toWords:o}}const Wr=yg("bech32");yg("bech32m");const zv={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},Uv=dr(ro(4),fr("0123456789abcdef"),hr(""),bg(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),Mv={utf8:zv,hex:Uv,base16:Iv,base32:Ov,base64:or,base64url:Nv,base58:il,base58xmr:Rv};`${Object.keys(Mv).join(", ")}`;new TextDecoder("utf-8");new TextEncoder;var Hv=5e3;function jv(e){return qv("note",Po(e))}function Dv(e,t){let n=Wr.toWords(t);return Wr.encode(e,n,Hv)}function qv(e,t){return Dv(e,t)}const Fa=()=>{var C,A;const e=document.querySelector('meta[name="author"]'),t=document.querySelector('meta[name="relays"]'),n=document.querySelector('meta[name="top-notes"]'),r=document.querySelector('meta[name="short-chars"]'),o=document.querySelector('meta[name="topics"]'),s=document.querySelector('meta[name="comments"]');if(!e||!t||!n||!r||!o||!s)throw new Error("Missing meta tags for configuration");const c=e.getAttribute("value"),f=(C=t.getAttribute("value"))==null?void 0:C.split(",").map(L=>L.trim()),d=n.getAttribute("value")||0;function h(L){if(L==null||L.trim()==="")return 0;{let H=parseFloat(L);return isNaN(H)?0:H}}const y=r.getAttribute("value"),b=h(y),_=(A=o.getAttribute("value"))==null?void 0:A.split(",").map(L=>L.trim()).filter(L=>L!==""),T=s.getAttribute("value")=="yes";return{npub:c,relays:f,topNotes:d,shortChars:b,topics:_,comments:T}},Go=[];function Vv(e,t=Mt){let n;const r=new Set;function o(f){if(cr(e,f)&&(e=f,n)){const d=!Go.length;for(const h of r)h[1](),Go.push(h,e);if(d){for(let h=0;h<Go.length;h+=2)Go[h][0](Go[h+1]);Go.length=0}}}function s(f){o(f(e))}function c(f,d=Mt){const h=[f,d];return r.add(h),r.size===1&&(n=t(o,s)||Mt),f(e),()=>{r.delete(h),r.size===0&&n&&(n(),n=null)}}return{set:o,update:s,subscribe:c}}function Mh(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function vg(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Fv(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Mh(e.outputLen),Mh(e.blockLen)}function la(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Kv(e,t){vg(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Au=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _g=e=>e instanceof Uint8Array,Su=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),xn=(e,t)=>e<<32-t|e>>>t,Wv=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Wv)throw new Error("Non little-endian hardware is not supported");function Gv(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ql(e){if(typeof e=="string"&&(e=Gv(e)),!_g(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Zv(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!_g(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}class Eg{clone(){return this._cloneInto()}}function Yv(e){const t=r=>e().update(Ql(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function kg(e=32){if(Au&&typeof Au.getRandomValues=="function")return Au.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Jv(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),c=Number(n>>o&s),f=Number(n&s),d=r?4:0,h=r?0:4;e.setUint32(t+d,c,r),e.setUint32(t+h,f,r)}let Xv=class extends Eg{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Su(this.buffer)}update(t){la(this);const{view:n,buffer:r,blockLen:o}=this;t=Ql(t);const s=t.length;for(let c=0;c<s;){const f=Math.min(o-this.pos,s-c);if(f===o){const d=Su(t);for(;o<=s-c;c+=o)this.process(d,c);continue}r.set(t.subarray(c,c+f),this.pos),this.pos+=f,c+=f,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){la(this),Kv(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>o-c&&(this.process(r,0),c=0);for(let b=c;b<o;b++)n[b]=0;Jv(r,o-8,BigInt(this.length*8),s),this.process(r,0);const f=Su(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=d/4,y=this.get();if(h>y.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<h;b++)f.setUint32(4*b,y[b],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:c,pos:f}=this;return t.length=o,t.pos=f,t.finished=s,t.destroyed=c,o%n&&t.buffer.set(r),t}};const Qv=(e,t,n)=>e&t^~e&n,e2=(e,t,n)=>e&t^e&n^t&n,t2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Br=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cr=new Uint32Array(64);let n2=class extends Xv{constructor(){super(64,32,8,!1),this.A=Br[0]|0,this.B=Br[1]|0,this.C=Br[2]|0,this.D=Br[3]|0,this.E=Br[4]|0,this.F=Br[5]|0,this.G=Br[6]|0,this.H=Br[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:c,G:f,H:d}=this;return[t,n,r,o,s,c,f,d]}set(t,n,r,o,s,c,f,d){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=c|0,this.G=f|0,this.H=d|0}process(t,n){for(let b=0;b<16;b++,n+=4)Cr[b]=t.getUint32(n,!1);for(let b=16;b<64;b++){const _=Cr[b-15],T=Cr[b-2],C=xn(_,7)^xn(_,18)^_>>>3,A=xn(T,17)^xn(T,19)^T>>>10;Cr[b]=A+Cr[b-7]+C+Cr[b-16]|0}let{A:r,B:o,C:s,D:c,E:f,F:d,G:h,H:y}=this;for(let b=0;b<64;b++){const _=xn(f,6)^xn(f,11)^xn(f,25),T=y+_+Qv(f,d,h)+t2[b]+Cr[b]|0,A=(xn(r,2)^xn(r,13)^xn(r,22))+e2(r,o,s)|0;y=h,h=d,d=f,f=c+T|0,c=s,s=o,o=r,r=T+A|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,c=c+this.D|0,f=f+this.E|0,d=d+this.F|0,h=h+this.G|0,y=y+this.H|0,this.set(r,o,s,c,f,d,h,y)}roundClean(){Cr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const al=Yv(()=>new n2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ag=BigInt(0),Ka=BigInt(1),r2=BigInt(2),Wa=e=>e instanceof Uint8Array,o2=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function wi(e){if(!Wa(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=o2[e[n]];return t}function Sg(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function ed(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function bi(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,s=e.slice(o,o+2),c=Number.parseInt(s,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");n[r]=c}return n}function Vt(e){return ed(wi(e))}function td(e){if(!Wa(e))throw new Error("Uint8Array expected");return ed(wi(Uint8Array.from(e).reverse()))}function Gr(e,t){return bi(e.toString(16).padStart(t*2,"0"))}function nd(e,t){return Gr(e,t).reverse()}function i2(e){return bi(Sg(e))}function Tt(e,t,n){let r;if(typeof t=="string")try{r=bi(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(Wa(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function Bo(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Wa(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function s2(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function a2(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function c2(e){let t;for(t=0;e>Ag;e>>=Ka,t+=1);return t}function u2(e,t){return e>>BigInt(t)&Ka}const l2=(e,t,n)=>e|(n?Ka:Ag)<<BigInt(t),rd=e=>(r2<<BigInt(e-1))-Ka,$u=e=>new Uint8Array(e),Hh=e=>Uint8Array.from(e);function $g(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=$u(e),o=$u(e),s=0;const c=()=>{r.fill(1),o.fill(0),s=0},f=(...b)=>n(o,r,...b),d=(b=$u())=>{o=f(Hh([0]),b),r=f(),b.length!==0&&(o=f(Hh([1]),b),r=f())},h=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const _=[];for(;b<t;){r=f();const T=r.slice();_.push(T),b+=r.length}return Bo(..._)};return(b,_)=>{c(),d(b);let T;for(;!(T=_(h()));)d();return c(),T}}const d2={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function ws(e,t,n={}){const r=(o,s,c)=>{const f=d2[s];if(typeof f!="function")throw new Error(`Invalid validator "${s}", expected function`);const d=e[o];if(!(c&&d===void 0)&&!f(d,e))throw new Error(`Invalid param ${String(o)}=${d} (${typeof d}), expected ${s}`)};for(const[o,s]of Object.entries(t))r(o,s,!1);for(const[o,s]of Object.entries(n))r(o,s,!0);return e}const f2=Object.freeze(Object.defineProperty({__proto__:null,bitGet:u2,bitLen:c2,bitMask:rd,bitSet:l2,bytesToHex:wi,bytesToNumberBE:Vt,bytesToNumberLE:td,concatBytes:Bo,createHmacDrbg:$g,ensureBytes:Tt,equalBytes:s2,hexToBytes:bi,hexToNumber:ed,numberToBytesBE:Gr,numberToBytesLE:nd,numberToHexUnpadded:Sg,numberToVarBytesBE:i2,utf8ToBytes:a2,validateObject:ws},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bt=BigInt(0),ot=BigInt(1),Eo=BigInt(2),h2=BigInt(3),cl=BigInt(4),jh=BigInt(5),Dh=BigInt(8);BigInt(9);BigInt(16);function Et(e,t){const n=e%t;return n>=bt?n:t+n}function p2(e,t,n){if(n<=bt||t<bt)throw new Error("Expected power/modulo > 0");if(n===ot)return bt;let r=ot;for(;t>bt;)t&ot&&(r=r*e%n),e=e*e%n,t>>=ot;return r}function tn(e,t,n){let r=e;for(;t-- >bt;)r*=r,r%=n;return r}function ul(e,t){if(e===bt||t<=bt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Et(e,t),r=t,o=bt,s=ot;for(;n!==bt;){const f=r/n,d=r%n,h=o-s*f;r=n,n=d,o=s,s=h}if(r!==ot)throw new Error("invert: does not exist");return Et(o,t)}function g2(e){const t=(e-ot)/Eo;let n,r,o;for(n=e-ot,r=0;n%Eo===bt;n/=Eo,r++);for(o=Eo;o<e&&p2(o,t,e)!==e-ot;o++);if(r===1){const c=(e+ot)/cl;return function(d,h){const y=d.pow(h,c);if(!d.eql(d.sqr(y),h))throw new Error("Cannot find square root");return y}}const s=(n+ot)/Eo;return function(f,d){if(f.pow(d,t)===f.neg(f.ONE))throw new Error("Cannot find square root");let h=r,y=f.pow(f.mul(f.ONE,o),n),b=f.pow(d,s),_=f.pow(d,n);for(;!f.eql(_,f.ONE);){if(f.eql(_,f.ZERO))return f.ZERO;let T=1;for(let A=f.sqr(_);T<h&&!f.eql(A,f.ONE);T++)A=f.sqr(A);const C=f.pow(y,ot<<BigInt(h-T-1));y=f.sqr(C),b=f.mul(b,C),_=f.mul(_,y),h=T}return b}}function w2(e){if(e%cl===h2){const t=(e+ot)/cl;return function(r,o){const s=r.pow(o,t);if(!r.eql(r.sqr(s),o))throw new Error("Cannot find square root");return s}}if(e%Dh===jh){const t=(e-jh)/Dh;return function(r,o){const s=r.mul(o,Eo),c=r.pow(s,t),f=r.mul(o,c),d=r.mul(r.mul(f,Eo),c),h=r.mul(f,r.sub(d,r.ONE));if(!r.eql(r.sqr(h),o))throw new Error("Cannot find square root");return h}}return g2(e)}const b2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function m2(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=b2.reduce((r,o)=>(r[o]="function",r),t);return ws(e,n)}function y2(e,t,n){if(n<bt)throw new Error("Expected power > 0");if(n===bt)return e.ONE;if(n===ot)return t;let r=e.ONE,o=t;for(;n>bt;)n&ot&&(r=e.mul(r,o)),o=e.sqr(o),n>>=ot;return r}function v2(e,t){const n=new Array(t.length),r=t.reduce((s,c,f)=>e.is0(c)?s:(n[f]=s,e.mul(s,c)),e.ONE),o=e.inv(r);return t.reduceRight((s,c,f)=>e.is0(c)?s:(n[f]=e.mul(s,n[f]),e.mul(s,c)),o),n}function xg(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function _2(e,t,n=!1,r={}){if(e<=bt)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:s}=xg(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=w2(e),f=Object.freeze({ORDER:e,BITS:o,BYTES:s,MASK:rd(o),ZERO:bt,ONE:ot,create:d=>Et(d,e),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return bt<=d&&d<e},is0:d=>d===bt,isOdd:d=>(d&ot)===ot,neg:d=>Et(-d,e),eql:(d,h)=>d===h,sqr:d=>Et(d*d,e),add:(d,h)=>Et(d+h,e),sub:(d,h)=>Et(d-h,e),mul:(d,h)=>Et(d*h,e),pow:(d,h)=>y2(f,d,h),div:(d,h)=>Et(d*ul(h,e),e),sqrN:d=>d*d,addN:(d,h)=>d+h,subN:(d,h)=>d-h,mulN:(d,h)=>d*h,inv:d=>ul(d,e),sqrt:r.sqrt||(d=>c(f,d)),invertBatch:d=>v2(f,d),cmov:(d,h,y)=>y?h:d,toBytes:d=>n?nd(d,s):Gr(d,s),fromBytes:d=>{if(d.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${d.length}`);return n?td(d):Vt(d)}});return Object.freeze(f)}function Tg(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Pg(e){const t=Tg(e);return t+Math.ceil(t/2)}function E2(e,t,n=!1){const r=e.length,o=Tg(t),s=Pg(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const c=n?Vt(e):td(e),f=Et(c,t-ot)+ot;return n?nd(f,o):Gr(f,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const k2=BigInt(0),xu=BigInt(1);function A2(e,t){const n=(o,s)=>{const c=s.negate();return o?c:s},r=o=>{const s=Math.ceil(t/o)+1,c=2**(o-1);return{windows:s,windowSize:c}};return{constTimeNegate:n,unsafeLadder(o,s){let c=e.ZERO,f=o;for(;s>k2;)s&xu&&(c=c.add(f)),f=f.double(),s>>=xu;return c},precomputeWindow(o,s){const{windows:c,windowSize:f}=r(s),d=[];let h=o,y=h;for(let b=0;b<c;b++){y=h,d.push(y);for(let _=1;_<f;_++)y=y.add(h),d.push(y);h=y.double()}return d},wNAF(o,s,c){const{windows:f,windowSize:d}=r(o);let h=e.ZERO,y=e.BASE;const b=BigInt(2**o-1),_=2**o,T=BigInt(o);for(let C=0;C<f;C++){const A=C*d;let L=Number(c&b);c>>=T,L>d&&(L-=_,c+=xu);const H=A,I=A+Math.abs(L)-1,N=C%2!==0,l=L<0;L===0?y=y.add(n(N,s[H])):h=h.add(n(l,s[I]))}return{p:h,f:y}},wNAFCached(o,s,c,f){const d=o._WINDOW_SIZE||1;let h=s.get(o);return h||(h=this.precomputeWindow(o,d),d!==1&&s.set(o,f(h))),this.wNAF(d,h,c)}}}function Bg(e){return m2(e.Fp),ws(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...xg(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function S2(e){const t=Bg(e);ws(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:$2,hexToBytes:x2}=f2,$o={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=$o;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:$2(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=$o,n=typeof e=="string"?x2(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:s}=$o._parseInt(n.subarray(2)),{d:c,l:f}=$o._parseInt(s);if(f.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:c}},hexFromSig(e){const t=h=>Number.parseInt(h[0],16)&8?"00"+h:h,n=h=>{const y=h.toString(16);return y.length&1?`0${y}`:y},r=t(n(e.s)),o=t(n(e.r)),s=r.length/2,c=o.length/2,f=n(s),d=n(c);return`30${n(c+s+4)}02${d}${o}02${f}${r}`}},Yn=BigInt(0),rn=BigInt(1);BigInt(2);const qh=BigInt(3);BigInt(4);function T2(e){const t=S2(e),{Fp:n}=t,r=t.toBytes||((C,A,L)=>{const H=A.toAffine();return Bo(Uint8Array.from([4]),n.toBytes(H.x),n.toBytes(H.y))}),o=t.fromBytes||(C=>{const A=C.subarray(1),L=n.fromBytes(A.subarray(0,n.BYTES)),H=n.fromBytes(A.subarray(n.BYTES,2*n.BYTES));return{x:L,y:H}});function s(C){const{a:A,b:L}=t,H=n.sqr(C),I=n.mul(H,C);return n.add(n.add(I,n.mul(C,A)),L)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function c(C){return typeof C=="bigint"&&Yn<C&&C<t.n}function f(C){if(!c(C))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(C){const{allowedPrivateKeyLengths:A,nByteLength:L,wrapPrivateKey:H,n:I}=t;if(A&&typeof C!="bigint"){if(C instanceof Uint8Array&&(C=wi(C)),typeof C!="string"||!A.includes(C.length))throw new Error("Invalid key");C=C.padStart(L*2,"0")}let N;try{N=typeof C=="bigint"?C:Vt(Tt("private key",C,L))}catch{throw new Error(`private key must be ${L} bytes, hex or bigint, not ${typeof C}`)}return H&&(N=Et(N,I)),f(N),N}const h=new Map;function y(C){if(!(C instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(A,L,H){if(this.px=A,this.py=L,this.pz=H,A==null||!n.isValid(A))throw new Error("x required");if(L==null||!n.isValid(L))throw new Error("y required");if(H==null||!n.isValid(H))throw new Error("z required")}static fromAffine(A){const{x:L,y:H}=A||{};if(!A||!n.isValid(L)||!n.isValid(H))throw new Error("invalid affine point");if(A instanceof b)throw new Error("projective point not allowed");const I=N=>n.eql(N,n.ZERO);return I(L)&&I(H)?b.ZERO:new b(L,H,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const L=n.invertBatch(A.map(H=>H.pz));return A.map((H,I)=>H.toAffine(L[I])).map(b.fromAffine)}static fromHex(A){const L=b.fromAffine(o(Tt("pointHex",A)));return L.assertValidity(),L}static fromPrivateKey(A){return b.BASE.multiply(d(A))}_setWindowSize(A){this._WINDOW_SIZE=A,h.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:A,y:L}=this.toAffine();if(!n.isValid(A)||!n.isValid(L))throw new Error("bad point: x or y not FE");const H=n.sqr(L),I=s(A);if(!n.eql(H,I))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:A}=this.toAffine();if(n.isOdd)return!n.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){y(A);const{px:L,py:H,pz:I}=this,{px:N,py:l,pz:w}=A,p=n.eql(n.mul(L,w),n.mul(N,I)),E=n.eql(n.mul(H,w),n.mul(l,I));return p&&E}negate(){return new b(this.px,n.neg(this.py),this.pz)}double(){const{a:A,b:L}=t,H=n.mul(L,qh),{px:I,py:N,pz:l}=this;let w=n.ZERO,p=n.ZERO,E=n.ZERO,$=n.mul(I,I),R=n.mul(N,N),P=n.mul(l,l),v=n.mul(I,N);return v=n.add(v,v),E=n.mul(I,l),E=n.add(E,E),w=n.mul(A,E),p=n.mul(H,P),p=n.add(w,p),w=n.sub(R,p),p=n.add(R,p),p=n.mul(w,p),w=n.mul(v,w),E=n.mul(H,E),P=n.mul(A,P),v=n.sub($,P),v=n.mul(A,v),v=n.add(v,E),E=n.add($,$),$=n.add(E,$),$=n.add($,P),$=n.mul($,v),p=n.add(p,$),P=n.mul(N,l),P=n.add(P,P),$=n.mul(P,v),w=n.sub(w,$),E=n.mul(P,R),E=n.add(E,E),E=n.add(E,E),new b(w,p,E)}add(A){y(A);const{px:L,py:H,pz:I}=this,{px:N,py:l,pz:w}=A;let p=n.ZERO,E=n.ZERO,$=n.ZERO;const R=t.a,P=n.mul(t.b,qh);let v=n.mul(L,N),x=n.mul(H,l),z=n.mul(I,w),V=n.add(L,H),O=n.add(N,l);V=n.mul(V,O),O=n.add(v,x),V=n.sub(V,O),O=n.add(L,I);let S=n.add(N,w);return O=n.mul(O,S),S=n.add(v,z),O=n.sub(O,S),S=n.add(H,I),p=n.add(l,w),S=n.mul(S,p),p=n.add(x,z),S=n.sub(S,p),$=n.mul(R,O),p=n.mul(P,z),$=n.add(p,$),p=n.sub(x,$),$=n.add(x,$),E=n.mul(p,$),x=n.add(v,v),x=n.add(x,v),z=n.mul(R,z),O=n.mul(P,O),x=n.add(x,z),z=n.sub(v,z),z=n.mul(R,z),O=n.add(O,z),v=n.mul(x,O),E=n.add(E,v),v=n.mul(S,O),p=n.mul(V,p),p=n.sub(p,v),v=n.mul(V,x),$=n.mul(S,$),$=n.add($,v),new b(p,E,$)}subtract(A){return this.add(A.negate())}is0(){return this.equals(b.ZERO)}wNAF(A){return T.wNAFCached(this,h,A,L=>{const H=n.invertBatch(L.map(I=>I.pz));return L.map((I,N)=>I.toAffine(H[N])).map(b.fromAffine)})}multiplyUnsafe(A){const L=b.ZERO;if(A===Yn)return L;if(f(A),A===rn)return this;const{endo:H}=t;if(!H)return T.unsafeLadder(this,A);let{k1neg:I,k1:N,k2neg:l,k2:w}=H.splitScalar(A),p=L,E=L,$=this;for(;N>Yn||w>Yn;)N&rn&&(p=p.add($)),w&rn&&(E=E.add($)),$=$.double(),N>>=rn,w>>=rn;return I&&(p=p.negate()),l&&(E=E.negate()),E=new b(n.mul(E.px,H.beta),E.py,E.pz),p.add(E)}multiply(A){f(A);let L=A,H,I;const{endo:N}=t;if(N){const{k1neg:l,k1:w,k2neg:p,k2:E}=N.splitScalar(L);let{p:$,f:R}=this.wNAF(w),{p:P,f:v}=this.wNAF(E);$=T.constTimeNegate(l,$),P=T.constTimeNegate(p,P),P=new b(n.mul(P.px,N.beta),P.py,P.pz),H=$.add(P),I=R.add(v)}else{const{p:l,f:w}=this.wNAF(L);H=l,I=w}return b.normalizeZ([H,I])[0]}multiplyAndAddUnsafe(A,L,H){const I=b.BASE,N=(w,p)=>p===Yn||p===rn||!w.equals(I)?w.multiplyUnsafe(p):w.multiply(p),l=N(this,L).add(N(A,H));return l.is0()?void 0:l}toAffine(A){const{px:L,py:H,pz:I}=this,N=this.is0();A==null&&(A=N?n.ONE:n.inv(I));const l=n.mul(L,A),w=n.mul(H,A),p=n.mul(I,A);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(p,n.ONE))throw new Error("invZ was invalid");return{x:l,y:w}}isTorsionFree(){const{h:A,isTorsionFree:L}=t;if(A===rn)return!0;if(L)return L(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:L}=t;return A===rn?this:L?L(b,this):this.multiplyUnsafe(t.h)}toRawBytes(A=!0){return this.assertValidity(),r(b,this,A)}toHex(A=!0){return wi(this.toRawBytes(A))}}b.BASE=new b(t.Gx,t.Gy,n.ONE),b.ZERO=new b(n.ZERO,n.ONE,n.ZERO);const _=t.nBitLength,T=A2(b,t.endo?Math.ceil(_/2):_);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:d,weierstrassEquation:s,isWithinCurveOrder:c}}function P2(e){const t=Bg(e);return ws(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function B2(e){const t=P2(e),{Fp:n,n:r}=t,o=n.BYTES+1,s=2*n.BYTES+1;function c(O){return Yn<O&&O<n.ORDER}function f(O){return Et(O,r)}function d(O){return ul(O,r)}const{ProjectivePoint:h,normPrivateKeyToScalar:y,weierstrassEquation:b,isWithinCurveOrder:_}=T2({...t,toBytes(O,S,D){const K=S.toAffine(),W=n.toBytes(K.x),Z=Bo;return D?Z(Uint8Array.from([S.hasEvenY()?2:3]),W):Z(Uint8Array.from([4]),W,n.toBytes(K.y))},fromBytes(O){const S=O.length,D=O[0],K=O.subarray(1);if(S===o&&(D===2||D===3)){const W=Vt(K);if(!c(W))throw new Error("Point is not on curve");const Z=b(W);let G=n.sqrt(Z);const oe=(G&rn)===rn;return(D&1)===1!==oe&&(G=n.neg(G)),{x:W,y:G}}else if(S===s&&D===4){const W=n.fromBytes(K.subarray(0,n.BYTES)),Z=n.fromBytes(K.subarray(n.BYTES,2*n.BYTES));return{x:W,y:Z}}else throw new Error(`Point of length ${S} was invalid. Expected ${o} compressed bytes or ${s} uncompressed bytes`)}}),T=O=>wi(Gr(O,t.nByteLength));function C(O){const S=r>>rn;return O>S}function A(O){return C(O)?f(-O):O}const L=(O,S,D)=>Vt(O.slice(S,D));class H{constructor(S,D,K){this.r=S,this.s=D,this.recovery=K,this.assertValidity()}static fromCompact(S){const D=t.nByteLength;return S=Tt("compactSignature",S,D*2),new H(L(S,0,D),L(S,D,2*D))}static fromDER(S){const{r:D,s:K}=$o.toSig(Tt("DER",S));return new H(D,K)}assertValidity(){if(!_(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!_(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new H(this.r,this.s,S)}recoverPublicKey(S){const{r:D,s:K,recovery:W}=this,Z=E(Tt("msgHash",S));if(W==null||![0,1,2,3].includes(W))throw new Error("recovery id invalid");const G=W===2||W===3?D+t.n:D;if(G>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const oe=W&1?"03":"02",he=h.fromHex(oe+T(G)),me=d(G),Ae=f(-Z*me),re=f(K*me),ye=h.BASE.multiplyAndAddUnsafe(he,Ae,re);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return C(this.s)}normalizeS(){return this.hasHighS()?new H(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return bi(this.toDERHex())}toDERHex(){return $o.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return bi(this.toCompactHex())}toCompactHex(){return T(this.r)+T(this.s)}}const I={isValidPrivateKey(O){try{return y(O),!0}catch{return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const O=Pg(t.n);return E2(t.randomBytes(O),t.n)},precompute(O=8,S=h.BASE){return S._setWindowSize(O),S.multiply(BigInt(3)),S}};function N(O,S=!0){return h.fromPrivateKey(O).toRawBytes(S)}function l(O){const S=O instanceof Uint8Array,D=typeof O=="string",K=(S||D)&&O.length;return S?K===o||K===s:D?K===2*o||K===2*s:O instanceof h}function w(O,S,D=!0){if(l(O))throw new Error("first arg must be private key");if(!l(S))throw new Error("second arg must be public key");return h.fromHex(S).multiply(y(O)).toRawBytes(D)}const p=t.bits2int||function(O){const S=Vt(O),D=O.length*8-t.nBitLength;return D>0?S>>BigInt(D):S},E=t.bits2int_modN||function(O){return f(p(O))},$=rd(t.nBitLength);function R(O){if(typeof O!="bigint")throw new Error("bigint expected");if(!(Yn<=O&&O<$))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Gr(O,t.nByteLength)}function P(O,S,D=v){if(["recovered","canonical"].some(Ie=>Ie in D))throw new Error("sign() legacy options not supported");const{hash:K,randomBytes:W}=t;let{lowS:Z,prehash:G,extraEntropy:oe}=D;Z==null&&(Z=!0),O=Tt("msgHash",O),G&&(O=Tt("prehashed msgHash",K(O)));const he=E(O),me=y(S),Ae=[R(me),R(he)];if(oe!=null){const Ie=oe===!0?W(n.BYTES):oe;Ae.push(Tt("extraEntropy",Ie))}const re=Bo(...Ae),ye=he;function Le(Ie){const Me=p(Ie);if(!_(Me))return;const pt=d(Me),Ke=h.BASE.multiply(Me).toAffine(),se=f(Ke.x);if(se===Yn)return;const Oe=f(pt*f(ye+se*me));if(Oe===Yn)return;let xe=(Ke.x===se?0:2)|Number(Ke.y&rn),Te=Oe;return Z&&C(Oe)&&(Te=A(Oe),xe^=1),new H(se,Te,xe)}return{seed:re,k2sig:Le}}const v={lowS:t.lowS,prehash:!1},x={lowS:t.lowS,prehash:!1};function z(O,S,D=v){const{seed:K,k2sig:W}=P(O,S,D),Z=t;return $g(Z.hash.outputLen,Z.nByteLength,Z.hmac)(K,W)}h.BASE._setWindowSize(8);function V(O,S,D,K=x){var Ke;const W=O;if(S=Tt("msgHash",S),D=Tt("publicKey",D),"strict"in K)throw new Error("options.strict was renamed to lowS");const{lowS:Z,prehash:G}=K;let oe,he;try{if(typeof W=="string"||W instanceof Uint8Array)try{oe=H.fromDER(W)}catch(se){if(!(se instanceof $o.Err))throw se;oe=H.fromCompact(W)}else if(typeof W=="object"&&typeof W.r=="bigint"&&typeof W.s=="bigint"){const{r:se,s:Oe}=W;oe=new H(se,Oe)}else throw new Error("PARSE");he=h.fromHex(D)}catch(se){if(se.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Z&&oe.hasHighS())return!1;G&&(S=t.hash(S));const{r:me,s:Ae}=oe,re=E(S),ye=d(Ae),Le=f(re*ye),Ie=f(me*ye),Me=(Ke=h.BASE.multiplyAndAddUnsafe(he,Le,Ie))==null?void 0:Ke.toAffine();return Me?f(Me.x)===me:!1}return{CURVE:t,getPublicKey:N,getSharedSecret:w,sign:z,verify:V,ProjectivePoint:h,Signature:H,utils:I}}let Cg=class extends Eg{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Fv(t);const r=Ql(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?t.create().update(r).digest():r);for(let c=0;c<s.length;c++)s[c]^=54;this.iHash.update(s),this.oHash=t.create();for(let c=0;c<s.length;c++)s[c]^=106;this.oHash.update(s),s.fill(0)}update(t){return la(this),this.iHash.update(t),this}digestInto(t){la(this),vg(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:s,blockLen:c,outputLen:f}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=c,t.outputLen=f,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Lg=(e,t,n)=>new Cg(e,t).update(n).digest();Lg.create=(e,t)=>new Cg(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function C2(e){return{hash:e,hmac:(t,...n)=>Lg(e,t,Zv(...n)),randomBytes:kg}}function L2(e,t){const n=r=>B2({...e,...C2(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ga=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),da=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ig=BigInt(1),fa=BigInt(2),Vh=(e,t)=>(e+t/fa)/t;function Og(e){const t=Ga,n=BigInt(3),r=BigInt(6),o=BigInt(11),s=BigInt(22),c=BigInt(23),f=BigInt(44),d=BigInt(88),h=e*e*e%t,y=h*h*e%t,b=tn(y,n,t)*y%t,_=tn(b,n,t)*y%t,T=tn(_,fa,t)*h%t,C=tn(T,o,t)*T%t,A=tn(C,s,t)*C%t,L=tn(A,f,t)*A%t,H=tn(L,d,t)*L%t,I=tn(H,f,t)*A%t,N=tn(I,n,t)*y%t,l=tn(N,c,t)*C%t,w=tn(l,r,t)*h%t,p=tn(w,fa,t);if(!ll.eql(ll.sqr(p),e))throw new Error("Cannot find square root");return p}const ll=_2(Ga,void 0,void 0,{sqrt:Og}),Bi=L2({a:BigInt(0),b:BigInt(7),Fp:ll,n:da,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=da,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ig*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,c=BigInt("0x100000000000000000000000000000000"),f=Vh(s*e,t),d=Vh(-r*e,t);let h=Et(e-f*n-d*o,t),y=Et(-f*r-d*s,t);const b=h>c,_=y>c;if(b&&(h=t-h),_&&(y=t-y),h>c||y>c)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:b,k1:h,k2neg:_,k2:y}}}},al),Za=BigInt(0),Ng=e=>typeof e=="bigint"&&Za<e&&e<Ga,I2=e=>typeof e=="bigint"&&Za<e&&e<da,Fh={};function ha(e,...t){let n=Fh[e];if(n===void 0){const r=al(Uint8Array.from(e,o=>o.charCodeAt(0)));n=Bo(r,r),Fh[e]=n}return al(Bo(n,...t))}const od=e=>e.toRawBytes(!0).slice(1),dl=e=>Gr(e,32),Tu=e=>Et(e,Ga),os=e=>Et(e,da),id=Bi.ProjectivePoint,O2=(e,t,n)=>id.BASE.multiplyAndAddUnsafe(e,t,n);function fl(e){let t=Bi.utils.normPrivateKeyToScalar(e),n=id.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:os(-t),bytes:od(n)}}function Rg(e){if(!Ng(e))throw new Error("bad x: need 0 < x < p");const t=Tu(e*e),n=Tu(t*e+BigInt(7));let r=Og(n);r%fa!==Za&&(r=Tu(-r));const o=new id(e,r,Ig);return o.assertValidity(),o}function zg(...e){return os(Vt(ha("BIP0340/challenge",...e)))}function N2(e){return fl(e).bytes}function R2(e,t,n=kg(32)){const r=Tt("message",e),{bytes:o,scalar:s}=fl(t),c=Tt("auxRand",n,32),f=dl(s^Vt(ha("BIP0340/aux",c))),d=ha("BIP0340/nonce",f,o,r),h=os(Vt(d));if(h===Za)throw new Error("sign failed: k is zero");const{bytes:y,scalar:b}=fl(h),_=zg(y,o,r),T=new Uint8Array(64);if(T.set(y,0),T.set(dl(os(b+_*s)),32),!Ug(T,r,o))throw new Error("sign: Invalid signature produced");return T}function Ug(e,t,n){const r=Tt("signature",e,64),o=Tt("message",t),s=Tt("publicKey",n,32);try{const c=Rg(Vt(s)),f=Vt(r.subarray(0,32));if(!Ng(f))return!1;const d=Vt(r.subarray(32,64));if(!I2(d))return!1;const h=zg(dl(f),od(c),o),y=O2(c,d,os(-h));return!(!y||!y.hasEvenY()||y.toAffine().x!==f)}catch{return!1}}const Ln={getPublicKey:N2,sign:R2,verify:Ug,utils:{randomPrivateKey:Bi.utils.randomPrivateKey,lift_x:Rg,pointToBytes:od,numberToBytesBE:Gr,bytesToNumberBE:Vt,taggedHash:ha,mod:Et}};function hl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function z2(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Mg(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function U2(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");hl(e.outputLen),hl(e.blockLen)}function M2(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function H2(e,t){Mg(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const In={number:hl,bool:z2,bytes:Mg,hash:U2,exists:M2,output:H2};function j2(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),c=Number(n>>o&s),f=Number(n&s),d=r?4:0,h=r?0:4;e.setUint32(t+d,c,r),e.setUint32(t+h,f,r)}class D2 extends pg{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ku(this.buffer)}update(t){In.exists(this);const{view:n,buffer:r,blockLen:o}=this;t=rs(t);const s=t.length;for(let c=0;c<s;){const f=Math.min(o-this.pos,s-c);if(f===o){const d=ku(t);for(;o<=s-c;c+=o)this.process(d,c);continue}r.set(t.subarray(c,c+f),this.pos),this.pos+=f,c+=f,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){In.exists(this),In.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>o-c&&(this.process(r,0),c=0);for(let b=c;b<o;b++)n[b]=0;j2(r,o-8,BigInt(this.length*8),s),this.process(r,0);const f=ku(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=d/4,y=this.get();if(h>y.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<h;b++)f.setUint32(4*b,y[b],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:c,pos:f}=this;return t.length=o,t.pos=f,t.finished=s,t.destroyed=c,o%n&&t.buffer.set(r),t}}const q2=(e,t,n)=>e&t^~e&n,V2=(e,t,n)=>e&t^e&n^t&n,F2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ir=new Uint32Array(64);class Hg extends D2{constructor(){super(64,32,8,!1),this.A=Lr[0]|0,this.B=Lr[1]|0,this.C=Lr[2]|0,this.D=Lr[3]|0,this.E=Lr[4]|0,this.F=Lr[5]|0,this.G=Lr[6]|0,this.H=Lr[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:c,G:f,H:d}=this;return[t,n,r,o,s,c,f,d]}set(t,n,r,o,s,c,f,d){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=c|0,this.G=f|0,this.H=d|0}process(t,n){for(let b=0;b<16;b++,n+=4)Ir[b]=t.getUint32(n,!1);for(let b=16;b<64;b++){const _=Ir[b-15],T=Ir[b-2],C=$n(_,7)^$n(_,18)^_>>>3,A=$n(T,17)^$n(T,19)^T>>>10;Ir[b]=A+Ir[b-7]+C+Ir[b-16]|0}let{A:r,B:o,C:s,D:c,E:f,F:d,G:h,H:y}=this;for(let b=0;b<64;b++){const _=$n(f,6)^$n(f,11)^$n(f,25),T=y+_+q2(f,d,h)+F2[b]+Ir[b]|0,A=($n(r,2)^$n(r,13)^$n(r,22))+V2(r,o,s)|0;y=h,h=d,d=f,f=c+T|0,c=s,s=o,o=r,r=T+A|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,c=c+this.D|0,f=f+this.E|0,d=d+this.F|0,h=h+this.G|0,y=y+this.H|0,this.set(r,o,s,c,f,d,h,y)}roundClean(){Ir.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let K2=class extends Hg{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const si=gg(()=>new Hg);gg(()=>new K2);var vo=Symbol("verified"),W2=e=>e instanceof Object;function G2(e){if(!W2(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var Z2=new TextEncoder;function Wi(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var Y2=class{constructor(t){Ce(this,"value");Ce(this,"next",null);Ce(this,"prev",null);this.value=t}},J2=class{constructor(){Ce(this,"first");Ce(this,"last");this.first=null,this.last=null}enqueue(t){const n=new Y2(t);return this.last?this.last===this.first?(this.last=n,this.last.prev=this.first,this.first.next=n):(n.prev=this.last,this.last.next=n,this.last=n):(this.first=n,this.last=n),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const n=this.first;return this.first=null,this.last=null,n.value}const t=this.first;return this.first=t.next,t.value}},X2=class{generateSecretKey(){return Ln.utils.randomPrivateKey()}getPublicKey(t){return wt(Ln.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=wt(Ln.getPublicKey(n)),r.id=Pu(r),r.sig=wt(Ln.sign(Pu(r),n)),r[vo]=!0,r}verifyEvent(t){if(typeof t[vo]=="boolean")return t[vo];const n=Pu(t);if(n!==t.id)return t[vo]=!1,!1;try{const r=Ln.verify(t.sig,n,t.pubkey);return t[vo]=r,r}catch{return t[vo]=!1,!1}}};function Q2(e){if(!G2(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Pu(e){let t=si(Z2.encode(Q2(e)));return wt(t)}var Ya=new X2;Ya.generateSecretKey;Ya.getPublicKey;Ya.finalizeEvent;var e3=Ya.verifyEvent,t3=22242;function n3(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(n=>t.id.startsWith(n))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(n=>t.pubkey.startsWith(n)))return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([s,c])=>s===n.slice(1)&&o.indexOf(c)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function r3(e,t){for(let n=0;n<e.length;n++)if(n3(e[n],t))return!0;return!1}function o3(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function i3(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let s=r+1+o;return e.slice(r+1,s)}function s3(e,t){return{kind:t3,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function a3(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var c3=e=>(e[vo]=!0,!0),jg;try{jg=WebSocket}catch{}var Dg=class{constructor(e,t){Ce(this,"url");Ce(this,"_connected",!1);Ce(this,"onclose",null);Ce(this,"onnotice",e=>console.debug(`NOTICE from ${this.url}: ${e}`));Ce(this,"_onauth",null);Ce(this,"baseEoseTimeout",4400);Ce(this,"connectionTimeout",4400);Ce(this,"openSubs",new Map);Ce(this,"connectionTimeoutHandle");Ce(this,"connectionPromise");Ce(this,"openCountRequests",new Map);Ce(this,"openEventPublishes",new Map);Ce(this,"ws");Ce(this,"incomingMessageQueue",new J2);Ce(this,"queueRunning",!1);Ce(this,"challenge");Ce(this,"serial",0);Ce(this,"verifyEvent");this.url=Wi(e),this.verifyEvent=t.verifyEvent}static async connect(e,t){const n=new Dg(e,t);return await n.connect(),n}closeAllSubscriptions(e){for(let[t,n]of this.openSubs)n.close(e);this.openSubs.clear();for(let[t,n]of this.openEventPublishes)n.reject(new Error(e));this.openEventPublishes.clear();for(let[t,n]of this.openCountRequests)n.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;t("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new jg(this.url)}catch(n){t(n);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=n=>{var r;t(n.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var n;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await a3();this.queueRunning=!1}handleNext(){var n,r,o;const e=this.incomingMessageQueue.dequeue();if(!e)return!1;const t=i3(e);if(t){const s=this.openSubs.get(t);if(!s)return;const c=o3(e,"id"),f=(n=s.alreadyHaveEvent)==null?void 0:n.call(s,c);if((r=s.receivedEvent)==null||r.call(s,this,c),f)return}try{let s=JSON.parse(e);switch(s[0]){case"EVENT":{const c=this.openSubs.get(s[1]),f=s[2];this.verifyEvent(f)&&r3(c.filters,f)&&c.onevent(f);return}case"COUNT":{const c=s[1],f=s[2],d=this.openCountRequests.get(c);d&&(d.resolve(f.count),this.openCountRequests.delete(c));return}case"EOSE":{const c=this.openSubs.get(s[1]);if(!c)return;c.receivedEose();return}case"OK":{const c=s[1],f=s[2],d=s[3],h=this.openEventPublishes.get(c);f?h.resolve(d):h.reject(new Error(d)),this.openEventPublishes.delete(c);return}case"CLOSED":{const c=s[1],f=this.openSubs.get(c);if(!f)return;f.closed=!0,f.close(s[2]);return}case"NOTICE":this.onnotice(s[1]);return;case"AUTH":{this.challenge=s[1],(o=this._onauth)==null||o.call(this,s[1]);return}}}catch{return}}async send(e){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var t;(t=this.ws)==null||t.send(e)})}async auth(e){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const t=await e(s3(this.url,this.challenge)),n=new Promise((r,o)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:o})});return this.send('["AUTH",'+JSON.stringify(t)+"]"),n}async publish(e){const t=new Promise((n,r)=>{this.openEventPublishes.set(e.id,{resolve:n,reject:r})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;const n=(t==null?void 0:t.id)||"count:"+this.serial,r=new Promise((o,s)=>{this.openCountRequests.set(n,{resolve:o,reject:s})});return this.send('["COUNT","'+n+'",'+JSON.stringify(e).substring(1)),r}subscribe(e,t){const n=this.prepareSubscription(e,t);return n.fire(),n}prepareSubscription(e,t){this.serial++;const n=t.id||"sub:"+this.serial,r=new u3(this,n,e,t);return this.openSubs.set(n,r),r}close(){var e;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(e=this.ws)==null||e.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},u3=class{constructor(e,t,n,r){Ce(this,"relay");Ce(this,"id");Ce(this,"closed",!1);Ce(this,"eosed",!1);Ce(this,"filters");Ce(this,"alreadyHaveEvent");Ce(this,"receivedEvent");Ce(this,"onevent");Ce(this,"oneose");Ce(this,"onclose");Ce(this,"eoseTimeout");Ce(this,"eoseTimeoutHandle");this.relay=e,this.filters=n,this.id=t,this.alreadyHaveEvent=r.alreadyHaveEvent,this.receivedEvent=r.receivedEvent,this.eoseTimeout=r.eoseTimeout||e.baseEoseTimeout,this.oneose=r.oneose,this.onclose=r.onclose,this.onevent=r.onevent||(o=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,o)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var e;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(e=this.oneose)==null||e.call(this))}close(e="closed by caller"){var t;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(t=this.onclose)==null||t.call(this,e)}},l3=class{constructor(t){Ce(this,"relays",new Map);Ce(this,"seenOn",new Map);Ce(this,"trackRelays",!1);Ce(this,"verifyEvent");Ce(this,"trustedRelayURLs",new Set);this.verifyEvent=t.verifyEvent}async ensureRelay(t,n){t=Wi(t);let r=this.relays.get(t);return r||(r=new Dg(t,{verifyEvent:this.trustedRelayURLs.has(t)?c3:this.verifyEvent}),n!=null&&n.connectionTimeout&&(r.connectionTimeout=n.connectionTimeout),this.relays.set(t,r)),await r.connect(),r}close(t){t.map(Wi).forEach(n=>{var r;(r=this.relays.get(n))==null||r.close()})}subscribeMany(t,n,r){return this.subscribeManyMap(Object.fromEntries(t.map(o=>[o,n])),r)}subscribeManyMap(t,n){this.trackRelays&&(n.receivedEvent=(_,T)=>{let C=this.seenOn.get(T);C||(C=new Set,this.seenOn.set(T,C)),C.add(_)});const r=new Set,o=[],s=Object.keys(t).length,c=[];let f=_=>{var T;c[_]=!0,c.filter(C=>C).length===s&&((T=n.oneose)==null||T.call(n),f=()=>{})};const d=[];let h=(_,T)=>{var C;f(_),d[_]=T,d.filter(A=>A).length===s&&((C=n.onclose)==null||C.call(n,d),h=()=>{})};const y=_=>{var C;if((C=n.alreadyHaveEvent)!=null&&C.call(n,_))return!0;const T=r.has(_);return r.add(_),T},b=Promise.all(Object.entries(t).map(async(_,T,C)=>{if(C.indexOf(_)!==T){h(T,"duplicate url");return}let[A,L]=_;A=Wi(A);let H;try{H=await this.ensureRelay(A,{connectionTimeout:n.maxWait?Math.max(n.maxWait*.8,n.maxWait-1e3):void 0})}catch(N){h(T,(N==null?void 0:N.message)||String(N));return}let I=H.subscribe(L,{...n,oneose:()=>f(T),onclose:N=>h(T,N),alreadyHaveEvent:y,eoseTimeout:n.maxWait});o.push(I)}));return{async close(){await b,o.forEach(_=>{_.close()})}}}subscribeManyEose(t,n,r){const o=this.subscribeMany(t,n,{...r,oneose(){o.close()}});return o}async querySync(t,n,r){return new Promise(async o=>{const s=[];this.subscribeManyEose(t,[n],{...r,onevent(c){s.push(c)},onclose(c){o(s)}})})}async get(t,n,r){n.limit=1;const o=await this.querySync(t,n,r);return o.sort((s,c)=>c.created_at-s.created_at),o[0]||null}publish(t,n){return t.map(Wi).map(async(r,o,s)=>s.indexOf(r)!==o?Promise.reject("duplicate url"):(await this.ensureRelay(r)).publish(n))}},d3=class extends l3{constructor(){super({verifyEvent:e3})}};const pa=new d3;function Bu(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Kh(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function f3(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Qn(e,...t){if(!f3(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const Bt=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),h3=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!h3)throw new Error("Non little-endian hardware is not supported");function p3(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function g3(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const w3=(e,t)=>(Object.assign(t,e),t),qr=16,b3=283;function sd(e){return e<<1^b3&-(e>>7)}function ri(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(t&1),e=sd(e);return n}const pl=(()=>{let e=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=sd(r))e[n]=r;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=(r^r>>4^r>>5^r>>6^r>>7^99)&255}return t})(),m3=pl.map((e,t)=>pl.indexOf(t)),y3=e=>e<<24|e>>>8,Cu=e=>e<<8|e>>>24;function qg(e,t){if(e.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((h,y)=>t(e[y])),r=n.map(Cu),o=r.map(Cu),s=o.map(Cu),c=new Uint32Array(256*256),f=new Uint32Array(256*256),d=new Uint16Array(256*256);for(let h=0;h<256;h++)for(let y=0;y<256;y++){const b=h*256+y;c[b]=n[h]^r[y],f[b]=o[h]^s[y],d[b]=e[h]<<8|e[y]}return{sbox:e,sbox2:d,T0:n,T1:r,T2:o,T3:s,T01:c,T23:f}}const ad=qg(pl,e=>ri(e,3)<<24|e<<16|e<<8|ri(e,2)),Vg=qg(m3,e=>ri(e,11)<<24|ri(e,13)<<16|ri(e,9)<<8|ri(e,14)),v3=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=sd(n))e[t]=n;return e})();function Fg(e){Qn(e);const t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:n}=ad,r=Bt(e),o=r.length,s=f=>On(n,f,f,f,f),c=new Uint32Array(t+28);c.set(r);for(let f=o;f<c.length;f++){let d=c[f-1];f%o===0?d=s(y3(d))^v3[f/o-1]:o>6&&f%o===4&&(d=s(d)),c[f]=c[f-o]^d}return c}function _3(e){const t=Fg(e),n=t.slice(),r=t.length,{sbox2:o}=ad,{T0:s,T1:c,T2:f,T3:d}=Vg;for(let h=0;h<r;h+=4)for(let y=0;y<4;y++)n[h+y]=t[r-h-4+y];t.fill(0);for(let h=4;h<r-4;h++){const y=n[h],b=On(o,y,y,y,y);n[h]=s[b&255]^c[b>>>8&255]^f[b>>>16&255]^d[b>>>24]}return n}function jr(e,t,n,r,o,s){return e[n<<8&65280|r>>>8&255]^t[o>>>8&65280|s>>>24&255]}function On(e,t,n,r,o){return e[t&255|n&65280]|e[r>>>16&255|o>>>16&65280]<<16}function Wh(e,t,n,r,o){const{sbox2:s,T01:c,T23:f}=ad;let d=0;t^=e[d++],n^=e[d++],r^=e[d++],o^=e[d++];const h=e.length/4-2;for(let C=0;C<h;C++){const A=e[d++]^jr(c,f,t,n,r,o),L=e[d++]^jr(c,f,n,r,o,t),H=e[d++]^jr(c,f,r,o,t,n),I=e[d++]^jr(c,f,o,t,n,r);t=A,n=L,r=H,o=I}const y=e[d++]^On(s,t,n,r,o),b=e[d++]^On(s,n,r,o,t),_=e[d++]^On(s,r,o,t,n),T=e[d++]^On(s,o,t,n,r);return{s0:y,s1:b,s2:_,s3:T}}function E3(e,t,n,r,o){const{sbox2:s,T01:c,T23:f}=Vg;let d=0;t^=e[d++],n^=e[d++],r^=e[d++],o^=e[d++];const h=e.length/4-2;for(let C=0;C<h;C++){const A=e[d++]^jr(c,f,t,o,r,n),L=e[d++]^jr(c,f,n,t,o,r),H=e[d++]^jr(c,f,r,n,t,o),I=e[d++]^jr(c,f,o,r,n,t);t=A,n=L,r=H,o=I}const y=e[d++]^On(s,t,o,r,n),b=e[d++]^On(s,n,t,o,r),_=e[d++]^On(s,r,n,t,o),T=e[d++]^On(s,o,r,n,t);return{s0:y,s1:b,s2:_,s3:T}}function Kg(e,t){if(!t)return new Uint8Array(e);if(Qn(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function k3(e){if(Qn(e),e.length%qr!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${qr}`)}function A3(e,t,n){let r=e.length;const o=r%qr;if(!t&&o!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const s=Bt(e);if(t){let d=qr-o;d||(d=qr),r=r+d}const c=Kg(r,n),f=Bt(c);return{b:s,o:f,out:c}}function S3(e,t){if(!t)return e;const n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=e[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const o=e.subarray(0,-r);for(let s=0;s<r;s++)if(e[n-s-1]!==r)throw new Error("aes/pcks5: wrong padding");return o}function $3(e){const t=new Uint8Array(16),n=Bt(t);t.set(e);const r=qr-e.length;for(let o=qr-r;o<qr;o++)t[o]=r;return n}const Wg=w3({blockSize:16,nonceLength:16},function(t,n,r={}){Qn(t),Qn(n,16);const o=!r.disablePadding;return{encrypt:(s,c)=>{const f=Fg(t),{b:d,o:h,out:y}=A3(s,o,c),b=Bt(n);let _=b[0],T=b[1],C=b[2],A=b[3],L=0;for(;L+4<=d.length;)_^=d[L+0],T^=d[L+1],C^=d[L+2],A^=d[L+3],{s0:_,s1:T,s2:C,s3:A}=Wh(f,_,T,C,A),h[L++]=_,h[L++]=T,h[L++]=C,h[L++]=A;if(o){const H=$3(s.subarray(L*4));_^=H[0],T^=H[1],C^=H[2],A^=H[3],{s0:_,s1:T,s2:C,s3:A}=Wh(f,_,T,C,A),h[L++]=_,h[L++]=T,h[L++]=C,h[L++]=A}return f.fill(0),y},decrypt:(s,c)=>{k3(s);const f=_3(t),d=Bt(n),h=Kg(s.length,c),y=Bt(s),b=Bt(h);let _=d[0],T=d[1],C=d[2],A=d[3];for(let L=0;L+4<=y.length;){const H=_,I=T,N=C,l=A;_=y[L+0],T=y[L+1],C=y[L+2],A=y[L+3];const{s0:w,s1:p,s2:E,s3:$}=E3(f,_,T,C,A);b[L++]=w^H,b[L++]=p^I,b[L++]=E^N,b[L++]=$^l}return f.fill(0),S3(h,o)}}}),Gg=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),x3=Gg("expand 16-byte k"),T3=Gg("expand 32-byte k"),P3=Bt(x3),Zg=Bt(T3);Zg.slice();function Ve(e,t){return e<<t|e>>>32-t}function gl(e){return e.byteOffset%4===0}const Fs=64,B3=16,Yg=2**32-1,Gh=new Uint32Array;function C3(e,t,n,r,o,s,c,f){const d=o.length,h=new Uint8Array(Fs),y=Bt(h),b=gl(o)&&gl(s),_=b?Bt(o):Gh,T=b?Bt(s):Gh;for(let C=0;C<d;c++){if(e(t,n,r,y,c,f),c>=Yg)throw new Error("arx: counter overflow");const A=Math.min(Fs,d-C);if(b&&A===Fs){const L=C/4;if(C%4!==0)throw new Error("arx: invalid block position");for(let H=0,I;H<B3;H++)I=L+H,T[I]=_[I]^y[H];C+=Fs;continue}for(let L=0,H;L<A;L++)H=C+L,s[H]=o[H]^h[L];C+=A}}function L3(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:o,counterRight:s,rounds:c}=p3({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Bu(o),Bu(c),Kh(s),Kh(n),(f,d,h,y,b=0)=>{Qn(f),Qn(d),Qn(h);const _=h.length;if(y||(y=new Uint8Array(_)),Qn(y),Bu(b),b<0||b>=Yg)throw new Error("arx: counter overflow");if(y.length<_)throw new Error(`arx: output (${y.length}) is shorter than data (${_})`);const T=[];let C=f.length,A,L;if(C===32)A=f.slice(),T.push(A),L=Zg;else if(C===16&&n)A=new Uint8Array(32),A.set(f),A.set(f,16),L=P3,T.push(A);else throw new Error(`arx: invalid 32-byte key, got length=${C}`);gl(d)||(d=d.slice(),T.push(d));const H=Bt(A);if(r){if(d.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(L,H,Bt(d.subarray(0,16)),H),d=d.subarray(16)}const I=16-o;if(I!==d.length)throw new Error(`arx: nonce must be ${I} or 16 bytes`);if(I!==12){const l=new Uint8Array(12);l.set(d,s?0:12-d.length),d=l,T.push(d)}const N=Bt(d);for(C3(e,L,H,N,h,y,b,c);T.length>0;)T.pop().fill(0);return y}}function I3(e,t,n,r,o,s=20){let c=e[0],f=e[1],d=e[2],h=e[3],y=t[0],b=t[1],_=t[2],T=t[3],C=t[4],A=t[5],L=t[6],H=t[7],I=o,N=n[0],l=n[1],w=n[2],p=c,E=f,$=d,R=h,P=y,v=b,x=_,z=T,V=C,O=A,S=L,D=H,K=I,W=N,Z=l,G=w;for(let he=0;he<s;he+=2)p=p+P|0,K=Ve(K^p,16),V=V+K|0,P=Ve(P^V,12),p=p+P|0,K=Ve(K^p,8),V=V+K|0,P=Ve(P^V,7),E=E+v|0,W=Ve(W^E,16),O=O+W|0,v=Ve(v^O,12),E=E+v|0,W=Ve(W^E,8),O=O+W|0,v=Ve(v^O,7),$=$+x|0,Z=Ve(Z^$,16),S=S+Z|0,x=Ve(x^S,12),$=$+x|0,Z=Ve(Z^$,8),S=S+Z|0,x=Ve(x^S,7),R=R+z|0,G=Ve(G^R,16),D=D+G|0,z=Ve(z^D,12),R=R+z|0,G=Ve(G^R,8),D=D+G|0,z=Ve(z^D,7),p=p+v|0,G=Ve(G^p,16),S=S+G|0,v=Ve(v^S,12),p=p+v|0,G=Ve(G^p,8),S=S+G|0,v=Ve(v^S,7),E=E+x|0,K=Ve(K^E,16),D=D+K|0,x=Ve(x^D,12),E=E+x|0,K=Ve(K^E,8),D=D+K|0,x=Ve(x^D,7),$=$+z|0,W=Ve(W^$,16),V=V+W|0,z=Ve(z^V,12),$=$+z|0,W=Ve(W^$,8),V=V+W|0,z=Ve(z^V,7),R=R+P|0,Z=Ve(Z^R,16),O=O+Z|0,P=Ve(P^O,12),R=R+P|0,Z=Ve(Z^R,8),O=O+Z|0,P=Ve(P^O,7);let oe=0;r[oe++]=c+p|0,r[oe++]=f+E|0,r[oe++]=d+$|0,r[oe++]=h+R|0,r[oe++]=y+P|0,r[oe++]=b+v|0,r[oe++]=_+x|0,r[oe++]=T+z|0,r[oe++]=C+V|0,r[oe++]=A+O|0,r[oe++]=L+S|0,r[oe++]=H+D|0,r[oe++]=I+K|0,r[oe++]=N+W|0,r[oe++]=l+Z|0,r[oe++]=w+G|0}const Zh=L3(I3,{counterRight:!1,counterLength:4,allowShortKeys:!1});let Jg=class extends pg{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,In.hash(t);const r=rs(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?t.create().update(r).digest():r);for(let c=0;c<s.length;c++)s[c]^=54;this.iHash.update(s),this.oHash=t.create();for(let c=0;c<s.length;c++)s[c]^=106;this.oHash.update(s),s.fill(0)}update(t){return In.exists(this),this.iHash.update(t),this}digestInto(t){In.exists(this),In.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:s,blockLen:c,outputLen:f}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=c,t.outputLen=f,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Ja=(e,t,n)=>new Jg(e,t).update(n).digest();Ja.create=(e,t)=>new Jg(e,t);function O3(e,t,n){return In.hash(e),Ja(e,rs(n),rs(t))}const Lu=new Uint8Array([0]),Yh=new Uint8Array;function N3(e,t,n,r=32){if(In.hash(e),In.number(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/e.outputLen);n===void 0&&(n=Yh);const s=new Uint8Array(o*e.outputLen),c=Ja.create(e,t),f=c._cloneInto(),d=new Uint8Array(c.outputLen);for(let h=0;h<o;h++)Lu[0]=h+1,f.update(h===0?Yh:d).update(n).update(Lu).digestInto(d),s.set(d,e.outputLen*h),c._cloneInto(f);return c.destroy(),f.destroy(),d.fill(0),Lu.fill(0),s.slice(0,r)}var Xg=Object.defineProperty,R3=(e,t,n)=>t in e?Xg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,st=(e,t)=>{for(var n in t)Xg(e,n,{get:t[n],enumerable:!0})},Xa=(e,t,n)=>(R3(e,typeof t!="symbol"?t+"":t,n),n),Zo=Symbol("verified"),z3=e=>e instanceof Object;function Qg(e){if(!z3(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}var U3={};st(U3,{Queue:()=>D3,QueueNode:()=>e0,binarySearch:()=>cd,insertEventIntoAscendingList:()=>j3,insertEventIntoDescendingList:()=>H3,normalizeURL:()=>M3,utf8Decoder:()=>Jn,utf8Encoder:()=>zn});var Jn=new TextDecoder("utf-8"),zn=new TextEncoder;function M3(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function H3(e,t){const[n,r]=cd(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:o.created_at-t.created_at);return r||e.splice(n,0,t),e}function j3(e,t){const[n,r]=cd(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:t.created_at-o.created_at);return r||e.splice(n,0,t),e}function cd(e,t){let n=0,r=e.length-1;for(;n<=r;){const o=Math.floor((n+r)/2),s=t(e[o]);if(s===0)return[o,!0];s<0?r=o-1:n=o+1}return[n,!1]}var e0=class{constructor(e){Ce(this,"value");Ce(this,"next",null);Ce(this,"prev",null);this.value=e}},D3=class{constructor(){Ce(this,"first");Ce(this,"last");this.first=null,this.last=null}enqueue(e){const t=new e0(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const t=this.first;return this.first=null,this.last=null,t.value}const e=this.first;return this.first=e.next,e.value}},q3=class{generateSecretKey(){return Ln.utils.randomPrivateKey()}getPublicKey(e){return wt(Ln.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=wt(Ln.getPublicKey(t)),n.id=Qs(n),n.sig=wt(Ln.sign(Qs(n),t)),n[Zo]=!0,n}verifyEvent(e){if(typeof e[Zo]=="boolean")return e[Zo];const t=Qs(e);if(t!==e.id)return e[Zo]=!1,!1;try{const n=Ln.verify(e.sig,t,e.pubkey);return e[Zo]=n,n}catch{return e[Zo]=!1,!1}}};function V3(e){if(!Qg(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Qs(e){let t=si(zn.encode(V3(e)));return wt(t)}var Qa=new q3;Qa.generateSecretKey;Qa.getPublicKey;var oo=Qa.finalizeEvent,ud=Qa.verifyEvent,F3={};st(F3,{Application:()=>F8,BadgeAward:()=>e8,BadgeDefinition:()=>U8,BlockedRelaysList:()=>k8,BookmarkList:()=>v8,Bookmarksets:()=>N8,Calendar:()=>X8,CalendarEventRSVP:()=>Q8,ChannelCreation:()=>i0,ChannelHideMessage:()=>c0,ChannelMessage:()=>a0,ChannelMetadata:()=>s0,ChannelMuteUser:()=>u0,ClassifiedListing:()=>G8,ClientAuth:()=>l0,CommunitiesList:()=>_8,CommunityDefinition:()=>n_,CommunityPostApproval:()=>u8,Contacts:()=>Y3,CreateOrUpdateProduct:()=>j8,CreateOrUpdateStall:()=>H8,Curationsets:()=>R8,Date:()=>Y8,DraftClassifiedListing:()=>Z8,DraftLong:()=>q8,Emojisets:()=>V8,EncryptedDirectMessage:()=>J3,EncryptedDirectMessages:()=>X3,EventDeletion:()=>Q3,FileMetadata:()=>r8,FileServerPreference:()=>x8,Followsets:()=>L8,GenericRepost:()=>t8,Genericlists:()=>I8,HTTPAuth:()=>fd,Handlerinformation:()=>t_,Handlerrecommendation:()=>e_,Highlights:()=>w8,InterestsList:()=>S8,Interestsets:()=>M8,JobFeedback:()=>f8,JobRequest:()=>l8,JobResult:()=>d8,Label:()=>c8,LightningPubRPC:()=>P8,LiveChatMessage:()=>o8,LiveEvent:()=>K8,LongFormArticle:()=>D8,Metadata:()=>W3,Mutelist:()=>b8,NWCWalletInfo:()=>T8,NWCWalletRequest:()=>d0,NWCWalletResponse:()=>B8,NostrConnect:()=>C8,OpenTimestamps:()=>n8,Pinlist:()=>m8,ProblemTracker:()=>i8,ProfileBadges:()=>z8,PublicChatsList:()=>E8,Reaction:()=>dd,RecommendRelay:()=>Z3,RelayList:()=>y8,Relaysets:()=>O8,Report:()=>s8,Reporting:()=>a8,Repost:()=>ld,SearchRelaysList:()=>A8,ShortTextNote:()=>G3,Time:()=>J8,UserEmojiList:()=>$8,UserStatuses:()=>W8,Zap:()=>g8,ZapGoal:()=>h8,ZapRequest:()=>p8,classifyKind:()=>K3,isEphemeralKind:()=>r0,isParameterizedReplaceableKind:()=>o0,isRegularKind:()=>t0,isReplaceableKind:()=>n0});function t0(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function n0(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function r0(e){return 2e4<=e&&e<3e4}function o0(e){return 3e4<=e&&e<4e4}function K3(e){return t0(e)?"regular":n0(e)?"replaceable":r0(e)?"ephemeral":o0(e)?"parameterized":"unknown"}var W3=0,G3=1,Z3=2,Y3=3,J3=4,X3=4,Q3=5,ld=6,dd=7,e8=8,t8=16,i0=40,s0=41,a0=42,c0=43,u0=44,n8=1040,r8=1063,o8=1311,i8=1971,s8=1984,a8=1984,c8=1985,u8=4550,l8=5999,d8=6999,f8=7e3,h8=9041,p8=9734,g8=9735,w8=9802,b8=1e4,m8=10001,y8=10002,v8=10003,_8=10004,E8=10005,k8=10006,A8=10007,S8=10015,$8=10030,x8=10096,T8=13194,P8=21e3,l0=22242,d0=23194,B8=23195,C8=24133,fd=27235,L8=3e4,I8=30001,O8=30002,N8=30003,R8=30004,z8=30008,U8=30009,M8=30015,H8=30017,j8=30018,D8=30023,q8=30024,V8=30030,F8=30078,K8=30311,W8=30315,G8=30402,Z8=30403,Y8=31922,J8=31923,X8=31924,Q8=31925,e_=31989,t_=31990,n_=34550,r_={};st(r_,{getHex64:()=>hd,getInt:()=>f0,getSubscriptionId:()=>o_,matchEventId:()=>i_,matchEventKind:()=>a_,matchEventPubkey:()=>s_});function hd(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function f0(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,o=e.slice(r),s=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,s),10)}function o_(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let s=r+1+o;return e.slice(r+1,s)}function i_(e,t){return t===hd(e,"id")}function s_(e,t){return t===hd(e,"pubkey")}function a_(e,t){return t===f0(e,"kind")}var c_={};st(c_,{makeAuthEvent:()=>u_});function u_(e,t){return{kind:l0,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}var l_;try{l_=WebSocket}catch{}var h0={};st(h0,{BECH32_REGEX:()=>p0,Bech32MaxSize:()=>pd,decode:()=>ec,encodeBytes:()=>tc,naddrEncode:()=>b_,neventEncode:()=>w_,noteEncode:()=>p_,nprofileEncode:()=>g_,npubEncode:()=>h_,nrelayEncode:()=>m_,nsecEncode:()=>f_});var pd=5e3,p0=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function d_(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}function ec(e){var o,s,c,f,d,h,y,b;let{prefix:t,words:n}=Wr.decode(e,pd),r=new Uint8Array(Wr.fromWords(n));switch(t){case"nprofile":{let _=Ks(r);if(!((o=_[0])!=null&&o[0]))throw new Error("missing TLV 0 for nprofile");if(_[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:wt(_[0][0]),relays:_[1]?_[1].map(T=>Jn.decode(T)):[]}}}case"nevent":{let _=Ks(r);if(!((s=_[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(_[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(_[2]&&_[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(_[3]&&_[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:wt(_[0][0]),relays:_[1]?_[1].map(T=>Jn.decode(T)):[],author:(c=_[2])!=null&&c[0]?wt(_[2][0]):void 0,kind:(f=_[3])!=null&&f[0]?parseInt(wt(_[3][0]),16):void 0}}}case"naddr":{let _=Ks(r);if(!((d=_[0])!=null&&d[0]))throw new Error("missing TLV 0 for naddr");if(!((h=_[2])!=null&&h[0]))throw new Error("missing TLV 2 for naddr");if(_[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((y=_[3])!=null&&y[0]))throw new Error("missing TLV 3 for naddr");if(_[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Jn.decode(_[0][0]),pubkey:wt(_[2][0]),kind:parseInt(wt(_[3][0]),16),relays:_[1]?_[1].map(T=>Jn.decode(T)):[]}}}case"nrelay":{let _=Ks(r);if(!((b=_[0])!=null&&b[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Jn.decode(_[0][0])}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:wt(r)};default:throw new Error(`unknown prefix ${t}`)}}function Ks(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],s=n.slice(2,2+o);if(n=n.slice(2+o),s.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(s)}return t}function f_(e){return tc("nsec",e)}function h_(e){return tc("npub",Po(e))}function p_(e){return tc("note",Po(e))}function bs(e,t){let n=Wr.toWords(t);return Wr.encode(e,n,pd)}function tc(e,t){return bs(e,t)}function g_(e){let t=nc({0:[Po(e.pubkey)],1:(e.relays||[]).map(n=>zn.encode(n))});return bs("nprofile",t)}function w_(e){let t;e.kind!==void 0&&(t=d_(e.kind));let n=nc({0:[Po(e.id)],1:(e.relays||[]).map(r=>zn.encode(r)),2:e.author?[Po(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return bs("nevent",n)}function b_(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=nc({0:[zn.encode(e.identifier)],1:(e.relays||[]).map(r=>zn.encode(r)),2:[Po(e.pubkey)],3:[new Uint8Array(t)]});return bs("naddr",n)}function m_(e){let t=nc({0:[zn.encode(e)]});return bs("nrelay",t)}function nc(e){let t=[];return Object.entries(e).reverse().forEach(([n,r])=>{r.forEach(o=>{let s=new Uint8Array(o.length+2);s.set([parseInt(n)],0),s.set([o.length],1),s.set(o,2),t.push(s)})}),ca(...t)}var y_={};st(y_,{decrypt:()=>v_,encrypt:()=>g0});async function g0(e,t,n){const r=e instanceof Uint8Array?wt(e):e,o=Bi.getSharedSecret(r,"02"+t),s=w0(o);let c=Uint8Array.from(wg(16)),f=zn.encode(n),d=Wg(s,c).encrypt(f),h=or.encode(new Uint8Array(d)),y=or.encode(new Uint8Array(c.buffer));return`${h}?iv=${y}`}async function v_(e,t,n){const r=e instanceof Uint8Array?wt(e):e;let[o,s]=n.split("?iv="),c=Bi.getSharedSecret(r,"02"+t),f=w0(c),d=or.decode(s),h=or.decode(o),y=Wg(f,d).decrypt(h);return Jn.decode(y)}function w0(e){return e.slice(1,33)}var __={};st(__,{NIP05_REGEX:()=>b0,isValid:()=>A_,queryProfile:()=>m0,searchDomain:()=>k_,useFetchImplementation:()=>E_});var b0=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,rc;try{rc=fetch}catch{}function E_(e){rc=e}async function k_(e,t=""){try{const n=`https://${e}/.well-known/nostr.json?name=${t}`;return(await(await rc(n,{redirect:"error"})).json()).names}catch{return{}}}async function m0(e){var s;const t=e.match(b0);if(!t)return null;const[n,r="_",o]=t;try{const c=`https://${o}/.well-known/nostr.json?name=${r}`,f=await(await rc(c,{redirect:"error"})).json();let d=f.names[r];return d?{pubkey:d,relays:(s=f.relays)==null?void 0:s[d]}:null}catch{return null}}async function A_(e,t){let n=await m0(t);return n?n.pubkey===e:!1}var S_={};st(S_,{parse:()=>$_});function $_(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)r[0]==="e"&&r[1]&&n.push(r),r[0]==="p"&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const o=n[r],[s,c,f,d]=o,h={id:c,relays:f?[f]:[]},y=r===0,b=r===n.length-1;if(d==="root"){t.root=h;continue}if(d==="reply"){t.reply=h;continue}if(d==="mention"){t.mentions.push(h);continue}if(y){t.root=h;continue}if(b){t.reply=h;continue}t.mentions.push(h)}return t}var x_={};st(x_,{fetchRelayInformation:()=>P_,useFetchImplementation:()=>T_});var y0;try{y0=fetch}catch{}function T_(e){y0=e}async function P_(e){return await(await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var B_={};st(B_,{getPow:()=>v0,minePow:()=>C_});function v0(e){let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n],16);if(r===0)t+=4;else{t+=Math.clz32(r)-28;break}}return t}function C_(e,t){let n=0;const r=e,o=["nonce",n.toString(),t.toString()];for(r.tags.push(o);;){const s=Math.floor(new Date().getTime()/1e3);if(s!==r.created_at&&(n=0,r.created_at=s),o[1]=(++n).toString(),r.id=Qs(r),v0(r.id)>=t)break}return r}var L_={};st(L_,{finishRepostEvent:()=>I_,getRepostedEvent:()=>O_,getRepostedEventPointer:()=>_0});function I_(e,t,n,r){return oo({kind:ld,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:e.content===""?"":JSON.stringify(t),created_at:e.created_at},r)}function _0(e){if(e.kind!==ld)return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const o=e.tags[r];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&n===void 0&&(n=o))}if(t!==void 0)return{id:t[1],relays:[t[2],n==null?void 0:n[2]].filter(r=>typeof r=="string"),author:n==null?void 0:n[1]}}function O_(e,{skipVerification:t}={}){const n=_0(e);if(n===void 0||e.content==="")return;let r;try{r=JSON.parse(e.content)}catch{return}if(r.id===n.id&&!(!t&&!ud(r)))return r}var N_={};st(N_,{NOSTR_URI_REGEX:()=>oc,parse:()=>z_,test:()=>R_});var oc=new RegExp(`nostr:(${p0.source})`);function R_(e){return typeof e=="string"&&new RegExp(`^${oc.source}$`).test(e)}function z_(e){const t=e.match(new RegExp(`^${oc.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:ec(t[1])}}var U_={};st(U_,{finishReactionEvent:()=>M_,getReactedEventPointer:()=>H_});function M_(e,t,n){const r=t.tags.filter(o=>o.length>=2&&(o[0]==="e"||o[0]==="p"));return oo({...e,kind:dd,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function H_(e){if(e.kind!==dd)return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const o=e.tags[r];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&n===void 0&&(n=o))}if(!(t===void 0||n===void 0))return{id:t[1],relays:[t[2],n[2]].filter(r=>r!==void 0),author:n[1]}}var j_={};st(j_,{matchAll:()=>D_,regex:()=>gd,replaceAll:()=>q_});var gd=()=>new RegExp(`\\b${oc.source}\\b`,"g");function*D_(e){const t=e.matchAll(gd());for(const n of t)try{const[r,o]=n;yield{uri:r,value:o,decoded:ec(o),start:n.index,end:n.index+r.length}}catch{}}function q_(e,t){return e.replaceAll(gd(),(n,r)=>t({uri:n,value:r,decoded:ec(r)}))}var V_={};st(V_,{channelCreateEvent:()=>F_,channelHideMessageEvent:()=>G_,channelMessageEvent:()=>W_,channelMetadataEvent:()=>K_,channelMuteUserEvent:()=>Z_});var F_=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return oo({kind:i0,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},K_=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return oo({kind:s0,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},W_=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),oo({kind:a0,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},G_=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return oo({kind:c0,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Z_=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return oo({kind:u0,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)},Y_={};st(Y_,{EMOJI_SHORTCODE_REGEX:()=>E0,matchAll:()=>J_,regex:()=>wd,replaceAll:()=>X_});var E0=/:(\w+):/,wd=()=>new RegExp(`\\B${E0.source}\\B`,"g");function*J_(e){const t=e.matchAll(wd());for(const n of t)try{const[r,o]=n;yield{shortcode:r,name:o,start:n.index,end:n.index+r.length}}catch{}}function X_(e,t){return e.replaceAll(wd(),(n,r)=>t({shortcode:n,name:r}))}var Q_={};st(Q_,{useFetchImplementation:()=>eE,validateGithub:()=>tE});var bd;try{bd=fetch}catch{}function eE(e){bd=e}async function tE(e,t,n){try{return await(await bd(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var nE={};st(nE,{default:()=>oE,v2:()=>md});var rE=new TextDecoder,Bn=class{static utf8Decode(e){return rE.decode(e)}static getConversationKey(e,t){const n=Bi.getSharedSecret(e,"02"+t).subarray(1,33);return O3(si,n,"nip44-v2")}static getMessageKeys(e,t){const n=N3(si,e,t,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}static calcPaddedLen(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)}static writeU16BE(e){if(!Number.isSafeInteger(e)||e<Bn.minPlaintextSize||e>Bn.maxPlaintextSize)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}static pad(e){const t=Bn.utf8Encode(e),n=t.length,r=Bn.writeU16BE(n),o=new Uint8Array(Bn.calcPaddedLen(n)-n);return ca(r,t,o)}static unpad(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(t<Bn.minPlaintextSize||t>Bn.maxPlaintextSize||n.length!==t||e.length!==2+Bn.calcPaddedLen(t))throw new Error("invalid padding");return Bn.utf8Decode(n)}static hmacAad(e,t,n){if(n.length!==32)throw new Error("AAD associated data must be 32 bytes");const r=ca(n,t);return Ja(si,e,r)}static decodePayload(e){if(typeof e!="string")throw new Error("payload must be a valid string");const t=e.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if(e[0]==="#")throw new Error("unknown encryption version");let n;try{n=or.decode(e)}catch(s){throw new Error("invalid base64: "+s.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const o=n[0];if(o!==2)throw new Error("unknown encryption version "+o);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}},hn=Bn;Xa(hn,"minPlaintextSize",1);Xa(hn,"maxPlaintextSize",65535);Xa(hn,"utf8Encode",hg);var md=class{static encrypt(e,t,n=wg(32)){const{chacha_key:r,chacha_nonce:o,hmac_key:s}=hn.getMessageKeys(t,n),c=hn.pad(e),f=Zh(r,o,c),d=hn.hmacAad(s,f,n);return or.encode(ca(new Uint8Array([2]),n,f,d))}static decrypt(e,t){const{nonce:n,ciphertext:r,mac:o}=hn.decodePayload(e),{chacha_key:s,chacha_nonce:c,hmac_key:f}=hn.getMessageKeys(t,n),d=hn.hmacAad(f,r,n);if(!g3(d,o))throw new Error("invalid MAC");const h=Zh(s,c,r);return hn.unpad(h)}};Xa(md,"utils",hn);var oE={v2:md},iE={};st(iE,{makeNwcRequestEvent:()=>aE,parseConnectionString:()=>sE});function sE(e){const{pathname:t,searchParams:n}=new URL(e),r=t,o=n.get("relay"),s=n.get("secret");if(!r||!o||!s)throw new Error("invalid connection string");return{pubkey:r,relay:o,secret:s}}async function aE(e,t,n){const o=await g0(t,e,JSON.stringify({method:"pay_invoice",params:{invoice:n}})),s={kind:d0,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e]]};return oo(s,t)}var cE={};st(cE,{getZapEndpoint:()=>lE,makeZapReceipt:()=>hE,makeZapRequest:()=>dE,useFetchImplementation:()=>uE,validateZapRequest:()=>fE});var yd;try{yd=fetch}catch{}function uE(e){yd=e}async function lE(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:c}=Wr.decode(n,1e3),f=Wr.fromWords(c);t=Jn.decode(f)}else if(r){let[c,f]=r.split("@");t=new URL(`/.well-known/lnurlp/${c}`,`https://${f}`).toString()}else return null;let s=await(await yd(t)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function dE({profile:e,event:t,amount:n,relays:r,comment:o=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e],["amount",n.toString()],["relays",...r]]};return t&&s.tags.push(["e",t]),s}function fE(e){let t;try{t=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!Qg(t))return"Zap request is not a valid Nostr event.";if(!ud(t))return"Invalid signature on zap request.";let n=t.tags.find(([s,c])=>s==="p"&&c);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find(([s,c])=>s==="e"&&c);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([s,c])=>s==="relays"&&c)?null:"Zap request doesn't have a 'relays' tag."}function hE({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let o=JSON.parse(e),s=o.tags.filter(([f])=>f==="e"||f==="p"||f==="a"),c={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...s,["P",o.pubkey],["bolt11",n],["description",e]]};return t&&c.tags.push(["preimage",t]),c}var pE={};st(pE,{getToken:()=>gE,hashPayload:()=>vd,unpackEventFromToken:()=>A0,validateEvent:()=>B0,validateEventKind:()=>$0,validateEventMethodTag:()=>T0,validateEventPayloadTag:()=>P0,validateEventTimestamp:()=>S0,validateEventUrlTag:()=>x0,validateToken:()=>wE});var k0="Nostr ";async function gE(e,t,n,r=!1,o){const s={kind:fd,tags:[["u",e],["method",t]],created_at:Math.round(new Date().getTime()/1e3),content:""};o&&s.tags.push(["payload",vd(o)]);const c=await n(s);return(r?k0:"")+or.encode(zn.encode(JSON.stringify(c)))}async function wE(e,t,n){const r=await A0(e).catch(s=>{throw s});return await B0(r,t,n).catch(s=>{throw s})}async function A0(e){if(!e)throw new Error("Missing token");e=e.replace(k0,"");const t=Jn.decode(or.decode(e));if(!t||t.length===0||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}function S0(e){return e.created_at?Math.round(new Date().getTime()/1e3)-e.created_at<60:!1}function $0(e){return e.kind===fd}function x0(e,t){const n=e.tags.find(r=>r[0]==="u");return n?n.length>0&&n[1]===t:!1}function T0(e,t){const n=e.tags.find(r=>r[0]==="method");return n?n.length>0&&n[1].toLowerCase()===t.toLowerCase():!1}function vd(e){const t=si(zn.encode(JSON.stringify(e)));return wt(t)}function P0(e,t){const n=e.tags.find(o=>o[0]==="payload");if(!n)return!1;const r=vd(t);return n.length>0&&n[1]===r}async function B0(e,t,n,r){if(!ud(e))throw new Error("Invalid nostr event, signature invalid");if(!$0(e))throw new Error("Invalid nostr event, kind invalid");if(!S0(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!x0(e,t))throw new Error("Invalid nostr event, url tag invalid");if(!T0(e,n))throw new Error("Invalid nostr event, method tag invalid");if(r&&typeof r=="object"&&Object.keys(r).length>0&&!P0(e,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}function bE(e){for(let t of e.tags)if(t[0]==="e"&&(t[3]==="root"||t[3]==="reply"))return!1;return!0}function ea(e){var r,o,s;let t,n;return e.kind==30023?(t=((r=e==null?void 0:e.tags.find(([c])=>c==="title"))==null?void 0:r[1])||"No title",n=((o=e==null?void 0:e.tags.find(([c])=>c==="summary"))==null?void 0:o[1])||void 0):(t="Note of "+new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"long",year:"numeric"}).format(new Date(e.created_at*1e3)),n=e.content.slice(0,200)+"..."),{id:e.id,created_at:e.created_at,title:t,image:((s=e==null?void 0:e.tags.find(([c])=>c==="image"))==null?void 0:s[1])||void 0,summary:n,content:e.content}}async function C0(e){let t;if(/^(nprofile|npub)/.test(e))try{const{type:r,data:o}=h0.decode(e);r==="npub"?t=o:r==="nprofile"&&(t=o.pubkey)}catch(r){return console.error("Failed to decode npub:",r),null}else if(e.length===64)t=e;else return console.error("Invalid code format"),null;const{relays:n}=Fa();return new Promise((r,o)=>{let s=pa.subscribeMany(n,[{kinds:[0],authors:[t],limit:1}],{onevent(c){s.close(),r(c)},onerror(c){console.error(`Subscription error: ${c}`),s.close(),o(c)}})})}async function L0(e){const t=/nostr:(npub1\w+|nprofile1\w+)/g,r=(e.match(t)||[]).map(async c=>{try{const f=await C0(c.slice(6));if(f){const h=JSON.parse(f.content).name||c.slice(0,24);return{match:c,replacement:`[${h}](${c})`}}else return{match:c,replacement:c}}catch(f){return console.error("Failed to fetch profile:",f),{match:c,replacement:c}}}),o=await Promise.all(r);let s=e;return o.forEach(({match:c,replacement:f})=>{s=s.replace(c,f)}),s}function I0(e){const t=/(^|\s|\n|\()(nevent1\w+|note1\w+|npub1\w+|nprofile1\w+)(?=\s|\n|\)|$)/gm;e=e.replace(t,(o,s,c)=>(c.slice(0,24),`${s}nostr:${c}`));const n=/(^|\s|\n)nostr:(nevent1\w+|note1\w+|npub1\w+|nprofile1\w+)(?=\s|\n|$)/gm;e=e.replace(n,(o,s,c)=>{const f=c.slice(0,24);return`${s}[${f}...](nostr:${c})`});const r=/\(nostr:([a-zA-Z0-9]+)\)/g;return e=e.replace(r,(o,s)=>`(https://njump.me/${s})`),e}function mE(e){const t=/\[([^\]]+)\]\(([^)]+)\)/g;return e.replace(t,(r,o)=>o)}function yE(e){const t=/\s+(https?:\/\/\S+\.(?:png|jpg|jpeg|gif|bmp))\s+/gi;return e.replace(t,(r,o)=>`![Image](${o})`)}function vE(e){const t=/\s+(https?:\/\/\S+\.(?:mp4|webm|ogg|mov))(\s+|$)/gi;return e.replace(t,(r,o)=>`<video controls><source src="${o}" type="video/mp4"></video>`)}function _E(e){return[{regex:/<<|/g,replacement:"&laquo;"},{regex:/>>|/g,replacement:"&raquo;"},{regex:/\.\.\./g,replacement:"&hellip;"},{regex:/---/g,replacement:"&mdash;"},{regex:/--/g,replacement:"&mdash;"}].forEach(({regex:n,replacement:r})=>{e=e.replace(n,r)}),e}function Zr(e,t=!1){const n=new Date(e*1e3),r={day:"2-digit",month:"long",year:"numeric"},o=new Intl.DateTimeFormat("en-US",r).formatToParts(n);let s,c,f;o.forEach(h=>{h.type==="day"&&(s=h.value),h.type==="month"&&(c=h.value),h.type==="year"&&(f=h.value)});let d=`${s} ${c} ${f}`;if(t){const h={hour:"2-digit",minute:"2-digit",hourCycle:"h23"},b=new Intl.DateTimeFormat("en-US",h).format(n);d+=` - ${b}`}return d}const ga=Vv("");function mi(...e){return e.filter(Boolean).join(" ")}function EE(e,t){if(e){const n=Object.keys(e);for(let r=0;r<n.length;r++){const o=n[r];if(o!=="__proto__"&&t(e[o],o)===!1)break}}return e}function Jh(e){var n;const t=(n=e.Components.Elements)==null?void 0:n.list.children;return t&&Array.prototype.slice.call(t)||[]}function wa(e){return e!==null&&typeof e=="object"}function wl(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&!e.some((n,r)=>!wl(n,t[r]));if(wa(e)&&wa(t)){const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&!n.some(o=>!Object.prototype.hasOwnProperty.call(t,o)||!wl(e[o],t[o]))}return e===t}function kE(e,t){return e.length===t.length&&!e.some((n,r)=>n!==t[r])}function bl(e,t){const n=e;return EE(t,(r,o)=>{Array.isArray(r)?n[o]=r.slice():wa(r)?n[o]=bl(wa(n[o])?n[o]:{},r):n[o]=r}),n}function AE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SE(e,t,n){return t&&AE(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}/*!
 * Splide.js
 * Version  : 4.1.4
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var Xh="(prefers-reduced-motion: reduce)",oi=1,$E=2,yi=3,Ci=4,ms=5,ta=6,ba=7,xE={CREATED:oi,MOUNTED:$E,IDLE:yi,MOVING:Ci,SCROLLING:ms,DRAGGING:ta,DESTROYED:ba};function ir(e){e.length=0}function io(e,t,n){return Array.prototype.slice.call(e,t,n)}function Qe(e){return e.bind.apply(e,[null].concat(io(arguments,1)))}var O0=setTimeout,ml=function(){};function Qh(e){return requestAnimationFrame(e)}function ic(e,t){return typeof t===e}function is(e){return!Ed(e)&&ic("object",e)}var _d=Array.isArray,N0=Qe(ic,"function"),Yr=Qe(ic,"string"),ys=Qe(ic,"undefined");function Ed(e){return e===null}function R0(e){try{return e instanceof(e.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function vs(e){return _d(e)?e:[e]}function dn(e,t){vs(e).forEach(t)}function kd(e,t){return e.indexOf(t)>-1}function na(e,t){return e.push.apply(e,vs(t)),e}function er(e,t,n){e&&dn(t,function(r){r&&e.classList[n?"add":"remove"](r)})}function Un(e,t){er(e,Yr(t)?t.split(" "):t,!0)}function _s(e,t){dn(t,e.appendChild.bind(e))}function Ad(e,t){dn(e,function(n){var r=(t||n).parentNode;r&&r.insertBefore(n,t)})}function ss(e,t){return R0(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function z0(e,t){var n=e?io(e.children):[];return t?n.filter(function(r){return ss(r,t)}):n}function Es(e,t){return t?z0(e,t)[0]:e.firstElementChild}var as=Object.keys;function To(e,t,n){return e&&(n?as(e).reverse():as(e)).forEach(function(r){r!=="__proto__"&&t(e[r],r)}),e}function cs(e){return io(arguments,1).forEach(function(t){To(t,function(n,r){e[r]=t[r]})}),e}function Dr(e){return io(arguments,1).forEach(function(t){To(t,function(n,r){_d(n)?e[r]=n.slice():is(n)?e[r]=Dr({},is(e[r])?e[r]:{},n):e[r]=n})}),e}function ep(e,t){dn(t||as(e),function(n){delete e[n]})}function Mn(e,t){dn(e,function(n){dn(t,function(r){n&&n.removeAttribute(r)})})}function ze(e,t,n){is(t)?To(t,function(r,o){ze(e,o,r)}):dn(e,function(r){Ed(n)||n===""?Mn(r,t):r.setAttribute(t,String(n))})}function ai(e,t,n){var r=document.createElement(e);return t&&(Yr(t)?Un(r,t):ze(r,t)),n&&_s(n,r),r}function pn(e,t,n){if(ys(n))return getComputedStyle(e)[t];Ed(n)||(e.style[t]=""+n)}function us(e,t){pn(e,"display",t)}function U0(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function wn(e,t){return e.getAttribute(t)}function tp(e,t){return e&&e.classList.contains(t)}function sn(e){return e.getBoundingClientRect()}function Co(e){dn(e,function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})}function M0(e){return Es(new DOMParser().parseFromString(e,"text/html").body)}function Zn(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function H0(e,t){return e&&e.querySelector(t)}function Sd(e,t){return t?io(e.querySelectorAll(t)):[]}function tr(e,t){er(e,t,!1)}function yl(e){return e.timeStamp}function yo(e){return Yr(e)?e:e?e+"px":""}var ks="splide",$d="data-"+ks;function Xi(e,t){if(!e)throw new Error("["+ks+"] "+(t||""))}var Jr=Math.min,ma=Math.max,ya=Math.floor,ls=Math.ceil,qt=Math.abs;function j0(e,t,n){return qt(e-t)<n}function ra(e,t,n,r){var o=Jr(t,n),s=ma(t,n);return r?o<e&&e<s:o<=e&&e<=s}function ei(e,t,n){var r=Jr(t,n),o=ma(t,n);return Jr(ma(r,e),o)}function vl(e){return+(e>0)-+(e<0)}function _l(e,t){return dn(t,function(n){e=e.replace("%s",""+n)}),e}function xd(e){return e<10?"0"+e:""+e}var np={};function TE(e){return""+e+xd(np[e]=(np[e]||0)+1)}function D0(){var e=[];function t(c,f,d,h){o(c,f,function(y,b,_){var T="addEventListener"in y,C=T?y.removeEventListener.bind(y,b,d,h):y.removeListener.bind(y,d);T?y.addEventListener(b,d,h):y.addListener(d),e.push([y,b,_,d,C])})}function n(c,f,d){o(c,f,function(h,y,b){e=e.filter(function(_){return _[0]===h&&_[1]===y&&_[2]===b&&(!d||_[3]===d)?(_[4](),!1):!0})})}function r(c,f,d){var h,y=!0;return typeof CustomEvent=="function"?h=new CustomEvent(f,{bubbles:y,detail:d}):(h=document.createEvent("CustomEvent"),h.initCustomEvent(f,y,!1,d)),c.dispatchEvent(h),h}function o(c,f,d){dn(c,function(h){h&&dn(f,function(y){y.split(" ").forEach(function(b){var _=b.split(".");d(h,_[0],_[1])})})})}function s(){e.forEach(function(c){c[4]()}),ir(e)}return{bind:t,unbind:n,dispatch:r,destroy:s}}var so="mounted",rp="ready",Hn="move",Lo="moved",va="click",El="active",kl="inactive",Al="visible",Sl="hidden",ft="refresh",It="updated",vi="resize",sc="resized",q0="drag",V0="dragging",F0="dragged",ac="scroll",Mo="scrolled",PE="overflow",Td="destroy",$l="arrows:mounted",xl="arrows:updated",Tl="pagination:mounted",Pl="pagination:updated",_a="navigation:mounted",Pd="autoplay:play",Bl="autoplay:playing",Bd="autoplay:pause",Ea="lazyload:loaded",K0="sk",W0="sh",ka="ei";function tt(e){var t=e?e.event.bus:document.createDocumentFragment(),n=D0();function r(s,c){n.bind(t,vs(s).join(" "),function(f){c.apply(c,_d(f.detail)?f.detail:[])})}function o(s){n.dispatch(t,s,io(arguments,1))}return e&&e.event.on(Td,n.destroy),cs(n,{bus:t,on:r,off:Qe(n.unbind,t),emit:o})}function cc(e,t,n,r){var o=Date.now,s,c=0,f,d=!0,h=0;function y(){if(!d){if(c=e?Jr((o()-s)/e,1):1,n&&n(c),c>=1&&(t(),s=o(),r&&++h>=r))return _();f=Qh(y)}}function b(H){H||C(),s=o()-(H?c*e:0),d=!1,f=Qh(y)}function _(){d=!0}function T(){s=o(),c=0,n&&n(c)}function C(){f&&cancelAnimationFrame(f),c=0,f=0,d=!0}function A(H){e=H}function L(){return d}return{start:b,rewind:T,pause:_,cancel:C,set:A,isPaused:L}}function BE(e){var t=e;function n(o){t=o}function r(o){return kd(vs(o),t)}return{set:n,is:r}}function CE(e,t){var n=cc(0,e,null,1);return function(){n.isPaused()&&n.start()}}function LE(e,t,n){var r=e.state,o=n.breakpoints||{},s=n.reducedMotion||{},c=D0(),f=[];function d(){var C=n.mediaQuery==="min";as(o).sort(function(A,L){return C?+A-+L:+L-+A}).forEach(function(A){y(o[A],"("+(C?"min":"max")+"-width:"+A+"px)")}),y(s,Xh),b()}function h(C){C&&c.destroy()}function y(C,A){var L=matchMedia(A);c.bind(L,"change",b),f.push([C,L])}function b(){var C=r.is(ba),A=n.direction,L=f.reduce(function(H,I){return Dr(H,I[1].matches?I[0]:{})},{});ep(n),T(L),n.destroy?e.destroy(n.destroy==="completely"):C?(h(!0),e.mount()):A!==n.direction&&e.refresh()}function _(C){matchMedia(Xh).matches&&(C?Dr(n,s):ep(n,as(s)))}function T(C,A,L){Dr(n,C),A&&Dr(Object.getPrototypeOf(n),C),(L||!r.is(oi))&&e.emit(It,n)}return{setup:d,destroy:h,reduce:_,set:T}}var uc="Arrow",lc=uc+"Left",dc=uc+"Right",G0=uc+"Up",Z0=uc+"Down",op="rtl",fc="ttb",Iu={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[G0,dc],ArrowRight:[Z0,lc]};function IE(e,t,n){function r(s,c,f){f=f||n.direction;var d=f===op&&!c?1:f===fc?0:-1;return Iu[s]&&Iu[s][d]||s.replace(/width|left|right/i,function(h,y){var b=Iu[h.toLowerCase()][d]||h;return y>0?b.charAt(0).toUpperCase()+b.slice(1):b})}function o(s){return s*(n.direction===op?1:-1)}return{resolve:r,orient:o}}var nr="role",ci="tabindex",OE="disabled",vn="aria-",As=vn+"controls",Y0=vn+"current",ip=vn+"selected",ln=vn+"label",Cd=vn+"labelledby",J0=vn+"hidden",Ld=vn+"orientation",ds=vn+"roledescription",sp=vn+"live",ap=vn+"busy",cp=vn+"atomic",Id=[nr,ci,OE,As,Y0,ln,Cd,J0,Ld,ds],jn=ks+"__",ao="is-",Ou=ks,up=jn+"track",NE=jn+"list",hc=jn+"slide",X0=hc+"--clone",RE=hc+"__container",Od=jn+"arrows",pc=jn+"arrow",Q0=pc+"--prev",ew=pc+"--next",gc=jn+"pagination",tw=gc+"__page",zE=jn+"progress",UE=zE+"__bar",ME=jn+"toggle",HE=jn+"spinner",jE=jn+"sr",DE=ao+"initialized",Io=ao+"active",nw=ao+"prev",rw=ao+"next",Cl=ao+"visible",Ll=ao+"loading",ow=ao+"focus-in",iw=ao+"overflow",qE=[Io,Cl,nw,rw,Ll,ow,iw],VE={slide:hc,clone:X0,arrows:Od,arrow:pc,prev:Q0,next:ew,pagination:gc,page:tw,spinner:HE};function FE(e,t){if(N0(e.closest))return e.closest(t);for(var n=e;n&&n.nodeType===1&&!ss(n,t);)n=n.parentElement;return n}var KE=5,lp=200,sw="touchstart mousedown",Nu="touchmove mousemove",Ru="touchend touchcancel mouseup click";function WE(e,t,n){var r=tt(e),o=r.on,s=r.bind,c=e.root,f=n.i18n,d={},h=[],y=[],b=[],_,T,C;function A(){N(),l(),I()}function L(){o(ft,H),o(ft,A),o(It,I),s(document,sw+" keydown",function(E){C=E.type==="keydown"},{capture:!0}),s(c,"focusin",function(){er(c,ow,!!C)})}function H(E){var $=Id.concat("style");ir(h),tr(c,y),tr(_,b),Mn([_,T],$),Mn(c,E?$:["style",ds])}function I(){tr(c,y),tr(_,b),y=p(Ou),b=p(up),Un(c,y),Un(_,b),ze(c,ln,n.label),ze(c,Cd,n.labelledby)}function N(){_=w("."+up),T=Es(_,"."+NE),Xi(_&&T,"A track/list element is missing."),na(h,z0(T,"."+hc+":not(."+X0+")")),To({arrows:Od,pagination:gc,prev:Q0,next:ew,bar:UE,toggle:ME},function(E,$){d[$]=w("."+E)}),cs(d,{root:c,track:_,list:T,slides:h})}function l(){var E=c.id||TE(ks),$=n.role;c.id=E,_.id=_.id||E+"-track",T.id=T.id||E+"-list",!wn(c,nr)&&c.tagName!=="SECTION"&&$&&ze(c,nr,$),ze(c,ds,f.carousel),ze(T,nr,"presentation")}function w(E){var $=H0(c,E);return $&&FE($,"."+Ou)===c?$:void 0}function p(E){return[E+"--"+n.type,E+"--"+n.direction,n.drag&&E+"--draggable",n.isNavigation&&E+"--nav",E===Ou&&Io]}return cs(d,{setup:A,mount:L,destroy:H})}var _i="slide",Li="loop",Ss="fade";function GE(e,t,n,r){var o=tt(e),s=o.on,c=o.emit,f=o.bind,d=e.Components,h=e.root,y=e.options,b=y.isNavigation,_=y.updateOnMove,T=y.i18n,C=y.pagination,A=y.slideFocus,L=d.Direction.resolve,H=wn(r,"style"),I=wn(r,ln),N=n>-1,l=Es(r,"."+RE),w;function p(){N||(r.id=h.id+"-slide"+xd(t+1),ze(r,nr,C?"tabpanel":"group"),ze(r,ds,T.slide),ze(r,ln,I||_l(T.slideLabel,[t+1,e.length]))),E()}function E(){f(r,"click",Qe(c,va,K)),f(r,"keydown",Qe(c,K0,K)),s([Lo,W0,Mo],v),s(_a,R),_&&s(Hn,P)}function $(){w=!0,o.destroy(),tr(r,qE),Mn(r,Id),ze(r,"style",H),ze(r,ln,I||"")}function R(){var W=e.splides.map(function(Z){var G=Z.splide.Components.Slides.getAt(t);return G?G.slide.id:""}).join(" ");ze(r,ln,_l(T.slideX,(N?n:t)+1)),ze(r,As,W),ze(r,nr,A?"button":""),A&&Mn(r,ds)}function P(){w||v()}function v(){if(!w){var W=e.index;x(),z(),er(r,nw,t===W-1),er(r,rw,t===W+1)}}function x(){var W=O();W!==tp(r,Io)&&(er(r,Io,W),ze(r,Y0,b&&W||""),c(W?El:kl,K))}function z(){var W=S(),Z=!W&&(!O()||N);if(e.state.is([Ci,ms])||ze(r,J0,Z||""),ze(Sd(r,y.focusableNodes||""),ci,Z?-1:""),A&&ze(r,ci,Z?-1:0),W!==tp(r,Cl)&&(er(r,Cl,W),c(W?Al:Sl,K)),!W&&document.activeElement===r){var G=d.Slides.getAt(e.index);G&&U0(G.slide)}}function V(W,Z,G){pn(G&&l||r,W,Z)}function O(){var W=e.index;return W===t||y.cloneStatus&&W===n}function S(){if(e.is(Ss))return O();var W=sn(d.Elements.track),Z=sn(r),G=L("left",!0),oe=L("right",!0);return ya(W[G])<=ls(Z[G])&&ya(Z[oe])<=ls(W[oe])}function D(W,Z){var G=qt(W-t);return!N&&(y.rewind||e.is(Li))&&(G=Jr(G,e.length-G)),G<=Z}var K={index:t,slideIndex:n,slide:r,container:l,isClone:N,mount:p,destroy:$,update:v,style:V,isWithin:D};return K}function ZE(e,t,n){var r=tt(e),o=r.on,s=r.emit,c=r.bind,f=t.Elements,d=f.slides,h=f.list,y=[];function b(){_(),o(ft,T),o(ft,_)}function _(){d.forEach(function(v,x){A(v,x,-1)})}function T(){w(function(v){v.destroy()}),ir(y)}function C(){w(function(v){v.update()})}function A(v,x,z){var V=GE(e,x,z,v);V.mount(),y.push(V),y.sort(function(O,S){return O.index-S.index})}function L(v){return v?p(function(x){return!x.isClone}):y}function H(v){var x=t.Controller,z=x.toIndex(v),V=x.hasFocus()?1:n.perPage;return p(function(O){return ra(O.index,z,z+V-1)})}function I(v){return p(v)[0]}function N(v,x){dn(v,function(z){if(Yr(z)&&(z=M0(z)),R0(z)){var V=d[x];V?Ad(z,V):_s(h,z),Un(z,n.classes.slide),$(z,Qe(s,vi))}}),s(ft)}function l(v){Co(p(v).map(function(x){return x.slide})),s(ft)}function w(v,x){L(x).forEach(v)}function p(v){return y.filter(N0(v)?v:function(x){return Yr(v)?ss(x.slide,v):kd(vs(v),x.index)})}function E(v,x,z){w(function(V){V.style(v,x,z)})}function $(v,x){var z=Sd(v,"img"),V=z.length;V?z.forEach(function(O){c(O,"load error",function(){--V||x()})}):x()}function R(v){return v?d.length:y.length}function P(){return y.length>n.perPage}return{mount:b,destroy:T,update:C,register:A,get:L,getIn:H,getAt:I,add:N,remove:l,forEach:w,filter:p,style:E,getLength:R,isEnough:P}}function YE(e,t,n){var r=tt(e),o=r.on,s=r.bind,c=r.emit,f=t.Slides,d=t.Direction.resolve,h=t.Elements,y=h.root,b=h.track,_=h.list,T=f.getAt,C=f.style,A,L,H;function I(){N(),s(window,"resize load",CE(Qe(c,vi))),o([It,ft],N),o(vi,l)}function N(){A=n.direction===fc,pn(y,"maxWidth",yo(n.width)),pn(b,d("paddingLeft"),w(!1)),pn(b,d("paddingRight"),w(!0)),l(!0)}function l(K){var W=sn(y);(K||L.width!==W.width||L.height!==W.height)&&(pn(b,"height",p()),C(d("marginRight"),yo(n.gap)),C("width",$()),C("height",R(),!0),L=W,c(sc),H!==(H=D())&&(er(y,iw,H),c(PE,H)))}function w(K){var W=n.padding,Z=d(K?"right":"left");return W&&yo(W[Z]||(is(W)?0:W))||"0px"}function p(){var K="";return A&&(K=E(),Xi(K,"height or heightRatio is missing."),K="calc("+K+" - "+w(!1)+" - "+w(!0)+")"),K}function E(){return yo(n.height||sn(_).width*n.heightRatio)}function $(){return n.autoWidth?null:yo(n.fixedWidth)||(A?"":P())}function R(){return yo(n.fixedHeight)||(A?n.autoHeight?null:P():E())}function P(){var K=yo(n.gap);return"calc((100%"+(K&&" + "+K)+")/"+(n.perPage||1)+(K&&" - "+K)+")"}function v(){return sn(_)[d("width")]}function x(K,W){var Z=T(K||0);return Z?sn(Z.slide)[d("width")]+(W?0:O()):0}function z(K,W){var Z=T(K);if(Z){var G=sn(Z.slide)[d("right")],oe=sn(_)[d("left")];return qt(G-oe)+(W?0:O())}return 0}function V(K){return z(e.length-1)-z(0)+x(0,K)}function O(){var K=T(0);return K&&parseFloat(pn(K.slide,d("marginRight")))||0}function S(K){return parseFloat(pn(b,d("padding"+(K?"Right":"Left"))))||0}function D(){return e.is(Ss)||V(!0)>v()}return{mount:I,resize:l,listSize:v,slideSize:x,sliderSize:V,totalSize:z,getPadding:S,isOverflow:D}}var JE=2;function XE(e,t,n){var r=tt(e),o=r.on,s=t.Elements,c=t.Slides,f=t.Direction.resolve,d=[],h;function y(){o(ft,b),o([It,vi],T),(h=L())&&(C(h),t.Layout.resize(!0))}function b(){_(),y()}function _(){Co(d),ir(d),r.destroy()}function T(){var H=L();h!==H&&(h<H||!H)&&r.emit(ft)}function C(H){var I=c.get().slice(),N=I.length;if(N){for(;I.length<H;)na(I,I);na(I.slice(-H),I.slice(0,H)).forEach(function(l,w){var p=w<H,E=A(l.slide,w);p?Ad(E,I[0].slide):_s(s.list,E),na(d,E),c.register(E,w-H+(p?0:N),l.index)})}}function A(H,I){var N=H.cloneNode(!0);return Un(N,n.classes.clone),N.id=e.root.id+"-clone"+xd(I+1),N}function L(){var H=n.clones;if(!e.is(Li))H=0;else if(ys(H)){var I=n[f("fixedWidth")]&&t.Layout.slideSize(0),N=I&&ls(sn(s.track)[f("width")]/I);H=N||n[f("autoWidth")]&&e.length||n.perPage*JE}return H}return{mount:y,destroy:_}}function QE(e,t,n){var r=tt(e),o=r.on,s=r.emit,c=e.state.set,f=t.Layout,d=f.slideSize,h=f.getPadding,y=f.totalSize,b=f.listSize,_=f.sliderSize,T=t.Direction,C=T.resolve,A=T.orient,L=t.Elements,H=L.list,I=L.track,N;function l(){N=t.Transition,o([so,sc,It,ft],w)}function w(){t.Controller.isBusy()||(t.Scroll.cancel(),E(e.index),t.Slides.update())}function p(Z,G,oe,he){Z!==G&&K(Z>oe)&&(v(),$(P(V(),Z>oe),!0)),c(Ci),s(Hn,G,oe,Z),N.start(G,function(){c(yi),s(Lo,G,oe,Z),he&&he()})}function E(Z){$(z(Z,!0))}function $(Z,G){if(!e.is(Ss)){var oe=G?Z:R(Z);pn(H,"transform","translate"+C("X")+"("+oe+"px)"),Z!==oe&&s(W0)}}function R(Z){if(e.is(Li)){var G=x(Z),oe=G>t.Controller.getEnd(),he=G<0;(he||oe)&&(Z=P(Z,oe))}return Z}function P(Z,G){var oe=Z-D(G),he=_();return Z-=A(he*(ls(qt(oe)/he)||1))*(G?1:-1),Z}function v(){$(V(),!0),N.cancel()}function x(Z){for(var G=t.Slides.get(),oe=0,he=1/0,me=0;me<G.length;me++){var Ae=G[me].index,re=qt(z(Ae,!0)-Z);if(re<=he)he=re,oe=Ae;else break}return oe}function z(Z,G){var oe=A(y(Z-1)-S(Z));return G?O(oe):oe}function V(){var Z=C("left");return sn(H)[Z]-sn(I)[Z]+A(h(!1))}function O(Z){return n.trimSpace&&e.is(_i)&&(Z=ei(Z,0,A(_(!0)-b()))),Z}function S(Z){var G=n.focus;return G==="center"?(b()-d(Z,!0))/2:+G*d(Z)||0}function D(Z){return z(Z?t.Controller.getEnd():0,!!n.trimSpace)}function K(Z){var G=A(P(V(),Z));return Z?G>=0:G<=H[C("scrollWidth")]-sn(I)[C("width")]}function W(Z,G){G=ys(G)?V():G;var oe=Z!==!0&&A(G)<A(D(!1)),he=Z!==!1&&A(G)>A(D(!0));return oe||he}return{mount:l,move:p,jump:E,translate:$,shift:P,cancel:v,toIndex:x,toPosition:z,getPosition:V,getLimit:D,exceededLimit:W,reposition:w}}function e4(e,t,n){var r=tt(e),o=r.on,s=r.emit,c=t.Move,f=c.getPosition,d=c.getLimit,h=c.toPosition,y=t.Slides,b=y.isEnough,_=y.getLength,T=n.omitEnd,C=e.is(Li),A=e.is(_i),L=Qe(V,!1),H=Qe(V,!0),I=n.start||0,N,l=I,w,p,E;function $(){R(),o([It,ft,ka],R),o(sc,P)}function R(){w=_(!0),p=n.perMove,E=n.perPage,N=K();var re=ei(I,0,T?N:w-1);re!==I&&(I=re,c.reposition())}function P(){N!==K()&&s(ka)}function v(re,ye,Le){if(!Ae()){var Ie=z(re),Me=D(Ie);Me>-1&&(ye||Me!==I)&&(oe(Me),c.move(Ie,Me,l,Le))}}function x(re,ye,Le,Ie){t.Scroll.scroll(re,ye,Le,function(){var Me=D(c.toIndex(f()));oe(T?Jr(Me,N):Me),Ie&&Ie()})}function z(re){var ye=I;if(Yr(re)){var Le=re.match(/([+\-<>])(\d+)?/)||[],Ie=Le[1],Me=Le[2];Ie==="+"||Ie==="-"?ye=O(I+ +(""+Ie+(+Me||1)),I):Ie===">"?ye=Me?W(+Me):L(!0):Ie==="<"&&(ye=H(!0))}else ye=C?re:ei(re,0,N);return ye}function V(re,ye){var Le=p||(me()?1:E),Ie=O(I+Le*(re?-1:1),I,!(p||me()));return Ie===-1&&A&&!j0(f(),d(!re),1)?re?0:N:ye?Ie:D(Ie)}function O(re,ye,Le){if(b()||me()){var Ie=S(re);Ie!==re&&(ye=re,re=Ie,Le=!1),re<0||re>N?!p&&(ra(0,re,ye,!0)||ra(N,ye,re,!0))?re=W(Z(re)):C?re=Le?re<0?-(w%E||E):w:re:n.rewind?re=re<0?N:0:re=-1:Le&&re!==ye&&(re=W(Z(ye)+(re<ye?-1:1)))}else re=-1;return re}function S(re){if(A&&n.trimSpace==="move"&&re!==I)for(var ye=f();ye===h(re,!0)&&ra(re,0,e.length-1,!n.rewind);)re<I?--re:++re;return re}function D(re){return C?(re+w)%w||0:re}function K(){for(var re=w-(me()||C&&p?1:E);T&&re-- >0;)if(h(w-1,!0)!==h(re,!0)){re++;break}return ei(re,0,w-1)}function W(re){return ei(me()?re:E*re,0,N)}function Z(re){return me()?Jr(re,N):ya((re>=N?w-1:re)/E)}function G(re){var ye=c.toIndex(re);return A?ei(ye,0,N):ye}function oe(re){re!==I&&(l=I,I=re)}function he(re){return re?l:I}function me(){return!ys(n.focus)||n.isNavigation}function Ae(){return e.state.is([Ci,ms])&&!!n.waitForTransition}return{mount:$,go:v,scroll:x,getNext:L,getPrev:H,getAdjacent:V,getEnd:K,setIndex:oe,getIndex:he,toIndex:W,toPage:Z,toDest:G,hasFocus:me,isBusy:Ae}}var t4="http://www.w3.org/2000/svg",n4="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",Ws=40;function r4(e,t,n){var r=tt(e),o=r.on,s=r.bind,c=r.emit,f=n.classes,d=n.i18n,h=t.Elements,y=t.Controller,b=h.arrows,_=h.track,T=b,C=h.prev,A=h.next,L,H,I={};function N(){w(),o(It,l)}function l(){p(),N()}function w(){var x=n.arrows;x&&!(C&&A)&&R(),C&&A&&(cs(I,{prev:C,next:A}),us(T,x?"":"none"),Un(T,H=Od+"--"+n.direction),x&&(E(),v(),ze([C,A],As,_.id),c($l,C,A)))}function p(){r.destroy(),tr(T,H),L?(Co(b?[C,A]:T),C=A=null):Mn([C,A],Id)}function E(){o([so,Lo,ft,Mo,ka],v),s(A,"click",Qe($,">")),s(C,"click",Qe($,"<"))}function $(x){y.go(x,!0)}function R(){T=b||ai("div",f.arrows),C=P(!0),A=P(!1),L=!0,_s(T,[C,A]),!b&&Ad(T,_)}function P(x){var z='<button class="'+f.arrow+" "+(x?f.prev:f.next)+'" type="button"><svg xmlns="'+t4+'" viewBox="0 0 '+Ws+" "+Ws+'" width="'+Ws+'" height="'+Ws+'" focusable="false"><path d="'+(n.arrowPath||n4)+'" />';return M0(z)}function v(){if(C&&A){var x=e.index,z=y.getPrev(),V=y.getNext(),O=z>-1&&x<z?d.last:d.prev,S=V>-1&&x>V?d.first:d.next;C.disabled=z<0,A.disabled=V<0,ze(C,ln,O),ze(A,ln,S),c(xl,C,A,z,V)}}return{arrows:I,mount:N,destroy:p,update:v}}var o4=$d+"-interval";function i4(e,t,n){var r=tt(e),o=r.on,s=r.bind,c=r.emit,f=cc(n.interval,e.go.bind(e,">"),E),d=f.isPaused,h=t.Elements,y=t.Elements,b=y.root,_=y.toggle,T=n.autoplay,C,A,L=T==="pause";function H(){T&&(I(),_&&ze(_,As,h.track.id),L||N(),p())}function I(){n.pauseOnHover&&s(b,"mouseenter mouseleave",function(R){C=R.type==="mouseenter",w()}),n.pauseOnFocus&&s(b,"focusin focusout",function(R){A=R.type==="focusin",w()}),_&&s(_,"click",function(){L?N():l(!0)}),o([Hn,ac,ft],f.rewind),o(Hn,$)}function N(){d()&&t.Slides.isEnough()&&(f.start(!n.resetProgress),A=C=L=!1,p(),c(Pd))}function l(R){R===void 0&&(R=!0),L=!!R,p(),d()||(f.pause(),c(Bd))}function w(){L||(C||A?l(!1):N())}function p(){_&&(er(_,Io,!L),ze(_,ln,n.i18n[L?"play":"pause"]))}function E(R){var P=h.bar;P&&pn(P,"width",R*100+"%"),c(Bl,R)}function $(R){var P=t.Slides.getAt(R);f.set(P&&+wn(P.slide,o4)||n.interval)}return{mount:H,destroy:f.cancel,play:N,pause:l,isPaused:d}}function s4(e,t,n){var r=tt(e),o=r.on;function s(){n.cover&&(o(Ea,Qe(f,!0)),o([so,It,ft],Qe(c,!0)))}function c(d){t.Slides.forEach(function(h){var y=Es(h.container||h.slide,"img");y&&y.src&&f(d,y,h)})}function f(d,h,y){y.style("background",d?'center/cover no-repeat url("'+h.src+'")':"",!0),us(h,d?"none":"")}return{mount:s,destroy:Qe(c,!1)}}var a4=10,c4=600,u4=.6,l4=1.5,d4=800;function f4(e,t,n){var r=tt(e),o=r.on,s=r.emit,c=e.state.set,f=t.Move,d=f.getPosition,h=f.getLimit,y=f.exceededLimit,b=f.translate,_=e.is(_i),T,C,A=1;function L(){o(Hn,l),o([It,ft],w)}function H(E,$,R,P,v){var x=d();if(l(),R&&(!_||!y())){var z=t.Layout.sliderSize(),V=vl(E)*z*ya(qt(E)/z)||0;E=f.toPosition(t.Controller.toDest(E%z))+V}var O=j0(x,E,1);A=1,$=O?0:$||ma(qt(E-x)/l4,d4),C=P,T=cc($,I,Qe(N,x,E,v),1),c(ms),s(ac),T.start()}function I(){c(yi),C&&C(),s(Mo)}function N(E,$,R,P){var v=d(),x=E+($-E)*p(P),z=(x-v)*A;b(v+z),_&&!R&&y()&&(A*=u4,qt(z)<a4&&H(h(y(!0)),c4,!1,C,!0))}function l(){T&&T.cancel()}function w(){T&&!T.isPaused()&&(l(),I())}function p(E){var $=n.easingFunc;return $?$(E):1-Math.pow(1-E,4)}return{mount:L,destroy:l,scroll:H,cancel:w}}var ti={passive:!1,capture:!0};function h4(e,t,n){var r=tt(e),o=r.on,s=r.emit,c=r.bind,f=r.unbind,d=e.state,h=t.Move,y=t.Scroll,b=t.Controller,_=t.Elements.track,T=t.Media.reduce,C=t.Direction,A=C.resolve,L=C.orient,H=h.getPosition,I=h.exceededLimit,N,l,w,p,E,$=!1,R,P,v;function x(){c(_,Nu,ml,ti),c(_,Ru,ml,ti),c(_,sw,V,ti),c(_,"click",D,{capture:!0}),c(_,"dragstart",Zn),o([so,It],z)}function z(){var se=n.drag;Ke(!se),p=se==="free"}function V(se){if(R=!1,!P){var Oe=Me(se);Ie(se.target)&&(Oe||!se.button)&&(b.isBusy()?Zn(se,!0):(v=Oe?_:window,E=d.is([Ci,ms]),w=null,c(v,Nu,O,ti),c(v,Ru,S,ti),h.cancel(),y.cancel(),K(se)))}}function O(se){if(d.is(ta)||(d.set(ta),s(q0)),se.cancelable)if(E){h.translate(N+Le(me(se)));var Oe=Ae(se)>lp,xe=$!==($=I());(Oe||xe)&&K(se),R=!0,s(V0),Zn(se)}else G(se)&&(E=Z(se),Zn(se))}function S(se){d.is(ta)&&(d.set(yi),s(F0)),E&&(W(se),Zn(se)),f(v,Nu,O),f(v,Ru,S),E=!1}function D(se){!P&&R&&Zn(se,!0)}function K(se){w=l,l=se,N=H()}function W(se){var Oe=oe(se),xe=he(Oe),Te=n.rewind&&n.rewindByDrag;T(!1),p?b.scroll(xe,0,n.snap):e.is(Ss)?b.go(L(vl(Oe))<0?Te?"<":"-":Te?">":"+"):e.is(_i)&&$&&Te?b.go(I(!0)?">":"<"):b.go(b.toDest(xe),!0),T(!0)}function Z(se){var Oe=n.dragMinThreshold,xe=is(Oe),Te=xe&&Oe.mouse||0,je=(xe?Oe.touch:+Oe)||10;return qt(me(se))>(Me(se)?je:Te)}function G(se){return qt(me(se))>qt(me(se,!0))}function oe(se){if(e.is(Li)||!$){var Oe=Ae(se);if(Oe&&Oe<lp)return me(se)/Oe}return 0}function he(se){return H()+vl(se)*Jr(qt(se)*(n.flickPower||600),p?1/0:t.Layout.listSize()*(n.flickMaxPages||1))}function me(se,Oe){return ye(se,Oe)-ye(re(se),Oe)}function Ae(se){return yl(se)-yl(re(se))}function re(se){return l===se&&w||l}function ye(se,Oe){return(Me(se)?se.changedTouches[0]:se)["page"+A(Oe?"Y":"X")]}function Le(se){return se/($&&e.is(_i)?KE:1)}function Ie(se){var Oe=n.noDrag;return!ss(se,"."+tw+", ."+pc)&&(!Oe||!ss(se,Oe))}function Me(se){return typeof TouchEvent<"u"&&se instanceof TouchEvent}function pt(){return E}function Ke(se){P=se}return{mount:x,disable:Ke,isDragging:pt}}var p4={Spacebar:" ",Right:dc,Left:lc,Up:G0,Down:Z0};function Nd(e){return e=Yr(e)?e:e.key,p4[e]||e}var dp="keydown";function g4(e,t,n){var r=tt(e),o=r.on,s=r.bind,c=r.unbind,f=e.root,d=t.Direction.resolve,h,y;function b(){_(),o(It,T),o(It,_),o(Hn,A)}function _(){var H=n.keyboard;H&&(h=H==="global"?window:f,s(h,dp,L))}function T(){c(h,dp)}function C(H){y=H}function A(){var H=y;y=!0,O0(function(){y=H})}function L(H){if(!y){var I=Nd(H);I===d(lc)?e.go("<"):I===d(dc)&&e.go(">")}}return{mount:b,destroy:T,disable:C}}var Qi=$d+"-lazy",oa=Qi+"-srcset",w4="["+Qi+"], ["+oa+"]";function b4(e,t,n){var r=tt(e),o=r.on,s=r.off,c=r.bind,f=r.emit,d=n.lazyLoad==="sequential",h=[Lo,Mo],y=[];function b(){n.lazyLoad&&(_(),o(ft,_))}function _(){ir(y),T(),d?H():(s(h),o(h,C),C())}function T(){t.Slides.forEach(function(I){Sd(I.slide,w4).forEach(function(N){var l=wn(N,Qi),w=wn(N,oa);if(l!==N.src||w!==N.srcset){var p=n.classes.spinner,E=N.parentElement,$=Es(E,"."+p)||ai("span",p,E);y.push([N,I,$]),N.src||us(N,"none")}})})}function C(){y=y.filter(function(I){var N=n.perPage*((n.preloadPages||1)+1)-1;return I[1].isWithin(e.index,N)?A(I):!0}),y.length||s(h)}function A(I){var N=I[0];Un(I[1].slide,Ll),c(N,"load error",Qe(L,I)),ze(N,"src",wn(N,Qi)),ze(N,"srcset",wn(N,oa)),Mn(N,Qi),Mn(N,oa)}function L(I,N){var l=I[0],w=I[1];tr(w.slide,Ll),N.type!=="error"&&(Co(I[2]),us(l,""),f(Ea,l,w),f(vi)),d&&H()}function H(){y.length&&A(y.shift())}return{mount:b,destroy:Qe(ir,y),check:C}}function m4(e,t,n){var r=tt(e),o=r.on,s=r.emit,c=r.bind,f=t.Slides,d=t.Elements,h=t.Controller,y=h.hasFocus,b=h.getIndex,_=h.go,T=t.Direction.resolve,C=d.pagination,A=[],L,H;function I(){N(),o([It,ft,ka],I);var P=n.pagination;C&&us(C,P?"":"none"),P&&(o([Hn,ac,Mo],R),l(),R(),s(Tl,{list:L,items:A},$(e.index)))}function N(){L&&(Co(C?io(L.children):L),tr(L,H),ir(A),L=null),r.destroy()}function l(){var P=e.length,v=n.classes,x=n.i18n,z=n.perPage,V=y()?h.getEnd()+1:ls(P/z);L=C||ai("ul",v.pagination,d.track.parentElement),Un(L,H=gc+"--"+E()),ze(L,nr,"tablist"),ze(L,ln,x.select),ze(L,Ld,E()===fc?"vertical":"");for(var O=0;O<V;O++){var S=ai("li",null,L),D=ai("button",{class:v.page,type:"button"},S),K=f.getIn(O).map(function(Z){return Z.slide.id}),W=!y()&&z>1?x.pageX:x.slideX;c(D,"click",Qe(w,O)),n.paginationKeyboard&&c(D,"keydown",Qe(p,O)),ze(S,nr,"presentation"),ze(D,nr,"tab"),ze(D,As,K.join(" ")),ze(D,ln,_l(W,O+1)),ze(D,ci,-1),A.push({li:S,button:D,page:O})}}function w(P){_(">"+P,!0)}function p(P,v){var x=A.length,z=Nd(v),V=E(),O=-1;z===T(dc,!1,V)?O=++P%x:z===T(lc,!1,V)?O=(--P+x)%x:z==="Home"?O=0:z==="End"&&(O=x-1);var S=A[O];S&&(U0(S.button),_(">"+O),Zn(v,!0))}function E(){return n.paginationDirection||n.direction}function $(P){return A[h.toPage(P)]}function R(){var P=$(b(!0)),v=$(b());if(P){var x=P.button;tr(x,Io),Mn(x,ip),ze(x,ci,-1)}if(v){var z=v.button;Un(z,Io),ze(z,ip,!0),ze(z,ci,"")}s(Pl,{list:L,items:A},P,v)}return{items:A,mount:I,destroy:N,getAt:$,update:R}}var y4=[" ","Enter"];function v4(e,t,n){var r=n.isNavigation,o=n.slideFocus,s=[];function c(){e.splides.forEach(function(C){C.isParent||(h(e,C.splide),h(C.splide,e))}),r&&y()}function f(){s.forEach(function(C){C.destroy()}),ir(s)}function d(){f(),c()}function h(C,A){var L=tt(C);L.on(Hn,function(H,I,N){A.go(A.is(Li)?N:H)}),s.push(L)}function y(){var C=tt(e),A=C.on;A(va,_),A(K0,T),A([so,It],b),s.push(C),C.emit(_a,e.splides)}function b(){ze(t.Elements.list,Ld,n.direction===fc?"vertical":"")}function _(C){e.go(C.index)}function T(C,A){kd(y4,Nd(A))&&(_(C),Zn(A))}return{setup:Qe(t.Media.set,{slideFocus:ys(o)?r:o},!0),mount:c,destroy:f,remount:d}}function _4(e,t,n){var r=tt(e),o=r.bind,s=0;function c(){n.wheel&&o(t.Elements.track,"wheel",f,ti)}function f(h){if(h.cancelable){var y=h.deltaY,b=y<0,_=yl(h),T=n.wheelMinThreshold||0,C=n.wheelSleep||0;qt(y)>T&&_-s>C&&(e.go(b?"<":">"),s=_),d(b)&&Zn(h)}}function d(h){return!n.releaseWheel||e.state.is(Ci)||t.Controller.getAdjacent(h)!==-1}return{mount:c}}var E4=90;function k4(e,t,n){var r=tt(e),o=r.on,s=t.Elements.track,c=n.live&&!n.isNavigation,f=ai("span",jE),d=cc(E4,Qe(y,!1));function h(){c&&(_(!t.Autoplay.isPaused()),ze(s,cp,!0),f.textContent="",o(Pd,Qe(_,!0)),o(Bd,Qe(_,!1)),o([Lo,Mo],Qe(y,!0)))}function y(T){ze(s,ap,T),T?(_s(s,f),d.start()):(Co(f),d.cancel())}function b(){Mn(s,[sp,cp,ap]),Co(f)}function _(T){c&&ze(s,sp,T?"off":"polite")}return{mount:h,disable:_,destroy:b}}var A4=Object.freeze({__proto__:null,Media:LE,Direction:IE,Elements:WE,Slides:ZE,Layout:YE,Clones:XE,Move:QE,Controller:e4,Arrows:r4,Autoplay:i4,Cover:s4,Scroll:f4,Drag:h4,Keyboard:g4,LazyLoad:b4,Pagination:m4,Sync:v4,Wheel:_4,Live:k4}),S4={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},$4={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:VE,i18n:S4,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function x4(e,t,n){var r=t.Slides;function o(){tt(e).on([so,ft],s)}function s(){r.forEach(function(f){f.style("transform","translateX(-"+100*f.index+"%)")})}function c(f,d){r.style("transition","opacity "+n.speed+"ms "+n.easing),O0(d)}return{mount:o,start:c,cancel:ml}}function T4(e,t,n){var r=t.Move,o=t.Controller,s=t.Scroll,c=t.Elements.list,f=Qe(pn,c,"transition"),d;function h(){tt(e).bind(c,"transitionend",function(T){T.target===c&&d&&(b(),d())})}function y(T,C){var A=r.toPosition(T,!0),L=r.getPosition(),H=_(T);qt(A-L)>=1&&H>=1?n.useScroll?s.scroll(A,H,!1,C):(f("transform "+H+"ms "+n.easing),r.translate(A,!0),d=C):(r.jump(T),C())}function b(){f(""),s.cancel()}function _(T){var C=n.rewindSpeed;if(e.is(_i)&&C){var A=o.getIndex(!0),L=o.getEnd();if(A===0&&T>=L||A>=L&&T===0)return C}return n.speed}return{mount:h,start:y,cancel:b}}var P4=function(){function e(n,r){this.event=tt(),this.Components={},this.state=BE(oi),this.splides=[],this._o={},this._E={};var o=Yr(n)?H0(document,n):n;Xi(o,o+" is invalid."),this.root=o,r=Dr({label:wn(o,ln)||"",labelledby:wn(o,Cd)||""},$4,e.defaults,r||{});try{Dr(r,JSON.parse(wn(o,$d)))}catch{Xi(!1,"Invalid JSON")}this._o=Object.create(Dr({},r))}var t=e.prototype;return t.mount=function(r,o){var s=this,c=this.state,f=this.Components;Xi(c.is([oi,ba]),"Already mounted!"),c.set(oi),this._C=f,this._T=o||this._T||(this.is(Ss)?x4:T4),this._E=r||this._E;var d=cs({},A4,this._E,{Transition:this._T});return To(d,function(h,y){var b=h(s,f,s._o);f[y]=b,b.setup&&b.setup()}),To(f,function(h){h.mount&&h.mount()}),this.emit(so),Un(this.root,DE),c.set(yi),this.emit(rp),this},t.sync=function(r){return this.splides.push({splide:r}),r.splides.push({splide:this,isParent:!0}),this.state.is(yi)&&(this._C.Sync.remount(),r.Components.Sync.remount()),this},t.go=function(r){return this._C.Controller.go(r),this},t.on=function(r,o){return this.event.on(r,o),this},t.off=function(r){return this.event.off(r),this},t.emit=function(r){var o;return(o=this.event).emit.apply(o,[r].concat(io(arguments,1))),this},t.add=function(r,o){return this._C.Slides.add(r,o),this},t.remove=function(r){return this._C.Slides.remove(r),this},t.is=function(r){return this._o.type===r},t.refresh=function(){return this.emit(ft),this},t.destroy=function(r){r===void 0&&(r=!0);var o=this.event,s=this.state;return s.is(oi)?tt(this).on(rp,this.destroy.bind(this,r)):(To(this._C,function(c){c.destroy&&c.destroy(r)},!0),o.emit(Td),o.destroy(),r&&ir(this.splides),s.set(ba)),this},SE(e,[{key:"options",get:function(){return this._o},set:function(r){this._C.Media.set(r,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),e}(),Rd=P4;Rd.defaults={};Rd.STATES=xE;const B4=[so,ft,vi,sc,q0,V0,F0,ac,Mo,Td,Pd,Bd];function C4(e,t){const n=(r,o={})=>{t(L4(r),{splide:e,...o})};e.on(va,(r,o)=>{n(va,{Slide:r,e:o})}),e.on(Hn,(r,o,s)=>{n(Hn,{index:r,prev:o,dest:s})}),e.on(Lo,(r,o,s)=>{n(Lo,{index:r,prev:o,dest:s})}),e.on(El,r=>{n(El,{Slide:r})}),e.on(kl,r=>{n(kl,{Slide:r})}),e.on(Al,r=>{n(Al,{Slide:r})}),e.on(Sl,r=>{n(Sl,{Slide:r})}),e.on(It,r=>{n(It,r)}),e.on($l,(r,o)=>{n($l,{prev:r,next:o})}),e.on(xl,(r,o)=>{n(xl,{prev:r,next:o})}),e.on(Tl,(r,o)=>{n(Tl,{data:r,item:o})}),e.on(Pl,(r,o,s)=>{n(Pl,{data:r,prev:o,curr:s})}),e.on(_a,r=>{n(_a,{splides:r})}),e.on(Bl,r=>{n(Bl,{rate:r})}),e.on(Ea,(r,o)=>{n(Ea,{img:r,Slide:o})}),B4.forEach(r=>{e.on(r,()=>{n(r)})})}function L4(e){return e.split(":").map((t,n)=>n>0?t.charAt(0).toUpperCase()+t.slice(1):t).join("").replace("Lazyload","LazyLoad")}function I4(e){let t;const n=e[11].default,r=za(n,e,e[13],null);return{c(){r&&r.c()},m(o,s){r&&r.m(o,s),t=!0},p(o,s){r&&r.p&&(!t||s&8192)&&Ma(r,n,o,o[13],t?Ua(n,o[13],s,null):Ha(o[13]),null)},i(o){t||(Fe(r,o),t=!0)},o(o){Ge(r,o),t=!1},d(o){r&&r.d(o)}}}function O4(e){let t,n;return t=new j4({props:{$$slots:{default:[N4]},$$scope:{ctx:e}}}),{c(){no(t.$$.fragment)},m(r,o){ur(t,r,o),n=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(r){n||(Fe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){lr(t,r)}}}function N4(e){let t;const n=e[11].default,r=za(n,e,e[13],null);return{c(){r&&r.c()},m(o,s){r&&r.m(o,s),t=!0},p(o,s){r&&r.p&&(!t||s&8192)&&Ma(r,n,o,o[13],t?Ua(n,o[13],s,null):Ha(o[13]),null)},i(o){t||(Fe(r,o),t=!0)},o(o){Ge(r,o),t=!1},d(o){r&&r.d(o)}}}function R4(e){let t,n,r,o,s;const c=[O4,I4],f=[];function d(b,_){return b[1]?0:1}n=d(e),r=f[n]=c[n](e);let h=[{class:o=mi("splide",e[0])},e[3]],y={};for(let b=0;b<h.length;b+=1)y=Rn(y,h[b]);return{c(){t=Pe("div"),r.c(),gi(t,y)},m(b,_){Ue(b,t,_),f[n].m(t,null),e[12](t),s=!0},p(b,[_]){let T=n;n=d(b),n===T?f[n].p(b,_):(eo(),Ge(f[T],1,1,()=>{f[T]=null}),to(),r=f[n],r?r.p(b,_):(r=f[n]=c[n](b),r.c()),Fe(r,1),r.m(t,null)),gi(t,y=Yl(h,[(!s||_&1&&o!==(o=mi("splide",b[0])))&&{class:o},_&8&&b[3]]))},i(b){s||(Fe(r),s=!0)},o(b){Ge(r),s=!1},d(b){b&&Re(t),f[n].d(),e[12](null)}}}function z4(e,t,n){const r=["class","options","splide","extensions","transition","hasTrack","go","sync"];let o=pi(t,r),{$$slots:s={},$$scope:c}=t,{class:f=void 0}=t,{options:d={}}=t,{splide:h=void 0}=t,{extensions:y=void 0}=t,{transition:b=void 0}=t,{hasTrack:_=!0}=t;const T=kv();let C,A,L=bl({},d);qa(()=>(n(4,h=new Rd(C,d)),C4(h,T),h.mount(y,b),A=Jh(h),()=>h.destroy())),_v(()=>{if(h){const l=Jh(h);kE(A,l)||(h.refresh(),A=l.slice())}});function H(l){h==null||h.go(l)}function I(l){h==null||h.sync(l)}function N(l){tl[l?"unshift":"push"](()=>{C=l,n(2,C)})}return e.$$set=l=>{t=Rn(Rn({},t),Zl(l)),n(3,o=pi(t,r)),"class"in l&&n(0,f=l.class),"options"in l&&n(5,d=l.options),"splide"in l&&n(4,h=l.splide),"extensions"in l&&n(6,y=l.extensions),"transition"in l&&n(7,b=l.transition),"hasTrack"in l&&n(1,_=l.hasTrack),"$$scope"in l&&n(13,c=l.$$scope)},e.$$.update=()=>{e.$$.dirty&1072&&h&&!wl(L,d)&&(n(4,h.options=d,h),n(10,L=bl({},L)))},[f,_,C,o,h,d,y,b,H,I,L,s,N,c]}class U4 extends Uo{constructor(t){super(),zo(this,t,z4,R4,cr,{class:0,options:5,splide:4,extensions:6,transition:7,hasTrack:1,go:8,sync:9})}get class(){return this.$$.ctx[0]}set class(t){this.$$set({class:t}),Ur()}get options(){return this.$$.ctx[5]}set options(t){this.$$set({options:t}),Ur()}get splide(){return this.$$.ctx[4]}set splide(t){this.$$set({splide:t}),Ur()}get extensions(){return this.$$.ctx[6]}set extensions(t){this.$$set({extensions:t}),Ur()}get transition(){return this.$$.ctx[7]}set transition(t){this.$$set({transition:t}),Ur()}get hasTrack(){return this.$$.ctx[1]}set hasTrack(t){this.$$set({hasTrack:t}),Ur()}get go(){return this.$$.ctx[8]}get sync(){return this.$$.ctx[9]}}function M4(e){let t,n,r,o;const s=e[3].default,c=za(s,e,e[2],null);let f=[{class:r=mi("splide__track",e[0])},e[1]],d={};for(let h=0;h<f.length;h+=1)d=Rn(d,f[h]);return{c(){t=Pe("div"),n=Pe("ul"),c&&c.c(),Ee(n,"class","splide__list"),gi(t,d)},m(h,y){Ue(h,t,y),we(t,n),c&&c.m(n,null),o=!0},p(h,[y]){c&&c.p&&(!o||y&4)&&Ma(c,s,h,h[2],o?Ua(s,h[2],y,null):Ha(h[2]),null),gi(t,d=Yl(f,[(!o||y&1&&r!==(r=mi("splide__track",h[0])))&&{class:r},y&2&&h[1]]))},i(h){o||(Fe(c,h),o=!0)},o(h){Ge(c,h),o=!1},d(h){h&&Re(t),c&&c.d(h)}}}function H4(e,t,n){const r=["class"];let o=pi(t,r),{$$slots:s={},$$scope:c}=t,{class:f=void 0}=t;return e.$$set=d=>{t=Rn(Rn({},t),Zl(d)),n(1,o=pi(t,r)),"class"in d&&n(0,f=d.class),"$$scope"in d&&n(2,c=d.$$scope)},[f,o,c,s]}class j4 extends Uo{constructor(t){super(),zo(this,t,H4,M4,cr,{class:0})}}function D4(e){let t,n,r;const o=e[3].default,s=za(o,e,e[2],null);let c=[{class:n=mi("splide__slide",e[0])},e[1]],f={};for(let d=0;d<c.length;d+=1)f=Rn(f,c[d]);return{c(){t=Pe("li"),s&&s.c(),gi(t,f)},m(d,h){Ue(d,t,h),s&&s.m(t,null),r=!0},p(d,[h]){s&&s.p&&(!r||h&4)&&Ma(s,o,d,d[2],r?Ua(o,d[2],h,null):Ha(d[2]),null),gi(t,f=Yl(c,[(!r||h&1&&n!==(n=mi("splide__slide",d[0])))&&{class:n},h&2&&d[1]]))},i(d){r||(Fe(s,d),r=!0)},o(d){Ge(s,d),r=!1},d(d){d&&Re(t),s&&s.d(d)}}}function q4(e,t,n){const r=["class"];let o=pi(t,r),{$$slots:s={},$$scope:c}=t,{class:f=void 0}=t;return e.$$set=d=>{t=Rn(Rn({},t),Zl(d)),n(1,o=pi(t,r)),"class"in d&&n(0,f=d.class),"$$scope"in d&&n(2,c=d.$$scope)},[f,o,c,s]}class V4 extends Uo{constructor(t){super(),zo(this,t,q4,D4,cr,{class:0})}}function F4(e){let t;return{c(){t=Pe("div"),t.innerHTML='<div class="loader svelte-1b13ty7"></div>',Ee(t,"class","loader-container svelte-1b13ty7")},m(n,r){Ue(n,t,r)},p:Mt,i:Mt,o:Mt,d(n){n&&Re(t)}}}class aw extends Uo{constructor(t){super(),zo(this,t,null,F4,cr,{})}}function fp(e,t,n){const r=e.slice();return r[17]=t[n],r}function hp(e,t,n){const r=e.slice();return r[17]=t[n],r}function pp(e,t,n){const r=e.slice();return r[17]=t[n],r}function gp(e,t,n){const r=e.slice();return r[24]=t[n],r}function wp(e){let t,n,r,o,s,c,f=Kr(e[6]),d=[];for(let h=0;h<f.length;h+=1)d[h]=bp(gp(e,f,h));return{c(){t=Pe("div"),n=Pe("div"),r=Pe("a"),o=Je("Home"),c=Ye();for(let h=0;h<d.length;h+=1)d[h].c();Ee(r,"href","#"),Ee(r,"class",s=e[0]==""?"selected":""),Ee(t,"class","topic-wrapper")},m(h,y){Ue(h,t,y),we(t,n),we(n,r),we(r,o),we(t,c);for(let b=0;b<d.length;b+=1)d[b]&&d[b].m(t,null)},p(h,y){if(y&1&&s!==(s=h[0]==""?"selected":"")&&Ee(r,"class",s),y&65){f=Kr(h[6]);let b;for(b=0;b<f.length;b+=1){const _=gp(h,f,b);d[b]?d[b].p(_,y):(d[b]=bp(_),d[b].c(),d[b].m(t,null))}for(;b<d.length;b+=1)d[b].d(1);d.length=f.length}},d(h){h&&Re(t),ja(d,h)}}}function bp(e){let t,n,r,o=e[24]+"",s,c,f;return{c(){t=Pe("div"),n=Pe("a"),r=Je("#"),s=Je(o),Ee(n,"href",c="#tags/"+e[24]),Ee(n,"class",f=e[24]==e[0]?"selected":"")},m(d,h){Ue(d,t,h),we(t,n),we(n,r),we(n,s)},p(d,h){h&64&&o!==(o=d[24]+"")&&At(s,o),h&64&&c!==(c="#tags/"+d[24])&&Ee(n,"href",c),h&65&&f!==(f=d[24]==d[0]?"selected":"")&&Ee(n,"class",f)},d(d){d&&Re(t)}}}function K4(e){let t;return{c(){t=Pe("div"),Ee(t,"class","separator")},m(n,r){Ue(n,t,r)},p:Mt,d(n){n&&Re(t)}}}function W4(e){let t,n;return{c(){t=Pe("div"),n=Je(e[4]),Ee(t,"class","about")},m(r,o){Ue(r,t,o),we(t,n)},p(r,o){o&16&&At(n,r[4])},d(r){r&&Re(t)}}}function G4(e){let t,n;return t=new aw({}),{c(){no(t.$$.fragment)},m(r,o){ur(t,r,o),n=!0},p:Mt,i(r){n||(Fe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){lr(t,r)}}}function Z4(e){let t,n,r,o,s=e[9].length>0&&mp(e),c=e[7].length>0&&!e[0]&&_p(e),f=e[8].length>0&&kp(e);return{c(){s&&s.c(),t=Ye(),c&&c.c(),n=Ye(),f&&f.c(),r=Ro()},m(d,h){s&&s.m(d,h),Ue(d,t,h),c&&c.m(d,h),Ue(d,n,h),f&&f.m(d,h),Ue(d,r,h),o=!0},p(d,h){d[9].length>0?s?s.p(d,h):(s=mp(d),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),d[7].length>0&&!d[0]?c?(c.p(d,h),h&129&&Fe(c,1)):(c=_p(d),c.c(),Fe(c,1),c.m(n.parentNode,n)):c&&(eo(),Ge(c,1,1,()=>{c=null}),to()),d[8].length>0?f?f.p(d,h):(f=kp(d),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null)},i(d){o||(Fe(c),o=!0)},o(d){Ge(c),o=!1},d(d){d&&(Re(t),Re(n),Re(r)),s&&s.d(d),c&&c.d(d),f&&f.d(d)}}}function mp(e){let t,n=Kr(e[9]),r=[];for(let o=0;o<n.length;o+=1)r[o]=vp(pp(e,n,o));return{c(){t=Pe("div");for(let o=0;o<r.length;o+=1)r[o].c();Ee(t,"class","top-notes")},m(o,s){Ue(o,t,s);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(t,null)},p(o,s){if(s&512){n=Kr(o[9]);let c;for(c=0;c<n.length;c+=1){const f=pp(o,n,c);r[c]?r[c].p(f,s):(r[c]=vp(f),r[c].c(),r[c].m(t,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=n.length}},d(o){o&&Re(t),ja(r,o)}}}function yp(e){let t,n=e[17].summary+"",r;return{c(){t=Pe("div"),r=Je(n),Ee(t,"class","summary")},m(o,s){Ue(o,t,s),we(t,r)},p(o,s){s&512&&n!==(n=o[17].summary+"")&&At(r,n)},d(o){o&&Re(t)}}}function vp(e){let t,n,r,o,s,c,f=e[17].title+"",d,h,y,b,_,T=Zr(e[17].created_at)+"",C,A,L=e[17].summary&&yp(e);return{c(){t=Pe("div"),n=Pe("a"),r=Pe("img"),s=Ye(),c=Pe("div"),d=Je(f),y=Ye(),L&&L.c(),b=Ye(),_=Pe("div"),C=Je(T),A=Ye(),Fr(r.src,o=e[17].image)||Ee(r,"src",o),Ee(c,"class","title"),Ee(n,"href",h=`#${e[17].id}`),Ee(_,"class","date"),Ee(t,"class","note")},m(H,I){Ue(H,t,I),we(t,n),we(n,r),we(n,s),we(n,c),we(c,d),we(t,y),L&&L.m(t,null),we(t,b),we(t,_),we(_,C),we(t,A)},p(H,I){I&512&&!Fr(r.src,o=H[17].image)&&Ee(r,"src",o),I&512&&f!==(f=H[17].title+"")&&At(d,f),I&512&&h!==(h=`#${H[17].id}`)&&Ee(n,"href",h),H[17].summary?L?L.p(H,I):(L=yp(H),L.c(),L.m(t,b)):L&&(L.d(1),L=null),I&512&&T!==(T=Zr(H[17].created_at)+"")&&At(C,T)},d(H){H&&Re(t),L&&L.d()}}}function _p(e){let t,n;return t=new U4({props:{class:"short-notes",options:{type:"loop",gap:"1rem",pagination:!1,perPage:3,breakpoints:{640:{perPage:2}},autoplay:!0},$$slots:{default:[J4]},$$scope:{ctx:e}}}),{c(){no(t.$$.fragment)},m(r,o){ur(t,r,o),n=!0},p(r,o){const s={};o&134217856&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(r){n||(Fe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){lr(t,r)}}}function Y4(e){let t,n,r=Zr(e[17].created_at,!0)+"",o,s,c=e[17].summary+"",f,d,h;return{c(){t=Pe("a"),n=Pe("div"),o=Je(r),s=Ye(),f=Je(c),h=Ye(),Ee(n,"class","date"),Ee(t,"href",d=`#${e[17].id}`)},m(y,b){Ue(y,t,b),we(t,n),we(n,o),we(t,s),we(t,f),Ue(y,h,b)},p(y,b){b&128&&r!==(r=Zr(y[17].created_at,!0)+"")&&At(o,r),b&128&&c!==(c=y[17].summary+"")&&At(f,c),b&128&&d!==(d=`#${y[17].id}`)&&Ee(t,"href",d)},d(y){y&&(Re(t),Re(h))}}}function Ep(e){let t,n;return t=new V4({props:{$$slots:{default:[Y4]},$$scope:{ctx:e}}}),{c(){no(t.$$.fragment)},m(r,o){ur(t,r,o),n=!0},p(r,o){const s={};o&134217856&&(s.$$scope={dirty:o,ctx:r}),t.$set(s)},i(r){n||(Fe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){lr(t,r)}}}function J4(e){let t,n,r=Kr(e[7]),o=[];for(let c=0;c<r.length;c+=1)o[c]=Ep(hp(e,r,c));const s=c=>Ge(o[c],1,1,()=>{o[c]=null});return{c(){for(let c=0;c<o.length;c+=1)o[c].c();t=Ro()},m(c,f){for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(c,f);Ue(c,t,f),n=!0},p(c,f){if(f&128){r=Kr(c[7]);let d;for(d=0;d<r.length;d+=1){const h=hp(c,r,d);o[d]?(o[d].p(h,f),Fe(o[d],1)):(o[d]=Ep(h),o[d].c(),Fe(o[d],1),o[d].m(t.parentNode,t))}for(eo(),d=r.length;d<o.length;d+=1)s(d);to()}},i(c){if(!n){for(let f=0;f<r.length;f+=1)Fe(o[f]);n=!0}},o(c){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)Ge(o[f]);n=!1},d(c){c&&Re(t),ja(o,c)}}}function kp(e){let t,n,r=Kr(e[8]),o=[];for(let s=0;s<r.length;s+=1)o[s]=Sp(fp(e,r,s));return{c(){t=Pe("div"),n=Pe("ul");for(let s=0;s<o.length;s+=1)o[s].c();Ee(t,"class","listing-notes")},m(s,c){Ue(s,t,c),we(t,n);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(n,null)},p(s,c){if(c&256){r=Kr(s[8]);let f;for(f=0;f<r.length;f+=1){const d=fp(s,r,f);o[f]?o[f].p(d,c):(o[f]=Sp(d),o[f].c(),o[f].m(n,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}},d(s){s&&Re(t),ja(o,s)}}}function Ap(e){let t,n=e[17].summary+"",r;return{c(){t=Pe("div"),r=Je(n),Ee(t,"class","summary")},m(o,s){Ue(o,t,s),we(t,r)},p(o,s){s&256&&n!==(n=o[17].summary+"")&&At(r,n)},d(o){o&&Re(t)}}}function Sp(e){let t,n,r=e[17].title+"",o,s,c,f,d,h=Zr(e[17].created_at)+"",y,b,_=e[17].summary&&Ap(e);return{c(){t=Pe("li"),n=Pe("a"),o=Je(r),c=Ye(),_&&_.c(),f=Ye(),d=Pe("div"),y=Je(h),b=Ye(),Ee(n,"href",s=`#${e[17].id}`),Ee(d,"class","date")},m(T,C){Ue(T,t,C),we(t,n),we(n,o),we(t,c),_&&_.m(t,null),we(t,f),we(t,d),we(d,y),we(t,b)},p(T,C){C&256&&r!==(r=T[17].title+"")&&At(o,r),C&256&&s!==(s=`#${T[17].id}`)&&Ee(n,"href",s),T[17].summary?_?_.p(T,C):(_=Ap(T),_.c(),_.m(t,f)):_&&(_.d(1),_=null),C&256&&h!==(h=Zr(T[17].created_at)+"")&&At(y,h)},d(T){T&&Re(t),_&&_.d()}}}function X4(e){let t,n,r,o,s=e[5].slice(0,9)+"..."+e[5].slice(-5),c,f,d,h,y,b,_,T,C,A,L,H,I,N,l,w,p=e[6].length>0&&wp(e);function E(z,V){return z[0]==""?W4:K4}let $=E(e),R=$(e);const P=[Z4,G4],v=[];function x(z,V){return z[1].length>0?0:1}return I=x(e),N=v[I]=P[I](e),{c(){t=Pe("div"),n=Pe("div"),r=Je("Profile: "),o=Pe("a"),c=Je(s),d=Ye(),h=Pe("h1"),y=Pe("div"),b=Pe("img"),T=Ye(),C=Je(e[2]),A=Ye(),p&&p.c(),L=Ye(),R.c(),H=Ye(),N.c(),l=Ro(),Ee(o,"href",f="https://njump.me/"+e[5]),Ee(n,"class","external-link"),Fr(b.src,_=e[3])||Ee(b,"src",_),Ee(y,"class","picture-container"),Ee(t,"class","header home")},m(z,V){Ue(z,t,V),we(t,n),we(n,r),we(n,o),we(o,c),we(t,d),we(t,h),we(h,y),we(y,b),we(h,T),we(h,C),Ue(z,A,V),p&&p.m(z,V),Ue(z,L,V),R.m(z,V),Ue(z,H,V),v[I].m(z,V),Ue(z,l,V),w=!0},p(z,[V]){(!w||V&32)&&s!==(s=z[5].slice(0,9)+"..."+z[5].slice(-5))&&At(c,s),(!w||V&32&&f!==(f="https://njump.me/"+z[5]))&&Ee(o,"href",f),(!w||V&8&&!Fr(b.src,_=z[3]))&&Ee(b,"src",_),(!w||V&4)&&At(C,z[2]),z[6].length>0?p?p.p(z,V):(p=wp(z),p.c(),p.m(L.parentNode,L)):p&&(p.d(1),p=null),$===($=E(z))&&R?R.p(z,V):(R.d(1),R=$(z),R&&(R.c(),R.m(H.parentNode,H)));let O=I;I=x(z),I===O?v[I].p(z,V):(eo(),Ge(v[O],1,1,()=>{v[O]=null}),to(),N=v[I],N?N.p(z,V):(N=v[I]=P[I](z),N.c()),Fe(N,1),N.m(l.parentNode,l))},i(z){w||(Fe(N),w=!0)},o(z){Ge(N),w=!1},d(z){z&&(Re(t),Re(A),Re(L),Re(H),Re(l)),p&&p.d(z),R.d(z),v[I].d(z)}}}function Q4(e,t,n){let r,o,s,c=[],f=[],d=new Set,h="",y="",b="",_="",T="",C="",A=0,{tag:L}=t,{profile:H}=t;qa(async()=>{const{npub:N,relays:l,topNotes:w,shortChars:p,topics:E}=Fa();n(5,_=N),T=H.pubkey;const $=JSON.parse(H.content);n(2,h=$.name||null),n(3,y=$.picture||null),n(4,b=$.about||null),n(12,A=w),n(6,C=E),ga.set(h+" home, powered by Nostr");let R={kinds:[30023],authors:[T],limit:500};L&&(n(0,L=L.substring(5)),R={...R,"#t":[L]});let P=pa.subscribeMany(l,[R],{onevent(v){d.has(v.id)||(n(1,c=[...c,v]),d.add(v.id),c.sort((x,z)=>z.created_at-x.created_at))},oneose(){console.log("No subscribers left. Closing subscription."),P.close()}});p>0&&(P=pa.subscribeMany(l,[{kinds:[1],authors:[T],limit:1e3}],{onevent:async v=>{if(!d.has(v.id)&&v.content.length>p&&bE(v)){if(v=await I(v),v.content.length<p)return;n(11,f=[...f,v]),d.add(v.id),f.sort((x,z)=>z.created_at-x.created_at)}},oneose(){console.log("No subscribers left. Closing subscription."),P.close()}}))});async function I(N){let l;return l=await L0(N.content),l=I0(l),l=mE(l),N.content=l,N}return e.$$set=N=>{"tag"in N&&n(0,L=N.tag),"profile"in N&&n(10,H=N.profile)},e.$$.update=()=>{e.$$.dirty&4098&&n(9,r=A>0?c.slice(0,A).map(ea):[]),e.$$.dirty&4098&&n(8,o=c.slice(A).map(ea)),e.$$.dirty&2048&&n(7,s=f.map(ea))},ga.subscribe(N=>{document.title=N}),[L,c,h,y,b,_,C,s,o,r,H,f,A]}class cw extends Uo{constructor(t){super(),zo(this,t,Q4,X4,cr,{tag:0,profile:10})}}var uw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e6(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lw={exports:{}};(function(e){(function(){function t(l){var w={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `` and `` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(l===!1)return JSON.parse(JSON.stringify(w));var p={};for(var E in w)w.hasOwnProperty(E)&&(p[E]=w[E].defaultValue);return p}function n(){var l=t(!0),w={};for(var p in l)l.hasOwnProperty(p)&&(w[p]=!0);return w}var r={},o={},s={},c=t(!0),f="vanilla",d={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:t(!0),allOn:n()};r.helper={},r.extensions={},r.setOption=function(l,w){return c[l]=w,this},r.getOption=function(l){return c[l]},r.getOptions=function(){return c},r.resetOptions=function(){c=t(!0)},r.setFlavor=function(l){if(!d.hasOwnProperty(l))throw Error(l+" flavor was not found");r.resetOptions();var w=d[l];f=l;for(var p in w)w.hasOwnProperty(p)&&(c[p]=w[p])},r.getFlavor=function(){return f},r.getFlavorOptions=function(l){if(d.hasOwnProperty(l))return d[l]},r.getDefaultOptions=function(l){return t(l)},r.subParser=function(l,w){if(r.helper.isString(l))if(typeof w<"u")o[l]=w;else{if(o.hasOwnProperty(l))return o[l];throw Error("SubParser named "+l+" not registered!")}},r.extension=function(l,w){if(!r.helper.isString(l))throw Error("Extension 'name' must be a string");if(l=r.helper.stdExtName(l),r.helper.isUndefined(w)){if(!s.hasOwnProperty(l))throw Error("Extension named "+l+" is not registered!");return s[l]}else{typeof w=="function"&&(w=w()),r.helper.isArray(w)||(w=[w]);var p=h(w,l);if(p.valid)s[l]=w;else throw Error(p.error)}},r.getAllExtensions=function(){return s},r.removeExtension=function(l){delete s[l]},r.resetExtensions=function(){s={}};function h(l,w){var p=w?"Error in "+w+" extension->":"Error in unnamed extension",E={valid:!0,error:""};r.helper.isArray(l)||(l=[l]);for(var $=0;$<l.length;++$){var R=p+" sub-extension "+$+": ",P=l[$];if(typeof P!="object")return E.valid=!1,E.error=R+"must be an object, but "+typeof P+" given",E;if(!r.helper.isString(P.type))return E.valid=!1,E.error=R+'property "type" must be a string, but '+typeof P.type+" given",E;var v=P.type=P.type.toLowerCase();if(v==="language"&&(v=P.type="lang"),v==="html"&&(v=P.type="output"),v!=="lang"&&v!=="output"&&v!=="listener")return E.valid=!1,E.error=R+"type "+v+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',E;if(v==="listener"){if(r.helper.isUndefined(P.listeners))return E.valid=!1,E.error=R+'. Extensions of type "listener" must have a property called "listeners"',E}else if(r.helper.isUndefined(P.filter)&&r.helper.isUndefined(P.regex))return E.valid=!1,E.error=R+v+' extensions must define either a "regex" property or a "filter" method',E;if(P.listeners){if(typeof P.listeners!="object")return E.valid=!1,E.error=R+'"listeners" property must be an object but '+typeof P.listeners+" given",E;for(var x in P.listeners)if(P.listeners.hasOwnProperty(x)&&typeof P.listeners[x]!="function")return E.valid=!1,E.error=R+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+x+" must be a function but "+typeof P.listeners[x]+" given",E}if(P.filter){if(typeof P.filter!="function")return E.valid=!1,E.error=R+'"filter" must be a function, but '+typeof P.filter+" given",E}else if(P.regex){if(r.helper.isString(P.regex)&&(P.regex=new RegExp(P.regex,"g")),!(P.regex instanceof RegExp))return E.valid=!1,E.error=R+'"regex" property must either be a string or a RegExp object, but '+typeof P.regex+" given",E;if(r.helper.isUndefined(P.replace))return E.valid=!1,E.error=R+'"regex" extensions must implement a replace string or function',E}}return E}r.validateExtension=function(l){var w=h(l,null);return w.valid?!0:(console.warn(w.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(l){return typeof l=="string"||l instanceof String},r.helper.isFunction=function(l){var w={};return l&&w.toString.call(l)==="[object Function]"},r.helper.isArray=function(l){return Array.isArray(l)},r.helper.isUndefined=function(l){return typeof l>"u"},r.helper.forEach=function(l,w){if(r.helper.isUndefined(l))throw new Error("obj param is required");if(r.helper.isUndefined(w))throw new Error("callback param is required");if(!r.helper.isFunction(w))throw new Error("callback param must be a function/closure");if(typeof l.forEach=="function")l.forEach(w);else if(r.helper.isArray(l))for(var p=0;p<l.length;p++)w(l[p],p,l);else if(typeof l=="object")for(var E in l)l.hasOwnProperty(E)&&w(l[E],E,l);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(l){return l.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function y(l,w){var p=w.charCodeAt(0);return"E"+p+"E"}r.helper.escapeCharactersCallback=y,r.helper.escapeCharacters=function(l,w,p){var E="(["+w.replace(/([\[\]\\])/g,"\\$1")+"])";p&&(E="\\\\"+E);var $=new RegExp(E,"g");return l=l.replace($,y),l},r.helper.unescapeHTMLEntities=function(l){return l.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var b=function(l,w,p,E){var $=E||"",R=$.indexOf("g")>-1,P=new RegExp(w+"|"+p,"g"+$.replace(/g/g,"")),v=new RegExp(w,$.replace(/g/g,"")),x=[],z,V,O,S,D;do for(z=0;O=P.exec(l);)if(v.test(O[0]))z++||(V=P.lastIndex,S=V-O[0].length);else if(z&&!--z){D=O.index+O[0].length;var K={left:{start:S,end:V},match:{start:V,end:O.index},right:{start:O.index,end:D},wholeMatch:{start:S,end:D}};if(x.push(K),!R)return x}while(z&&(P.lastIndex=V));return x};r.helper.matchRecursiveRegExp=function(l,w,p,E){for(var $=b(l,w,p,E),R=[],P=0;P<$.length;++P)R.push([l.slice($[P].wholeMatch.start,$[P].wholeMatch.end),l.slice($[P].match.start,$[P].match.end),l.slice($[P].left.start,$[P].left.end),l.slice($[P].right.start,$[P].right.end)]);return R},r.helper.replaceRecursiveRegExp=function(l,w,p,E,$){if(!r.helper.isFunction(w)){var R=w;w=function(){return R}}var P=b(l,p,E,$),v=l,x=P.length;if(x>0){var z=[];P[0].wholeMatch.start!==0&&z.push(l.slice(0,P[0].wholeMatch.start));for(var V=0;V<x;++V)z.push(w(l.slice(P[V].wholeMatch.start,P[V].wholeMatch.end),l.slice(P[V].match.start,P[V].match.end),l.slice(P[V].left.start,P[V].left.end),l.slice(P[V].right.start,P[V].right.end))),V<x-1&&z.push(l.slice(P[V].wholeMatch.end,P[V+1].wholeMatch.start));P[x-1].wholeMatch.end<l.length&&z.push(l.slice(P[x-1].wholeMatch.end)),v=z.join("")}return v},r.helper.regexIndexOf=function(l,w,p){if(!r.helper.isString(l))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(w instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var E=l.substring(p||0).search(w);return E>=0?E+(p||0):E},r.helper.splitAtIndex=function(l,w){if(!r.helper.isString(l))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[l.substring(0,w),l.substring(w)]},r.helper.encodeEmailAddress=function(l){var w=[function(p){return"&#"+p.charCodeAt(0)+";"},function(p){return"&#x"+p.charCodeAt(0).toString(16)+";"},function(p){return p}];return l=l.replace(/./g,function(p){if(p==="@")p=w[Math.floor(Math.random()*2)](p);else{var E=Math.random();p=E>.9?w[2](p):E>.45?w[1](p):w[0](p)}return p}),l},r.helper.padEnd=function(w,p,E){return p=p>>0,E=String(E||" "),w.length>p?String(w):(p=p-w.length,p>E.length&&(E+=E.repeat(p/E.length)),String(w)+E.slice(0,p))},typeof console>"u"&&(console={warn:function(l){alert(l)},log:function(l){alert(l)},error:function(l){throw l}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"","-1":"",100:"",1234:"","1st_place_medal":"","2nd_place_medal":"","3rd_place_medal":"","8ball":"",a:"",ab:"",abc:"",abcd:"",accept:"",aerial_tramway:"",airplane:"",alarm_clock:"",alembic:"",alien:"",ambulance:"",amphora:"",anchor:"",angel:"",anger:"",angry:"",anguished:"",ant:"",apple:"",aquarius:"",aries:"",arrow_backward:"",arrow_double_down:"",arrow_double_up:"",arrow_down:"",arrow_down_small:"",arrow_forward:"",arrow_heading_down:"",arrow_heading_up:"",arrow_left:"",arrow_lower_left:"",arrow_lower_right:"",arrow_right:"",arrow_right_hook:"",arrow_up:"",arrow_up_down:"",arrow_up_small:"",arrow_upper_left:"",arrow_upper_right:"",arrows_clockwise:"",arrows_counterclockwise:"",art:"",articulated_lorry:"",artificial_satellite:"",astonished:"",athletic_shoe:"",atm:"",atom_symbol:"",avocado:"",b:"",baby:"",baby_bottle:"",baby_chick:"",baby_symbol:"",back:"",bacon:"",badminton:"",baggage_claim:"",baguette_bread:"",balance_scale:"",balloon:"",ballot_box:"",ballot_box_with_check:"",bamboo:"",banana:"",bangbang:"",bank:"",bar_chart:"",barber:"",baseball:"",basketball:"",basketball_man:"",basketball_woman:"&zwj;",bat:"",bath:"",bathtub:"",battery:"",beach_umbrella:"",bear:"",bed:"",bee:"",beer:"",beers:"",beetle:"",beginner:"",bell:"",bellhop_bell:"",bento:"",biking_man:"",bike:"",biking_woman:"&zwj;",bikini:"",biohazard:"",bird:"",birthday:"",black_circle:"",black_flag:"",black_heart:"",black_joker:"",black_large_square:"",black_medium_small_square:"",black_medium_square:"",black_nib:"",black_small_square:"",black_square_button:"",blonde_man:"",blonde_woman:"&zwj;",blossom:"",blowfish:"",blue_book:"",blue_car:"",blue_heart:"",blush:"",boar:"",boat:"",bomb:"",book:"",bookmark:"",bookmark_tabs:"",books:"",boom:"",boot:"",bouquet:"",bowing_man:"",bow_and_arrow:"",bowing_woman:"&zwj;",bowling:"",boxing_glove:"",boy:"",bread:"",bride_with_veil:"",bridge_at_night:"",briefcase:"",broken_heart:"",bug:"",building_construction:"",bulb:"",bullettrain_front:"",bullettrain_side:"",burrito:"",bus:"",business_suit_levitating:"",busstop:"",bust_in_silhouette:"",busts_in_silhouette:"",butterfly:"",cactus:"",cake:"",calendar:"",call_me_hand:"",calling:"",camel:"",camera:"",camera_flash:"",camping:"",cancer:"",candle:"",candy:"",canoe:"",capital_abcd:"",capricorn:"",car:"",card_file_box:"",card_index:"",card_index_dividers:"",carousel_horse:"",carrot:"",cat:"",cat2:"",cd:"",chains:"",champagne:"",chart:"",chart_with_downwards_trend:"",chart_with_upwards_trend:"",checkered_flag:"",cheese:"",cherries:"",cherry_blossom:"",chestnut:"",chicken:"",children_crossing:"",chipmunk:"",chocolate_bar:"",christmas_tree:"",church:"",cinema:"",circus_tent:"",city_sunrise:"",city_sunset:"",cityscape:"",cl:"",clamp:"",clap:"",clapper:"",classical_building:"",clinking_glasses:"",clipboard:"",clock1:"",clock10:"",clock1030:"",clock11:"",clock1130:"",clock12:"",clock1230:"",clock130:"",clock2:"",clock230:"",clock3:"",clock330:"",clock4:"",clock430:"",clock5:"",clock530:"",clock6:"",clock630:"",clock7:"",clock730:"",clock8:"",clock830:"",clock9:"",clock930:"",closed_book:"",closed_lock_with_key:"",closed_umbrella:"",cloud:"",cloud_with_lightning:"",cloud_with_lightning_and_rain:"",cloud_with_rain:"",cloud_with_snow:"",clown_face:"",clubs:"",cocktail:"",coffee:"",coffin:"",cold_sweat:"",comet:"",computer:"",computer_mouse:"",confetti_ball:"",confounded:"",confused:"",congratulations:"",construction:"",construction_worker_man:"",construction_worker_woman:"&zwj;",control_knobs:"",convenience_store:"",cookie:"",cool:"",policeman:"",copyright:"",corn:"",couch_and_lamp:"",couple:"",couple_with_heart_woman_man:"",couple_with_heart_man_man:"&zwj;&zwj;",couple_with_heart_woman_woman:"&zwj;&zwj;",couplekiss_man_man:"&zwj;&zwj;&zwj;",couplekiss_man_woman:"",couplekiss_woman_woman:"&zwj;&zwj;&zwj;",cow:"",cow2:"",cowboy_hat_face:"",crab:"",crayon:"",credit_card:"",crescent_moon:"",cricket:"",crocodile:"",croissant:"",crossed_fingers:"",crossed_flags:"",crossed_swords:"",crown:"",cry:"",crying_cat_face:"",crystal_ball:"",cucumber:"",cupid:"",curly_loop:"",currency_exchange:"",curry:"",custard:"",customs:"",cyclone:"",dagger:"",dancer:"",dancing_women:"",dancing_men:"&zwj;",dango:"",dark_sunglasses:"",dart:"",dash:"",date:"",deciduous_tree:"",deer:"",department_store:"",derelict_house:"",desert:"",desert_island:"",desktop_computer:"",male_detective:"",diamond_shape_with_a_dot_inside:"",diamonds:"",disappointed:"",disappointed_relieved:"",dizzy:"",dizzy_face:"",do_not_litter:"",dog:"",dog2:"",dollar:"",dolls:"",dolphin:"",door:"",doughnut:"",dove:"",dragon:"",dragon_face:"",dress:"",dromedary_camel:"",drooling_face:"",droplet:"",drum:"",duck:"",dvd:"","e-mail":"",eagle:"",ear:"",ear_of_rice:"",earth_africa:"",earth_americas:"",earth_asia:"",egg:"",eggplant:"",eight_pointed_black_star:"",eight_spoked_asterisk:"",electric_plug:"",elephant:"",email:"",end:"",envelope_with_arrow:"",euro:"",european_castle:"",european_post_office:"",evergreen_tree:"",exclamation:"",expressionless:"",eye:"",eye_speech_bubble:"&zwj;",eyeglasses:"",eyes:"",face_with_head_bandage:"",face_with_thermometer:"",fist_oncoming:"",factory:"",fallen_leaf:"",family_man_woman_boy:"",family_man_boy:"&zwj;",family_man_boy_boy:"&zwj;&zwj;",family_man_girl:"&zwj;",family_man_girl_boy:"&zwj;&zwj;",family_man_girl_girl:"&zwj;&zwj;",family_man_man_boy:"&zwj;&zwj;",family_man_man_boy_boy:"&zwj;&zwj;&zwj;",family_man_man_girl:"&zwj;&zwj;",family_man_man_girl_boy:"&zwj;&zwj;&zwj;",family_man_man_girl_girl:"&zwj;&zwj;&zwj;",family_man_woman_boy_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl:"&zwj;&zwj;",family_man_woman_girl_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl_girl:"&zwj;&zwj;&zwj;",family_woman_boy:"&zwj;",family_woman_boy_boy:"&zwj;&zwj;",family_woman_girl:"&zwj;",family_woman_girl_boy:"&zwj;&zwj;",family_woman_girl_girl:"&zwj;&zwj;",family_woman_woman_boy:"&zwj;&zwj;",family_woman_woman_boy_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl:"&zwj;&zwj;",family_woman_woman_girl_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl_girl:"&zwj;&zwj;&zwj;",fast_forward:"",fax:"",fearful:"",feet:"",female_detective:"&zwj;",ferris_wheel:"",ferry:"",field_hockey:"",file_cabinet:"",file_folder:"",film_projector:"",film_strip:"",fire:"",fire_engine:"",fireworks:"",first_quarter_moon:"",first_quarter_moon_with_face:"",fish:"",fish_cake:"",fishing_pole_and_fish:"",fist_raised:"",fist_left:"",fist_right:"",flags:"",flashlight:"",fleur_de_lis:"",flight_arrival:"",flight_departure:"",floppy_disk:"",flower_playing_cards:"",flushed:"",fog:"",foggy:"",football:"",footprints:"",fork_and_knife:"",fountain:"",fountain_pen:"",four_leaf_clover:"",fox_face:"",framed_picture:"",free:"",fried_egg:"",fried_shrimp:"",fries:"",frog:"",frowning:"",frowning_face:"",frowning_man:"&zwj;",frowning_woman:"",middle_finger:"",fuelpump:"",full_moon:"",full_moon_with_face:"",funeral_urn:"",game_die:"",gear:"",gem:"",gemini:"",ghost:"",gift:"",gift_heart:"",girl:"",globe_with_meridians:"",goal_net:"",goat:"",golf:"",golfing_man:"",golfing_woman:"&zwj;",gorilla:"",grapes:"",green_apple:"",green_book:"",green_heart:"",green_salad:"",grey_exclamation:"",grey_question:"",grimacing:"",grin:"",grinning:"",guardsman:"",guardswoman:"&zwj;",guitar:"",gun:"",haircut_woman:"",haircut_man:"&zwj;",hamburger:"",hammer:"",hammer_and_pick:"",hammer_and_wrench:"",hamster:"",hand:"",handbag:"",handshake:"",hankey:"",hatched_chick:"",hatching_chick:"",headphones:"",hear_no_evil:"",heart:"",heart_decoration:"",heart_eyes:"",heart_eyes_cat:"",heartbeat:"",heartpulse:"",hearts:"",heavy_check_mark:"",heavy_division_sign:"",heavy_dollar_sign:"",heavy_heart_exclamation:"",heavy_minus_sign:"",heavy_multiplication_x:"",heavy_plus_sign:"",helicopter:"",herb:"",hibiscus:"",high_brightness:"",high_heel:"",hocho:"",hole:"",honey_pot:"",horse:"",horse_racing:"",hospital:"",hot_pepper:"",hotdog:"",hotel:"",hotsprings:"",hourglass:"",hourglass_flowing_sand:"",house:"",house_with_garden:"",houses:"",hugs:"",hushed:"",ice_cream:"",ice_hockey:"",ice_skate:"",icecream:"",id:"",ideograph_advantage:"",imp:"",inbox_tray:"",incoming_envelope:"",tipping_hand_woman:"",information_source:"",innocent:"",interrobang:"",iphone:"",izakaya_lantern:"",jack_o_lantern:"",japan:"",japanese_castle:"",japanese_goblin:"",japanese_ogre:"",jeans:"",joy:"",joy_cat:"",joystick:"",kaaba:"",key:"",keyboard:"",keycap_ten:"",kick_scooter:"",kimono:"",kiss:"",kissing:"",kissing_cat:"",kissing_closed_eyes:"",kissing_heart:"",kissing_smiling_eyes:"",kiwi_fruit:"",koala:"",koko:"",label:"",large_blue_circle:"",large_blue_diamond:"",large_orange_diamond:"",last_quarter_moon:"",last_quarter_moon_with_face:"",latin_cross:"",laughing:"",leaves:"",ledger:"",left_luggage:"",left_right_arrow:"",leftwards_arrow_with_hook:"",lemon:"",leo:"",leopard:"",level_slider:"",libra:"",light_rail:"",link:"",lion:"",lips:"",lipstick:"",lizard:"",lock:"",lock_with_ink_pen:"",lollipop:"",loop:"",loud_sound:"",loudspeaker:"",love_hotel:"",love_letter:"",low_brightness:"",lying_face:"",m:"",mag:"",mag_right:"",mahjong:"",mailbox:"",mailbox_closed:"",mailbox_with_mail:"",mailbox_with_no_mail:"",man:"",man_artist:"&zwj;",man_astronaut:"&zwj;",man_cartwheeling:"&zwj;",man_cook:"&zwj;",man_dancing:"",man_facepalming:"&zwj;",man_factory_worker:"&zwj;",man_farmer:"&zwj;",man_firefighter:"&zwj;",man_health_worker:"&zwj;",man_in_tuxedo:"",man_judge:"&zwj;",man_juggling:"&zwj;",man_mechanic:"&zwj;",man_office_worker:"&zwj;",man_pilot:"&zwj;",man_playing_handball:"&zwj;",man_playing_water_polo:"&zwj;",man_scientist:"&zwj;",man_shrugging:"&zwj;",man_singer:"&zwj;",man_student:"&zwj;",man_teacher:"&zwj;",man_technologist:"&zwj;",man_with_gua_pi_mao:"",man_with_turban:"",tangerine:"",mans_shoe:"",mantelpiece_clock:"",maple_leaf:"",martial_arts_uniform:"",mask:"",massage_woman:"",massage_man:"&zwj;",meat_on_bone:"",medal_military:"",medal_sports:"",mega:"",melon:"",memo:"",men_wrestling:"&zwj;",menorah:"",mens:"",metal:"",metro:"",microphone:"",microscope:"",milk_glass:"",milky_way:"",minibus:"",minidisc:"",mobile_phone_off:"",money_mouth_face:"",money_with_wings:"",moneybag:"",monkey:"",monkey_face:"",monorail:"",moon:"",mortar_board:"",mosque:"",motor_boat:"",motor_scooter:"",motorcycle:"",motorway:"",mount_fuji:"",mountain:"",mountain_biking_man:"",mountain_biking_woman:"&zwj;",mountain_cableway:"",mountain_railway:"",mountain_snow:"",mouse:"",mouse2:"",movie_camera:"",moyai:"",mrs_claus:"",muscle:"",mushroom:"",musical_keyboard:"",musical_note:"",musical_score:"",mute:"",nail_care:"",name_badge:"",national_park:"",nauseated_face:"",necktie:"",negative_squared_cross_mark:"",nerd_face:"",neutral_face:"",new:"",new_moon:"",new_moon_with_face:"",newspaper:"",newspaper_roll:"",next_track_button:"",ng:"",no_good_man:"&zwj;",no_good_woman:"",night_with_stars:"",no_bell:"",no_bicycles:"",no_entry:"",no_entry_sign:"",no_mobile_phones:"",no_mouth:"",no_pedestrians:"",no_smoking:"","non-potable_water":"",nose:"",notebook:"",notebook_with_decorative_cover:"",notes:"",nut_and_bolt:"",o:"",o2:"",ocean:"",octopus:"",oden:"",office:"",oil_drum:"",ok:"",ok_hand:"",ok_man:"&zwj;",ok_woman:"",old_key:"",older_man:"",older_woman:"",om:"",on:"",oncoming_automobile:"",oncoming_bus:"",oncoming_police_car:"",oncoming_taxi:"",open_file_folder:"",open_hands:"",open_mouth:"",open_umbrella:"",ophiuchus:"",orange_book:"",orthodox_cross:"",outbox_tray:"",owl:"",ox:"",package:"",page_facing_up:"",page_with_curl:"",pager:"",paintbrush:"",palm_tree:"",pancakes:"",panda_face:"",paperclip:"",paperclips:"",parasol_on_ground:"",parking:"",part_alternation_mark:"",partly_sunny:"",passenger_ship:"",passport_control:"",pause_button:"",peace_symbol:"",peach:"",peanuts:"",pear:"",pen:"",pencil2:"",penguin:"",pensive:"",performing_arts:"",persevere:"",person_fencing:"",pouting_woman:"",phone:"",pick:"",pig:"",pig2:"",pig_nose:"",pill:"",pineapple:"",ping_pong:"",pisces:"",pizza:"",place_of_worship:"",plate_with_cutlery:"",play_or_pause_button:"",point_down:"",point_left:"",point_right:"",point_up:"",point_up_2:"",police_car:"",policewoman:"&zwj;",poodle:"",popcorn:"",post_office:"",postal_horn:"",postbox:"",potable_water:"",potato:"",pouch:"",poultry_leg:"",pound:"",rage:"",pouting_cat:"",pouting_man:"&zwj;",pray:"",prayer_beads:"",pregnant_woman:"",previous_track_button:"",prince:"",princess:"",printer:"",purple_heart:"",purse:"",pushpin:"",put_litter_in_its_place:"",question:"",rabbit:"",rabbit2:"",racehorse:"",racing_car:"",radio:"",radio_button:"",radioactive:"",railway_car:"",railway_track:"",rainbow:"",rainbow_flag:"&zwj;",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",raised_hands:"",raising_hand_woman:"",raising_hand_man:"&zwj;",ram:"",ramen:"",rat:"",record_button:"",recycle:"",red_circle:"",registered:"",relaxed:"",relieved:"",reminder_ribbon:"",repeat:"",repeat_one:"",rescue_worker_helmet:"",restroom:"",revolving_hearts:"",rewind:"",rhinoceros:"",ribbon:"",rice:"",rice_ball:"",rice_cracker:"",rice_scene:"",right_anger_bubble:"",ring:"",robot:"",rocket:"",rofl:"",roll_eyes:"",roller_coaster:"",rooster:"",rose:"",rosette:"",rotating_light:"",round_pushpin:"",rowing_man:"",rowing_woman:"&zwj;",rugby_football:"",running_man:"",running_shirt_with_sash:"",running_woman:"&zwj;",sa:"",sagittarius:"",sake:"",sandal:"",santa:"",satellite:"",saxophone:"",school:"",school_satchel:"",scissors:"",scorpion:"",scorpius:"",scream:"",scream_cat:"",scroll:"",seat:"",secret:"",see_no_evil:"",seedling:"",selfie:"",shallow_pan_of_food:"",shamrock:"",shark:"",shaved_ice:"",sheep:"",shell:"",shield:"",shinto_shrine:"",ship:"",shirt:"",shopping:"",shopping_cart:"",shower:"",shrimp:"",signal_strength:"",six_pointed_star:"",ski:"",skier:"",skull:"",skull_and_crossbones:"",sleeping:"",sleeping_bed:"",sleepy:"",slightly_frowning_face:"",slightly_smiling_face:"",slot_machine:"",small_airplane:"",small_blue_diamond:"",small_orange_diamond:"",small_red_triangle:"",small_red_triangle_down:"",smile:"",smile_cat:"",smiley:"",smiley_cat:"",smiling_imp:"",smirk:"",smirk_cat:"",smoking:"",snail:"",snake:"",sneezing_face:"",snowboarder:"",snowflake:"",snowman:"",snowman_with_snow:"",sob:"",soccer:"",soon:"",sos:"",sound:"",space_invader:"",spades:"",spaghetti:"",sparkle:"",sparkler:"",sparkles:"",sparkling_heart:"",speak_no_evil:"",speaker:"",speaking_head:"",speech_balloon:"",speedboat:"",spider:"",spider_web:"",spiral_calendar:"",spiral_notepad:"",spoon:"",squid:"",stadium:"",star:"",star2:"",star_and_crescent:"",star_of_david:"",stars:"",station:"",statue_of_liberty:"",steam_locomotive:"",stew:"",stop_button:"",stop_sign:"",stopwatch:"",straight_ruler:"",strawberry:"",stuck_out_tongue:"",stuck_out_tongue_closed_eyes:"",stuck_out_tongue_winking_eye:"",studio_microphone:"",stuffed_flatbread:"",sun_behind_large_cloud:"",sun_behind_rain_cloud:"",sun_behind_small_cloud:"",sun_with_face:"",sunflower:"",sunglasses:"",sunny:"",sunrise:"",sunrise_over_mountains:"",surfing_man:"",surfing_woman:"&zwj;",sushi:"",suspension_railway:"",sweat:"",sweat_drops:"",sweat_smile:"",sweet_potato:"",swimming_man:"",swimming_woman:"&zwj;",symbols:"",synagogue:"",syringe:"",taco:"",tada:"",tanabata_tree:"",taurus:"",taxi:"",tea:"",telephone_receiver:"",telescope:"",tennis:"",tent:"",thermometer:"",thinking:"",thought_balloon:"",ticket:"",tickets:"",tiger:"",tiger2:"",timer_clock:"",tipping_hand_man:"&zwj;",tired_face:"",tm:"",toilet:"",tokyo_tower:"",tomato:"",tongue:"",top:"",tophat:"",tornado:"",trackball:"",tractor:"",traffic_light:"",train:"",train2:"",tram:"",triangular_flag_on_post:"",triangular_ruler:"",trident:"",triumph:"",trolleybus:"",trophy:"",tropical_drink:"",tropical_fish:"",truck:"",trumpet:"",tulip:"",tumbler_glass:"",turkey:"",turtle:"",tv:"",twisted_rightwards_arrows:"",two_hearts:"",two_men_holding_hands:"",two_women_holding_hands:"",u5272:"",u5408:"",u55b6:"",u6307:"",u6708:"",u6709:"",u6e80:"",u7121:"",u7533:"",u7981:"",u7a7a:"",umbrella:"",unamused:"",underage:"",unicorn:"",unlock:"",up:"",upside_down_face:"",v:"",vertical_traffic_light:"",vhs:"",vibration_mode:"",video_camera:"",video_game:"",violin:"",virgo:"",volcano:"",volleyball:"",vs:"",vulcan_salute:"",walking_man:"",walking_woman:"&zwj;",waning_crescent_moon:"",waning_gibbous_moon:"",warning:"",wastebasket:"",watch:"",water_buffalo:"",watermelon:"",wave:"",wavy_dash:"",waxing_crescent_moon:"",wc:"",weary:"",wedding:"",weight_lifting_man:"",weight_lifting_woman:"&zwj;",whale:"",whale2:"",wheel_of_dharma:"",wheelchair:"",white_check_mark:"",white_circle:"",white_flag:"",white_flower:"",white_large_square:"",white_medium_small_square:"",white_medium_square:"",white_small_square:"",white_square_button:"",wilted_flower:"",wind_chime:"",wind_face:"",wine_glass:"",wink:"",wolf:"",woman:"",woman_artist:"&zwj;",woman_astronaut:"&zwj;",woman_cartwheeling:"&zwj;",woman_cook:"&zwj;",woman_facepalming:"&zwj;",woman_factory_worker:"&zwj;",woman_farmer:"&zwj;",woman_firefighter:"&zwj;",woman_health_worker:"&zwj;",woman_judge:"&zwj;",woman_juggling:"&zwj;",woman_mechanic:"&zwj;",woman_office_worker:"&zwj;",woman_pilot:"&zwj;",woman_playing_handball:"&zwj;",woman_playing_water_polo:"&zwj;",woman_scientist:"&zwj;",woman_shrugging:"&zwj;",woman_singer:"&zwj;",woman_student:"&zwj;",woman_teacher:"&zwj;",woman_technologist:"&zwj;",woman_with_turban:"&zwj;",womans_clothes:"",womans_hat:"",women_wrestling:"&zwj;",womens:"",world_map:"",worried:"",wrench:"",writing_hand:"",x:"",yellow_heart:"",yen:"",yin_yang:"",yum:"",zap:"",zipper_mouth_face:"",zzz:"",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(l){var w={},p=[],E=[],$={},R=f,P={parsed:{},raw:"",format:""};v();function v(){l=l||{};for(var S in c)c.hasOwnProperty(S)&&(w[S]=c[S]);if(typeof l=="object")for(var D in l)l.hasOwnProperty(D)&&(w[D]=l[D]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof l+" was passed instead.");w.extensions&&r.helper.forEach(w.extensions,x)}function x(S,D){if(D=D||null,r.helper.isString(S))if(S=r.helper.stdExtName(S),D=S,r.extensions[S]){console.warn("DEPRECATION WARNING: "+S+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),z(r.extensions[S],S);return}else if(!r.helper.isUndefined(s[S]))S=s[S];else throw Error('Extension "'+S+'" could not be loaded. It was either not found or is not a valid extension.');typeof S=="function"&&(S=S()),r.helper.isArray(S)||(S=[S]);var K=h(S,D);if(!K.valid)throw Error(K.error);for(var W=0;W<S.length;++W){switch(S[W].type){case"lang":p.push(S[W]);break;case"output":E.push(S[W]);break}if(S[W].hasOwnProperty("listeners"))for(var Z in S[W].listeners)S[W].listeners.hasOwnProperty(Z)&&V(Z,S[W].listeners[Z])}}function z(S,D){typeof S=="function"&&(S=S(new r.Converter)),r.helper.isArray(S)||(S=[S]);var K=h(S,D);if(!K.valid)throw Error(K.error);for(var W=0;W<S.length;++W)switch(S[W].type){case"lang":p.push(S[W]);break;case"output":E.push(S[W]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function V(S,D){if(!r.helper.isString(S))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof S+" given");if(typeof D!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof D+" given");$.hasOwnProperty(S)||($[S]=[]),$[S].push(D)}function O(S){var D=S.match(/^\s*/)[0].length,K=new RegExp("^\\s{0,"+D+"}","gm");return S.replace(K,"")}this._dispatch=function(D,K,W,Z){if($.hasOwnProperty(D))for(var G=0;G<$[D].length;++G){var oe=$[D][G](D,K,this,W,Z);oe&&typeof oe<"u"&&(K=oe)}return K},this.listen=function(S,D){return V(S,D),this},this.makeHtml=function(S){if(!S)return S;var D={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:p,outputModifiers:E,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return S=S.replace(//g,"T"),S=S.replace(/\$/g,"D"),S=S.replace(/\r\n/g,`
`),S=S.replace(/\r/g,`
`),S=S.replace(/\u00A0/g,"&nbsp;"),w.smartIndentationFix&&(S=O(S)),S=`

`+S+`

`,S=r.subParser("detab")(S,w,D),S=S.replace(/^[ \t]+$/mg,""),r.helper.forEach(p,function(K){S=r.subParser("runExtension")(K,S,w,D)}),S=r.subParser("metadata")(S,w,D),S=r.subParser("hashPreCodeTags")(S,w,D),S=r.subParser("githubCodeBlocks")(S,w,D),S=r.subParser("hashHTMLBlocks")(S,w,D),S=r.subParser("hashCodeTags")(S,w,D),S=r.subParser("stripLinkDefinitions")(S,w,D),S=r.subParser("blockGamut")(S,w,D),S=r.subParser("unhashHTMLSpans")(S,w,D),S=r.subParser("unescapeSpecialChars")(S,w,D),S=S.replace(/D/g,"$$"),S=S.replace(/T/g,""),S=r.subParser("completeHTMLDocument")(S,w,D),r.helper.forEach(E,function(K){S=r.subParser("runExtension")(K,S,w,D)}),P=D.metadata,S},this.makeMarkdown=this.makeMd=function(S,D){if(S=S.replace(/\r\n/g,`
`),S=S.replace(/\r/g,`
`),S=S.replace(/>[ \t]+</,">NBSP;<"),!D)if(window&&window.document)D=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var K=D.createElement("div");K.innerHTML=S;var W={preList:me(K)};he(K);for(var Z=K.childNodes,G="",oe=0;oe<Z.length;oe++)G+=r.subParser("makeMarkdown.node")(Z[oe],W);function he(Ae){for(var re=0;re<Ae.childNodes.length;++re){var ye=Ae.childNodes[re];ye.nodeType===3?!/\S/.test(ye.nodeValue)&&!/^[ ]+$/.test(ye.nodeValue)?(Ae.removeChild(ye),--re):(ye.nodeValue=ye.nodeValue.split(`
`).join(" "),ye.nodeValue=ye.nodeValue.replace(/(\s)+/g,"$1")):ye.nodeType===1&&he(ye)}}function me(Ae){for(var re=Ae.querySelectorAll("pre"),ye=[],Le=0;Le<re.length;++Le)if(re[Le].childElementCount===1&&re[Le].firstChild.tagName.toLowerCase()==="code"){var Ie=re[Le].firstChild.innerHTML.trim(),Me=re[Le].firstChild.getAttribute("data-language")||"";if(Me==="")for(var pt=re[Le].firstChild.className.split(" "),Ke=0;Ke<pt.length;++Ke){var se=pt[Ke].match(/^language-(.+)$/);if(se!==null){Me=se[1];break}}Ie=r.helper.unescapeHTMLEntities(Ie),ye.push(Ie),re[Le].outerHTML='<precode language="'+Me+'" precodenum="'+Le.toString()+'"></precode>'}else ye.push(re[Le].innerHTML),re[Le].innerHTML="",re[Le].setAttribute("prenum",Le.toString());return ye}return G},this.setOption=function(S,D){w[S]=D},this.getOption=function(S){return w[S]},this.getOptions=function(){return w},this.addExtension=function(S,D){D=D||null,x(S,D)},this.useExtension=function(S){x(S)},this.setFlavor=function(S){if(!d.hasOwnProperty(S))throw Error(S+" flavor was not found");var D=d[S];R=S;for(var K in D)D.hasOwnProperty(K)&&(w[K]=D[K])},this.getFlavor=function(){return R},this.removeExtension=function(S){r.helper.isArray(S)||(S=[S]);for(var D=0;D<S.length;++D){for(var K=S[D],W=0;W<p.length;++W)p[W]===K&&p.splice(W,1);for(var Z=0;Z<E.length;++Z)E[Z]===K&&E.splice(Z,1)}},this.getAllExtensions=function(){return{language:p,output:E}},this.getMetadata=function(S){return S?P.raw:P.parsed},this.getMetadataFormat=function(){return P.format},this._setMetadataPair=function(S,D){P.parsed[S]=D},this._setMetadataFormat=function(S){P.format=S},this._setMetadataRaw=function(S){P.raw=S}},r.subParser("anchors",function(l,w,p){l=p.converter._dispatch("anchors.before",l,w,p);var E=function($,R,P,v,x,z,V){if(r.helper.isUndefined(V)&&(V=""),P=P.toLowerCase(),$.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)v="";else if(!v)if(P||(P=R.toLowerCase().replace(/ ?\n/g," ")),v="#"+P,!r.helper.isUndefined(p.gUrls[P]))v=p.gUrls[P],r.helper.isUndefined(p.gTitles[P])||(V=p.gTitles[P]);else return $;v=v.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var O='<a href="'+v+'"';return V!==""&&V!==null&&(V=V.replace(/"/g,"&quot;"),V=V.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),O+=' title="'+V+'"'),w.openLinksInNewWindow&&!/^#/.test(v)&&(O+=' rel="noopener noreferrer" target="E95Eblank"'),O+=">"+R+"</a>",O};return l=l.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,E),l=l.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,E),l=l.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,E),l=l.replace(/\[([^\[\]]+)]()()()()()/g,E),w.ghMentions&&(l=l.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function($,R,P,v,x){if(P==="\\")return R+v;if(!r.helper.isString(w.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var z=w.ghMentionsLink.replace(/\{u}/g,x),V="";return w.openLinksInNewWindow&&(V=' rel="noopener noreferrer" target="E95Eblank"'),R+'<a href="'+z+'"'+V+">"+v+"</a>"})),l=p.converter._dispatch("anchors.after",l,w,p),l});var _=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,T=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,C=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,A=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,L=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,H=function(l){return function(w,p,E,$,R,P,v){E=E.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var x=E,z="",V="",O=p||"",S=v||"";return/^www\./i.test(E)&&(E=E.replace(/^www\./i,"http://www.")),l.excludeTrailingPunctuationFromURLs&&P&&(z=P),l.openLinksInNewWindow&&(V=' rel="noopener noreferrer" target="E95Eblank"'),O+'<a href="'+E+'"'+V+">"+x+"</a>"+z+S}},I=function(l,w){return function(p,E,$){var R="mailto:";return E=E||"",$=r.subParser("unescapeSpecialChars")($,l,w),l.encodeEmails?(R=r.helper.encodeEmailAddress(R+$),$=r.helper.encodeEmailAddress($)):R=R+$,E+'<a href="'+R+'">'+$+"</a>"}};r.subParser("autoLinks",function(l,w,p){return l=p.converter._dispatch("autoLinks.before",l,w,p),l=l.replace(C,H(w)),l=l.replace(L,I(w,p)),l=p.converter._dispatch("autoLinks.after",l,w,p),l}),r.subParser("simplifiedAutoLinks",function(l,w,p){return w.simplifiedAutoLink&&(l=p.converter._dispatch("simplifiedAutoLinks.before",l,w,p),w.excludeTrailingPunctuationFromURLs?l=l.replace(T,H(w)):l=l.replace(_,H(w)),l=l.replace(A,I(w,p)),l=p.converter._dispatch("simplifiedAutoLinks.after",l,w,p)),l}),r.subParser("blockGamut",function(l,w,p){return l=p.converter._dispatch("blockGamut.before",l,w,p),l=r.subParser("blockQuotes")(l,w,p),l=r.subParser("headers")(l,w,p),l=r.subParser("horizontalRule")(l,w,p),l=r.subParser("lists")(l,w,p),l=r.subParser("codeBlocks")(l,w,p),l=r.subParser("tables")(l,w,p),l=r.subParser("hashHTMLBlocks")(l,w,p),l=r.subParser("paragraphs")(l,w,p),l=p.converter._dispatch("blockGamut.after",l,w,p),l}),r.subParser("blockQuotes",function(l,w,p){l=p.converter._dispatch("blockQuotes.before",l,w,p),l=l+`

`;var E=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return w.splitAdjacentBlockquotes&&(E=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),l=l.replace(E,function($){return $=$.replace(/^[ \t]*>[ \t]?/gm,""),$=$.replace(/0/g,""),$=$.replace(/^[ \t]+$/gm,""),$=r.subParser("githubCodeBlocks")($,w,p),$=r.subParser("blockGamut")($,w,p),$=$.replace(/(^|\n)/g,"$1  "),$=$.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(R,P){var v=P;return v=v.replace(/^  /mg,"0"),v=v.replace(/0/g,""),v}),r.subParser("hashBlock")(`<blockquote>
`+$+`
</blockquote>`,w,p)}),l=p.converter._dispatch("blockQuotes.after",l,w,p),l}),r.subParser("codeBlocks",function(l,w,p){l=p.converter._dispatch("codeBlocks.before",l,w,p),l+="0";var E=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return l=l.replace(E,function($,R,P){var v=R,x=P,z=`
`;return v=r.subParser("outdent")(v,w,p),v=r.subParser("encodeCode")(v,w,p),v=r.subParser("detab")(v,w,p),v=v.replace(/^\n+/g,""),v=v.replace(/\n+$/g,""),w.omitExtraWLInCodeBlocks&&(z=""),v="<pre><code>"+v+z+"</code></pre>",r.subParser("hashBlock")(v,w,p)+x}),l=l.replace(/0/,""),l=p.converter._dispatch("codeBlocks.after",l,w,p),l}),r.subParser("codeSpans",function(l,w,p){return l=p.converter._dispatch("codeSpans.before",l,w,p),typeof l>"u"&&(l=""),l=l.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(E,$,R,P){var v=P;return v=v.replace(/^([ \t]*)/g,""),v=v.replace(/[ \t]*$/g,""),v=r.subParser("encodeCode")(v,w,p),v=$+"<code>"+v+"</code>",v=r.subParser("hashHTMLSpans")(v,w,p),v}),l=p.converter._dispatch("codeSpans.after",l,w,p),l}),r.subParser("completeHTMLDocument",function(l,w,p){if(!w.completeHTMLDocument)return l;l=p.converter._dispatch("completeHTMLDocument.before",l,w,p);var E="html",$=`<!DOCTYPE HTML>
`,R="",P=`<meta charset="utf-8">
`,v="",x="";typeof p.metadata.parsed.doctype<"u"&&($="<!DOCTYPE "+p.metadata.parsed.doctype+`>
`,E=p.metadata.parsed.doctype.toString().toLowerCase(),(E==="html"||E==="html5")&&(P='<meta charset="utf-8">'));for(var z in p.metadata.parsed)if(p.metadata.parsed.hasOwnProperty(z))switch(z.toLowerCase()){case"doctype":break;case"title":R="<title>"+p.metadata.parsed.title+`</title>
`;break;case"charset":E==="html"||E==="html5"?P='<meta charset="'+p.metadata.parsed.charset+`">
`:P='<meta name="charset" content="'+p.metadata.parsed.charset+`">
`;break;case"language":case"lang":v=' lang="'+p.metadata.parsed[z]+'"',x+='<meta name="'+z+'" content="'+p.metadata.parsed[z]+`">
`;break;default:x+='<meta name="'+z+'" content="'+p.metadata.parsed[z]+`">
`}return l=$+"<html"+v+`>
<head>
`+R+P+x+`</head>
<body>
`+l.trim()+`
</body>
</html>`,l=p.converter._dispatch("completeHTMLDocument.after",l,w,p),l}),r.subParser("detab",function(l,w,p){return l=p.converter._dispatch("detab.before",l,w,p),l=l.replace(/\t(?=\t)/g,"    "),l=l.replace(/\t/g,"AB"),l=l.replace(/B(.+?)A/g,function(E,$){for(var R=$,P=4-R.length%4,v=0;v<P;v++)R+=" ";return R}),l=l.replace(/A/g,"    "),l=l.replace(/B/g,""),l=p.converter._dispatch("detab.after",l,w,p),l}),r.subParser("ellipsis",function(l,w,p){return w.ellipsis&&(l=p.converter._dispatch("ellipsis.before",l,w,p),l=l.replace(/\.\.\./g,""),l=p.converter._dispatch("ellipsis.after",l,w,p)),l}),r.subParser("emoji",function(l,w,p){if(!w.emoji)return l;l=p.converter._dispatch("emoji.before",l,w,p);var E=/:([\S]+?):/g;return l=l.replace(E,function($,R){return r.helper.emojis.hasOwnProperty(R)?r.helper.emojis[R]:$}),l=p.converter._dispatch("emoji.after",l,w,p),l}),r.subParser("encodeAmpsAndAngles",function(l,w,p){return l=p.converter._dispatch("encodeAmpsAndAngles.before",l,w,p),l=l.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),l=l.replace(/<(?![a-z\/?$!])/gi,"&lt;"),l=l.replace(/</g,"&lt;"),l=l.replace(/>/g,"&gt;"),l=p.converter._dispatch("encodeAmpsAndAngles.after",l,w,p),l}),r.subParser("encodeBackslashEscapes",function(l,w,p){return l=p.converter._dispatch("encodeBackslashEscapes.before",l,w,p),l=l.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),l=l.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),l=p.converter._dispatch("encodeBackslashEscapes.after",l,w,p),l}),r.subParser("encodeCode",function(l,w,p){return l=p.converter._dispatch("encodeCode.before",l,w,p),l=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),l=p.converter._dispatch("encodeCode.after",l,w,p),l}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(l,w,p){l=p.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",l,w,p);var E=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,$=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return l=l.replace(E,function(R){return R.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),l=l.replace($,function(R){return R.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),l=p.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",l,w,p),l}),r.subParser("githubCodeBlocks",function(l,w,p){return w.ghCodeBlocks?(l=p.converter._dispatch("githubCodeBlocks.before",l,w,p),l+="0",l=l.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(E,$,R,P){var v=w.omitExtraWLInCodeBlocks?"":`
`;return P=r.subParser("encodeCode")(P,w,p),P=r.subParser("detab")(P,w,p),P=P.replace(/^\n+/g,""),P=P.replace(/\n+$/g,""),P="<pre><code"+(R?' class="'+R+" language-"+R+'"':"")+">"+P+v+"</code></pre>",P=r.subParser("hashBlock")(P,w,p),`

G`+(p.ghCodeBlocks.push({text:E,codeblock:P})-1)+`G

`}),l=l.replace(/0/,""),p.converter._dispatch("githubCodeBlocks.after",l,w,p)):l}),r.subParser("hashBlock",function(l,w,p){return l=p.converter._dispatch("hashBlock.before",l,w,p),l=l.replace(/(^\n+|\n+$)/g,""),l=`

K`+(p.gHtmlBlocks.push(l)-1)+`K

`,l=p.converter._dispatch("hashBlock.after",l,w,p),l}),r.subParser("hashCodeTags",function(l,w,p){l=p.converter._dispatch("hashCodeTags.before",l,w,p);var E=function($,R,P,v){var x=P+r.subParser("encodeCode")(R,w,p)+v;return"C"+(p.gHtmlSpans.push(x)-1)+"C"};return l=r.helper.replaceRecursiveRegExp(l,E,"<code\\b[^>]*>","</code>","gim"),l=p.converter._dispatch("hashCodeTags.after",l,w,p),l}),r.subParser("hashElement",function(l,w,p){return function(E,$){var R=$;return R=R.replace(/\n\n/g,`
`),R=R.replace(/^\n/,""),R=R.replace(/\n+$/g,""),R=`

K`+(p.gHtmlBlocks.push(R)-1)+`K

`,R}}),r.subParser("hashHTMLBlocks",function(l,w,p){l=p.converter._dispatch("hashHTMLBlocks.before",l,w,p);var E=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],$=function(S,D,K,W){var Z=S;return K.search(/\bmarkdown\b/)!==-1&&(Z=K+p.converter.makeHtml(D)+W),`

K`+(p.gHtmlBlocks.push(Z)-1)+`K

`};w.backslashEscapesHTMLTags&&(l=l.replace(/\\<(\/?[^>]+?)>/g,function(S,D){return"&lt;"+D+"&gt;"}));for(var R=0;R<E.length;++R)for(var P,v=new RegExp("^ {0,3}(<"+E[R]+"\\b[^>]*>)","im"),x="<"+E[R]+"\\b[^>]*>",z="</"+E[R]+">";(P=r.helper.regexIndexOf(l,v))!==-1;){var V=r.helper.splitAtIndex(l,P),O=r.helper.replaceRecursiveRegExp(V[1],$,x,z,"im");if(O===V[1])break;l=V[0].concat(O)}return l=l.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(l,w,p)),l=r.helper.replaceRecursiveRegExp(l,function(S){return`

K`+(p.gHtmlBlocks.push(S)-1)+`K

`},"^ {0,3}<!--","-->","gm"),l=l.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(l,w,p)),l=p.converter._dispatch("hashHTMLBlocks.after",l,w,p),l}),r.subParser("hashHTMLSpans",function(l,w,p){l=p.converter._dispatch("hashHTMLSpans.before",l,w,p);function E($){return"C"+(p.gHtmlSpans.push($)-1)+"C"}return l=l.replace(/<[^>]+?\/>/gi,function($){return E($)}),l=l.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function($){return E($)}),l=l.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function($){return E($)}),l=l.replace(/<[^>]+?>/gi,function($){return E($)}),l=p.converter._dispatch("hashHTMLSpans.after",l,w,p),l}),r.subParser("unhashHTMLSpans",function(l,w,p){l=p.converter._dispatch("unhashHTMLSpans.before",l,w,p);for(var E=0;E<p.gHtmlSpans.length;++E){for(var $=p.gHtmlSpans[E],R=0;/C(\d+)C/.test($);){var P=RegExp.$1;if($=$.replace("C"+P+"C",p.gHtmlSpans[P]),R===10){console.error("maximum nesting of 10 spans reached!!!");break}++R}l=l.replace("C"+E+"C",$)}return l=p.converter._dispatch("unhashHTMLSpans.after",l,w,p),l}),r.subParser("hashPreCodeTags",function(l,w,p){l=p.converter._dispatch("hashPreCodeTags.before",l,w,p);var E=function($,R,P,v){var x=P+r.subParser("encodeCode")(R,w,p)+v;return`

G`+(p.ghCodeBlocks.push({text:$,codeblock:x})-1)+`G

`};return l=r.helper.replaceRecursiveRegExp(l,E,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),l=p.converter._dispatch("hashPreCodeTags.after",l,w,p),l}),r.subParser("headers",function(l,w,p){l=p.converter._dispatch("headers.before",l,w,p);var E=isNaN(parseInt(w.headerLevelStart))?1:parseInt(w.headerLevelStart),$=w.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,R=w.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;l=l.replace($,function(x,z){var V=r.subParser("spanGamut")(z,w,p),O=w.noHeaderId?"":' id="'+v(z)+'"',S=E,D="<h"+S+O+">"+V+"</h"+S+">";return r.subParser("hashBlock")(D,w,p)}),l=l.replace(R,function(x,z){var V=r.subParser("spanGamut")(z,w,p),O=w.noHeaderId?"":' id="'+v(z)+'"',S=E+1,D="<h"+S+O+">"+V+"</h"+S+">";return r.subParser("hashBlock")(D,w,p)});var P=w.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;l=l.replace(P,function(x,z,V){var O=V;w.customizedHeaderId&&(O=V.replace(/\s?\{([^{]+?)}\s*$/,""));var S=r.subParser("spanGamut")(O,w,p),D=w.noHeaderId?"":' id="'+v(V)+'"',K=E-1+z.length,W="<h"+K+D+">"+S+"</h"+K+">";return r.subParser("hashBlock")(W,w,p)});function v(x){var z,V;if(w.customizedHeaderId){var O=x.match(/\{([^{]+?)}\s*$/);O&&O[1]&&(x=O[1])}return z=x,r.helper.isString(w.prefixHeaderId)?V=w.prefixHeaderId:w.prefixHeaderId===!0?V="section-":V="",w.rawPrefixHeaderId||(z=V+z),w.ghCompatibleHeaderId?z=z.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():w.rawHeaderId?z=z.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():z=z.replace(/[^\w]/g,"").toLowerCase(),w.rawPrefixHeaderId&&(z=V+z),p.hashLinkCounts[z]?z=z+"-"+p.hashLinkCounts[z]++:p.hashLinkCounts[z]=1,z}return l=p.converter._dispatch("headers.after",l,w,p),l}),r.subParser("horizontalRule",function(l,w,p){l=p.converter._dispatch("horizontalRule.before",l,w,p);var E=r.subParser("hashBlock")("<hr />",w,p);return l=l.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,E),l=l.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,E),l=l.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,E),l=p.converter._dispatch("horizontalRule.after",l,w,p),l}),r.subParser("images",function(l,w,p){l=p.converter._dispatch("images.before",l,w,p);var E=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,$=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,R=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,P=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,v=/!\[([^\[\]]+)]()()()()()/g;function x(V,O,S,D,K,W,Z,G){return D=D.replace(/\s/g,""),z(V,O,S,D,K,W,Z,G)}function z(V,O,S,D,K,W,Z,G){var oe=p.gUrls,he=p.gTitles,me=p.gDimensions;if(S=S.toLowerCase(),G||(G=""),V.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)D="";else if(D===""||D===null)if((S===""||S===null)&&(S=O.toLowerCase().replace(/ ?\n/g," ")),D="#"+S,!r.helper.isUndefined(oe[S]))D=oe[S],r.helper.isUndefined(he[S])||(G=he[S]),r.helper.isUndefined(me[S])||(K=me[S].width,W=me[S].height);else return V;O=O.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),D=D.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var Ae='<img src="'+D+'" alt="'+O+'"';return G&&r.helper.isString(G)&&(G=G.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),Ae+=' title="'+G+'"'),K&&W&&(K=K==="*"?"auto":K,W=W==="*"?"auto":W,Ae+=' width="'+K+'"',Ae+=' height="'+W+'"'),Ae+=" />",Ae}return l=l.replace(P,z),l=l.replace(R,x),l=l.replace($,z),l=l.replace(E,z),l=l.replace(v,z),l=p.converter._dispatch("images.after",l,w,p),l}),r.subParser("italicsAndBold",function(l,w,p){l=p.converter._dispatch("italicsAndBold.before",l,w,p);function E($,R,P){return R+$+P}return w.literalMidWordUnderscores?(l=l.replace(/\b___(\S[\s\S]*?)___\b/g,function($,R){return E(R,"<strong><em>","</em></strong>")}),l=l.replace(/\b__(\S[\s\S]*?)__\b/g,function($,R){return E(R,"<strong>","</strong>")}),l=l.replace(/\b_(\S[\s\S]*?)_\b/g,function($,R){return E(R,"<em>","</em>")})):(l=l.replace(/___(\S[\s\S]*?)___/g,function($,R){return/\S$/.test(R)?E(R,"<strong><em>","</em></strong>"):$}),l=l.replace(/__(\S[\s\S]*?)__/g,function($,R){return/\S$/.test(R)?E(R,"<strong>","</strong>"):$}),l=l.replace(/_([^\s_][\s\S]*?)_/g,function($,R){return/\S$/.test(R)?E(R,"<em>","</em>"):$})),w.literalMidWordAsterisks?(l=l.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function($,R,P){return E(P,R+"<strong><em>","</em></strong>")}),l=l.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function($,R,P){return E(P,R+"<strong>","</strong>")}),l=l.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function($,R,P){return E(P,R+"<em>","</em>")})):(l=l.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function($,R){return/\S$/.test(R)?E(R,"<strong><em>","</em></strong>"):$}),l=l.replace(/\*\*(\S[\s\S]*?)\*\*/g,function($,R){return/\S$/.test(R)?E(R,"<strong>","</strong>"):$}),l=l.replace(/\*([^\s*][\s\S]*?)\*/g,function($,R){return/\S$/.test(R)?E(R,"<em>","</em>"):$})),l=p.converter._dispatch("italicsAndBold.after",l,w,p),l}),r.subParser("lists",function(l,w,p){function E(P,v){p.gListLevel++,P=P.replace(/\n{2,}$/,`
`),P+="0";var x=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,z=/\n[ \t]*\n(?!0)/.test(P);return w.disableForced4SpacesIndentedSublists&&(x=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),P=P.replace(x,function(V,O,S,D,K,W,Z){Z=Z&&Z.trim()!=="";var G=r.subParser("outdent")(K,w,p),oe="";return W&&w.tasklists&&(oe=' class="task-list-item" style="list-style-type: none;"',G=G.replace(/^[ \t]*\[(x|X| )?]/m,function(){var he='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return Z&&(he+=" checked"),he+=">",he})),G=G.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(he){return"A"+he}),O||G.search(/\n{2,}/)>-1?(G=r.subParser("githubCodeBlocks")(G,w,p),G=r.subParser("blockGamut")(G,w,p)):(G=r.subParser("lists")(G,w,p),G=G.replace(/\n$/,""),G=r.subParser("hashHTMLBlocks")(G,w,p),G=G.replace(/\n\n+/g,`

`),z?G=r.subParser("paragraphs")(G,w,p):G=r.subParser("spanGamut")(G,w,p)),G=G.replace("A",""),G="<li"+oe+">"+G+`</li>
`,G}),P=P.replace(/0/g,""),p.gListLevel--,v&&(P=P.replace(/\s+$/,"")),P}function $(P,v){if(v==="ol"){var x=P.match(/^ *(\d+)\./);if(x&&x[1]!=="1")return' start="'+x[1]+'"'}return""}function R(P,v,x){var z=w.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,V=w.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,O=v==="ul"?z:V,S="";if(P.search(O)!==-1)(function K(W){var Z=W.search(O),G=$(P,v);Z!==-1?(S+=`

<`+v+G+`>
`+E(W.slice(0,Z),!!x)+"</"+v+`>
`,v=v==="ul"?"ol":"ul",O=v==="ul"?z:V,K(W.slice(Z))):S+=`

<`+v+G+`>
`+E(W,!!x)+"</"+v+`>
`})(P);else{var D=$(P,v);S=`

<`+v+D+`>
`+E(P,!!x)+"</"+v+`>
`}return S}return l=p.converter._dispatch("lists.before",l,w,p),l+="0",p.gListLevel?l=l.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(P,v,x){var z=x.search(/[*+-]/g)>-1?"ul":"ol";return R(v,z,!0)}):l=l.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(P,v,x,z){var V=z.search(/[*+-]/g)>-1?"ul":"ol";return R(x,V,!1)}),l=l.replace(/0/,""),l=p.converter._dispatch("lists.after",l,w,p),l}),r.subParser("metadata",function(l,w,p){if(!w.metadata)return l;l=p.converter._dispatch("metadata.before",l,w,p);function E($){p.metadata.raw=$,$=$.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),$=$.replace(/\n {4}/g," "),$.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(R,P,v){return p.metadata.parsed[P]=v,""})}return l=l.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function($,R,P){return E(P),"M"}),l=l.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function($,R,P){return R&&(p.metadata.format=R),E(P),"M"}),l=l.replace(/M/g,""),l=p.converter._dispatch("metadata.after",l,w,p),l}),r.subParser("outdent",function(l,w,p){return l=p.converter._dispatch("outdent.before",l,w,p),l=l.replace(/^(\t|[ ]{1,4})/gm,"0"),l=l.replace(/0/g,""),l=p.converter._dispatch("outdent.after",l,w,p),l}),r.subParser("paragraphs",function(l,w,p){l=p.converter._dispatch("paragraphs.before",l,w,p),l=l.replace(/^\n+/g,""),l=l.replace(/\n+$/g,"");for(var E=l.split(/\n{2,}/g),$=[],R=E.length,P=0;P<R;P++){var v=E[P];v.search(/(K|G)(\d+)\1/g)>=0?$.push(v):v.search(/\S/)>=0&&(v=r.subParser("spanGamut")(v,w,p),v=v.replace(/^([ \t]*)/g,"<p>"),v+="</p>",$.push(v))}for(R=$.length,P=0;P<R;P++){for(var x="",z=$[P],V=!1;/(K|G)(\d+)\1/.test(z);){var O=RegExp.$1,S=RegExp.$2;O==="K"?x=p.gHtmlBlocks[S]:V?x=r.subParser("encodeCode")(p.ghCodeBlocks[S].text,w,p):x=p.ghCodeBlocks[S].codeblock,x=x.replace(/\$/g,"$$$$"),z=z.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,x),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(z)&&(V=!0)}$[P]=z}return l=$.join(`
`),l=l.replace(/^\n+/g,""),l=l.replace(/\n+$/g,""),p.converter._dispatch("paragraphs.after",l,w,p)}),r.subParser("runExtension",function(l,w,p,E){if(l.filter)w=l.filter(w,E.converter,p);else if(l.regex){var $=l.regex;$ instanceof RegExp||($=new RegExp($,"g")),w=w.replace($,l.replace)}return w}),r.subParser("spanGamut",function(l,w,p){return l=p.converter._dispatch("spanGamut.before",l,w,p),l=r.subParser("codeSpans")(l,w,p),l=r.subParser("escapeSpecialCharsWithinTagAttributes")(l,w,p),l=r.subParser("encodeBackslashEscapes")(l,w,p),l=r.subParser("images")(l,w,p),l=r.subParser("anchors")(l,w,p),l=r.subParser("autoLinks")(l,w,p),l=r.subParser("simplifiedAutoLinks")(l,w,p),l=r.subParser("emoji")(l,w,p),l=r.subParser("underline")(l,w,p),l=r.subParser("italicsAndBold")(l,w,p),l=r.subParser("strikethrough")(l,w,p),l=r.subParser("ellipsis")(l,w,p),l=r.subParser("hashHTMLSpans")(l,w,p),l=r.subParser("encodeAmpsAndAngles")(l,w,p),w.simpleLineBreaks?/\n\nK/.test(l)||(l=l.replace(/\n+/g,`<br />
`)):l=l.replace(/  +\n/g,`<br />
`),l=p.converter._dispatch("spanGamut.after",l,w,p),l}),r.subParser("strikethrough",function(l,w,p){function E($){return w.simplifiedAutoLink&&($=r.subParser("simplifiedAutoLinks")($,w,p)),"<del>"+$+"</del>"}return w.strikethrough&&(l=p.converter._dispatch("strikethrough.before",l,w,p),l=l.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function($,R){return E(R)}),l=p.converter._dispatch("strikethrough.after",l,w,p)),l}),r.subParser("stripLinkDefinitions",function(l,w,p){var E=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,$=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;l+="0";var R=function(P,v,x,z,V,O,S){return v=v.toLowerCase(),l.toLowerCase().split(v).length-1<2?P:(x.match(/^data:.+?\/.+?;base64,/)?p.gUrls[v]=x.replace(/\s/g,""):p.gUrls[v]=r.subParser("encodeAmpsAndAngles")(x,w,p),O?O+S:(S&&(p.gTitles[v]=S.replace(/"|'/g,"&quot;")),w.parseImgDimensions&&z&&V&&(p.gDimensions[v]={width:z,height:V}),""))};return l=l.replace($,R),l=l.replace(E,R),l=l.replace(/0/,""),l}),r.subParser("tables",function(l,w,p){if(!w.tables)return l;var E=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,$=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function R(V){return/^:[ \t]*--*$/.test(V)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(V)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(V)?' style="text-align:center;"':""}function P(V,O){var S="";return V=V.trim(),(w.tablesHeaderId||w.tableHeaderId)&&(S=' id="'+V.replace(/ /g,"_").toLowerCase()+'"'),V=r.subParser("spanGamut")(V,w,p),"<th"+S+O+">"+V+`</th>
`}function v(V,O){var S=r.subParser("spanGamut")(V,w,p);return"<td"+O+">"+S+`</td>
`}function x(V,O){for(var S=`<table>
<thead>
<tr>
`,D=V.length,K=0;K<D;++K)S+=V[K];for(S+=`</tr>
</thead>
<tbody>
`,K=0;K<O.length;++K){S+=`<tr>
`;for(var W=0;W<D;++W)S+=O[K][W];S+=`</tr>
`}return S+=`</tbody>
</table>
`,S}function z(V){var O,S=V.split(`
`);for(O=0;O<S.length;++O)/^ {0,3}\|/.test(S[O])&&(S[O]=S[O].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(S[O])&&(S[O]=S[O].replace(/\|[ \t]*$/,"")),S[O]=r.subParser("codeSpans")(S[O],w,p);var D=S[0].split("|").map(function(Ae){return Ae.trim()}),K=S[1].split("|").map(function(Ae){return Ae.trim()}),W=[],Z=[],G=[],oe=[];for(S.shift(),S.shift(),O=0;O<S.length;++O)S[O].trim()!==""&&W.push(S[O].split("|").map(function(Ae){return Ae.trim()}));if(D.length<K.length)return V;for(O=0;O<K.length;++O)G.push(R(K[O]));for(O=0;O<D.length;++O)r.helper.isUndefined(G[O])&&(G[O]=""),Z.push(P(D[O],G[O]));for(O=0;O<W.length;++O){for(var he=[],me=0;me<Z.length;++me)r.helper.isUndefined(W[O][me]),he.push(v(W[O][me],G[me]));oe.push(he)}return x(Z,oe)}return l=p.converter._dispatch("tables.before",l,w,p),l=l.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),l=l.replace(E,z),l=l.replace($,z),l=p.converter._dispatch("tables.after",l,w,p),l}),r.subParser("underline",function(l,w,p){return w.underline&&(l=p.converter._dispatch("underline.before",l,w,p),w.literalMidWordUnderscores?(l=l.replace(/\b___(\S[\s\S]*?)___\b/g,function(E,$){return"<u>"+$+"</u>"}),l=l.replace(/\b__(\S[\s\S]*?)__\b/g,function(E,$){return"<u>"+$+"</u>"})):(l=l.replace(/___(\S[\s\S]*?)___/g,function(E,$){return/\S$/.test($)?"<u>"+$+"</u>":E}),l=l.replace(/__(\S[\s\S]*?)__/g,function(E,$){return/\S$/.test($)?"<u>"+$+"</u>":E})),l=l.replace(/(_)/g,r.helper.escapeCharactersCallback),l=p.converter._dispatch("underline.after",l,w,p)),l}),r.subParser("unescapeSpecialChars",function(l,w,p){return l=p.converter._dispatch("unescapeSpecialChars.before",l,w,p),l=l.replace(/E(\d+)E/g,function(E,$){var R=parseInt($);return String.fromCharCode(R)}),l=p.converter._dispatch("unescapeSpecialChars.after",l,w,p),l}),r.subParser("makeMarkdown.blockquote",function(l,w){var p="";if(l.hasChildNodes())for(var E=l.childNodes,$=E.length,R=0;R<$;++R){var P=r.subParser("makeMarkdown.node")(E[R],w);P!==""&&(p+=P)}return p=p.trim(),p="> "+p.split(`
`).join(`
> `),p}),r.subParser("makeMarkdown.codeBlock",function(l,w){var p=l.getAttribute("language"),E=l.getAttribute("precodenum");return"```"+p+`
`+w.preList[E]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(l){return"`"+l.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(l,w){var p="";if(l.hasChildNodes()){p+="*";for(var E=l.childNodes,$=E.length,R=0;R<$;++R)p+=r.subParser("makeMarkdown.node")(E[R],w);p+="*"}return p}),r.subParser("makeMarkdown.header",function(l,w,p){var E=new Array(p+1).join("#"),$="";if(l.hasChildNodes()){$=E+" ";for(var R=l.childNodes,P=R.length,v=0;v<P;++v)$+=r.subParser("makeMarkdown.node")(R[v],w)}return $}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(l){var w="";return l.hasAttribute("src")&&(w+="!["+l.getAttribute("alt")+"](",w+="<"+l.getAttribute("src")+">",l.hasAttribute("width")&&l.hasAttribute("height")&&(w+=" ="+l.getAttribute("width")+"x"+l.getAttribute("height")),l.hasAttribute("title")&&(w+=' "'+l.getAttribute("title")+'"'),w+=")"),w}),r.subParser("makeMarkdown.links",function(l,w){var p="";if(l.hasChildNodes()&&l.hasAttribute("href")){var E=l.childNodes,$=E.length;p="[";for(var R=0;R<$;++R)p+=r.subParser("makeMarkdown.node")(E[R],w);p+="](",p+="<"+l.getAttribute("href")+">",l.hasAttribute("title")&&(p+=' "'+l.getAttribute("title")+'"'),p+=")"}return p}),r.subParser("makeMarkdown.list",function(l,w,p){var E="";if(!l.hasChildNodes())return"";for(var $=l.childNodes,R=$.length,P=l.getAttribute("start")||1,v=0;v<R;++v)if(!(typeof $[v].tagName>"u"||$[v].tagName.toLowerCase()!=="li")){var x="";p==="ol"?x=P.toString()+". ":x="- ",E+=x+r.subParser("makeMarkdown.listItem")($[v],w),++P}return E+=`
<!-- -->
`,E.trim()}),r.subParser("makeMarkdown.listItem",function(l,w){for(var p="",E=l.childNodes,$=E.length,R=0;R<$;++R)p+=r.subParser("makeMarkdown.node")(E[R],w);return/\n$/.test(p)?p=p.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):p+=`
`,p}),r.subParser("makeMarkdown.node",function(l,w,p){p=p||!1;var E="";if(l.nodeType===3)return r.subParser("makeMarkdown.txt")(l,w);if(l.nodeType===8)return"<!--"+l.data+`-->

`;if(l.nodeType!==1)return"";var $=l.tagName.toLowerCase();switch($){case"h1":p||(E=r.subParser("makeMarkdown.header")(l,w,1)+`

`);break;case"h2":p||(E=r.subParser("makeMarkdown.header")(l,w,2)+`

`);break;case"h3":p||(E=r.subParser("makeMarkdown.header")(l,w,3)+`

`);break;case"h4":p||(E=r.subParser("makeMarkdown.header")(l,w,4)+`

`);break;case"h5":p||(E=r.subParser("makeMarkdown.header")(l,w,5)+`

`);break;case"h6":p||(E=r.subParser("makeMarkdown.header")(l,w,6)+`

`);break;case"p":p||(E=r.subParser("makeMarkdown.paragraph")(l,w)+`

`);break;case"blockquote":p||(E=r.subParser("makeMarkdown.blockquote")(l,w)+`

`);break;case"hr":p||(E=r.subParser("makeMarkdown.hr")(l,w)+`

`);break;case"ol":p||(E=r.subParser("makeMarkdown.list")(l,w,"ol")+`

`);break;case"ul":p||(E=r.subParser("makeMarkdown.list")(l,w,"ul")+`

`);break;case"precode":p||(E=r.subParser("makeMarkdown.codeBlock")(l,w)+`

`);break;case"pre":p||(E=r.subParser("makeMarkdown.pre")(l,w)+`

`);break;case"table":p||(E=r.subParser("makeMarkdown.table")(l,w)+`

`);break;case"code":E=r.subParser("makeMarkdown.codeSpan")(l,w);break;case"em":case"i":E=r.subParser("makeMarkdown.emphasis")(l,w);break;case"strong":case"b":E=r.subParser("makeMarkdown.strong")(l,w);break;case"del":E=r.subParser("makeMarkdown.strikethrough")(l,w);break;case"a":E=r.subParser("makeMarkdown.links")(l,w);break;case"img":E=r.subParser("makeMarkdown.image")(l,w);break;default:E=l.outerHTML+`

`}return E}),r.subParser("makeMarkdown.paragraph",function(l,w){var p="";if(l.hasChildNodes())for(var E=l.childNodes,$=E.length,R=0;R<$;++R)p+=r.subParser("makeMarkdown.node")(E[R],w);return p=p.trim(),p}),r.subParser("makeMarkdown.pre",function(l,w){var p=l.getAttribute("prenum");return"<pre>"+w.preList[p]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(l,w){var p="";if(l.hasChildNodes()){p+="~~";for(var E=l.childNodes,$=E.length,R=0;R<$;++R)p+=r.subParser("makeMarkdown.node")(E[R],w);p+="~~"}return p}),r.subParser("makeMarkdown.strong",function(l,w){var p="";if(l.hasChildNodes()){p+="**";for(var E=l.childNodes,$=E.length,R=0;R<$;++R)p+=r.subParser("makeMarkdown.node")(E[R],w);p+="**"}return p}),r.subParser("makeMarkdown.table",function(l,w){var p="",E=[[],[]],$=l.querySelectorAll("thead>tr>th"),R=l.querySelectorAll("tbody>tr"),P,v;for(P=0;P<$.length;++P){var x=r.subParser("makeMarkdown.tableCell")($[P],w),z="---";if($[P].hasAttribute("style")){var V=$[P].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(V){case"text-align:left;":z=":---";break;case"text-align:right;":z="---:";break;case"text-align:center;":z=":---:";break}}E[0][P]=x.trim(),E[1][P]=z}for(P=0;P<R.length;++P){var O=E.push([])-1,S=R[P].getElementsByTagName("td");for(v=0;v<$.length;++v){var D=" ";typeof S[v]<"u"&&(D=r.subParser("makeMarkdown.tableCell")(S[v],w)),E[O].push(D)}}var K=3;for(P=0;P<E.length;++P)for(v=0;v<E[P].length;++v){var W=E[P][v].length;W>K&&(K=W)}for(P=0;P<E.length;++P){for(v=0;v<E[P].length;++v)P===1?E[P][v].slice(-1)===":"?E[P][v]=r.helper.padEnd(E[P][v].slice(-1),K-1,"-")+":":E[P][v]=r.helper.padEnd(E[P][v],K,"-"):E[P][v]=r.helper.padEnd(E[P][v],K);p+="| "+E[P].join(" | ")+` |
`}return p.trim()}),r.subParser("makeMarkdown.tableCell",function(l,w){var p="";if(!l.hasChildNodes())return"";for(var E=l.childNodes,$=E.length,R=0;R<$;++R)p+=r.subParser("makeMarkdown.node")(E[R],w,!0);return p.trim()}),r.subParser("makeMarkdown.txt",function(l){var w=l.nodeValue;return w=w.replace(/ +/g," "),w=w.replace(/NBSP;/g," "),w=r.helper.unescapeHTMLEntities(w),w=w.replace(/([*_~|`])/g,"\\$1"),w=w.replace(/^(\s*)>/g,"\\$1>"),w=w.replace(/^#/gm,"\\#"),w=w.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),w=w.replace(/^( {0,3}\d+)\./gm,"$1\\."),w=w.replace(/^( {0,3})([+-])/gm,"$1\\$2"),w=w.replace(/]([\s]*)\(/g,"\\]$1\\("),w=w.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),w});var N=this;e.exports?e.exports=r:N.showdown=r}).call(uw)})(lw);var t6=lw.exports;const n6=e6(t6);var r6=Object.defineProperty,o6=(e,t,n)=>t in e?r6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pe=(e,t,n)=>(o6(e,typeof t!="symbol"?t+"":t,n),n);const i6=(e,t)=>e===t,Ft=Symbol("solid-proxy"),fs=Symbol("solid-track"),Aa={equals:i6};let dw=ww;const pr=1,Sa=2,fw={owned:null,cleanups:null,context:null,owner:null},zu={};var ht=null;let Uu=null,et=null,Lt=null,rr=null,wc=0;function Il(e,t){const n=et,r=ht,o=e.length===0,s=t===void 0?r:t,c=o?fw:{owned:null,cleanups:null,context:s?s.context:null,owner:s},f=o?e:()=>e(()=>mn(()=>mc(c)));ht=c,et=null;try{return Xr(f,!0)}finally{et=n,ht=r}}function dt(e,t){t=t?Object.assign({},Aa,t):Aa;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),gw(n,o));return[pw.bind(n),r]}function Mr(e,t,n){const r=bc(e,t,!0,pr);Ii(r)}function cn(e,t,n){const r=bc(e,t,!1,pr);Ii(r)}function Ei(e,t,n){dw=l6;const r=bc(e,t,!1,pr);r.user=!0,rr?rr.push(r):Ii(r)}function De(e,t,n){n=n?Object.assign({},Aa,n):Aa;const r=bc(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Ii(r),pw.bind(r)}function s6(e){return e&&typeof e=="object"&&"then"in e}function hw(e,t,n){let r,o,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,o=e,s=t||{}):(r=e,o=t,s=n||{});let c=null,f=zu,d=!1,h="initialValue"in s,y=typeof r=="function"&&De(r);const b=new Set,[_,T]=(s.storage||dt)(s.initialValue),[C,A]=dt(void 0),[L,H]=dt(void 0,{equals:!1}),[I,N]=dt(h?"ready":"unresolved");function l($,R,P,v){return c===$&&(c=null,v!==void 0&&(h=!0),($===f||R===f)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(v,{value:R})),f=zu,w(R,P)),R}function w($,R){Xr(()=>{R===void 0&&T(()=>$),N(R!==void 0?"errored":h?"ready":"unresolved"),A(R);for(const P of b.keys())P.decrement();b.clear()},!1)}function p(){const $=a6,R=_(),P=C();if(P!==void 0&&!c)throw P;return et&&!et.user&&$&&Mr(()=>{L(),c&&($.resolved||b.has($)||($.increment(),b.add($)))}),R}function E($=!0){if($!==!1&&d)return;d=!1;const R=y?y():r;if(R==null||R===!1){l(c,mn(_));return}const P=f!==zu?f:mn(()=>o(R,{value:_(),refetching:$}));return s6(P)?(c=P,"value"in P?(P.status==="success"?l(c,P.value,void 0,R):l(c,void 0,void 0,R),P):(d=!0,queueMicrotask(()=>d=!1),Xr(()=>{N(h?"refreshing":"pending"),H()},!1),P.then(v=>l(P,v,void 0,R),v=>l(P,void 0,mw(v),R)))):(l(c,P,void 0,R),P)}return Object.defineProperties(p,{state:{get:()=>I()},error:{get:()=>C()},loading:{get(){const $=I();return $==="pending"||$==="refreshing"}},latest:{get(){if(!h)return p();const $=C();if($&&!c)throw $;return _()}}}),y?Mr(()=>E(!1)):E(!1),[p,{refetch:E,mutate:T}]}function ui(e){return Xr(e,!1)}function mn(e){if(et===null)return e();const t=et;et=null;try{return e()}finally{et=t}}function Hr(e,t,n){const r=Array.isArray(e);let o,s=n&&n.defer;return c=>{let f;if(r){f=Array(e.length);for(let h=0;h<e.length;h++)f[h]=e[h]()}else f=e();if(s){s=!1;return}const d=mn(()=>t(f,o,c));return o=f,d}}function li(e){return ht===null||(ht.cleanups===null?ht.cleanups=[e]:ht.cleanups.push(e)),e}function ki(){return et}let a6;function pw(){if(this.sources&&this.state)if(this.state===pr)Ii(this);else{const e=Lt;Lt=null,Xr(()=>xa(this),!1),Lt=e}if(et){const e=this.observers?this.observers.length:0;et.sources?(et.sources.push(this),et.sourceSlots.push(e)):(et.sources=[this],et.sourceSlots=[e]),this.observers?(this.observers.push(et),this.observerSlots.push(et.sources.length-1)):(this.observers=[et],this.observerSlots=[et.sources.length-1])}return this.value}function gw(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Xr(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],c=Uu&&Uu.running;c&&Uu.disposed.has(s),(c?!s.tState:!s.state)&&(s.pure?Lt.push(s):rr.push(s),s.observers&&bw(s)),c||(s.state=pr)}if(Lt.length>1e6)throw Lt=[],new Error},!1)),t}function Ii(e){if(!e.fn)return;mc(e);const t=ht,n=et,r=wc;et=ht=e,c6(e,e.value,r),et=n,ht=t}function c6(e,t,n){let r;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=pr,e.owned&&e.owned.forEach(mc),e.owned=null),e.updatedAt=n+1,yw(o)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?gw(e,r):e.value=r,e.updatedAt=n)}function bc(e,t,n,r=pr,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:ht,context:ht?ht.context:null,pure:n};return ht===null||ht!==fw&&(ht.owned?ht.owned.push(s):ht.owned=[s]),s}function $a(e){if(e.state===0)return;if(e.state===Sa)return xa(e);if(e.suspense&&mn(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<wc);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===pr)Ii(e);else if(e.state===Sa){const r=Lt;Lt=null,Xr(()=>xa(e,t[0]),!1),Lt=r}}function Xr(e,t){if(Lt)return e();let n=!1;t||(Lt=[]),rr?n=!0:rr=[],wc++;try{const r=e();return u6(n),r}catch(r){n||(rr=null),Lt=null,yw(r)}}function u6(e){if(Lt&&(ww(Lt),Lt=null),e)return;const t=rr;rr=null,t.length&&Xr(()=>dw(t),!1)}function ww(e){for(let t=0;t<e.length;t++)$a(e[t])}function l6(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:$a(r)}for(t=0;t<n;t++)$a(e[t])}function xa(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===pr?r!==t&&(!r.updatedAt||r.updatedAt<wc)&&$a(r):o===Sa&&xa(r,t)}}}function bw(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Sa,n.pure?Lt.push(n):rr.push(n),n.observers&&bw(n))}}function mc(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),c=n.observerSlots.pop();r<o.length&&(s.sourceSlots[c]=r,o[r]=s,n.observerSlots[r]=c)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)mc(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function mw(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function yw(e,t=ht){throw mw(e)}const $p=Symbol("fallback");function xp(e){for(let t=0;t<e.length;t++)e[t]()}function d6(e,t,n={}){let r=[],o=[],s=[],c=[],f=0,d;return li(()=>xp(s)),()=>{const h=e()||[];return h[fs],mn(()=>{if(h.length===0)return f!==0&&(xp(s),s=[],r=[],o=[],f=0,c=[]),n.fallback&&(r=[$p],o[0]=Il(b=>(s[0]=b,n.fallback())),f=1),o;for(r[0]===$p&&(s[0](),s=[],r=[],o=[],f=0),d=0;d<h.length;d++)d<r.length&&r[d]!==h[d]?c[d](()=>h[d]):d>=r.length&&(o[d]=Il(y));for(;d<r.length;d++)s[d]();return f=c.length=s.length=h.length,r=h.slice(0),o=o.slice(0,f)});function y(b){s[d]=b;const[_,T]=dt(h[d]);return c[d]=T,t(_,d)}}}function bn(e,t){return mn(()=>e(t||{}))}const f6=e=>`Stale read from <${e}>.`;function h6(e){const t="fallback"in e&&{fallback:()=>e.fallback};return De(d6(()=>e.each,e.children,t||void 0))}function Ta(e){const t=e.keyed,n=De(()=>e.when,void 0,{equals:(r,o)=>t?r===o:!r==!o});return De(()=>{const r=n();if(r){const o=e.children;return typeof o=="function"&&o.length>0?mn(()=>o(t?r:()=>{if(!mn(n))throw f6("Show");return e.when})):o}return e.fallback},void 0,void 0)}function p6(e,t,n){let r=n.length,o=t.length,s=r,c=0,f=0,d=t[o-1].nextSibling,h=null;for(;c<o||f<s;){if(t[c]===n[f]){c++,f++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===c){const y=s<r?f?n[f-1].nextSibling:n[s-f]:d;for(;f<s;)e.insertBefore(n[f++],y)}else if(s===f)for(;c<o;)(!h||!h.has(t[c]))&&t[c].remove(),c++;else if(t[c]===n[s-1]&&n[f]===t[o-1]){const y=t[--o].nextSibling;e.insertBefore(n[f++],t[c++].nextSibling),e.insertBefore(n[--s],y),t[o]=n[s]}else{if(!h){h=new Map;let b=f;for(;b<s;)h.set(n[b],b++)}const y=h.get(t[c]);if(y!=null)if(f<y&&y<s){let b=c,_=1,T;for(;++b<o&&b<s&&!((T=h.get(t[b]))==null||T!==y+_);)_++;if(_>y-f){const C=t[c];for(;f<y;)e.insertBefore(n[f++],C)}else e.replaceChild(n[f++],t[c++])}else c++;else t[c++].remove()}}}const Tp="_$DX_DELEGATE";function He(e,t,n){let r;const o=()=>{const c=document.createElement("template");return c.innerHTML=e,c.content.firstChild},s=()=>(r||(r=o())).cloneNode(!0);return s.cloneNode=s,s}function zd(e,t=window.document){const n=t[Tp]||(t[Tp]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,b6))}}function Ct(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function g6(e,t,n,r){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function w6(e,t,n){if(!t)return n?Ct(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function vw(e,t,n){return mn(()=>e(t,n))}function $e(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Pa(e,t,r,n);cn(o=>Pa(e,t(),o,n),r)}function b6(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[t];if(r&&!n.disabled){const o=n[`${t}Data`];if(o!==void 0?r.call(n,o,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function Pa(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,c=r!==void 0;if(e=c&&n[0]&&n[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),c){let f=n[0];f&&f.nodeType===3?f.data=t:f=document.createTextNode(t),n=Yo(e,n,r,f)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||s==="boolean")n=Yo(e,n,r);else{if(s==="function")return cn(()=>{let f=t();for(;typeof f=="function";)f=f();n=Pa(e,f,n,r)}),()=>n;if(Array.isArray(t)){const f=[],d=n&&Array.isArray(n);if(Ol(f,t,n,o))return cn(()=>n=Pa(e,f,n,r,!0)),()=>n;if(f.length===0){if(n=Yo(e,n,r),c)return n}else d?n.length===0?Pp(e,f,r):p6(e,n,f):(n&&Yo(e),Pp(e,f));n=f}else if(t.nodeType){if(Array.isArray(n)){if(c)return n=Yo(e,n,r,t);Yo(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Ol(e,t,n,r){let o=!1;for(let s=0,c=t.length;s<c;s++){let f=t[s],d=n&&n[s],h;if(!(f==null||f===!0||f===!1))if((h=typeof f)=="object"&&f.nodeType)e.push(f);else if(Array.isArray(f))o=Ol(e,f,d)||o;else if(h==="function")if(r){for(;typeof f=="function";)f=f();o=Ol(e,Array.isArray(f)?f:[f],Array.isArray(d)?d:[d])||o}else e.push(f),o=!0;else{const y=String(f);d&&d.nodeType===3&&d.data===y?e.push(d):e.push(document.createTextNode(y))}}return o}function Pp(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function Yo(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let c=t.length-1;c>=0;c--){const f=t[c];if(o!==f){const d=f.parentNode===e;!s&&!c?d?e.replaceChild(o,f):e.insertBefore(o,n):d&&f.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}function m6(e){return Object.keys(e).reduce((n,r)=>{const o=e[r];return n[r]=Object.assign({},o),Ew(o.value)&&!k6(o.value)&&!Array.isArray(o.value)&&(n[r].value=Object.assign({},o.value)),Array.isArray(o.value)&&(n[r].value=o.value.slice(0)),n},{})}function y6(e){return e?Object.keys(e).reduce((n,r)=>{const o=e[r];return n[r]=Ew(o)&&"value"in o?o:{value:o},n[r].attribute||(n[r].attribute=E6(r)),n[r].parse="parse"in n[r]?n[r].parse:typeof n[r].value!="string",n},{}):{}}function v6(e){return Object.keys(e).reduce((n,r)=>(n[r]=e[r].value,n),{})}function _6(e,t){const n=m6(t);return Object.keys(t).forEach(o=>{const s=n[o],c=e.getAttribute(s.attribute),f=e[o];c&&(s.value=s.parse?_w(c):c),f!=null&&(s.value=Array.isArray(f)?f.slice(0):f),s.reflect&&Bp(e,s.attribute,s.value),Object.defineProperty(e,o,{get(){return s.value},set(d){const h=s.value;s.value=d,s.reflect&&Bp(this,s.attribute,s.value);for(let y=0,b=this.__propertyChangedCallbacks.length;y<b;y++)this.__propertyChangedCallbacks[y](o,d,h)},enumerable:!0,configurable:!0})}),n}function _w(e){if(e)try{return JSON.parse(e)}catch{return e}}function Bp(e,t,n){if(n==null||n===!1)return e.removeAttribute(t);let r=JSON.stringify(n);e.__updating[t]=!0,r==="true"&&(r=""),e.setAttribute(t,r),Promise.resolve().then(()=>delete e.__updating[t])}function E6(e){return e.replace(/\.?([A-Z]+)/g,(t,n)=>"-"+n.toLowerCase()).replace("_","-").replace(/^-/,"")}function Ew(e){return e!=null&&(typeof e=="object"||typeof e=="function")}function k6(e){return Object.prototype.toString.call(e)==="[object Function]"}function A6(e){return typeof e=="function"&&e.toString().indexOf("class")===0}let Mu;function S6(e,t){const n=Object.keys(t);return class extends e{static get observedAttributes(){return n.map(o=>t[o].attribute)}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(this.__initialized)return;this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=_6(this,t);const o=v6(this.props),s=this.Component,c=Mu;try{Mu=this,this.__initialized=!0,A6(s)?new s(o,{element:this}):s(o,{element:this})}finally{Mu=c}}async disconnectedCallback(){if(await Promise.resolve(),this.isConnected)return;this.__propertyChangedCallbacks.length=0;let o=null;for(;o=this.__releaseCallbacks.pop();)o(this);delete this.__initialized,this.__released=!0}attributeChangedCallback(o,s,c){if(this.__initialized&&!this.__updating[o]&&(o=this.lookupProp(o),o in t)){if(c==null&&!this[o])return;this[o]=t[o].parse?_w(c):c}}lookupProp(o){if(t)return n.find(s=>o===s||o===t[s].attribute)}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(o){this.__releaseCallbacks.push(o)}addPropertyChangedCallback(o){this.__propertyChangedCallbacks.push(o)}}}function $6(e,t={},n={}){const{BaseElement:r=HTMLElement,extension:o}=n;return s=>{let c=customElements.get(e);return c?(c.prototype.Component=s,c):(c=S6(r,y6(t)),c.prototype.Component=s,c.prototype.registeredTag=e,customElements.define(e,c,o),c)}}function x6(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const[o,s]=dt(e[t[r]]);Object.defineProperty(n,t[r],{get:o,set(c){s(()=>c)}})}return n}function T6(e){if(e.assignedSlot&&e.assignedSlot._$owner)return e.assignedSlot._$owner;let t=e.parentNode;for(;t&&!t._$owner&&!(t.assignedSlot&&t.assignedSlot._$owner);)t=t.parentNode;return t&&t.assignedSlot?t.assignedSlot._$owner:e._$owner}function P6(e){return(t,n)=>{const{element:r}=n;return Il(o=>{const s=x6(t);r.addPropertyChangedCallback((f,d)=>s[f]=d),r.addReleaseCallback(()=>{r.renderRoot.textContent="",o()});const c=e(s,n);return $e(r.renderRoot,c)},T6(r))}}function B6(e,t,n){return arguments.length===2&&(n=t,t={}),$6(e,t)(P6(n))}const C6=`#ztr-content,
#ztr-content img {
  max-width: 100%;
}

#ztr-root {
  display: flex;
  flex-direction: column;
  font-family: var(--ztr-font);
  font-size: var(--ztr-font-size);
  color: var(--ztr-text-color);
  border: 1px solid transparent;
  word-wrap: break-word;
  /* removes margin collapse */
  margin-top: 4em;
  line-height: 1.2em;
}

#ztr-subtitle {
  font-size: 1.2em;
  color: #666;
}

a {
  color: var(--ztr-link-color);
  text-decoration: none;
}

/* Comment */

.ztr-comment {
  position: relative;
  margin: 0;
  padding: 0;
}

.ztr-comment,
.ztr-reply-button {
  background-color: var(--ztr-background-color, rgba(0, 0, 0, 0.03));
}

.ztr-comment-body {
  padding: 1em;
}

.ztr-comment:first-child {
  border-top-left-radius: 0.3em;
  border-top-right-radius: 0.3em;
}

.ztr-comment:last-child {
  border-bottom-left-radius: 0.3em;
  border-bottom-right-radius: 0.3em;
}

.ztr-comment-info-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.ztr-comment-info {
  display: flex;
  align-items: center;
}

.ztr-comment-info-picture {
  width: 3.5em;
}

ul.ztr-comment-info-items {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0;
  font-size: 0.9em;
}

ul.ztr-comment-info-items li {
  display: inline-block;
  cursor: default;
  padding-right: 0.5em;
}

ul.ztr-comment-info-items li a {
  font-weight: 600;
}

.ztr-comment-info-author a {
  font-size: 1.2em;
  padding-right: 0.2em;
}

.ztr-comment-info-dots {
  cursor: pointer;
}

.ztr-comment-info-separator {
  width: 0.5em;
}

.ztr-comment-info-picture img {
  width: 2em;
  height: 2em;
  border-radius: 50%;
  padding: 0.5em;
  position: relative;
  display: block;
  object-fit: cover;
}

.ztr-comment-text,
#ztr-content {
  margin-bottom: 0.75em;
  padding: 0 0.8em 0 3.5em;
  line-height: 1.5em;
  line-break: loose;
  word-break: break-word;
  overflow: hidden;
  max-width: 750px;
}

.ztr-comment-text p {
  margin: 0 0 0.5em 0;
}

.ztr-comment-text code {
  font-size: 1.1em;
  margin: 0 0.2em;
}

.ztr-comment-text pre,
.ztr-info-pane pre {
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  word-wrap: break-word;
}

.ztr-comment-text a:hover {
  text-decoration: underline;
}

.ztr-comment-text img {
  max-width: 100%;
}

.ztr-comment-text .warning {
  margin-top: 0em;
  font-size: 0.8em;
  display: flex;
  align-items: center;
}

.ztr-comment-text .warning svg {
  height: 1.2em;
  fill: #e4984d;
  padding-right: 0.7em;
}

.ztr-comment-replies {
  margin-left: 2em;
}

.highlight p {
  background: #F6AD55;
  color: #2B2B2B;
  display: inline;
  padding: 0.2em;
}

/* Styling the reply to comment form */

.ztr-comment-expand {
  display: flex;
  justify-content: center;
}

.ztr-comment-expand span {
  margin: 1em 0 1em 0.35em;
  cursor: pointer;
}

ul.ztr-comment-actions,
.ztr-comment-expand {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0 0 0 3.5em;
  font-weight: 600;
  user-select: none;
}

ul.ztr-comment-actions li {
  display: inline-flex;
  align-items: center;
  text-align: center;
  padding: 0 2em 0 0;
  cursor: pointer;
}

ul.ztr-comment-actions li span {
  padding: 0.25em 0.25em 0 0.25em;
  color: var(--ztr-icon-color, #3B3B3B);
}

svg {
  fill: var(--ztr-icon-color, #3B3B3B);
  width: 1.1em;
  height: 1.1em;
}

.ztr-comment-action-reply:hover svg {
  fill: #92379c;
}

.ztr-comment-action-reply:hover span {
  color: #92379c;
}

.ztr-comment-action-zap:hover svg {
  fill: #e4984d;
}

.ztr-comment-action-zap:hover span {
  color: #e4984d;
}

.ztr-comment-action-like:hover svg {
  fill: #e35428;
}

.ztr-comment-action-like:hover span {
  color: #e35428;
}

.ztr-reply-form {
  padding: 0 0.5em 0 3.5em;
}

.ztr-reply-form textarea {
  font-family: var(--ztr-font);
  font-size: 1.1em;
  line-height: 1.4;
  color: #2B2B2B;
  background-color: #FDFDFD;
  border: 1px solid #BBB;
  outline: none;
  width: calc(100% - 1.5em);
  padding: 0.7em;
  margin: 0.5em 0;
  height: 4em;
  border-radius: 0.2em;
  min-height: 4em;
  resize: vertical;
}

.ztr-reply-form:disabled {
  opacity: 65%;
  user-select: none;
}

.ztr-reply-controls {
  display: flex;
  align-items: center;
  justify-content: flex-end;
}

.ztr-reply-controls span {
  font-weight: bold;
  font-size: 0.85em;
  margin-right: 1em;
  user-select: none;
  cursor: default;
}

.ztr-reply-error {
  color: rgb(202, 23, 23);
}

.ztr-reply-controls button {
  font-family: var(--ztr-font);
  appearance: none;
  border: none;
  padding: 0.5em 1em;
  border-radius: 0.2em;
  font-size: 0.85em;
  font-weight: 600;
  cursor: pointer;
}

.ztr-reply-login-button {
  color: white;
  background-color: var(--ztr-login-button-color, #2B2B2B);
  margin-left: 1em;
}

.ztr-reply-button {
  color: var(--ztr-text-color);
  display: flex;
  align-items: center;
}

.ztr-info-pane {
  padding: 0 0.5em 1em 3.5em;
}

.ztr-info-pane pre {
  font-size: 0.8em;
}

.ztr-spinner {
  width: 1.2em;
  height: 1.2em;
  padding: 0.9em;
  animation: rotate 4s linear infinite;
}

.ztr-reply-button:disabled {
  opacity: 65%;
  pointer-events: none;
  cursor: pointer;
  user-select: none;
}

.ztr-spinner .path {
  stroke: var(--ztr-text-color, #2B2B2B);
  stroke-linecap: round;
  animation: dash 1.5s ease-in-out infinite;
}

@keyframes rotate {
  100% {
    transform: rotate(360deg);
  }
}

@keyframes dash {
  0% {
    stroke-dasharray: 1, 150;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -35;
  }

  100% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -124;
  }
}

/* new */

.ztr-comment-new .ztr-reply-form {
  margin: 0.5em 0;
  padding: 0;
}

.ztr-comment-new .ztr-comment-body {
  padding: 0;
}

.ztr-comment-new .ztr-comment-actions {
  font-size: 1.1em;
  padding: 0;
}

/* Dark mode defaults */

@media (prefers-color-scheme: dark) {
  .ztr-spinner .path {
    stroke: var(--ztr-text-color, #DEDEDE);
  }

  .ztr-comment,
  .ztr-reply-button {
    background-color: var(--ztr-background-color, rgba(255, 255, 255, 0.06));
  }

  .ztr-reply-login-button {
    color: #2B2B2B;
    background-color: var(--ztr-login-button-color, #DEDEDE);
  }

  svg {
    fill: var(--ztr-icon-color, #DEDEDE);
  }

  ul.ztr-comment-actions li span {
    color: var(--ztr-icon-color);
  }

  .ztr-comment-action-reply:hover svg {
    fill: #96609c;
  }

  .ztr-comment-action-reply:hover span {
    color: #96609c;
  }
}`;function Cp(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function kw(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function L6(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Cp(e.outputLen),Cp(e.blockLen)}function Ba(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function I6(e,t){kw(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Hu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Aw=e=>e instanceof Uint8Array,ju=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Tn=(e,t)=>e<<32-t|e>>>t,O6=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!O6)throw new Error("Non little-endian hardware is not supported");function N6(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ud(e){if(typeof e=="string"&&(e=N6(e)),!Aw(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function R6(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Aw(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let Sw=class{clone(){return this._cloneInto()}};function z6(e){const t=r=>e().update(Ud(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function $w(e=32){if(Hu&&typeof Hu.getRandomValues=="function")return Hu.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function U6(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),c=Number(n>>o&s),f=Number(n&s),d=r?4:0,h=r?0:4;e.setUint32(t+d,c,r),e.setUint32(t+h,f,r)}let M6=class extends Sw{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ju(this.buffer)}update(t){Ba(this);const{view:n,buffer:r,blockLen:o}=this;t=Ud(t);const s=t.length;for(let c=0;c<s;){const f=Math.min(o-this.pos,s-c);if(f===o){const d=ju(t);for(;o<=s-c;c+=o)this.process(d,c);continue}r.set(t.subarray(c,c+f),this.pos),this.pos+=f,c+=f,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ba(this),I6(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>o-c&&(this.process(r,0),c=0);for(let b=c;b<o;b++)n[b]=0;U6(r,o-8,BigInt(this.length*8),s),this.process(r,0);const f=ju(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=d/4,y=this.get();if(h>y.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<h;b++)f.setUint32(4*b,y[b],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:c,pos:f}=this;return t.length=o,t.pos=f,t.finished=s,t.destroyed=c,o%n&&t.buffer.set(r),t}};const H6=(e,t,n)=>e&t^~e&n,j6=(e,t,n)=>e&t^e&n^t&n,D6=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Or=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Nr=new Uint32Array(64);let q6=class extends M6{constructor(){super(64,32,8,!1),this.A=Or[0]|0,this.B=Or[1]|0,this.C=Or[2]|0,this.D=Or[3]|0,this.E=Or[4]|0,this.F=Or[5]|0,this.G=Or[6]|0,this.H=Or[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:c,G:f,H:d}=this;return[t,n,r,o,s,c,f,d]}set(t,n,r,o,s,c,f,d){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=c|0,this.G=f|0,this.H=d|0}process(t,n){for(let b=0;b<16;b++,n+=4)Nr[b]=t.getUint32(n,!1);for(let b=16;b<64;b++){const _=Nr[b-15],T=Nr[b-2],C=Tn(_,7)^Tn(_,18)^_>>>3,A=Tn(T,17)^Tn(T,19)^T>>>10;Nr[b]=A+Nr[b-7]+C+Nr[b-16]|0}let{A:r,B:o,C:s,D:c,E:f,F:d,G:h,H:y}=this;for(let b=0;b<64;b++){const _=Tn(f,6)^Tn(f,11)^Tn(f,25),T=y+_+H6(f,d,h)+D6[b]+Nr[b]|0,A=(Tn(r,2)^Tn(r,13)^Tn(r,22))+j6(r,o,s)|0;y=h,h=d,d=f,f=c+T|0,c=s,s=o,o=r,r=T+A|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,c=c+this.D|0,f=f+this.E|0,d=d+this.F|0,h=h+this.G|0,y=y+this.H|0,this.set(r,o,s,c,f,d,h,y)}roundClean(){Nr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Nl=z6(()=>new q6);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xw=BigInt(0),yc=BigInt(1),V6=BigInt(2),vc=e=>e instanceof Uint8Array,F6=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ai(e){if(!vc(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=F6[e[n]];return t}function Tw(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Md(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Si(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,s=e.slice(o,o+2),c=Number.parseInt(s,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");n[r]=c}return n}function Kt(e){return Md(Ai(e))}function Hd(e){if(!vc(e))throw new Error("Uint8Array expected");return Md(Ai(Uint8Array.from(e).reverse()))}function Qr(e,t){return Si(e.toString(16).padStart(t*2,"0"))}function jd(e,t){return Qr(e,t).reverse()}function K6(e){return Si(Tw(e))}function Pt(e,t,n){let r;if(typeof t=="string")try{r=Si(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(vc(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function Oo(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!vc(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function W6(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function G6(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Z6(e){let t;for(t=0;e>xw;e>>=yc,t+=1);return t}function Y6(e,t){return e>>BigInt(t)&yc}const J6=(e,t,n)=>e|(n?yc:xw)<<BigInt(t),Dd=e=>(V6<<BigInt(e-1))-yc,Du=e=>new Uint8Array(e),Lp=e=>Uint8Array.from(e);function Pw(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Du(e),o=Du(e),s=0;const c=()=>{r.fill(1),o.fill(0),s=0},f=(...b)=>n(o,r,...b),d=(b=Du())=>{o=f(Lp([0]),b),r=f(),b.length!==0&&(o=f(Lp([1]),b),r=f())},h=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const _=[];for(;b<t;){r=f();const T=r.slice();_.push(T),b+=r.length}return Oo(..._)};return(b,_)=>{c(),d(b);let T;for(;!(T=_(h()));)d();return c(),T}}const X6={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function $s(e,t,n={}){const r=(o,s,c)=>{const f=X6[s];if(typeof f!="function")throw new Error(`Invalid validator "${s}", expected function`);const d=e[o];if(!(c&&d===void 0)&&!f(d,e))throw new Error(`Invalid param ${String(o)}=${d} (${typeof d}), expected ${s}`)};for(const[o,s]of Object.entries(t))r(o,s,!1);for(const[o,s]of Object.entries(n))r(o,s,!0);return e}const Q6=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Y6,bitLen:Z6,bitMask:Dd,bitSet:J6,bytesToHex:Ai,bytesToNumberBE:Kt,bytesToNumberLE:Hd,concatBytes:Oo,createHmacDrbg:Pw,ensureBytes:Pt,equalBytes:W6,hexToBytes:Si,hexToNumber:Md,numberToBytesBE:Qr,numberToBytesLE:jd,numberToHexUnpadded:Tw,numberToVarBytesBE:K6,utf8ToBytes:G6,validateObject:$s},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mt=BigInt(0),it=BigInt(1),ko=BigInt(2),e5=BigInt(3),Rl=BigInt(4),Ip=BigInt(5),Op=BigInt(8);BigInt(9);BigInt(16);function kt(e,t){const n=e%t;return n>=mt?n:t+n}function t5(e,t,n){if(n<=mt||t<mt)throw new Error("Expected power/modulo > 0");if(n===it)return mt;let r=it;for(;t>mt;)t&it&&(r=r*e%n),e=e*e%n,t>>=it;return r}function nn(e,t,n){let r=e;for(;t-- >mt;)r*=r,r%=n;return r}function zl(e,t){if(e===mt||t<=mt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=kt(e,t),r=t,o=mt,s=it;for(;n!==mt;){const f=r/n,d=r%n,h=o-s*f;r=n,n=d,o=s,s=h}if(r!==it)throw new Error("invert: does not exist");return kt(o,t)}function n5(e){const t=(e-it)/ko;let n,r,o;for(n=e-it,r=0;n%ko===mt;n/=ko,r++);for(o=ko;o<e&&t5(o,t,e)!==e-it;o++);if(r===1){const c=(e+it)/Rl;return function(d,h){const y=d.pow(h,c);if(!d.eql(d.sqr(y),h))throw new Error("Cannot find square root");return y}}const s=(n+it)/ko;return function(f,d){if(f.pow(d,t)===f.neg(f.ONE))throw new Error("Cannot find square root");let h=r,y=f.pow(f.mul(f.ONE,o),n),b=f.pow(d,s),_=f.pow(d,n);for(;!f.eql(_,f.ONE);){if(f.eql(_,f.ZERO))return f.ZERO;let T=1;for(let A=f.sqr(_);T<h&&!f.eql(A,f.ONE);T++)A=f.sqr(A);const C=f.pow(y,it<<BigInt(h-T-1));y=f.sqr(C),b=f.mul(b,C),_=f.mul(_,y),h=T}return b}}function r5(e){if(e%Rl===e5){const t=(e+it)/Rl;return function(r,o){const s=r.pow(o,t);if(!r.eql(r.sqr(s),o))throw new Error("Cannot find square root");return s}}if(e%Op===Ip){const t=(e-Ip)/Op;return function(r,o){const s=r.mul(o,ko),c=r.pow(s,t),f=r.mul(o,c),d=r.mul(r.mul(f,ko),c),h=r.mul(f,r.sub(d,r.ONE));if(!r.eql(r.sqr(h),o))throw new Error("Cannot find square root");return h}}return n5(e)}const o5=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function i5(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=o5.reduce((r,o)=>(r[o]="function",r),t);return $s(e,n)}function s5(e,t,n){if(n<mt)throw new Error("Expected power > 0");if(n===mt)return e.ONE;if(n===it)return t;let r=e.ONE,o=t;for(;n>mt;)n&it&&(r=e.mul(r,o)),o=e.sqr(o),n>>=it;return r}function a5(e,t){const n=new Array(t.length),r=t.reduce((s,c,f)=>e.is0(c)?s:(n[f]=s,e.mul(s,c)),e.ONE),o=e.inv(r);return t.reduceRight((s,c,f)=>e.is0(c)?s:(n[f]=e.mul(s,n[f]),e.mul(s,c)),o),n}function Bw(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function c5(e,t,n=!1,r={}){if(e<=mt)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:s}=Bw(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=r5(e),f=Object.freeze({ORDER:e,BITS:o,BYTES:s,MASK:Dd(o),ZERO:mt,ONE:it,create:d=>kt(d,e),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return mt<=d&&d<e},is0:d=>d===mt,isOdd:d=>(d&it)===it,neg:d=>kt(-d,e),eql:(d,h)=>d===h,sqr:d=>kt(d*d,e),add:(d,h)=>kt(d+h,e),sub:(d,h)=>kt(d-h,e),mul:(d,h)=>kt(d*h,e),pow:(d,h)=>s5(f,d,h),div:(d,h)=>kt(d*zl(h,e),e),sqrN:d=>d*d,addN:(d,h)=>d+h,subN:(d,h)=>d-h,mulN:(d,h)=>d*h,inv:d=>zl(d,e),sqrt:r.sqrt||(d=>c(f,d)),invertBatch:d=>a5(f,d),cmov:(d,h,y)=>y?h:d,toBytes:d=>n?jd(d,s):Qr(d,s),fromBytes:d=>{if(d.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${d.length}`);return n?Hd(d):Kt(d)}});return Object.freeze(f)}function Cw(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Lw(e){const t=Cw(e);return t+Math.ceil(t/2)}function u5(e,t,n=!1){const r=e.length,o=Cw(t),s=Lw(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const c=n?Kt(e):Hd(e),f=kt(c,t-it)+it;return n?jd(f,o):Qr(f,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const l5=BigInt(0),qu=BigInt(1);function d5(e,t){const n=(o,s)=>{const c=s.negate();return o?c:s},r=o=>{const s=Math.ceil(t/o)+1,c=2**(o-1);return{windows:s,windowSize:c}};return{constTimeNegate:n,unsafeLadder(o,s){let c=e.ZERO,f=o;for(;s>l5;)s&qu&&(c=c.add(f)),f=f.double(),s>>=qu;return c},precomputeWindow(o,s){const{windows:c,windowSize:f}=r(s),d=[];let h=o,y=h;for(let b=0;b<c;b++){y=h,d.push(y);for(let _=1;_<f;_++)y=y.add(h),d.push(y);h=y.double()}return d},wNAF(o,s,c){const{windows:f,windowSize:d}=r(o);let h=e.ZERO,y=e.BASE;const b=BigInt(2**o-1),_=2**o,T=BigInt(o);for(let C=0;C<f;C++){const A=C*d;let L=Number(c&b);c>>=T,L>d&&(L-=_,c+=qu);const H=A,I=A+Math.abs(L)-1,N=C%2!==0,l=L<0;L===0?y=y.add(n(N,s[H])):h=h.add(n(l,s[I]))}return{p:h,f:y}},wNAFCached(o,s,c,f){const d=o._WINDOW_SIZE||1;let h=s.get(o);return h||(h=this.precomputeWindow(o,d),d!==1&&s.set(o,f(h))),this.wNAF(d,h,c)}}}function Iw(e){return i5(e.Fp),$s(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Bw(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function f5(e){const t=Iw(e);$s(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:h5,hexToBytes:p5}=Q6,xo={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=xo;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:h5(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=xo,n=typeof e=="string"?p5(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:s}=xo._parseInt(n.subarray(2)),{d:c,l:f}=xo._parseInt(s);if(f.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:c}},hexFromSig(e){const t=h=>Number.parseInt(h[0],16)&8?"00"+h:h,n=h=>{const y=h.toString(16);return y.length&1?`0${y}`:y},r=t(n(e.s)),o=t(n(e.r)),s=r.length/2,c=o.length/2,f=n(s),d=n(c);return`30${n(c+s+4)}02${d}${o}02${f}${r}`}},Xn=BigInt(0),on=BigInt(1);BigInt(2);const Np=BigInt(3);BigInt(4);function g5(e){const t=f5(e),{Fp:n}=t,r=t.toBytes||((C,A,L)=>{const H=A.toAffine();return Oo(Uint8Array.from([4]),n.toBytes(H.x),n.toBytes(H.y))}),o=t.fromBytes||(C=>{const A=C.subarray(1),L=n.fromBytes(A.subarray(0,n.BYTES)),H=n.fromBytes(A.subarray(n.BYTES,2*n.BYTES));return{x:L,y:H}});function s(C){const{a:A,b:L}=t,H=n.sqr(C),I=n.mul(H,C);return n.add(n.add(I,n.mul(C,A)),L)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function c(C){return typeof C=="bigint"&&Xn<C&&C<t.n}function f(C){if(!c(C))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(C){const{allowedPrivateKeyLengths:A,nByteLength:L,wrapPrivateKey:H,n:I}=t;if(A&&typeof C!="bigint"){if(C instanceof Uint8Array&&(C=Ai(C)),typeof C!="string"||!A.includes(C.length))throw new Error("Invalid key");C=C.padStart(L*2,"0")}let N;try{N=typeof C=="bigint"?C:Kt(Pt("private key",C,L))}catch{throw new Error(`private key must be ${L} bytes, hex or bigint, not ${typeof C}`)}return H&&(N=kt(N,I)),f(N),N}const h=new Map;function y(C){if(!(C instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(A,L,H){if(this.px=A,this.py=L,this.pz=H,A==null||!n.isValid(A))throw new Error("x required");if(L==null||!n.isValid(L))throw new Error("y required");if(H==null||!n.isValid(H))throw new Error("z required")}static fromAffine(A){const{x:L,y:H}=A||{};if(!A||!n.isValid(L)||!n.isValid(H))throw new Error("invalid affine point");if(A instanceof b)throw new Error("projective point not allowed");const I=N=>n.eql(N,n.ZERO);return I(L)&&I(H)?b.ZERO:new b(L,H,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const L=n.invertBatch(A.map(H=>H.pz));return A.map((H,I)=>H.toAffine(L[I])).map(b.fromAffine)}static fromHex(A){const L=b.fromAffine(o(Pt("pointHex",A)));return L.assertValidity(),L}static fromPrivateKey(A){return b.BASE.multiply(d(A))}_setWindowSize(A){this._WINDOW_SIZE=A,h.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:A,y:L}=this.toAffine();if(!n.isValid(A)||!n.isValid(L))throw new Error("bad point: x or y not FE");const H=n.sqr(L),I=s(A);if(!n.eql(H,I))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:A}=this.toAffine();if(n.isOdd)return!n.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){y(A);const{px:L,py:H,pz:I}=this,{px:N,py:l,pz:w}=A,p=n.eql(n.mul(L,w),n.mul(N,I)),E=n.eql(n.mul(H,w),n.mul(l,I));return p&&E}negate(){return new b(this.px,n.neg(this.py),this.pz)}double(){const{a:A,b:L}=t,H=n.mul(L,Np),{px:I,py:N,pz:l}=this;let w=n.ZERO,p=n.ZERO,E=n.ZERO,$=n.mul(I,I),R=n.mul(N,N),P=n.mul(l,l),v=n.mul(I,N);return v=n.add(v,v),E=n.mul(I,l),E=n.add(E,E),w=n.mul(A,E),p=n.mul(H,P),p=n.add(w,p),w=n.sub(R,p),p=n.add(R,p),p=n.mul(w,p),w=n.mul(v,w),E=n.mul(H,E),P=n.mul(A,P),v=n.sub($,P),v=n.mul(A,v),v=n.add(v,E),E=n.add($,$),$=n.add(E,$),$=n.add($,P),$=n.mul($,v),p=n.add(p,$),P=n.mul(N,l),P=n.add(P,P),$=n.mul(P,v),w=n.sub(w,$),E=n.mul(P,R),E=n.add(E,E),E=n.add(E,E),new b(w,p,E)}add(A){y(A);const{px:L,py:H,pz:I}=this,{px:N,py:l,pz:w}=A;let p=n.ZERO,E=n.ZERO,$=n.ZERO;const R=t.a,P=n.mul(t.b,Np);let v=n.mul(L,N),x=n.mul(H,l),z=n.mul(I,w),V=n.add(L,H),O=n.add(N,l);V=n.mul(V,O),O=n.add(v,x),V=n.sub(V,O),O=n.add(L,I);let S=n.add(N,w);return O=n.mul(O,S),S=n.add(v,z),O=n.sub(O,S),S=n.add(H,I),p=n.add(l,w),S=n.mul(S,p),p=n.add(x,z),S=n.sub(S,p),$=n.mul(R,O),p=n.mul(P,z),$=n.add(p,$),p=n.sub(x,$),$=n.add(x,$),E=n.mul(p,$),x=n.add(v,v),x=n.add(x,v),z=n.mul(R,z),O=n.mul(P,O),x=n.add(x,z),z=n.sub(v,z),z=n.mul(R,z),O=n.add(O,z),v=n.mul(x,O),E=n.add(E,v),v=n.mul(S,O),p=n.mul(V,p),p=n.sub(p,v),v=n.mul(V,x),$=n.mul(S,$),$=n.add($,v),new b(p,E,$)}subtract(A){return this.add(A.negate())}is0(){return this.equals(b.ZERO)}wNAF(A){return T.wNAFCached(this,h,A,L=>{const H=n.invertBatch(L.map(I=>I.pz));return L.map((I,N)=>I.toAffine(H[N])).map(b.fromAffine)})}multiplyUnsafe(A){const L=b.ZERO;if(A===Xn)return L;if(f(A),A===on)return this;const{endo:H}=t;if(!H)return T.unsafeLadder(this,A);let{k1neg:I,k1:N,k2neg:l,k2:w}=H.splitScalar(A),p=L,E=L,$=this;for(;N>Xn||w>Xn;)N&on&&(p=p.add($)),w&on&&(E=E.add($)),$=$.double(),N>>=on,w>>=on;return I&&(p=p.negate()),l&&(E=E.negate()),E=new b(n.mul(E.px,H.beta),E.py,E.pz),p.add(E)}multiply(A){f(A);let L=A,H,I;const{endo:N}=t;if(N){const{k1neg:l,k1:w,k2neg:p,k2:E}=N.splitScalar(L);let{p:$,f:R}=this.wNAF(w),{p:P,f:v}=this.wNAF(E);$=T.constTimeNegate(l,$),P=T.constTimeNegate(p,P),P=new b(n.mul(P.px,N.beta),P.py,P.pz),H=$.add(P),I=R.add(v)}else{const{p:l,f:w}=this.wNAF(L);H=l,I=w}return b.normalizeZ([H,I])[0]}multiplyAndAddUnsafe(A,L,H){const I=b.BASE,N=(w,p)=>p===Xn||p===on||!w.equals(I)?w.multiplyUnsafe(p):w.multiply(p),l=N(this,L).add(N(A,H));return l.is0()?void 0:l}toAffine(A){const{px:L,py:H,pz:I}=this,N=this.is0();A==null&&(A=N?n.ONE:n.inv(I));const l=n.mul(L,A),w=n.mul(H,A),p=n.mul(I,A);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(p,n.ONE))throw new Error("invZ was invalid");return{x:l,y:w}}isTorsionFree(){const{h:A,isTorsionFree:L}=t;if(A===on)return!0;if(L)return L(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:L}=t;return A===on?this:L?L(b,this):this.multiplyUnsafe(t.h)}toRawBytes(A=!0){return this.assertValidity(),r(b,this,A)}toHex(A=!0){return Ai(this.toRawBytes(A))}}b.BASE=new b(t.Gx,t.Gy,n.ONE),b.ZERO=new b(n.ZERO,n.ONE,n.ZERO);const _=t.nBitLength,T=d5(b,t.endo?Math.ceil(_/2):_);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:d,weierstrassEquation:s,isWithinCurveOrder:c}}function w5(e){const t=Iw(e);return $s(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function b5(e){const t=w5(e),{Fp:n,n:r}=t,o=n.BYTES+1,s=2*n.BYTES+1;function c(O){return Xn<O&&O<n.ORDER}function f(O){return kt(O,r)}function d(O){return zl(O,r)}const{ProjectivePoint:h,normPrivateKeyToScalar:y,weierstrassEquation:b,isWithinCurveOrder:_}=g5({...t,toBytes(O,S,D){const K=S.toAffine(),W=n.toBytes(K.x),Z=Oo;return D?Z(Uint8Array.from([S.hasEvenY()?2:3]),W):Z(Uint8Array.from([4]),W,n.toBytes(K.y))},fromBytes(O){const S=O.length,D=O[0],K=O.subarray(1);if(S===o&&(D===2||D===3)){const W=Kt(K);if(!c(W))throw new Error("Point is not on curve");const Z=b(W);let G=n.sqrt(Z);const oe=(G&on)===on;return(D&1)===1!==oe&&(G=n.neg(G)),{x:W,y:G}}else if(S===s&&D===4){const W=n.fromBytes(K.subarray(0,n.BYTES)),Z=n.fromBytes(K.subarray(n.BYTES,2*n.BYTES));return{x:W,y:Z}}else throw new Error(`Point of length ${S} was invalid. Expected ${o} compressed bytes or ${s} uncompressed bytes`)}}),T=O=>Ai(Qr(O,t.nByteLength));function C(O){const S=r>>on;return O>S}function A(O){return C(O)?f(-O):O}const L=(O,S,D)=>Kt(O.slice(S,D));class H{constructor(S,D,K){this.r=S,this.s=D,this.recovery=K,this.assertValidity()}static fromCompact(S){const D=t.nByteLength;return S=Pt("compactSignature",S,D*2),new H(L(S,0,D),L(S,D,2*D))}static fromDER(S){const{r:D,s:K}=xo.toSig(Pt("DER",S));return new H(D,K)}assertValidity(){if(!_(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!_(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new H(this.r,this.s,S)}recoverPublicKey(S){const{r:D,s:K,recovery:W}=this,Z=E(Pt("msgHash",S));if(W==null||![0,1,2,3].includes(W))throw new Error("recovery id invalid");const G=W===2||W===3?D+t.n:D;if(G>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const oe=W&1?"03":"02",he=h.fromHex(oe+T(G)),me=d(G),Ae=f(-Z*me),re=f(K*me),ye=h.BASE.multiplyAndAddUnsafe(he,Ae,re);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return C(this.s)}normalizeS(){return this.hasHighS()?new H(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return Si(this.toDERHex())}toDERHex(){return xo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Si(this.toCompactHex())}toCompactHex(){return T(this.r)+T(this.s)}}const I={isValidPrivateKey(O){try{return y(O),!0}catch{return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const O=Lw(t.n);return u5(t.randomBytes(O),t.n)},precompute(O=8,S=h.BASE){return S._setWindowSize(O),S.multiply(BigInt(3)),S}};function N(O,S=!0){return h.fromPrivateKey(O).toRawBytes(S)}function l(O){const S=O instanceof Uint8Array,D=typeof O=="string",K=(S||D)&&O.length;return S?K===o||K===s:D?K===2*o||K===2*s:O instanceof h}function w(O,S,D=!0){if(l(O))throw new Error("first arg must be private key");if(!l(S))throw new Error("second arg must be public key");return h.fromHex(S).multiply(y(O)).toRawBytes(D)}const p=t.bits2int||function(O){const S=Kt(O),D=O.length*8-t.nBitLength;return D>0?S>>BigInt(D):S},E=t.bits2int_modN||function(O){return f(p(O))},$=Dd(t.nBitLength);function R(O){if(typeof O!="bigint")throw new Error("bigint expected");if(!(Xn<=O&&O<$))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Qr(O,t.nByteLength)}function P(O,S,D=v){if(["recovered","canonical"].some(Ie=>Ie in D))throw new Error("sign() legacy options not supported");const{hash:K,randomBytes:W}=t;let{lowS:Z,prehash:G,extraEntropy:oe}=D;Z==null&&(Z=!0),O=Pt("msgHash",O),G&&(O=Pt("prehashed msgHash",K(O)));const he=E(O),me=y(S),Ae=[R(me),R(he)];if(oe!=null){const Ie=oe===!0?W(n.BYTES):oe;Ae.push(Pt("extraEntropy",Ie))}const re=Oo(...Ae),ye=he;function Le(Ie){const Me=p(Ie);if(!_(Me))return;const pt=d(Me),Ke=h.BASE.multiply(Me).toAffine(),se=f(Ke.x);if(se===Xn)return;const Oe=f(pt*f(ye+se*me));if(Oe===Xn)return;let xe=(Ke.x===se?0:2)|Number(Ke.y&on),Te=Oe;return Z&&C(Oe)&&(Te=A(Oe),xe^=1),new H(se,Te,xe)}return{seed:re,k2sig:Le}}const v={lowS:t.lowS,prehash:!1},x={lowS:t.lowS,prehash:!1};function z(O,S,D=v){const{seed:K,k2sig:W}=P(O,S,D),Z=t;return Pw(Z.hash.outputLen,Z.nByteLength,Z.hmac)(K,W)}h.BASE._setWindowSize(8);function V(O,S,D,K=x){var W;const Z=O;if(S=Pt("msgHash",S),D=Pt("publicKey",D),"strict"in K)throw new Error("options.strict was renamed to lowS");const{lowS:G,prehash:oe}=K;let he,me;try{if(typeof Z=="string"||Z instanceof Uint8Array)try{he=H.fromDER(Z)}catch(se){if(!(se instanceof xo.Err))throw se;he=H.fromCompact(Z)}else if(typeof Z=="object"&&typeof Z.r=="bigint"&&typeof Z.s=="bigint"){const{r:se,s:Oe}=Z;he=new H(se,Oe)}else throw new Error("PARSE");me=h.fromHex(D)}catch(se){if(se.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(G&&he.hasHighS())return!1;oe&&(S=t.hash(S));const{r:Ae,s:re}=he,ye=E(S),Le=d(re),Ie=f(ye*Le),Me=f(Ae*Le),pt=(W=h.BASE.multiplyAndAddUnsafe(me,Ie,Me))==null?void 0:W.toAffine();return pt?f(pt.x)===Ae:!1}return{CURVE:t,getPublicKey:N,getSharedSecret:w,sign:z,verify:V,ProjectivePoint:h,Signature:H,utils:I}}class Ow extends Sw{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,L6(t);const r=Ud(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?t.create().update(r).digest():r);for(let c=0;c<s.length;c++)s[c]^=54;this.iHash.update(s),this.oHash=t.create();for(let c=0;c<s.length;c++)s[c]^=106;this.oHash.update(s),s.fill(0)}update(t){return Ba(this),this.iHash.update(t),this}digestInto(t){Ba(this),kw(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:s,blockLen:c,outputLen:f}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=c,t.outputLen=f,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Nw=(e,t,n)=>new Ow(e,t).update(n).digest();Nw.create=(e,t)=>new Ow(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function m5(e){return{hash:e,hmac:(t,...n)=>Nw(e,t,R6(...n)),randomBytes:$w}}function y5(e,t){const n=r=>b5({...e,...m5(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ca=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Rw=BigInt(1),La=BigInt(2),Rp=(e,t)=>(e+t/La)/t;function zw(e){const t=_c,n=BigInt(3),r=BigInt(6),o=BigInt(11),s=BigInt(22),c=BigInt(23),f=BigInt(44),d=BigInt(88),h=e*e*e%t,y=h*h*e%t,b=nn(y,n,t)*y%t,_=nn(b,n,t)*y%t,T=nn(_,La,t)*h%t,C=nn(T,o,t)*T%t,A=nn(C,s,t)*C%t,L=nn(A,f,t)*A%t,H=nn(L,d,t)*L%t,I=nn(H,f,t)*A%t,N=nn(I,n,t)*y%t,l=nn(N,c,t)*C%t,w=nn(l,r,t)*h%t,p=nn(w,La,t);if(!Ul.eql(Ul.sqr(p),e))throw new Error("Cannot find square root");return p}const Ul=c5(_c,void 0,void 0,{sqrt:zw}),qd=y5({a:BigInt(0),b:BigInt(7),Fp:Ul,n:Ca,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ca,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Rw*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,c=BigInt("0x100000000000000000000000000000000"),f=Rp(s*e,t),d=Rp(-r*e,t);let h=kt(e-f*n-d*o,t),y=kt(-f*r-d*s,t);const b=h>c,_=y>c;if(b&&(h=t-h),_&&(y=t-y),h>c||y>c)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:b,k1:h,k2neg:_,k2:y}}}},Nl),Ec=BigInt(0),Uw=e=>typeof e=="bigint"&&Ec<e&&e<_c,v5=e=>typeof e=="bigint"&&Ec<e&&e<Ca,zp={};function Ia(e,...t){let n=zp[e];if(n===void 0){const r=Nl(Uint8Array.from(e,o=>o.charCodeAt(0)));n=Oo(r,r),zp[e]=n}return Nl(Oo(n,...t))}const Vd=e=>e.toRawBytes(!0).slice(1),Ml=e=>Qr(e,32),Vu=e=>kt(e,_c),hs=e=>kt(e,Ca),Fd=qd.ProjectivePoint,_5=(e,t,n)=>Fd.BASE.multiplyAndAddUnsafe(e,t,n);function Hl(e){let t=qd.utils.normPrivateKeyToScalar(e),n=Fd.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:hs(-t),bytes:Vd(n)}}function Mw(e){if(!Uw(e))throw new Error("bad x: need 0 < x < p");const t=Vu(e*e),n=Vu(t*e+BigInt(7));let r=zw(n);r%La!==Ec&&(r=Vu(-r));const o=new Fd(e,r,Rw);return o.assertValidity(),o}function Hw(...e){return hs(Kt(Ia("BIP0340/challenge",...e)))}function E5(e){return Hl(e).bytes}function k5(e,t,n=$w(32)){const r=Pt("message",e),{bytes:o,scalar:s}=Hl(t),c=Pt("auxRand",n,32),f=Ml(s^Kt(Ia("BIP0340/aux",c))),d=Ia("BIP0340/nonce",f,o,r),h=hs(Kt(d));if(h===Ec)throw new Error("sign failed: k is zero");const{bytes:y,scalar:b}=Hl(h),_=Hw(y,o,r),T=new Uint8Array(64);if(T.set(y,0),T.set(Ml(hs(b+_*s)),32),!jw(T,r,o))throw new Error("sign: Invalid signature produced");return T}function jw(e,t,n){const r=Pt("signature",e,64),o=Pt("message",t),s=Pt("publicKey",n,32);try{const c=Mw(Kt(s)),f=Kt(r.subarray(0,32));if(!Uw(f))return!1;const d=Kt(r.subarray(32,64));if(!v5(d))return!1;const h=Hw(Ml(f),Vd(c),o),y=_5(c,d,hs(-h));return!(!y||!y.hasEvenY()||y.toAffine().x!==f)}catch{return!1}}const Ut={getPublicKey:E5,sign:k5,verify:jw,utils:{randomPrivateKey:qd.utils.randomPrivateKey,lift_x:Mw,pointToBytes:Vd,numberToBytesBE:Qr,bytesToNumberBE:Kt,taggedHash:Ia,mod:kt}};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dw=e=>e instanceof Uint8Array,Fu=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Pn=(e,t)=>e<<32-t|e>>>t,A5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!A5)throw new Error("Non little-endian hardware is not supported");const S5=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Xe(e){if(!Dw(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=S5[e[n]];return t}function qw(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,s=e.slice(o,o+2),c=Number.parseInt(s,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");n[r]=c}return n}function $5(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Vw(e){if(typeof e=="string"&&(e=$5(e)),!Dw(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}class x5{clone(){return this._cloneInto()}}function Fw(e){const t=r=>e().update(Vw(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function jl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function T5(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Kw(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function P5(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");jl(e.outputLen),jl(e.blockLen)}function B5(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function C5(e,t){Kw(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Ku={number:jl,bool:T5,bytes:Kw,hash:P5,exists:B5,output:C5};function L5(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),c=Number(n>>o&s),f=Number(n&s),d=r?4:0,h=r?0:4;e.setUint32(t+d,c,r),e.setUint32(t+h,f,r)}class I5 extends x5{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Fu(this.buffer)}update(t){Ku.exists(this);const{view:n,buffer:r,blockLen:o}=this;t=Vw(t);const s=t.length;for(let c=0;c<s;){const f=Math.min(o-this.pos,s-c);if(f===o){const d=Fu(t);for(;o<=s-c;c+=o)this.process(d,c);continue}r.set(t.subarray(c,c+f),this.pos),this.pos+=f,c+=f,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ku.exists(this),Ku.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>o-c&&(this.process(r,0),c=0);for(let b=c;b<o;b++)n[b]=0;L5(r,o-8,BigInt(this.length*8),s),this.process(r,0);const f=Fu(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=d/4,y=this.get();if(h>y.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<h;b++)f.setUint32(4*b,y[b],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:c,pos:f}=this;return t.length=o,t.pos=f,t.finished=s,t.destroyed=c,o%n&&t.buffer.set(r),t}}const O5=(e,t,n)=>e&t^~e&n,N5=(e,t,n)=>e&t^e&n^t&n,R5=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Rr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zr=new Uint32Array(64);class Ww extends I5{constructor(){super(64,32,8,!1),this.A=Rr[0]|0,this.B=Rr[1]|0,this.C=Rr[2]|0,this.D=Rr[3]|0,this.E=Rr[4]|0,this.F=Rr[5]|0,this.G=Rr[6]|0,this.H=Rr[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:c,G:f,H:d}=this;return[t,n,r,o,s,c,f,d]}set(t,n,r,o,s,c,f,d){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=c|0,this.G=f|0,this.H=d|0}process(t,n){for(let b=0;b<16;b++,n+=4)zr[b]=t.getUint32(n,!1);for(let b=16;b<64;b++){const _=zr[b-15],T=zr[b-2],C=Pn(_,7)^Pn(_,18)^_>>>3,A=Pn(T,17)^Pn(T,19)^T>>>10;zr[b]=A+zr[b-7]+C+zr[b-16]|0}let{A:r,B:o,C:s,D:c,E:f,F:d,G:h,H:y}=this;for(let b=0;b<64;b++){const _=Pn(f,6)^Pn(f,11)^Pn(f,25),T=y+_+O5(f,d,h)+R5[b]+zr[b]|0,A=(Pn(r,2)^Pn(r,13)^Pn(r,22))+N5(r,o,s)|0;y=h,h=d,d=f,f=c+T|0,c=s,s=o,o=r,r=T+A|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,c=c+this.D|0,f=f+this.E|0,d=d+this.F|0,h=h+this.G|0,y=y+this.H|0,this.set(r,o,s,c,f,d,h,y)}roundClean(){zr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class z5 extends Ww{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Kd=Fw(()=>new Ww);Fw(()=>new z5);var _o=Symbol("verified"),U5=e=>e instanceof Object;function M5(e){if(!U5(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var H5=new TextEncoder;function Gi(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var j5=class{constructor(t){pe(this,"value"),pe(this,"next",null),pe(this,"prev",null),this.value=t}},D5=class{constructor(){pe(this,"first"),pe(this,"last"),this.first=null,this.last=null}enqueue(t){const n=new j5(t);return this.last?this.last===this.first?(this.last=n,this.last.prev=this.first,this.first.next=n):(n.prev=this.last,this.last.next=n,this.last=n):(this.first=n,this.last=n),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const n=this.first;return this.first=null,this.last=null,n.value}const t=this.first;return this.first=t.next,t.value}},q5=class{generateSecretKey(){return Ut.utils.randomPrivateKey()}getPublicKey(t){return Xe(Ut.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=Xe(Ut.getPublicKey(n)),r.id=Wu(r),r.sig=Xe(Ut.sign(Wu(r),n)),r[_o]=!0,r}verifyEvent(t){if(typeof t[_o]=="boolean")return t[_o];const n=Wu(t);if(n!==t.id)return t[_o]=!1,!1;try{const r=Ut.verify(t.sig,n,t.pubkey);return t[_o]=r,r}catch{return t[_o]=!1,!1}}};function V5(e){if(!M5(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Wu(e){let t=Kd(H5.encode(V5(e)));return Xe(t)}var kc=new q5;kc.generateSecretKey;kc.getPublicKey;kc.finalizeEvent;var F5=kc.verifyEvent,K5=22242;function W5(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(n=>t.id.startsWith(n))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(n=>t.pubkey.startsWith(n)))return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([s,c])=>s===n.slice(1)&&o.indexOf(c)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function G5(e,t){for(let n=0;n<e.length;n++)if(W5(e[n],t))return!0;return!1}function Z5(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function Y5(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let s=r+1+o;return e.slice(r+1,s)}function J5(e,t){return{kind:K5,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function X5(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var Q5=e=>(e[_o]=!0,!0),Gw;try{Gw=WebSocket}catch{}var Zw=class{constructor(t,n){pe(this,"url"),pe(this,"_connected",!1),pe(this,"onclose",null),pe(this,"onnotice",r=>console.debug(`NOTICE from ${this.url}: ${r}`)),pe(this,"_onauth",null),pe(this,"baseEoseTimeout",4400),pe(this,"connectionTimeout",4400),pe(this,"openSubs",new Map),pe(this,"connectionTimeoutHandle"),pe(this,"connectionPromise"),pe(this,"openCountRequests",new Map),pe(this,"openEventPublishes",new Map),pe(this,"ws"),pe(this,"incomingMessageQueue",new D5),pe(this,"queueRunning",!1),pe(this,"challenge"),pe(this,"serial",0),pe(this,"verifyEvent"),this.url=Gi(t),this.verifyEvent=n.verifyEvent}static async connect(t,n){const r=new Zw(t,n);return await r.connect(),r}closeAllSubscriptions(t){for(let[n,r]of this.openSubs)r.close(t);this.openSubs.clear();for(let[n,r]of this.openEventPublishes)r.reject(new Error(t));this.openEventPublishes.clear();for(let[n,r]of this.openCountRequests)r.reject(new Error(t));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((t,n)=>{this.connectionTimeoutHandle=setTimeout(()=>{var r;n("connection timed out"),this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new Gw(this.url)}catch(r){n(r);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,t()},this.ws.onerror=r=>{var o;n(r.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(o=this.onclose)==null||o.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var r;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await X5();this.queueRunning=!1}handleNext(){var t,n,r;const o=this.incomingMessageQueue.dequeue();if(!o)return!1;const s=Y5(o);if(s){const c=this.openSubs.get(s);if(!c)return;const f=Z5(o,"id"),d=(t=c.alreadyHaveEvent)==null?void 0:t.call(c,f);if((n=c.receivedEvent)==null||n.call(c,this,f),d)return}try{let c=JSON.parse(o);switch(c[0]){case"EVENT":{const f=this.openSubs.get(c[1]),d=c[2];this.verifyEvent(d)&&G5(f.filters,d)&&f.onevent(d);return}case"COUNT":{const f=c[1],d=c[2],h=this.openCountRequests.get(f);h&&(h.resolve(d.count),this.openCountRequests.delete(f));return}case"EOSE":{const f=this.openSubs.get(c[1]);if(!f)return;f.receivedEose();return}case"OK":{const f=c[1],d=c[2],h=c[3],y=this.openEventPublishes.get(f);d?y.resolve(h):y.reject(new Error(h)),this.openEventPublishes.delete(f);return}case"CLOSED":{const f=c[1],d=this.openSubs.get(f);if(!d)return;d.closed=!0,d.close(c[2]);return}case"NOTICE":this.onnotice(c[1]);return;case"AUTH":{this.challenge=c[1],(r=this._onauth)==null||r.call(this,c[1]);return}}}catch{return}}async send(t){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var n;(n=this.ws)==null||n.send(t)})}async auth(t){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const n=await t(J5(this.url,this.challenge)),r=new Promise((o,s)=>{this.openEventPublishes.set(n.id,{resolve:o,reject:s})});return this.send('["AUTH",'+JSON.stringify(n)+"]"),r}async publish(t){const n=new Promise((r,o)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:o})});return this.send('["EVENT",'+JSON.stringify(t)+"]"),n}async count(t,n){this.serial++;const r=(n==null?void 0:n.id)||"count:"+this.serial,o=new Promise((s,c)=>{this.openCountRequests.set(r,{resolve:s,reject:c})});return this.send('["COUNT","'+r+'",'+JSON.stringify(t)+"]"),o}subscribe(t,n){const r=this.prepareSubscription(t,n);return r.fire(),r}prepareSubscription(t,n){this.serial++;const r=n.id||"sub:"+this.serial,o=new ek(this,r,t,n);return this.openSubs.set(r,o),o}close(){var t;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(t=this.ws)==null||t.close()}_onmessage(t){this.incomingMessageQueue.enqueue(t.data),this.queueRunning||this.runQueue()}},ek=class{constructor(t,n,r,o){pe(this,"relay"),pe(this,"id"),pe(this,"closed",!1),pe(this,"eosed",!1),pe(this,"filters"),pe(this,"alreadyHaveEvent"),pe(this,"receivedEvent"),pe(this,"onevent"),pe(this,"oneose"),pe(this,"onclose"),pe(this,"eoseTimeout"),pe(this,"eoseTimeoutHandle"),this.relay=t,this.filters=r,this.id=n,this.alreadyHaveEvent=o.alreadyHaveEvent,this.receivedEvent=o.receivedEvent,this.eoseTimeout=o.eoseTimeout||t.baseEoseTimeout,this.oneose=o.oneose,this.onclose=o.onclose,this.onevent=o.onevent||(s=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,s)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var t;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(t=this.oneose)==null||t.call(this))}close(t="closed by caller"){var n;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(n=this.onclose)==null||n.call(this,t)}},tk=class{constructor(e){pe(this,"relays",new Map),pe(this,"seenOn",new Map),pe(this,"trackRelays",!1),pe(this,"verifyEvent"),pe(this,"trustedRelayURLs",new Set),this.verifyEvent=e.verifyEvent}async ensureRelay(e,t){e=Gi(e);let n=this.relays.get(e);return n||(n=new Zw(e,{verifyEvent:this.trustedRelayURLs.has(e)?Q5:this.verifyEvent}),t!=null&&t.connectionTimeout&&(n.connectionTimeout=t.connectionTimeout),this.relays.set(e,n)),await n.connect(),n}close(e){e.map(Gi).forEach(t=>{var n;(n=this.relays.get(t))==null||n.close()})}subscribeMany(e,t,n){this.trackRelays&&(n.receivedEvent=(b,_)=>{let T=this.seenOn.get(_);T||(T=new Set,this.seenOn.set(_,T)),T.add(b)});const r=new Set,o=[],s=[];let c=b=>{var _;s[b]=!0,s.filter(T=>T).length===e.length&&((_=n.oneose)==null||_.call(n),c=()=>{})};const f=[];let d=(b,_)=>{var T;c(b),f[b]=_,f.filter(C=>C).length===e.length&&((T=n.onclose)==null||T.call(n,f),d=()=>{})};const h=b=>{var _;if((_=n.alreadyHaveEvent)!=null&&_.call(n,b))return!0;const T=r.has(b);return r.add(b),T},y=Promise.all(e.map(Gi).map(async(b,_,T)=>{if(T.indexOf(b)!==_){d(_,"duplicate url");return}let C;try{C=await this.ensureRelay(b,{connectionTimeout:n.maxWait?Math.max(n.maxWait*.8,n.maxWait-1e3):void 0})}catch(L){d(_,(L==null?void 0:L.message)||String(L));return}let A=C.subscribe(t,{...n,oneose:()=>c(_),onclose:L=>d(_,L),alreadyHaveEvent:h,eoseTimeout:n.maxWait});o.push(A)}));return{async close(){await y,o.forEach(b=>{b.close()})}}}subscribeManyEose(e,t,n){const r=this.subscribeMany(e,t,{...n,oneose(){r.close()}});return r}async querySync(e,t,n){return new Promise(async r=>{const o=[];this.subscribeManyEose(e,[t],{...n,onevent(s){o.push(s)},onclose(s){r(o)}})})}async get(e,t,n){t.limit=1;const r=await this.querySync(e,t,n);return r.sort((o,s)=>s.created_at-o.created_at),r[0]||null}publish(e,t){return e.map(Gi).map(async(n,r,o)=>o.indexOf(n)!==r?Promise.reject("duplicate url"):(await this.ensureRelay(n)).publish(t))}},nk=class extends tk{constructor(){super({verifyEvent:F5})}};const ps=Symbol("store-raw"),Nn=Symbol("store-node"),an=Symbol("store-has"),Yw=Symbol("store-self");function Jw(e){let t=e[Ft];if(!t&&(Object.defineProperty(e,Ft,{value:t=new Proxy(e,ok)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const c=n[o];r[c].get&&Object.defineProperty(e,c,{enumerable:r[c].enumerable,get:r[c].get.bind(t)})}}return t}function sr(e){let t;return e!=null&&typeof e=="object"&&(e[Ft]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ar(e,t=new Set){let n,r,o,s;if(n=e!=null&&e[ps])return n;if(!sr(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let c=0,f=e.length;c<f;c++)o=e[c],(r=ar(o,t))!==o&&(e[c]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const c=Object.keys(e),f=Object.getOwnPropertyDescriptors(e);for(let d=0,h=c.length;d<h;d++)s=c[d],!f[s].get&&(o=e[s],(r=ar(o,t))!==o&&(e[s]=r))}return e}function $i(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function No(e,t,n){if(e[t])return e[t];const[r,o]=dt(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function rk(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Ft||t===Nn||(delete n.value,delete n.writable,n.get=()=>e[Ft][t]),n}function Wd(e){ki()&&No($i(e,Nn),Yw)()}function Xw(e){return Wd(e),Reflect.ownKeys(e)}const ok={get(e,t,n){if(t===ps)return e;if(t===Ft)return n;if(t===fs)return Wd(e),n;const r=$i(e,Nn),o=r[t];let s=o?o():e[t];if(t===Nn||t===an||t==="__proto__")return s;if(!o){const c=Object.getOwnPropertyDescriptor(e,t);ki()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(c&&c.get)&&(s=No(r,t,s)())}return sr(s)?Jw(s):s},has(e,t){return t===ps||t===Ft||t===fs||t===Nn||t===an||t==="__proto__"?!0:(ki()&&No($i(e,an),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Xw,getOwnPropertyDescriptor:rk};function Dt(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;n===void 0?(delete e[t],e[an]&&e[an][t]&&o!==void 0&&e[an][t].$()):(e[t]=n,e[an]&&e[an][t]&&o===void 0&&e[an][t].$());let c=$i(e,Nn),f;if((f=No(c,t,o))&&f.$(()=>n),Array.isArray(e)&&e.length!==s){for(let d=e.length;d<s;d++)(f=c[d])&&f.$();(f=No(c,"length",s))&&f.$(e.length)}(f=c[Yw])&&f.$()}function Qw(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];Dt(e,o,t[o])}}function ik(e,t){if(typeof t=="function"&&(t=t(e)),t=ar(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const o=t[n];e[n]!==o&&Dt(e,n,o)}Dt(e,"length",r)}else Qw(e,t)}function Zi(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const c=typeof r,f=Array.isArray(e);if(Array.isArray(r)){for(let d=0;d<r.length;d++)Zi(e,[r[d]].concat(t),n);return}else if(f&&c==="function"){for(let d=0;d<e.length;d++)r(e[d],d)&&Zi(e,[d].concat(t),n);return}else if(f&&c==="object"){const{from:d=0,to:h=e.length-1,by:y=1}=r;for(let b=d;b<=h;b+=y)Zi(e,[b].concat(t),n);return}else if(t.length>1){Zi(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(o,n),s===o)||r===void 0&&s==null||(s=ar(s),r===void 0||sr(o)&&sr(s)&&!Array.isArray(s)?Qw(o,s):Dt(e,r,s))}function sk(...[e,t]){const n=ar(e||{}),r=Array.isArray(n),o=Jw(n);function s(...c){ui(()=>{r&&c.length===1?ik(n,c[0]):Zi(n,c)})}return[o,s]}function ak(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||n.set||!n.configurable||t===Ft||t===Nn||(delete n.value,delete n.writable,n.get=()=>e[Ft][t],n.set=r=>e[Ft][t]=r),n}const ck={get(e,t,n){if(t===ps)return e;if(t===Ft)return n;if(t===fs)return Wd(e),n;const r=$i(e,Nn),o=r[t];let s=o?o():e[t];if(t===Nn||t===an||t==="__proto__")return s;if(!o){const c=Object.getOwnPropertyDescriptor(e,t),f=typeof s=="function";if(ki()&&(!f||e.hasOwnProperty(t))&&!(c&&c.get))s=No(r,t,s)();else if(s!=null&&f&&s===Array.prototype[t])return(...d)=>ui(()=>Array.prototype[t].apply(n,d))}return sr(s)?eb(s):s},has(e,t){return t===ps||t===Ft||t===fs||t===Nn||t===an||t==="__proto__"?!0:(ki()&&No($i(e,an),t)(),t in e)},set(e,t,n){return ui(()=>Dt(e,t,ar(n))),!0},deleteProperty(e,t){return ui(()=>Dt(e,t,void 0,!0)),!0},ownKeys:Xw,getOwnPropertyDescriptor:ak};function eb(e){let t=e[Ft];if(!t){Object.defineProperty(e,Ft,{value:t=new Proxy(e,ck)});const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const c=n[o];if(r[c].get){const f=r[c].get.bind(t);Object.defineProperty(e,c,{get:f})}if(r[c].set){const f=r[c].set;Object.defineProperty(e,c,{set:h=>ui(()=>f.call(t,h))})}}}return t}function Gd(e,t){const n=ar(e||{});return eb(n)}const Dl=Symbol("store-root");function ni(e,t,n,r,o){const s=t[n];if(e===s)return;if(n!==Dl&&(!sr(e)||!sr(s)||o&&e[o]!==s[o])){Dt(t,n,e);return}if(Array.isArray(e)){if(e.length&&s.length&&(!r||o&&e[0]&&e[0][o]!=null)){let d,h,y,b,_,T,C,A;for(y=0,b=Math.min(s.length,e.length);y<b&&(s[y]===e[y]||o&&s[y]&&e[y]&&s[y][o]===e[y][o]);y++)ni(e[y],s,y,r,o);const L=new Array(e.length),H=new Map;for(b=s.length-1,_=e.length-1;b>=y&&_>=y&&(s[b]===e[_]||o&&s[y]&&e[y]&&s[b][o]===e[_][o]);b--,_--)L[_]=s[b];if(y>_||y>b){for(h=y;h<=_;h++)Dt(s,h,e[h]);for(;h<e.length;h++)Dt(s,h,L[h]),ni(e[h],s,h,r,o);s.length>e.length&&Dt(s,"length",e.length);return}for(C=new Array(_+1),h=_;h>=y;h--)T=e[h],A=o&&T?T[o]:T,d=H.get(A),C[h]=d===void 0?-1:d,H.set(A,h);for(d=y;d<=b;d++)T=s[d],A=o&&T?T[o]:T,h=H.get(A),h!==void 0&&h!==-1&&(L[h]=s[d],h=C[h],H.set(A,h));for(h=y;h<e.length;h++)h in L?(Dt(s,h,L[h]),ni(e[h],s,h,r,o)):Dt(s,h,e[h])}else for(let d=0,h=e.length;d<h;d++)ni(e[d],s,d,r,o);s.length>e.length&&Dt(s,"length",e.length);return}const c=Object.keys(e);for(let d=0,h=c.length;d<h;d++)ni(e[c[d]],s,c[d],r,o);const f=Object.keys(s);for(let d=0,h=f.length;d<h;d++)e[f[d]]===void 0&&Dt(s,f[d],void 0)}function uk(e,t={}){const{merge:n,key:r="id"}=t,o=ar(e);return s=>{if(!sr(s)||!sr(o))return o;const c=ni(o,{[Dl]:s},Dl,n,r);return c===void 0?s:c}}const di=new nk,be=Gd({rootEventIds:[],filter:{},profiles:()=>[]}),zt=Gd({}),lk=["reply","likes","zaps","publish","watch","replyAnonymously","hideContent"],dk=e=>lk.includes(e);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Oi(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function gr(...e){const t=(o,s)=>c=>o(s(c)),n=Array.from(e).reverse().reduce((o,s)=>o?t(o,s.encode):s.encode,void 0),r=e.reduce((o,s)=>o?t(o,s.decode):s.decode,void 0);return{encode:n,decode:r}}function wr(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(Oi(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function br(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Ac(e,t="="){if(Oi(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of n)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function tb(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function Up(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],s=Array.from(e);for(s.forEach(c=>{if(Oi(c),c<0||c>=t)throw new Error(`Wrong integer: ${c}`)});;){let c=0,f=!0;for(let d=r;d<s.length;d++){const h=s[d],y=t*c+h;if(!Number.isSafeInteger(y)||t*c/t!==c||y-h!==t*c)throw new Error("convertRadix: carry overflow");if(c=y%n,s[d]=Math.floor(y/n),!Number.isSafeInteger(s[d])||s[d]*n+c!==y)throw new Error("convertRadix: carry overflow");if(f)s[d]?f=!1:r=d;else continue}if(o.push(c),f)break}for(let c=0;c<e.length-1&&e[c]===0;c++)o.push(0);return o.reverse()}const nb=(e,t)=>t?nb(t,e%t):e,Oa=(e,t)=>e+(t-nb(e,t));function ql(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Oa(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Oa(t,n)}`);let o=0,s=0;const c=2**n-1,f=[];for(const d of e){if(Oi(d),d>=2**t)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);if(o=o<<t|d,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)f.push((o>>s-n&c)>>>0);o&=2**s-1}if(o=o<<n-s&c,!r&&s>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&s>0&&f.push(o>>>0),f}function fk(e){return Oi(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Up(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Up(t,e,2**8))}}}function co(e,t=!1){if(Oi(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Oa(8,e)>32||Oa(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return ql(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(ql(n,e,8,t))}}}function Mp(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}const hk=gr(co(4),wr("0123456789ABCDEF"),br("")),pk=gr(co(5),wr("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Ac(5),br(""));gr(co(5),wr("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Ac(5),br(""));gr(co(5),wr("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),br(""),tb(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const gk=gr(co(6),wr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ac(6),br("")),wk=gr(co(6),wr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Ac(6),br("")),Zd=e=>gr(fk(58),wr(e),br("")),Vl=Zd("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");Zd("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");Zd("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const Hp=[0,2,3,5,6,7,9,10,11],bk={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=Vl.encode(r).padStart(Hp[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=Hp.indexOf(r.length),s=Vl.decode(r);for(let c=0;c<s.length-o;c++)if(s[c]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(t)}},Fl=gr(wr("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),br("")),jp=[996825010,642813549,513874426,1027748829,705979059];function Vi(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<jp.length;r++)(t>>r&1)===1&&(n^=jp[r]);return n}function Dp(e,t,n=1){const r=e.length;let o=1;for(let s=0;s<r;s++){const c=e.charCodeAt(s);if(c<33||c>126)throw new Error(`Invalid prefix (${e})`);o=Vi(o)^c>>5}o=Vi(o);for(let s=0;s<r;s++)o=Vi(o)^e.charCodeAt(s)&31;for(let s of t)o=Vi(o)^s;for(let s=0;s<6;s++)o=Vi(o);return o^=n,Fl.encode(ql([o%2**30],30,5,!1))}function rb(e){const t=e==="bech32"?1:734539939,n=co(5),r=n.decode,o=n.encode,s=Mp(r);function c(y,b,_=90){if(typeof y!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof y}`);if(!Array.isArray(b)||b.length&&typeof b[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof b}`);const T=y.length+7+b.length;if(_!==!1&&T>_)throw new TypeError(`Length ${T} exceeds limit ${_}`);return y=y.toLowerCase(),`${y}1${Fl.encode(b)}${Dp(y,b,t)}`}function f(y,b=90){if(typeof y!="string")throw new Error(`bech32.decode input should be string, not ${typeof y}`);if(y.length<8||b!==!1&&y.length>b)throw new TypeError(`Wrong string length: ${y.length} (${y}). Expected (8..${b})`);const _=y.toLowerCase();if(y!==_&&y!==y.toUpperCase())throw new Error("String must be lowercase or uppercase");y=_;const T=y.lastIndexOf("1");if(T===0||T===-1)throw new Error('Letter "1" must be present between prefix and data only');const C=y.slice(0,T),A=y.slice(T+1);if(A.length<6)throw new Error("Data must be at least 6 characters long");const L=Fl.decode(A).slice(0,-6),H=Dp(C,L,t);if(!A.endsWith(H))throw new Error(`Invalid checksum in ${y}: expected "${H}"`);return{prefix:C,words:L}}const d=Mp(f);function h(y){const{prefix:b,words:_}=f(y,!1);return{prefix:b,words:_,bytes:r(_)}}return{encode:c,decode:f,decodeToBytes:h,decodeUnsafe:d,fromWords:r,fromWordsUnsafe:s,toWords:o}}const xi=rb("bech32");rb("bech32m");const mk={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},yk=gr(co(4),wr("0123456789abcdef"),br(""),tb(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),vk={utf8:mk,hex:yk,base16:hk,base32:pk,base64:gk,base64url:wk,base58:Vl,base58xmr:bk};`${Object.keys(vk).join(", ")}`;var Fi=new TextDecoder("utf-8");new TextEncoder;var ob=5e3;function ia(e){var t,n,r,o,s,c,f,d;let{prefix:h,words:y}=xi.decode(e,ob),b=new Uint8Array(xi.fromWords(y));switch(h){case"nprofile":{let _=Gs(b);if(!((t=_[0])!=null&&t[0]))throw new Error("missing TLV 0 for nprofile");if(_[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Xe(_[0][0]),relays:_[1]?_[1].map(T=>Fi.decode(T)):[]}}}case"nevent":{let _=Gs(b);if(!((n=_[0])!=null&&n[0]))throw new Error("missing TLV 0 for nevent");if(_[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(_[2]&&_[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(_[3]&&_[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Xe(_[0][0]),relays:_[1]?_[1].map(T=>Fi.decode(T)):[],author:(r=_[2])!=null&&r[0]?Xe(_[2][0]):void 0,kind:(o=_[3])!=null&&o[0]?parseInt(Xe(_[3][0]),16):void 0}}}case"naddr":{let _=Gs(b);if(!((s=_[0])!=null&&s[0]))throw new Error("missing TLV 0 for naddr");if(!((c=_[2])!=null&&c[0]))throw new Error("missing TLV 2 for naddr");if(_[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((f=_[3])!=null&&f[0]))throw new Error("missing TLV 3 for naddr");if(_[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Fi.decode(_[0][0]),pubkey:Xe(_[2][0]),kind:parseInt(Xe(_[3][0]),16),relays:_[1]?_[1].map(T=>Fi.decode(T)):[]}}}case"nrelay":{let _=Gs(b);if(!((d=_[0])!=null&&d[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Fi.decode(_[0][0])}}case"nsec":return{type:h,data:b};case"npub":case"note":return{type:h,data:Xe(b)};default:throw new Error(`unknown prefix ${h}`)}}function Gs(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],s=n.slice(2,2+o);if(n=n.slice(2+o),s.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(s)}return t}function ib(e){return sb("npub",qw(e))}function qp(e){return sb("note",qw(e))}function _k(e,t){let n=xi.toWords(t);return xi.encode(e,n,ob)}function sb(e,t){return _k(e,t)}var Ki=new TextDecoder("utf-8");new TextEncoder;var Ek=5e3,kk=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function ab(e){var t,n,r,o,s,c,f,d;let{prefix:h,words:y}=xi.decode(e,Ek),b=new Uint8Array(xi.fromWords(y));switch(h){case"nprofile":{let _=Zs(b);if(!((t=_[0])!=null&&t[0]))throw new Error("missing TLV 0 for nprofile");if(_[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Xe(_[0][0]),relays:_[1]?_[1].map(T=>Ki.decode(T)):[]}}}case"nevent":{let _=Zs(b);if(!((n=_[0])!=null&&n[0]))throw new Error("missing TLV 0 for nevent");if(_[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(_[2]&&_[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(_[3]&&_[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Xe(_[0][0]),relays:_[1]?_[1].map(T=>Ki.decode(T)):[],author:(r=_[2])!=null&&r[0]?Xe(_[2][0]):void 0,kind:(o=_[3])!=null&&o[0]?parseInt(Xe(_[3][0]),16):void 0}}}case"naddr":{let _=Zs(b);if(!((s=_[0])!=null&&s[0]))throw new Error("missing TLV 0 for naddr");if(!((c=_[2])!=null&&c[0]))throw new Error("missing TLV 2 for naddr");if(_[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((f=_[3])!=null&&f[0]))throw new Error("missing TLV 3 for naddr");if(_[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Ki.decode(_[0][0]),pubkey:Xe(_[2][0]),kind:parseInt(Xe(_[3][0]),16),relays:_[1]?_[1].map(T=>Ki.decode(T)):[]}}}case"nrelay":{let _=Zs(b);if(!((d=_[0])!=null&&d[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Ki.decode(_[0][0])}}case"nsec":return{type:h,data:b};case"npub":case"note":return{type:h,data:Xe(b)};default:throw new Error(`unknown prefix ${h}`)}}function Zs(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],s=n.slice(2,2+o);if(n=n.slice(2+o),s.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(s)}return t}var Ak=new RegExp(`nostr:(${kk.source})`),cb=()=>new RegExp(`\\b${Ak.source}\\b`,"g");function*Sk(e){const t=e.matchAll(cb());for(const n of t)try{const[r,o]=n;yield{uri:r,value:o,decoded:ab(o),start:n.index,end:n.index+r.length}}catch{}}function $k(e,t){return e.replaceAll(cb(),(n,r)=>t({uri:n,value:r,decoded:ab(r)}))}var xk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tk(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ub={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(xk,function(){function n(f){return f.replace(/\\([(){}[\]#*+\-.!_\\])/g,function(d,h){return String.fromCharCode(1,o.indexOf(h)+s)}).replace(/(\*\*|__|~~)(\S(?:[\s\S]*?\S)?)\1/g,function(d,h,y){return h==="~~"?"<del>"+y+"</del>":"<b>"+y+"</b>"}).replace(/(\n|^|\W)([_\*])(\S(?:[\s\S]*?\S)?)\2(\W|$|\n)/g,function(d,h,y,b,_){return h+"<i>"+b+"</i>"+_}).replace(/(!?)\[([^\]<>]+)\]\((\+?)([^ \)<>]+)(?: "([^\(\)\"]+)")?\)/g,function(d,h,y,b,_,T){var C=T?' title="'+T+'"':"";return h?'<img src="'+c.href(_)+'" alt="'+y+'"'+C+"/>":(b&&(C+=' target="_blank"'),'<a href="'+c.href(_)+'"'+C+">"+y+"</a>")})}function r(f){return f.replace(/\x01([\x0f-\x1c])/g,function(d,h){return o.charAt(h.charCodeAt(0)-s)})}var o="\\[!]#{()}*+-._",s=16,c=function(f){return f.replace(/.+(?:\n.+)*/g,function(d){var h=/^\s{4}([^]*)$/.exec(d);if(h)return"<pre><code>"+h[1].replace(/\n    /g,`
`)+"</code></pre>";for(var y,b=[],_=n(d).split(`
`),T=0,C=_.length;C>T;++T){var A=_[T],L=/^\s{0,3}(\#{1,6})\s+(.*?)\s*#*\s*$/.exec(A);if(L)b.push(y=[L[2],"h",L[1].length]);else{var H=/^(\s*)(?:[-*]|(\d[.)])) (.+)$/.exec(A);H?b.push(y=[H[3],H[2]?"ol":"ul",H[1].length]):/^\s{0,3}([-])(\s*\1){2,}\s*$/.test(A)?b.push(y=["","hr"]):y&&y[1]!=="hr"&&y[1]!=="h"?y[0]+=`
`+A:b.push(y=[A,"p",""])}}var I="",N=[];for(T=0,C=b.length;C>T;++T){y=b[T];var l=y[0],w=y[1],p=y[2];if(w==="ul"||w==="ol")!N.length||p>N[0][1]?(N.unshift([w,p]),I+="<"+N[0][0]+"><li>"+l):N.length>1&&p<=N[1][1]?(I+="</li></"+N.shift()[0]+">",--T):I+="</li><li>"+l;else{for(;N.length;)I+="</li></"+N.shift()[0]+">";I+=w==="hr"?"<hr/>":"<"+w+p+c.headAttrs(p,l)+">"+l+"</"+w+p+">"}}for(;N.length;)I+="</li></"+N.shift()[0]+">";return r(I)})};return c.href=function(f){return f},c.headAttrs=function(f,d){return""},c})})(ub);var Pk=ub.exports;const Bk=Tk(Pk);function Ck(e){return async()=>new Promise(t=>{setTimeout(t,e)})}function Lk(e,{delay:t=void 0}={}){if(typeof t!="number"&&t!==void 0)throw new TypeError(`Expected \`interval\` to be of type \`number\` but received type \`${typeof t}\``);const n=t===void 0?async()=>{}:Ck(t);let r=[];return o=>{r.push(o),r.length===1&&(async()=>(await n(),e(r),r=[]))()}}const Ik=(e,t)=>t.some(n=>e instanceof n);let Vp,Fp;function Ok(){return Vp||(Vp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nk(){return Fp||(Fp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lb=new WeakMap,Kl=new WeakMap,db=new WeakMap,Gu=new WeakMap,Yd=new WeakMap;function Rk(e){const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("success",s),e.removeEventListener("error",c)},s=()=>{n(Vr(e.result)),o()},c=()=>{r(e.error),o()};e.addEventListener("success",s),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&lb.set(n,e)}).catch(()=>{}),Yd.set(t,e),t}function zk(e){if(Kl.has(e))return;const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",c),e.removeEventListener("abort",c)},s=()=>{n(),o()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",s),e.addEventListener("error",c),e.addEventListener("abort",c)});Kl.set(e,t)}let Wl={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Kl.get(e);if(t==="objectStoreNames")return e.objectStoreNames||db.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vr(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Uk(e){Wl=e(Wl)}function Mk(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Zu(this),t,...n);return db.set(r,t.sort?t.sort():[t]),Vr(r)}:Nk().includes(e)?function(...t){return e.apply(Zu(this),t),Vr(lb.get(this))}:function(...t){return Vr(e.apply(Zu(this),t))}}function Hk(e){return typeof e=="function"?Mk(e):(e instanceof IDBTransaction&&zk(e),Ik(e,Ok())?new Proxy(e,Wl):e)}function Vr(e){if(e instanceof IDBRequest)return Rk(e);if(Gu.has(e))return Gu.get(e);const t=Hk(e);return t!==e&&(Gu.set(e,t),Yd.set(t,e)),t}const Zu=e=>Yd.get(e);function jk(e,t,{blocked:n,upgrade:r,blocking:o,terminated:s}={}){const c=indexedDB.open(e,t),f=Vr(c);return r&&c.addEventListener("upgradeneeded",d=>{r(Vr(c.result),d.oldVersion,d.newVersion,Vr(c.transaction),d)}),n&&c.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),f.then(d=>{s&&d.addEventListener("close",()=>s()),o&&d.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const Dk=["get","getKey","getAll","getAllKeys","count"],qk=["put","add","delete","clear"],Yu=new Map;function Kp(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Yu.get(t))return Yu.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=qk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Dk.includes(n)))return;const s=async function(c,...f){const d=this.transaction(c,o?"readwrite":"readonly");let h=d.store;return r&&(h=h.index(f.shift())),(await Promise.all([h[n](...f),o&&d.done]))[0]};return Yu.set(t,s),s}Uk(e=>({...e,get:(t,n,r)=>Kp(t,n)||e.get(t,n,r),has:(t,n)=>!!Kp(t,n)||e.has(t,n)}));function Vk(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)r[0]==="e"&&r[1]&&n.push(r),r[0]==="p"&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const o=n[r],[s,c,f,d]=o,h={id:c,relays:f?[f]:[]},y=r===0,b=r===n.length-1;if(d==="root"){t.root=h;continue}if(d==="reply"){t.reply=h;continue}if(d==="mention"){t.mentions.push(h);continue}if(y){t.root=h;continue}if(b){t.reply=h;continue}t.mentions.push(h)}return t}const Yi={events:"id",aggregates:["eid","k"],profiles:["pk"],relays:["n","a"]},Fk=async(e,t)=>{if(t<=1){const s=[...e.objectStoreNames];await Promise.all(s.map(c=>e.deleteObjectStore(c)))}const n=e.createObjectStore("events",{keyPath:Yi.events});n.createIndex("a","a"),n.createIndex("ro","ro"),n.createIndex("r","r"),n.createIndex("d","d"),n.createIndex("k","k"),e.createObjectStore("aggregates",{keyPath:Yi.aggregates}),e.createObjectStore("profiles",{keyPath:Yi.profiles}).createIndex("l","l"),e.createObjectStore("relays",{keyPath:Yi.relays}).createIndex("a","a")},Na=e=>{var t,n;const r=Vk(e),o=e.tags.find(A=>A[0]==="a"),s=o&&o[1],c=o&&o[3]==="mention",f=e.tags.find(A=>A[0]==="r"),d=f&&f[1],h=e.tags.filter(A=>A[0]==="t"),y=[...new Set(h.map(A=>A[1]))],b=e.tags.find(A=>A[0]==="d"),_=b&&b[1],T=e.tags.find(A=>A[0]==="title"),C=T&&T[1];return{id:e.id??"",k:e.kind,c:e.content,ts:e.created_at,pk:e.pubkey,ro:(t=r.root)==null?void 0:t.id,re:(n=r.reply)==null?void 0:n.id,me:r.mentions.map(A=>A.id),p:r.profiles.map(A=>A.pubkey),a:s,am:c,r:d,t:y,d:_,tl:C}},Kk=()=>({});let fi=Kk(),Wp=!0,Gp;const Sc=async()=>{if(Wp!==!1)try{return Gp||(Gp=await jk("zapthreads",2,{upgrade:Fk}))}catch{Wp=!1}},Ys=e=>{const t=De(Hr(e,()=>{const[n,r,o]=e(),s=()=>Ti(n,r,o),[c,{mutate:f}]=hw(()=>es[n],s,{initialValue:[],storage:fb});return Ti(n,r,o).then(f),c}));return()=>t()()},Zp=e=>{const t=De(Hr(e,()=>{const[n,r,o]=e(),s=()=>hi(n,r,o),[c,{mutate:f}]=hw(()=>es[n],s,{initialValue:void 0,storage:fb});return hi(n,r,o).then(f),c}));return()=>t()()},Ti=async(e,t,n)=>{const r=await Sc();if(!r){const o=fi[e];if(o){if(n){const s=Array.isArray(t)?t:[t];return Object.values(o).filter(c=>s.includes(c[n.index]))}return Object.values(o)}return[]}if(t&&n){if(Array.isArray(t)){const o=t.map(c=>r.getAllFromIndex(e,n.index,c));return(await Promise.all(o)).flat()}return r.getAllFromIndex(e,n.index,t)}return r.getAll(e)},hi=async(e,t,n)=>{const r=await Sc();if(!r){const o=fi[e];if(o){if(n)return Object.values(o).find(c=>c[n.index]===t);const s=(t.lower?t.lower:t).toString();return o[s]}return}return n?r.getFromIndex(e,n.index,t):r.get(e,t)},Ju={},Yp=(e,t)=>{fi[e]??(fi[e]={});for(const n of t){let r=Yi[e];r=Array.isArray(r)?r:[r];const o=r.map(s=>n[s]).join(",");fi[e][o]=n}},un=async(e,t,n={immediate:!1})=>{const r=await Sc();if(n.immediate){r?r.put(e,t):Yp(e,[t]),es[e]=+new Date;return}Ju[e]||(Ju[e]=Lk(async o=>{if(!r){Yp(e,o),es[e]=+new Date;return}const s=r.transaction(e,"readwrite");await Promise.all([...o.map(f=>s.store.put(f)),s.done])&&(es[e]=+new Date)},{delay:96})),Ju[e](t)},Wk=async()=>{const e=await Sc();if(!e){fi={};return}const t=[...e.objectStoreNames];await Promise.all(t.map(n=>e.clear(n)))},es=Gd({});function fb(e){const[t,n]=sk({value:e});return[()=>t.value,r=>{const o=ar(t.value);return typeof r=="function"&&(r=r(o)),n("value",uk(r)),t.value}]}const hb=async(e,t,n)=>{const r=+new Date,o=216e5,s=[...new Set(e)].filter(f=>{const d=n.find(h=>h.pk===f);return!(d!=null&&d.l&&d.l>r-o)}).filter(f=>!!f);if(s.length===0)return;const c=await di.querySync(t,{kinds:[0],authors:s});for(const f of s){const d=c.find(h=>h.pubkey===f);if(d){const h=JSON.parse(d.content),y=d.pubkey,b={pk:y,ts:d.created_at,i:h.image||h.picture,n:h.displayName||h.display_name||h.name},_=n.find(T=>T.pk===y);!_||!(_!=null&&_.n)||_.ts<b.ts?un("profiles",{...b,l:r}):un("profiles",{..._,l:r})}}},Gk=async(e,t)=>{const r=(await Ti("relays",e.value,{index:"a"})).filter(o=>t.includes(o.n)).map(o=>o.l);return r.length>0?Math.min(...r)+1:0},Zk=async(e,t)=>{const n={};for(const o of t){const s=di.seenOn.get(o.id);if(s)for(const c of s)o.ts>(n[c.url]||0)&&(n[c.url]=o.ts)}const r=await Ti("relays",e.value,{index:"a"});for(const o in n){const s=r.find(c=>c.n===o);s?n[o]>s.l&&(s.l=n[o],un("relays",s)):un("relays",{n:o,a:e.value,l:n[o]})}},Yk=new RegExp("(?<=^|\\s)https?:\\/\\/[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&\\/\\/=]*)","gi"),Jk=/(\S*(?:png|jpg|jpeg|gif|webp))/gi,Xk=new RegExp("(?<=^|\\s)@?((naddr|npub|nevent|note)[a-z0-9]{20,})","g"),Qk=/\`(.*?)\`/g,eA=/\B\#([a-zA-Z0-9]+\b)(?!;)/g,pb=(e,t,n=[])=>{let r=e.c;const o=t.urlPrefixes,s=t.profiles;r=r.replace(Yk,f=>f.match(Jk)?`![image](${f})`:`[${f}](${f})`);const c=[...new Set(e.t)];if(c.length>0){const f=new RegExp(`(^|\\s)\\#(${c.join("|")})`,"gi");r=r.replaceAll(f,`$1[#$2](${o.tag}$2)`)}return r=r.replaceAll(Xk,"nostr:$1"),r=$k(r,({decoded:f,value:d})=>{switch(f.type){case"nprofile":let h=s().find(A=>A.pk===f.data.pubkey);return`[@${(h==null?void 0:h.n)||Ao(d)}](${o.nprofile}${d})`;case"npub":let b=s().find(A=>A.pk===f.data);return`[@${(b==null?void 0:b.n)||Ao(d)}](${o.npub}${d})`;case"note":return`[@${Ao(d)}](${o.note}${d})`;case"naddr":const T=f.data,C=n.find(A=>A.pk===T.pubkey&&A.d===T.identifier);return C&&C.tl?`[${C.tl}](${o.naddr}${d})`:`[@${Ao(d)}](${o.naddr}${d})`;case"nevent":return`[@${Ao(d)}](${o.nevent}${d})`;default:return d}}),r=r.replaceAll(Qk,"<code>$1</code>"),Bk(r.trim())},tA=e=>{const t=[],n=Sk(e);for(const s of n){if(s.decoded.type==="npub"&&t.push(["p",s.decoded.data]),s.decoded.type==="naddr"){const c=s.decoded.data;t.push(["a",`${c.kind}:${c.pubkey}:${c.identifier}`,"","mention"])}s.decoded.type==="nevent"&&t.push(["e",s.decoded.data.id]),s.decoded.type==="note"&&t.push(["e",s.decoded.data])}const r=e.matchAll(eA),o=new Set([...r].map(s=>s[1].toLowerCase()));for(const s of o)t.push(["t",s]);return t},nA=(e="")=>{const t={naddr:"https://nostr.com/",npub:"https://nostr.com/",nprofile:"https://nostr.com/",nevent:"https://nostr.com/",note:"https://nostr.com/",tag:"https://snort.social/t/"};for(const n of e.split(",")){const[r,o]=n.split(":");o&&(t[r]=`https://${o}`)}return t},Ao=e=>e.substring(0,8)+"..."+e.substring(e.length-4),sa=e=>e.sort((t,n)=>(t.ts||0)>=(n.ts||0)?-1:1),yn=20,aa='data:image/svg+xml;utf-8,<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><circle cx="512" cy="512" r="512" fill="%23333" fill-rule="evenodd" /></svg>',rA=e=>{const t=new Date,n=Math.floor((t.getTime()-e)/1e3);if(n<60)return"now";if(n<3600){const r=Math.floor(n/60);return`${r} minute${r===1?"":"s"} ago`}if(n<=86400){const r=Math.floor(n/3600);return`${r} hour${r===1?"":"s"} ago`}if(n<=604800){const r=Math.floor(n/86400);return`${r} day${r===1?"":"s"} ago`}if(n>604800){const r=new Date(e),o=r.toLocaleDateString("en-us",{day:"numeric",month:"long"}),s=r.getFullYear()===t.getFullYear()?"":" "+r.getFullYear();return"on "+o+s}return""},oA=e=>e<1e4?e.toString():e<1e6?Math.round(e/1e3)+"k":Math.round(e/1e6)+"M",Jd=e=>e.children.reduce((t,n)=>t+Jd(n),e.children.length),iA=/\/+$/,sA=(e,t=!0)=>{const n=new URL(e);return n.hash="",t&&(n.pathname=n.pathname.replace(iA,"")),n.toString()},gb=(e,t)=>{let n=e.map(o=>({...o,children:[]}));const r=new Set(n.filter(o=>{if(t){const s=t.id===(o.re||o.ro);return s&&(o.parent=t),s}return!n.find(s=>s.id===(o.re||o.ro))}));n=n.filter(o=>!r.has(o));for(let o of r)o.children.push(...gb(n,o));return[...r]};var Jo=Symbol("verified"),aA=e=>e instanceof Object;function cA(e){if(!aA(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var uA=new TextEncoder,lA=class{generateSecretKey(){return Ut.utils.randomPrivateKey()}getPublicKey(t){return Xe(Ut.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=Xe(Ut.getPublicKey(n)),r.id=ts(r),r.sig=Xe(Ut.sign(ts(r),n)),r[Jo]=!0,r}verifyEvent(t){if(typeof t[Jo]=="boolean")return t[Jo];const n=ts(t);if(n!==t.id)return t[Jo]=!1,!1;try{const r=Ut.verify(t.sig,n,t.pubkey);return t[Jo]=r,r}catch{return t[Jo]=!1,!1}}};function dA(e){if(!cA(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function ts(e){let t=Kd(uA.encode(dA(e)));return Xe(t)}var $c=new lA,fA=$c.generateSecretKey,wb=$c.getPublicKey,bb=$c.finalizeEvent;$c.verifyEvent;var hA=e=>{Ei(()=>{const t=e();t&&setTimeout(()=>t.focus())})},Xo=Symbol("verified"),pA=e=>e instanceof Object;function gA(e){if(!pA(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var wA=new TextEncoder;function bA(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var mA=class{constructor(e){pe(this,"value"),pe(this,"next",null),pe(this,"prev",null),this.value=e}},yA=class{constructor(){pe(this,"first"),pe(this,"last"),this.first=null,this.last=null}enqueue(e){const t=new mA(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const t=this.first;return this.first=null,this.last=null,t.value}const e=this.first;return this.first=e.next,e.value}},vA=class{generateSecretKey(){return Ut.utils.randomPrivateKey()}getPublicKey(e){return Xe(Ut.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=Xe(Ut.getPublicKey(t)),n.id=Xu(n),n.sig=Xe(Ut.sign(Xu(n),t)),n[Xo]=!0,n}verifyEvent(e){if(typeof e[Xo]=="boolean")return e[Xo];const t=Xu(e);if(t!==e.id)return e[Xo]=!1,!1;try{const n=Ut.verify(e.sig,t,e.pubkey);return e[Xo]=n,n}catch{return e[Xo]=!1,!1}}};function _A(e){if(!gA(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Xu(e){let t=Kd(wA.encode(_A(e)));return Xe(t)}var xc=new vA;xc.generateSecretKey;xc.getPublicKey;xc.finalizeEvent;var EA=xc.verifyEvent,kA=22242;function AA(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(n=>t.id.startsWith(n))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(n=>t.pubkey.startsWith(n)))return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([s,c])=>s===n.slice(1)&&o.indexOf(c)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function SA(e,t){for(let n=0;n<e.length;n++)if(AA(e[n],t))return!0;return!1}function $A(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function xA(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let s=r+1+o;return e.slice(r+1,s)}function TA(e,t){return{kind:kA,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function PA(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var mb;try{mb=WebSocket}catch{}var yb=class{constructor(e,t){pe(this,"url"),pe(this,"_connected",!1),pe(this,"onclose",null),pe(this,"onnotice",n=>console.debug(`NOTICE from ${this.url}: ${n}`)),pe(this,"_onauth",null),pe(this,"baseEoseTimeout",4400),pe(this,"connectionTimeout",4400),pe(this,"openSubs",new Map),pe(this,"connectionTimeoutHandle"),pe(this,"connectionPromise"),pe(this,"openCountRequests",new Map),pe(this,"openEventPublishes",new Map),pe(this,"ws"),pe(this,"incomingMessageQueue",new yA),pe(this,"queueRunning",!1),pe(this,"challenge"),pe(this,"serial",0),pe(this,"verifyEvent"),this.url=bA(e),this.verifyEvent=t.verifyEvent}static async connect(e,t){const n=new yb(e,t);return await n.connect(),n}closeAllSubscriptions(e){for(let[t,n]of this.openSubs)n.close(e);this.openSubs.clear();for(let[t,n]of this.openEventPublishes)n.reject(new Error(e));this.openEventPublishes.clear();for(let[t,n]of this.openCountRequests)n.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;t("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new mb(this.url)}catch(n){t(n);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=n=>{var r;t(n.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var n;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await PA();this.queueRunning=!1}handleNext(){var e,t,n;const r=this.incomingMessageQueue.dequeue();if(!r)return!1;const o=xA(r);if(o){const s=this.openSubs.get(o);if(!s)return;const c=$A(r,"id"),f=(e=s.alreadyHaveEvent)==null?void 0:e.call(s,c);if((t=s.receivedEvent)==null||t.call(s,this,c),f)return}try{let s=JSON.parse(r);switch(s[0]){case"EVENT":{const c=this.openSubs.get(s[1]),f=s[2];this.verifyEvent(f)&&SA(c.filters,f)&&c.onevent(f);return}case"COUNT":{const c=s[1],f=s[2],d=this.openCountRequests.get(c);d&&(d.resolve(f.count),this.openCountRequests.delete(c));return}case"EOSE":{const c=this.openSubs.get(s[1]);if(!c)return;c.receivedEose();return}case"OK":{const c=s[1],f=s[2],d=s[3],h=this.openEventPublishes.get(c);f?h.resolve(d):h.reject(new Error(d)),this.openEventPublishes.delete(c);return}case"CLOSED":{const c=s[1],f=this.openSubs.get(c);if(!f)return;f.closed=!0,f.close(s[2]);return}case"NOTICE":this.onnotice(s[1]);return;case"AUTH":{this.challenge=s[1],(n=this._onauth)==null||n.call(this,s[1]);return}}}catch{return}}async send(e){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var t;(t=this.ws)==null||t.send(e)})}async auth(e){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const t=await e(TA(this.url,this.challenge)),n=new Promise((r,o)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:o})});return this.send('["AUTH",'+JSON.stringify(t)+"]"),n}async publish(e){const t=new Promise((n,r)=>{this.openEventPublishes.set(e.id,{resolve:n,reject:r})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;const n=(t==null?void 0:t.id)||"count:"+this.serial,r=new Promise((o,s)=>{this.openCountRequests.set(n,{resolve:o,reject:s})});return this.send('["COUNT","'+n+'",'+JSON.stringify(e)+"]"),r}subscribe(e,t){const n=this.prepareSubscription(e,t);return n.fire(),n}prepareSubscription(e,t){this.serial++;const n=t.id||"sub:"+this.serial,r=new BA(this,n,e,t);return this.openSubs.set(n,r),r}close(){var e;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(e=this.ws)==null||e.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},BA=class{constructor(e,t,n,r){pe(this,"relay"),pe(this,"id"),pe(this,"closed",!1),pe(this,"eosed",!1),pe(this,"filters"),pe(this,"alreadyHaveEvent"),pe(this,"receivedEvent"),pe(this,"onevent"),pe(this,"oneose"),pe(this,"onclose"),pe(this,"eoseTimeout"),pe(this,"eoseTimeoutHandle"),this.relay=e,this.filters=n,this.id=t,this.alreadyHaveEvent=r.alreadyHaveEvent,this.receivedEvent=r.receivedEvent,this.eoseTimeout=r.eoseTimeout||e.baseEoseTimeout,this.oneose=r.oneose,this.onclose=r.onclose,this.onevent=r.onevent||(o=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,o)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var e;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(e=this.oneose)==null||e.call(this))}close(e="closed by caller"){var t;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(t=this.onclose)==null||t.call(this,e)}},vb=class extends yb{constructor(e){super(e,{verifyEvent:EA})}static async connect(e){const t=new vb(e);return await t.connect(),t}};new TextDecoder("utf-8");new TextEncoder;function CA(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}const LA=He("<div class=ztr-comment-info-picture><img>"),IA=He("<div class=ztr-reply-form><textarea></textarea><div class=ztr-reply-controls>"),OA=He("<span>Publishing is disabled"),NA=He("<span class=ztr-reply-error>Error: "),RA=He('<svg class=ztr-spinner viewBox="0 0 50 50"><circle class=path cx=25 cy=25 r=20 fill=none stroke-width=5>'),zA=He("<button class=ztr-reply-button>Reply as "),UA=He("<button class=ztr-reply-button>Reply anonymously"),MA=He("<button class=ztr-reply-login-button>Log in"),HA=He("<li class=ztr-comment-action-like><span> likes"),jA=He("<li class=ztr-comment-action-zap><span> sats"),DA=He("<div class=ztr-comment-new><div class=ztr-comment-body><ul class=ztr-comment-actions>"),_b=e=>{const[t,n]=dt(""),[r,o]=dt(!1),[s,c]=dt(),[f,d]=dt(""),h=()=>be.anchor,y=be.profiles,b=()=>be.relays,_=async()=>{if(!window.nostr){C("Error: No NIP-07 extension!");return}const I=await window.nostr.getPublicKey();zt.internal={pk:I,signEvent:async N=>window.nostr.signEvent(N)},d(""),zt.active=zt.internal};Ei(async()=>{if(zt.active){const I=zt.active.pk;let N=y().find(l=>l.pk===I);N||(N={pk:I,l:0,ts:0},await un("profiles",N)),c(N),hb([I],b(),y())}else c()});const T=async(I,N)=>{var l;o(!1),n(""),d(N??""),await un("events",Na(I),{immediate:!0}),(l=e.onDone)==null||l.call(globalThis)},C=I=>{o(!1),d(`Error: ${I}`)},A=async I=>{let N;if(I)N=zt.active;else{if(!zt.anonymous){const R=fA();zt.anonymous={pk:wb(R),signEvent:async P=>({sig:bb(P,R).sig})}}N=zt.anonymous}if(!(N!=null&&N.signEvent)){C("Error: User has no signer!");return}const l=t().trim();if(!l)return;const w={kind:1,created_at:Math.round(Date.now()/1e3),content:l,pubkey:N.pk,tags:tA(l)};if(be.anchorAuthor!==w.pubkey&&w.tags.push(["p",be.anchorAuthor]),be.externalAuthor)try{const R=ia(be.externalAuthor).data;w.tags.push(["p",R])}catch{}if(e.replyTo){const R=await hi("events",IDBKeyRange.only(e.replyTo));R&&(w.tags.push(["e",R.ro,"","root"]),R.pk!==w.pubkey&&w.tags.push(["p",R.pk])),w.tags.push(["e",e.replyTo,"","reply"])}else{const R=be.version||be.rootEventIds[0];if(R)w.tags.push(["e",R,"","root"]);else if(h().type==="http"){const P=CA(h().value),v={pubkey:N.pk,created_at:Math.round(Date.now()/1e3),kind:8812,tags:[["r",P]],content:`Comments on ${P} `},x={id:ts(v),...v,...await N.signEvent(v)};un("events",Na(x)),be.disableFeatures.includes("publish")?console.log("Publishing root event disabled",x):di.publish(b(),x),be.filter={"#e":[x.id]},w.tags.push(["e",x.id,"","root"])}}h().type==="naddr"&&w.tags.push(["a",h().value,"","root"]);const p=ts(w),E=await N.signEvent(w),$={id:p,...w,...E};if(o(!0),console.log(JSON.stringify($,null,2)),be.disableFeatures.includes("publish"))setTimeout(()=>T($),1e3);else{const R=[];for(const P of b())try{await(await vb.connect(P)).publish($)}catch(v){console.error(v),R.push(P)}if(R.length===b().length)C("Error: Your comment was not published to any relay");else{const P=`Published to ${R.length}/${b().length} relays (see console for more info)`,v=R.length>0?P:void 0;T($,v)}R.length=0}},L=e.replyTo!==void 0;let H;return hA(()=>L&&H),(()=>{const I=IA(),N=I.firstChild,l=N.nextSibling;N.addEventListener("change",p=>n(p.target.value));const w=H;return typeof w=="function"?vw(w,N):H=N,N.autofocus=L,$e(l,(()=>{const p=De(()=>!!be.disableFeatures.includes("publish"));return()=>p()&&OA()})(),null),$e(l,(()=>{const p=De(()=>!!f());return()=>p()&&(()=>{const E=NA();return E.firstChild,$e(E,f,null),E})()})(),null),$e(l,bn(Ta,{get when(){return!r()},get fallback(){return RA()},get children(){const p=LA(),E=p.firstChild;return cn(()=>{var $;return Ct(E,"src",(($=s())==null?void 0:$.i)||aa)}),p}}),null),$e(l,(()=>{const p=De(()=>!!s());return()=>p()&&(()=>{const E=zA();return E.firstChild,E.$$click=()=>A(s()),$e(E,()=>s().n||Ao(ib(s().pk)),null),cn(()=>E.disabled=r()),E})()})(),null),$e(l,(()=>{const p=De(()=>!s()&&!be.disableFeatures.includes("replyAnonymously"));return()=>p()&&(()=>{const E=UA();return E.$$click=()=>A(),cn(()=>E.disabled=r()),E})()})(),null),$e(l,(()=>{const p=De(()=>!s());return()=>p()&&(()=>{const E=MA();return E.$$click=()=>_(),E})()})(),null),cn(p=>{const E=r(),$=be.replyPlaceholder||"Add your comment...";return E!==p._v$&&(N.disabled=p._v$=E),$!==p._v$2&&Ct(N,"placeholder",p._v$2=$),p},{_v$:void 0,_v$2:void 0}),cn(()=>N.value=t()),I})()},qA=()=>{const e=()=>be.anchor,t=Zp(()=>["aggregates",IDBKeyRange.only([e().value,9735])]),n=Zp(()=>["aggregates",IDBKeyRange.only([e().value,7])]),r=()=>{var s;return((s=t())==null?void 0:s.sum)??0},o=()=>{var s;return((s=n())==null?void 0:s.ids.length)??0};return(()=>{const s=DA(),c=s.firstChild,f=c.firstChild;return $e(f,bn(Ta,{get when(){return!be.disableFeatures.includes("likes")},get children(){const d=HA(),h=d.firstChild,y=h.firstChild;return $e(d,gS,h),$e(h,o,y),d}}),null),$e(f,bn(Ta,{get when(){return!be.disableFeatures.includes("zaps")},get children(){const d=jA(),h=d.firstChild,y=h.firstChild;return $e(d,pS,h),$e(h,()=>oA(r()),y),d}}),null),$e(c,bn(_b,{}),null),s})()};zd(["click"]);function VA(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function Jp(e,...t){return typeof e=="function"?e(...t):e}function FA(e){const t={...e},n={...e},r={},o=c=>{let f=r[c];if(!f){if(!ki())return t[c];r[c]=f=dt(t[c],{internal:!0}),delete t[c]}return f[0]()};for(const c in e)Object.defineProperty(n,c,{get:()=>o(c),enumerable:!0});const s=(c,f)=>{const d=r[c];if(d)return d[1](f);c in t&&(t[c]=Jp(f,[t[c]]))};return[n,(c,f)=>{if(VA(c)){const d=mn(()=>Object.entries(Jp(c,n)));ui(()=>{for(const[h,y]of d)s(h,()=>y)})}else s(c,f);return n}]}var Eb={width:null,height:null};function Qu(e){if(!e)return{...Eb};const{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function KA(e){const t=typeof e=="function",[n,r]=FA(t?Eb:Qu(e)),o=new ResizeObserver(([s])=>r(Qu(s.target)));return li(()=>o.disconnect()),t?Ei(()=>{const s=e();s&&(r(Qu(s)),o.observe(s),li(()=>o.unobserve(s)))}):(o.observe(e),li(()=>o.unobserve(e))),n}const WA=He("<div class=ztr-thread>"),GA=He("<li class=ztr-comment-action-reply><span>"),ZA=He("<div class=ztr-comment><div class=ztr-comment-body><div class=ztr-comment-info-wrapper><div class=ztr-comment-info><div class=ztr-comment-info-picture><img></div><ul class=ztr-comment-info-items><li class=ztr-comment-info-author><a target=_blank></a><span style=white-space:nowrap;><strong> <!>ed</strong> </span></li><li><a class=ztr-comment-info-dots></a></li></ul></div><ul class=ztr-comment-info-items></ul></div><div class=ztr-comment-text></div><div class=ztr-comment-text></div><ul class=ztr-comment-actions>"),YA=He("<li>"),JA=He("<li> repl"),XA=He("<li><span>"),QA=He("<div class=ztr-info-pane><a target=_blank><small>Event data"),eS=He("<p class=warning><span>This is a <!> that referenced this article in <a>another thread"),tS=He("<p class=warning><span>Article contents may have changed since this <!> was made"),nS=He("<p class=warning><span>Article contents changed since this <!> was made"),rS=He("<div class=ztr-comment-expand><a></a><span>Show full comment"),oS=He("<div class=ztr-comment-replies>"),iS=He('<svg viewBox="0 -6 60 60"xmlns=http://www.w3.org/2000/svg><path d="M 12.6030 50.4905 C 13.3758 50.4905 13.9307 50.1140 14.8621 49.2421 L 20.6483 43.8720 C 19.5188 42.9803 18.6073 41.5733 18.6073 38.3433 L 18.6073 25.2052 C 18.6073 19.1217 22.3129 15.5152 28.3766 15.5152 L 42.2479 15.5152 L 42.2281 14.7622 C 41.9306 10.6999 39.2557 8.0643 34.7177 8.0643 L 7.5301 8.0643 C 2.9922 8.0643 0 10.7791 0 15.4954 L 0 34.9548 C 0 39.6710 2.9922 42.7028 7.5301 42.7028 L 10.8195 42.7028 L 10.8195 48.4693 C 10.8195 49.6979 11.4735 50.4905 12.6030 50.4905 Z M 44.6058 53.2450 C 45.7353 53.2450 46.3895 52.4325 46.3895 51.2237 L 46.3895 45.4374 L 48.4702 45.4374 C 53.0078 45.4374 56 42.4056 56 37.7092 L 56 25.6610 C 56 20.9250 53.0078 18.2300 48.4702 18.2300 L 28.8522 18.2300 C 24.1161 18.2300 21.3221 20.9250 21.3221 25.6610 L 21.3221 37.7092 C 21.3221 42.4056 24.1161 45.4374 28.8522 45.4374 L 35.1735 45.4374 L 42.3470 51.9767 C 43.2784 52.8487 43.8331 53.2450 44.6058 53.2450 Z">'),sS=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="-120 -80 528 588"><path d="M349.4 44.6c5.9-13.7 1.5-29.7-10.6-38.5s-28.6-8-39.9 1.8l-256 224c-10 8.8-13.6 22.9-8.9 35.3S50.7 288 64 288H175.5L98.6 467.4c-5.9 13.7-1.5 29.7 10.6 38.5s28.6 8 39.9-1.8l256-224c10-8.8 13.6-22.9 8.9-35.3s-16.6-20.7-30-20.7H272.5L349.4 44.6z">'),aS=He('<svg viewBox="0 -16 180 180"xmlns=http://www.w3.org/2000/svg><path d="M60.732 29.7C41.107 29.7 22 39.7 22 67.41c0 27.29 45.274 67.29 74 94.89 28.744-27.6 74-67.6 74-94.89 0-27.71-19.092-37.71-38.695-37.71C116 29.7 104.325 41.575 96 54.066 87.638 41.516 76 29.7 60.732 29.7z">'),cS=He('<svg viewBox="0 0 576 512"><path d="M168 80c-13.3 0-24 10.7-24 24V408c0 8.4-1.4 16.5-4.1 24H440c13.3 0 24-10.7 24-24V104c0-13.3-10.7-24-24-24H168zM72 480c-39.8 0-72-32.2-72-72V112C0 98.7 10.7 88 24 88s24 10.7 24 24V408c0 13.3 10.7 24 24 24s24-10.7 24-24V104c0-39.8 32.2-72 72-72H440c39.8 0 72 32.2 72 72V408c0 39.8-32.2 72-72 72H72zM176 136c0-13.3 10.7-24 24-24h96c13.3 0 24 10.7 24 24v80c0 13.3-10.7 24-24 24H200c-13.3 0-24-10.7-24-24V136zm200-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24H376c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80h32c13.3 0 24 10.7 24 24s-10.7 24-24 24H376c-13.3 0-24-10.7-24-24s10.7-24 24-24zM200 272H408c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80H408c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24z">'),uS=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -200 560 640"><path d="M8 256a56 56 0 1 1 112 0A56 56 0 1 1 8 256zm160 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z">'),lS=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -50 256 512"><path d="M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z">'),dS=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -50 320 512"><path d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z">'),fS=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 512 512"><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z">'),kb=e=>{const t=()=>be.anchor,n=be.profiles;return(()=>{const r=WA();return $e(r,bn(h6,{get each(){return sa(e.nestedEvents())},children:o=>{const[s,c]=dt(!1),[f,d]=dt(!1),[h,y]=dt(!1),[b,_]=dt(!1),T=500,[C,A]=dt(),L=KA(C),[H,I]=dt(aa),N=()=>o().pk,l=()=>ib(N()),w=()=>n().find(S=>S.pk===N());Ei(async()=>{var S;I(((S=w())==null?void 0:S.i)||aa)});let p;const E=()=>rA(o().ts*1e3),[$,R]=dt();Ei(()=>{R(E()),p=setInterval(()=>{R(E())},60*1e3)});const P=()=>o().a===t().value&&o().am,v=()=>o().k===9802?"highlight":P()?"mention":"comment",x=De(()=>Jd(o())),z=()=>!o().parent&&!o().ro,V=()=>!o().parent&&o().ro&&!be.rootEventIds.includes(o().ro),O=()=>!o().parent&&o().ro&&be.rootEventIds.includes(o().ro)&&be.version&&be.version!==o().ro;return li(()=>clearInterval(p)),(()=>{const S=ZA(),D=S.firstChild,K=D.firstChild,W=K.firstChild,Z=W.firstChild,G=Z.firstChild,oe=Z.nextSibling,he=oe.firstChild,me=he.firstChild,Ae=me.nextSibling,re=Ae.firstChild,ye=re.firstChild,Le=ye.nextSibling;Le.nextSibling,re.nextSibling;const Ie=he.nextSibling,Me=Ie.firstChild,pt=W.nextSibling,Ke=K.nextSibling,se=Ke.nextSibling,Oe=se.nextSibling;return G.addEventListener("error",()=>I(aa)),$e(me,()=>{var xe;return((xe=w())==null?void 0:xe.n)||Ao(l())}),$e(re,v,Le),$e(Ae,$,null),$e(oe,(()=>{const xe=De(()=>x()>0&&L.width>600);return()=>xe()&&[YA(),(()=>{const Te=JA(),je=Te.firstChild;return $e(Te,x,je),$e(Te,()=>x()>1?"ies":"y",null),$e(Te,()=>h()?" (hidden)":"",null),Te})()]})(),Ie),Me.$$click=()=>_(!b()),$e(Me,Ab),$e(pt,(()=>{const xe=De(()=>x()>0);return()=>xe()&&(()=>{const Te=XA(),je=Te.firstChild;return je.$$click=()=>y(!h()),$e(je,(()=>{const yt=De(()=>!!h());return()=>yt()?bS():mS()})()),Te})()})()),$e(D,(()=>{const xe=De(()=>!!b());return()=>xe()&&(()=>{const Te=QA(),je=Te.firstChild;return cn(()=>Ct(je,"href",be.urlPrefixes.note+qp(o().id))),Te})()})(),Ke),$e(Ke,(()=>{const xe=De(()=>!!V());return()=>xe()&&(()=>{const Te=eS(),je=Te.firstChild,yt=je.firstChild,Ot=yt.nextSibling,St=Ot.nextSibling,Yt=St.nextSibling;return $e(Te,el,je),$e(je,v,Ot),cn(()=>Ct(Yt,"href",be.urlPrefixes.note+qp(o().ro))),Te})()})(),null),$e(Ke,(()=>{const xe=De(()=>!!z());return()=>xe()&&(()=>{const Te=tS(),je=Te.firstChild,yt=je.firstChild,Ot=yt.nextSibling;return Ot.nextSibling,$e(Te,el,je),$e(je,v,Ot),Te})()})(),null),$e(Ke,(()=>{const xe=De(()=>!!O());return()=>xe()&&(()=>{const Te=nS(),je=Te.firstChild,yt=je.firstChild,Ot=yt.nextSibling;return Ot.nextSibling,$e(Te,el,je),$e(je,v,Ot),Te})()})(),null),vw(A,se),$e(D,(()=>{const xe=De(()=>!!(L.height&&L.height>=T&&!f()));return()=>xe()&&(()=>{const Te=rS(),je=Te.firstChild,yt=je.nextSibling;return`${yn}px`!=null?je.style.setProperty("height",`${yn}px`):je.style.removeProperty("height"),$e(je,wS),yt.$$click=()=>d(!0),Te})()})(),Oe),$e(Oe,bn(Ta,{get when(){return!be.disableFeatures.includes("reply")},get children(){const xe=GA(),Te=xe.firstChild;return xe.$$click=()=>c(!s())&&_(!1),$e(xe,hS,Te),$e(Te,()=>s()?"Cancel":"Reply"),xe}})),$e(D,(()=>{const xe=De(()=>!!s());return()=>xe()&&bn(_b,{get replyTo(){return o().id},onDone:()=>c(!1)})})(),null),$e(S,(()=>{const xe=De(()=>!h());return()=>xe()&&(()=>{const Te=oS();return $e(Te,bn(kb,{nestedEvents:()=>o().children,get articles(){return e.articles}})),Te})()})(),null),cn(xe=>{const Te=H(),je=be.urlPrefixes.npub+l(),yt=o().k==9802,Ot=f()?{}:{"max-height":`${T}px`},St=pb(o(),be,e.articles());return Te!==xe._v$&&Ct(G,"src",xe._v$=Te),je!==xe._v$2&&Ct(me,"href",xe._v$2=je),yt!==xe._v$3&&se.classList.toggle("highlight",xe._v$3=yt),xe._v$4=w6(se,Ot,xe._v$4),St!==xe._v$5&&(se.innerHTML=xe._v$5=St),xe},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),S})()}})),r})()},hS=()=>(()=>{const e=iS();return Ct(e,"width",yn),Ct(e,"height",yn),e})(),pS=()=>(()=>{const e=sS();return Ct(e,"width",yn),Ct(e,"height",yn),e})(),gS=()=>(()=>{const e=aS();return Ct(e,"width",yn),Ct(e,"height",yn),e})(),wS=()=>(()=>{const e=cS();return Ct(e,"width",yn),Ct(e,"height",yn),e})(),Ab=()=>uS(),bS=()=>lS(),mS=()=>dS(),el=()=>(()=>{const e=fS();return Ct(e,"height",yn),e})();zd(["click"]);var Sb={};(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0;function t(v){if(!Number.isSafeInteger(v))throw new Error(`Wrong integer: ${v}`)}e.assertNumber=t;function n(...v){const x=(O,S)=>D=>O(S(D)),z=Array.from(v).reverse().reduce((O,S)=>O?x(O,S.encode):S.encode,void 0),V=v.reduce((O,S)=>O?x(O,S.decode):S.decode,void 0);return{encode:z,decode:V}}function r(v){return{encode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return x.map(z=>{if(t(z),z<0||z>=v.length)throw new Error(`Digit index outside alphabet: ${z} (alphabet: ${v.length})`);return v[z]})},decode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="string")throw new Error("alphabet.decode input should be array of strings");return x.map(z=>{if(typeof z!="string")throw new Error(`alphabet.decode: not string element=${z}`);const V=v.indexOf(z);if(V===-1)throw new Error(`Unknown letter: "${z}". Allowed: ${v}`);return V})}}}function o(v=""){if(typeof v!="string")throw new Error("join separator should be string");return{encode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="string")throw new Error("join.encode input should be array of strings");for(let z of x)if(typeof z!="string")throw new Error(`join.encode: non-string input=${z}`);return x.join(v)},decode:x=>{if(typeof x!="string")throw new Error("join.decode input should be string");return x.split(v)}}}function s(v,x="="){if(t(v),typeof x!="string")throw new Error("padding chr should be string");return{encode(z){if(!Array.isArray(z)||z.length&&typeof z[0]!="string")throw new Error("padding.encode input should be array of strings");for(let V of z)if(typeof V!="string")throw new Error(`padding.encode: non-string input=${V}`);for(;z.length*v%8;)z.push(x);return z},decode(z){if(!Array.isArray(z)||z.length&&typeof z[0]!="string")throw new Error("padding.encode input should be array of strings");for(let O of z)if(typeof O!="string")throw new Error(`padding.decode: non-string input=${O}`);let V=z.length;if(V*v%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;V>0&&z[V-1]===x;V--)if(!((V-1)*v%8))throw new Error("Invalid padding: string has too much padding");return z.slice(0,V)}}}function c(v){if(typeof v!="function")throw new Error("normalize fn should be function");return{encode:x=>x,decode:x=>v(x)}}function f(v,x,z){if(x<2)throw new Error(`convertRadix: wrong from=${x}, base cannot be less than 2`);if(z<2)throw new Error(`convertRadix: wrong to=${z}, base cannot be less than 2`);if(!Array.isArray(v))throw new Error("convertRadix: data should be array");if(!v.length)return[];let V=0;const O=[],S=Array.from(v);for(S.forEach(D=>{if(t(D),D<0||D>=x)throw new Error(`Wrong integer: ${D}`)});;){let D=0,K=!0;for(let W=V;W<S.length;W++){const Z=S[W],G=x*D+Z;if(!Number.isSafeInteger(G)||x*D/x!==D||G-Z!==x*D)throw new Error("convertRadix: carry overflow");if(D=G%z,S[W]=Math.floor(G/z),!Number.isSafeInteger(S[W])||S[W]*z+D!==G)throw new Error("convertRadix: carry overflow");if(K)S[W]?K=!1:V=W;else continue}if(O.push(D),K)break}for(let D=0;D<v.length-1&&v[D]===0;D++)O.push(0);return O.reverse()}const d=(v,x)=>x?d(x,v%x):v,h=(v,x)=>v+(x-d(v,x));function y(v,x,z,V){if(!Array.isArray(v))throw new Error("convertRadix2: data should be array");if(x<=0||x>32)throw new Error(`convertRadix2: wrong from=${x}`);if(z<=0||z>32)throw new Error(`convertRadix2: wrong to=${z}`);if(h(x,z)>32)throw new Error(`convertRadix2: carry overflow from=${x} to=${z} carryBits=${h(x,z)}`);let O=0,S=0;const D=2**z-1,K=[];for(const W of v){if(t(W),W>=2**x)throw new Error(`convertRadix2: invalid data word=${W} from=${x}`);if(O=O<<x|W,S+x>32)throw new Error(`convertRadix2: carry overflow pos=${S} from=${x}`);for(S+=x;S>=z;S-=z)K.push((O>>S-z&D)>>>0);O&=2**S-1}if(O=O<<z-S&D,!V&&S>=x)throw new Error("Excess padding");if(!V&&O)throw new Error(`Non-zero padding: ${O}`);return V&&S>0&&K.push(O>>>0),K}function b(v){return t(v),{encode:x=>{if(!(x instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return f(Array.from(x),2**8,v)},decode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(f(x,v,2**8))}}}function _(v,x=!1){if(t(v),v<=0||v>32)throw new Error("radix2: bits should be in (0..32]");if(h(8,v)>32||h(v,8)>32)throw new Error("radix2: carry overflow");return{encode:z=>{if(!(z instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return y(Array.from(z),8,v,!x)},decode:z=>{if(!Array.isArray(z)||z.length&&typeof z[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(y(z,v,8,x))}}}function T(v){if(typeof v!="function")throw new Error("unsafeWrapper fn should be function");return function(...x){try{return v.apply(null,x)}catch{}}}function C(v,x){if(t(v),typeof x!="function")throw new Error("checksum fn should be function");return{encode(z){if(!(z instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const V=x(z).slice(0,v),O=new Uint8Array(z.length+v);return O.set(z),O.set(V,z.length),O},decode(z){if(!(z instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const V=z.slice(0,-v),O=x(V).slice(0,v),S=z.slice(-v);for(let D=0;D<v;D++)if(O[D]!==S[D])throw new Error("Invalid checksum");return V}}}e.utils={alphabet:r,chain:n,checksum:C,radix:b,radix2:_,join:o,padding:s},e.base16=n(_(4),r("0123456789ABCDEF"),o("")),e.base32=n(_(5),r("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s(5),o("")),e.base32hex=n(_(5),r("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s(5),o("")),e.base32crockford=n(_(5),r("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),c(v=>v.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=n(_(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s(6),o("")),e.base64url=n(_(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(6),o(""));const A=v=>n(b(58),r(v),o(""));e.base58=A("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=A("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=A("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const L=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(v){let x="";for(let z=0;z<v.length;z+=8){const V=v.subarray(z,z+8);x+=e.base58.encode(V).padStart(L[V.length],"1")}return x},decode(v){let x=[];for(let z=0;z<v.length;z+=11){const V=v.slice(z,z+11),O=L.indexOf(V.length),S=e.base58.decode(V);for(let D=0;D<S.length-O;D++)if(S[D]!==0)throw new Error("base58xmr: wrong padding");x=x.concat(Array.from(S.slice(S.length-O)))}return Uint8Array.from(x)}};const H=v=>n(C(4,x=>v(v(x))),e.base58);e.base58check=H;const I=n(r("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),N=[996825010,642813549,513874426,1027748829,705979059];function l(v){const x=v>>25;let z=(v&33554431)<<5;for(let V=0;V<N.length;V++)(x>>V&1)===1&&(z^=N[V]);return z}function w(v,x,z=1){const V=v.length;let O=1;for(let S=0;S<V;S++){const D=v.charCodeAt(S);if(D<33||D>126)throw new Error(`Invalid prefix (${v})`);O=l(O)^D>>5}O=l(O);for(let S=0;S<V;S++)O=l(O)^v.charCodeAt(S)&31;for(let S of x)O=l(O)^S;for(let S=0;S<6;S++)O=l(O);return O^=z,I.encode(y([O%2**30],30,5,!1))}function p(v){const x=v==="bech32"?1:734539939,z=_(5),V=z.decode,O=z.encode,S=T(V);function D(G,oe,he=90){if(typeof G!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof G}`);if(!Array.isArray(oe)||oe.length&&typeof oe[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof oe}`);const me=G.length+7+oe.length;if(he!==!1&&me>he)throw new TypeError(`Length ${me} exceeds limit ${he}`);return G=G.toLowerCase(),`${G}1${I.encode(oe)}${w(G,oe,x)}`}function K(G,oe=90){if(typeof G!="string")throw new Error(`bech32.decode input should be string, not ${typeof G}`);if(G.length<8||oe!==!1&&G.length>oe)throw new TypeError(`Wrong string length: ${G.length} (${G}). Expected (8..${oe})`);const he=G.toLowerCase();if(G!==he&&G!==G.toUpperCase())throw new Error("String must be lowercase or uppercase");G=he;const me=G.lastIndexOf("1");if(me===0||me===-1)throw new Error('Letter "1" must be present between prefix and data only');const Ae=G.slice(0,me),re=G.slice(me+1);if(re.length<6)throw new Error("Data must be at least 6 characters long");const ye=I.decode(re).slice(0,-6),Le=w(Ae,ye,x);if(!re.endsWith(Le))throw new Error(`Invalid checksum in ${G}: expected "${Le}"`);return{prefix:Ae,words:ye}}const W=T(K);function Z(G){const{prefix:oe,words:he}=K(G,!1);return{prefix:oe,words:he,bytes:V(he)}}return{encode:D,decode:K,decodeToBytes:Z,decodeUnsafe:W,fromWords:V,fromWordsUnsafe:S,toWords:O}}e.bech32=p("bech32"),e.bech32m=p("bech32m"),e.utf8={encode:v=>new TextDecoder().decode(v),decode:v=>new TextEncoder().encode(v)},e.hex=n(_(4),r("0123456789abcdef"),o(""),c(v=>{if(typeof v!="string"||v.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof v} with length ${v.length}`);return v.toLowerCase()}));const E={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},$=`Invalid encoding type. Available types: ${Object.keys(E).join(", ")}`,R=(v,x)=>{if(typeof v!="string"||!E.hasOwnProperty(v))throw new TypeError($);if(!(x instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return E[v].encode(x)};e.bytesToString=R,e.str=e.bytesToString;const P=(v,x)=>{if(!E.hasOwnProperty(v))throw new TypeError($);if(typeof x!="string")throw new TypeError("stringToBytes() expects string");return E[v].decode(x)};e.stringToBytes=P,e.bytes=e.stringToBytes})(Sb);const{bech32:Cn,hex:gn,utf8:yS}=Sb,Xp={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},Qp={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},eg={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},tg={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},Js=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],vS={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},_S=BigInt("2100000000000000000"),ng=BigInt(1e11),Gl={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},$b={};for(let e=0,t=Object.keys(Gl);e<t.length;e++){const n=t[e],r=Gl[t[e]].toString();$b[r]=n}const ES={1:e=>gn.encode(Cn.fromWordsUnsafe(e)),16:e=>gn.encode(Cn.fromWordsUnsafe(e)),13:e=>yS.encode(Cn.fromWordsUnsafe(e)),19:e=>gn.encode(Cn.fromWordsUnsafe(e)),23:e=>gn.encode(Cn.fromWordsUnsafe(e)),27:e=>gn.encode(Cn.fromWordsUnsafe(e)),6:Ra,24:Ra,3:AS,5:SS};function kS(e){return t=>({tagCode:parseInt(e),words:Cn.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function Ra(e){return e.reverse().reduce((t,n,r)=>t+n*Math.pow(32,r),0)}function AS(e){const t=[];let n,r,o,s,c,f=Cn.fromWordsUnsafe(e);for(;f.length>0;)n=gn.encode(f.slice(0,33)),r=gn.encode(f.slice(33,41)),o=parseInt(gn.encode(f.slice(41,45)),16),s=parseInt(gn.encode(f.slice(45,49)),16),c=parseInt(gn.encode(f.slice(49,51)),16),f=f.slice(51),t.push({pubkey:n,short_channel_id:r,fee_base_msat:o,fee_proportional_millionths:s,cltv_expiry_delta:c});return t}function SS(e){const t=e.slice().reverse().map(o=>[!!(o&1),!!(o&2),!!(o&4),!!(o&8),!!(o&16)]).reduce((o,s)=>o.concat(s),[]);for(;t.length<Js.length*2;)t.push(!1);const n={};Js.forEach((o,s)=>{let c;t[s*2]?c="required":t[s*2+1]?c="supported":c="unsupported",n[o]=c});const r=t.slice(Js.length*2);return n.extra_bits={start_bit:Js.length*2,bits:r,has_required:r.reduce((o,s,c)=>c%2!==0?o||!1:o||s,!1)},n}function xb(e,t){let n,r;if(e.slice(-1).match(/^[munp]$/))n=e.slice(-1),r=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=e}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");const o=BigInt(r),s=n?o*ng/vS[n]:o*ng;if(n==="p"&&o%BigInt(10)!==BigInt(0)||s>_S)throw new Error("Amount is outside of valid range");return t?s.toString():s}function $S(e,t){if(typeof e!="string")throw new Error("Lightning Payment Request must be string");if(e.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const n=[],r=Cn.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const o=r.prefix;let s=r.words,c=e.slice(o.length+1),f=s.slice(-104);s=s.slice(0,-104);let d=o.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(d&&!d[2]&&(d=o.match(/^ln(\S+)$/)),!d)throw new Error("Not a proper lightning payment request");n.push({name:"lightning_network",letters:"ln"});const h=d[1];let y;if(t){if(t.bech32===void 0||t.pubKeyHash===void 0||t.scriptHash===void 0||!Array.isArray(t.validWitnessVersions))throw new Error("Invalid network");y=t}else switch(h){case Xp.bech32:y=Xp;break;case Qp.bech32:y=Qp;break;case eg.bech32:y=eg;break;case tg.bech32:y=tg;break}if(!y||y.bech32!==h)throw new Error("Unknown coin bech32 prefix");n.push({name:"coin_network",letters:h,value:y});const b=d[2];let _;if(b){const l=d[3];_=xb(b+l,!0),n.push({name:"amount",letters:d[2]+d[3],value:_})}else _=null;n.push({name:"separator",letters:"1"});const T=Ra(s.slice(0,7));s=s.slice(7),n.push({name:"timestamp",letters:c.slice(0,7),value:T}),c=c.slice(7);let C,A,L,H;for(;s.length>0;){const l=s[0].toString();C=$b[l]||"unknown_tag",A=ES[l]||kS(l),s=s.slice(1),L=Ra(s.slice(0,2)),s=s.slice(2),H=s.slice(0,L),s=s.slice(L),n.push({name:C,tag:c[0],letters:c.slice(0,3+L),value:A(H)}),c=c.slice(3+L)}n.push({name:"signature",letters:c.slice(0,104),value:gn.encode(Cn.fromWordsUnsafe(f))}),c=c.slice(104),n.push({name:"checksum",letters:c});let I={paymentRequest:e,sections:n,get expiry(){let l=n.find(w=>w.name==="expiry");if(l)return N("timestamp")+l.value},get route_hints(){return n.filter(l=>l.name==="route_hint").map(l=>l.value)}};for(let l in Gl)l!=="route_hint"&&Object.defineProperty(I,l,{get(){return N(l)}});return I;function N(l){let w=n.find(p=>p.name===l);return w?w.value:void 0}}var xS={decode:$S,hrpToMillisat:xb};const TS=He("<div id=ztr-root><style></style><div style=float:right;opacity:0.2;>"),PS=He("<div id=ztr-content>"),BS=He("<h1>Error!"),CS=He("<div class=ztr-comment-text><pre></pre><p>Only properly formed NIP-19 naddr, note and nevent encoded entities and URLs are supported."),LS=He("<h2 id=ztr-title>"),IS=He("<p>Powered by <a href=https://github.com/fr4nzap/zapthreads>zapthreads"),OS=He("<button>Clear cache"),NS=He("<p>Anchor version: "),RS=e=>{Mr(()=>{be.anchor=(()=>{const N=e.anchor.trim();try{if(N.startsWith("http")){const w=!e.legacyUrl;return{type:"http",value:sA(N,w)}}const l=ia(N);switch(l.type){case"nevent":return{type:"note",value:l.data.id};case"note":return{type:"note",value:l.data};case"naddr":const w=l.data;return{type:"naddr",value:`${w.kind}:${w.pubkey}:${w.identifier}`}}}catch(l){return console.error(l),{type:"error",value:`Malformed anchor: ${N}`}}})();const I="wss://relay.damus.io,wss://nos.lol";be.relays=(e.relays||I).split(",").map(N=>new URL(N).toString()),(e.author||"").startsWith("npub")&&(be.externalAuthor=e.author),be.disableFeatures=e.disable.split(",").map(N=>N.trim()).filter(dk),be.urlPrefixes=nA(e.urls),be.replyPlaceholder=e.replyPlaceholder});const t=()=>be.anchor,n=()=>be.relays,r=()=>be.disableFeatures,o=()=>e.version;be.profiles=Ys(()=>["profiles"]);const s=()=>r().includes("watch");Mr(Hr([t],()=>{be.version=o()})),Mr(Hr([t,n],async()=>{if(t().type==="error")return;let I,N;switch(t().type){case"http":N=await Ti("events",t().value,{index:"r"}),be.rootEventIds=sa(N).map(v=>v.id),I={"#r":e.legacyUrl?[t().value]:[t().value,`${t().value}/`],kinds:[1,8812]};break;case"note":const E=await hi("events",IDBKeyRange.only(t().value));if(E){N=[E],be.rootEventIds=[E.id],be.anchorAuthor=E.pk;return}else{N=[],I={ids:[t().value]};break}case"naddr":const[$,R,P]=t().value.split(":");N=(await Ti("events",P,{index:"d"})).filter(v=>v.pk===R),N.length>0&&(be.rootEventIds=sa(N).map(v=>v.id),be.anchorAuthor=N[0].pk),I={authors:[R],kinds:[parseInt($)],"#d":[P]};break;default:throw"error"}const w=(await di.querySync(n(),{...I})).map(Na);for(const p of w)t().type=="http"?(p.k==1&&p.c.includes("")||p.k==8812)&&un("events",p):un("events",p);switch(t().type){case"http":case"naddr":const p=[...N,...w],E=sa([...p]).map($=>$.id);(E.length>0&&E[0])!==be.rootEventIds[0]&&(be.rootEventIds=E);break;case"note":be.rootEventIds=w.map($=>$.id);break}w.length>0&&(be.anchorAuthor=w[0].pk)}));const c=()=>be.rootEventIds;Mr(Hr([c,o],()=>{switch(t().type){case"http":case"note":(be.filter["#e"]??[]).toString()!==c().toString()&&(be.filter={"#e":c()});return;case"naddr":const I=be.filter["#a"]&&be.filter["#a"][0];t().value!==I&&(be.filter={"#a":[t().value]}),be.version=o()||c()[0];return}},{defer:!0}));const f=De(()=>be.filter,{defer:!0});let d;Ei(Hr([f],async()=>{const I=f(),N=n(),l=t(),w=T(),p=be.profiles();if(Object.entries(I).length===0)return;d==null||d.close(),d=null,li(()=>{console.log("[zapthreads] unsubscribing and cleaning up",l.value),d==null||d.close(),d=null});const E=[1,9802,7,9735];console.log("[zapthreads] subscribing to",l.value);const $=await Gk(l,N),R=new Set,P={};d=di.subscribeMany(N,[{...I,kinds:E,since:$}],{onevent(v){if(v.kind===1||v.kind===9802)v.content.trim()&&un("events",Na(v));else if(v.kind===7)R.add(v.id);else if(v.kind===9735){const x=v.tags.find(z=>z[0]==="bolt11");x&&x[1]&&(P[v.id]=x[1])}},oneose(){(async()=>{const v=await hi("aggregates",IDBKeyRange.only([l.value,7]))??{eid:l.value,ids:[],k:7};v.ids=[...new Set([...v.ids,...R])],un("aggregates",v);const x=await hi("aggregates",IDBKeyRange.only([l.value,9735]))??{eid:l.value,ids:[],k:9735,sum:0};x.sum=Object.entries(P).reduce((z,V)=>{if(x.ids.includes(V[0]))return z;const S=xS.decode(V[1]).sections.find(K=>K.name==="amount"),D=Number(S.value)/1e3;return z+D},x.sum??0),x.ids=[...new Set([...x.ids,...Object.keys(P)])],un("aggregates",x)})(),setTimeout(async()=>{await hb([...w.map(v=>v.pk)],N,p),Zk(l,w),s()&&(d==null||d.close(),di.close(N))},96)}})},{defer:!0}));const h=()=>e.user;Mr(Hr(h,I=>{if(I){let N,l;I.startsWith("nsec")?(l=ia(I).data,N=wb(l)):N=ia(I).data,zt.external={pk:N,signEvent:async w=>{if(l)return{sig:bb(w,l).sig};if(!window.nostr)throw alert("Please log in with a NIP-07 extension such as Alby or nos2x"),zt.active=void 0,"No extension available";const p=await window.nostr.getPublicKey(),E=N;if(E!==p){const $=`ERROR: Event not signed. Supplied pubkey does not match extension pubkey. ${E} !== ${p}`;throw zt.active=void 0,alert($),$}else return window.nostr.signEvent(w)}},zt.active=zt.external}})),Mr(Hr(h,I=>{I||(zt.active=void 0)},{defer:!0}));const y=Ys(()=>["events",30023,{index:"k"}]),b=De(()=>{if(be.disableFeatures.includes("hideContent")&&t().type==="naddr"){const[I,N,l]=t().value.split(":"),w=y().find(p=>p.d===l&&p.pk===N);if(w){const p=`# ${w.tl}
 ${w.c}`;return pb({...w,c:p},be,[])}}}),_=De(()=>{switch(t().type){case"http":case"note":return Ys(()=>["events",be.rootEventIds,{index:"ro"}]);case"naddr":return Ys(()=>["events",t().value,{index:"a"}]);default:return()=>[]}}),T=()=>_()(),C=De(()=>be.rootEventIds&&be.rootEventIds.length?gb(T()).filter(N=>!(N.k===9802&&N.children.length===0)):[]),A=()=>C().reduce((I,N)=>I+Jd(N),C().length),[L,H]=dt(!1);return(()=>{const I=TS(),N=I.firstChild,l=N.nextSibling;return $e(N,C6),$e(I,(()=>{const w=De(()=>!!b());return()=>w()&&(()=>{const p=PS();return cn(()=>p.innerHTML=b()),p})()})(),l),$e(I,(()=>{const w=De(()=>t().type==="error");return()=>w()&&[BS(),(()=>{const p=CS(),E=p.firstChild;return $e(E,()=>t().value),p})()]})(),l),$e(I,(()=>{const w=De(()=>t().type!=="error");return()=>w()&&[De((()=>{const p=De(()=>!be.disableFeatures.includes("reply"));return()=>p()&&bn(qA,{})})()),(()=>{const p=LS();return $e(p,(()=>{const E=De(()=>A()>0);return()=>E()&&`${A()} comment${A()==1?"":"s"}`})()),p})(),bn(kb,{nestedEvents:C,articles:y})]})(),l),l.$$click=()=>H(!L()),$e(l,Ab),$e(I,(()=>{const w=De(()=>!!L());return()=>w()&&[IS(),De((()=>{const p=De(()=>!!be.version);return()=>p()&&(()=>{const E=NS();return E.firstChild,$e(E,()=>be.version,null),E})()})()),(()=>{const p=OS();return g6(p,"click",Wk),p})()]})(),null),I})()};B6("zap-threads",{anchor:"",version:"",relays:"",user:"",author:"",disable:"",urls:"","reply-placeholder":"","legacy-url":""},e=>bn(RS,{get anchor(){return e.anchor??""},get version(){return e.version??""},get relays(){return e.relays??""},get user(){return e.user??""},get author(){return e.author??""},get disable(){return e.disable??""},get urls(){return e.urls??""},get replyPlaceholder(){return e["reply-placeholder"]??""},get legacyUrl(){return e["legacy-url"]??""}}));zd(["click"]);function zS(e){let t,n;return t=new aw({}),{c(){no(t.$$.fragment)},m(r,o){ur(t,r,o),n=!0},p:Mt,i(r){n||(Fe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){lr(t,r)}}}function US(e){let t,n,r=Zr(e[1].created_at,!0)+"",o,s,c,f=e[1].title+"",d,h,y,b,_,T,C=e[1].image&&rg(e),A=e[3]&&og(e);return{c(){t=Pe("div"),n=Pe("div"),o=Je(r),s=Ye(),c=Pe("h1"),d=Je(f),h=Ye(),C&&C.c(),y=Ye(),b=Pe("div"),_=Ye(),A&&A.c(),T=Ro(),Ee(n,"class","date"),Ee(b,"class","content"),Ee(t,"class","note-wrapper")},m(L,H){Ue(L,t,H),we(t,n),we(n,o),we(t,s),we(t,c),we(c,d),we(t,h),C&&C.m(t,null),we(t,y),we(t,b),b.innerHTML=e[6],Ue(L,_,H),A&&A.m(L,H),Ue(L,T,H)},p(L,H){H&2&&r!==(r=Zr(L[1].created_at,!0)+"")&&At(o,r),H&2&&f!==(f=L[1].title+"")&&At(d,f),L[1].image?C?C.p(L,H):(C=rg(L),C.c(),C.m(t,y)):C&&(C.d(1),C=null),H&64&&(b.innerHTML=L[6]),L[3]?A?A.p(L,H):(A=og(L),A.c(),A.m(T.parentNode,T)):A&&(A.d(1),A=null)},i:Mt,o:Mt,d(L){L&&(Re(t),Re(_),Re(T)),C&&C.d(),A&&A.d(L)}}}function rg(e){let t,n;return{c(){t=Pe("img"),Ee(t,"class","note-banner"),Fr(t.src,n=e[1].image)||Ee(t,"src",n)},m(r,o){Ue(r,t,o)},p(r,o){o&2&&!Fr(t.src,n=r[1].image)&&Ee(t,"src",n)},d(r){r&&Re(t)}}}function og(e){let t;return{c(){t=Pe("zap-threads"),Vs(t,"anchor",e[2]),Vs(t,"relays",e[0])},m(n,r){Ue(n,t,r)},p(n,r){r&4&&Vs(t,"anchor",n[2]),r&1&&Vs(t,"relays",n[0])},d(n){n&&Re(t)}}}function MS(e){let t,n,r,o,s=e[2].slice(0,9)+"..."+e[2].slice(-5),c,f,d,h,y,b,_,T,C,A,L,H,I,N,l,w,p;const E=[US,zS],$=[];function R(P,v){return v&2&&(I=null),I==null&&(I=Object.keys(P[1]).length>0),I?0:1}return N=R(e,-1),l=$[N]=E[N](e),{c(){t=Pe("div"),n=Pe("div"),r=Je("Note: "),o=Pe("a"),c=Je(s),d=Ye(),h=Pe("a"),y=Pe("div"),b=Pe("img"),T=Ye(),C=Pe("span"),A=Je(e[4]),L=Je(" homepage"),H=Ye(),l.c(),w=Ro(),Ee(o,"href",f="https://njump.me/"+e[2]),Ee(n,"class","external-link"),Fr(b.src,_=e[5])||Ee(b,"src",_),Ee(y,"class","picture-container"),Ee(h,"href","#"),Ee(t,"class","header note")},m(P,v){Ue(P,t,v),we(t,n),we(n,r),we(n,o),we(o,c),we(t,d),we(t,h),we(h,y),we(y,b),we(h,T),we(h,C),we(C,A),we(C,L),Ue(P,H,v),$[N].m(P,v),Ue(P,w,v),p=!0},p(P,[v]){(!p||v&4)&&s!==(s=P[2].slice(0,9)+"..."+P[2].slice(-5))&&At(c,s),(!p||v&4&&f!==(f="https://njump.me/"+P[2]))&&Ee(o,"href",f),(!p||v&32&&!Fr(b.src,_=P[5]))&&Ee(b,"src",_),(!p||v&16)&&At(A,P[4]);let x=N;N=R(P,v),N===x?$[N].p(P,v):(eo(),Ge($[x],1,1,()=>{$[x]=null}),to(),l=$[N],l?l.p(P,v):(l=$[N]=E[N](P),l.c()),Fe(l,1),l.m(w.parentNode,w))},i(P){p||(Fe(l),p=!0)},o(P){Ge(l),p=!1},d(P){P&&(Re(t),Re(H),Re(w)),$[N].d(P)}}}let HS="";function jS(e,t,n){let r,o,s={},c="",f="",d=!1,h="",y="",{id:b}=t,{profile:_}=t;return qa(async()=>{const{relays:T,comments:C}=Fa();n(0,o=T);const A=JSON.parse(_.content);n(4,h=A.name||null),n(5,y=A.picture||null),n(2,f=jv(b)),n(3,d=C);let L=pa.subscribeMany(o,[{authors:[_.pubkey],ids:[b]}],{onevent:async H=>{let I;console.log("Received event:",H),n(1,s=ea(H)),ga.set(s.title),I=s.content.replace("# "+HS,""),I=await L0(I),I=I0(I),I=yE(I),I=vE(I),I=_E(I),H.kind==1&&(I=I.replace(/\n/g,`
<br/>`));let N=new n6.Converter({simplifiedAutoLink:!0,tables:!0,strikethrough:!0});n(9,c=N.makeHtml(I))},oneose(){console.log("No subscribers left. Closing subscription."),L.close()}})}),e.$$set=T=>{"id"in T&&n(7,b=T.id),"profile"in T&&n(8,_=T.profile)},e.$$.update=()=>{e.$$.dirty&512&&n(6,r=c)},ga.subscribe(T=>{document.title=T}),[o,s,f,d,h,y,r,b,_,c]}class DS extends Uo{constructor(t){super(),zo(this,t,jS,MS,cr,{id:7,profile:8})}}function ig(e){let t;return{c(){t=Pe("div"),t.innerHTML=`<h1>Oracolo</h1> <h2>Missing config!</h2>
    You need to set (at least) the <strong>author meta tag</strong> by updating this html file! Open it with an editor, look at the first lines and personalize them.`,Ee(t,"class","unfinished-setup")},m(n,r){Ue(n,t,r)},d(n){n&&Re(t)}}}function sg(e){let t=e[0],n,r,o=ag(e);return{c(){o.c(),n=Ro()},m(s,c){o.m(s,c),Ue(s,n,c),r=!0},p(s,c){c&1&&cr(t,t=s[0])?(eo(),Ge(o,1,1,Mt),to(),o=ag(s),o.c(),Fe(o,1),o.m(n.parentNode,n)):o.p(s,c)},i(s){r||(Fe(o),r=!0)},o(s){Ge(o),r=!1},d(s){s&&Re(n),o.d(s)}}}function qS(e){let t,n;return t=new DS({props:{id:e[0],profile:e[1]}}),{c(){no(t.$$.fragment)},m(r,o){ur(t,r,o),n=!0},p(r,o){const s={};o&1&&(s.id=r[0]),o&2&&(s.profile=r[1]),t.$set(s)},i(r){n||(Fe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){lr(t,r)}}}function VS(e){let t,n;return t=new cw({props:{tag:e[0],profile:e[1]}}),{c(){no(t.$$.fragment)},m(r,o){ur(t,r,o),n=!0},p(r,o){const s={};o&1&&(s.tag=r[0]),o&2&&(s.profile=r[1]),t.$set(s)},i(r){n||(Fe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){lr(t,r)}}}function FS(e){let t,n;return t=new cw({props:{tag:"",profile:e[1]}}),{c(){no(t.$$.fragment)},m(r,o){ur(t,r,o),n=!0},p(r,o){const s={};o&2&&(s.profile=r[1]),t.$set(s)},i(r){n||(Fe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){lr(t,r)}}}function ag(e){let t,n,r,o,s;const c=[FS,VS,qS],f=[];function d(h,y){return y&1&&(t=null),h[0]===""?0:(t==null&&(t=!!h[0].startsWith("tags/")),t?1:2)}return n=d(e,-1),r=f[n]=c[n](e),{c(){r.c(),o=Ro()},m(h,y){f[n].m(h,y),Ue(h,o,y),s=!0},p(h,y){let b=n;n=d(h,y),n===b?f[n].p(h,y):(eo(),Ge(f[b],1,1,()=>{f[b]=null}),to(),r=f[n],r?r.p(h,y):(r=f[n]=c[n](h),r.c()),Fe(r,1),r.m(o.parentNode,o))},i(h){s||(Fe(r),s=!0)},o(h){Ge(r),s=!1},d(h){h&&Re(o),f[n].d(h)}}}function cg(e){let t,n=e[3].join(", ")+"",r;return{c(){t=Je("This page connects to some servers (Nostr relays) to retrieve data: "),r=Je(n)},m(o,s){Ue(o,t,s),Ue(o,r,s)},p(o,s){s&8&&n!==(n=o[3].join(", ")+"")&&At(r,n)},d(o){o&&(Re(t),Re(r))}}}function KS(e){let t,n=e[1]&&Object.keys(e[1]).length>0,r,o,s,c,f,d,h,y,b,_,T=e[2]&&ig(),C=n&&sg(e),A=e[3]&&cg(e);return{c(){T&&T.c(),t=Ye(),C&&C.c(),r=Ye(),o=Pe("div"),s=Je("This blog is powered by "),c=Pe("a"),c.textContent="Oracolo",f=Je(" and Nostr, "),d=Pe("a"),d.textContent="read more",h=Pe("br"),y=Pe("br"),b=Ye(),A&&A.c(),Ee(c,"href","https://github.com/dtonon/oracolo"),Ee(d,"href","https://njump.me"),Ee(o,"class","footer")},m(L,H){T&&T.m(L,H),Ue(L,t,H),C&&C.m(L,H),Ue(L,r,H),Ue(L,o,H),we(o,s),we(o,c),we(o,f),we(o,d),we(o,h),we(o,y),we(o,b),A&&A.m(o,null),_=!0},p(L,[H]){L[2]?T||(T=ig(),T.c(),T.m(t.parentNode,t)):T&&(T.d(1),T=null),H&2&&(n=L[1]&&Object.keys(L[1]).length>0),n?C?(C.p(L,H),H&2&&Fe(C,1)):(C=sg(L),C.c(),Fe(C,1),C.m(r.parentNode,r)):C&&(eo(),Ge(C,1,1,()=>{C=null}),to()),L[3]?A?A.p(L,H):(A=cg(L),A.c(),A.m(o,null)):A&&(A.d(1),A=null)},i(L){_||(Fe(C),_=!0)},o(L){Ge(C),_=!1},d(L){L&&(Re(t),Re(r),Re(o)),T&&T.d(L),C&&C.d(L),A&&A.d()}}}function WS(e,t,n){let r="",o,s=!1,c,f=!1;const d=()=>{const h=window.location.hash.substr(1);h!==r&&n(0,r=h)};return qa(async()=>{const{npub:h,relays:y,comments:b}=Fa();if(n(3,c=y),f=b,f)try{await wv(()=>Promise.resolve().then(()=>JS),void 0,import.meta.url),console.log("window.nostr.js has been successfully loaded")}catch(_){console.error("Failed to load window.nostr.js:",_)}if(d(),window.addEventListener("hashchange",d),n(1,o=await C0(h)),o){const _=JSON.parse(o.content);_.name,_.picture}else n(2,s=!0)}),Ev(()=>{window.removeEventListener("hashchange",d)}),[r,o,s,c]}class GS extends Uo{constructor(t){super(),zo(this,t,WS,KS,cr,{})}}new GS({target:document.getElementById("app")});var ug={},ZS=Object.defineProperty,YS=(e,t,n)=>t in e?ZS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ae=(e,t,n)=>(YS(e,typeof t!="symbol"?t+"":t,n),n);(function(){var e,t,n,r,o;const s='*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.fixed{position:fixed}.absolute{position:absolute}.bottom-1{bottom:.25rem}.right-2{right:.5rem}.right-3{right:.75rem}.top-0{top:0}.m-auto{margin:auto}.mx-2{margin-left:.5rem;margin-right:.5rem}.my-2{margin-top:.5rem;margin-bottom:.5rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.ml-2{margin-left:.5rem}.mr-2{margin-right:.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.box-border{box-sizing:border-box}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.h-10{height:2.5rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.w-10{width:2.5rem}.w-40{width:10rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-full{width:100%}.max-w-56{max-width:14rem}@keyframes moveIn{0%{transform:translateY(-10px)}to{transform:translateY(0)}}.animate-fadein{animation:fadeIn 1s ease-in-out,moveIn 1s ease-in-out}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.animate-show{animation:fadeIn .2s ease-in-out}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-grabbing{cursor:grabbing}.cursor-pointer{cursor:pointer}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.gap-2{gap:.5rem}.overflow-hidden{overflow:hidden}.overflow-ellipsis{text-overflow:ellipsis}.whitespace-nowrap{white-space:nowrap}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-md{border-radius:.375rem}.border-0{border-width:0px}.border-2{border-width:2px}.border-solid{border-style:solid}.border-transparent{border-color:transparent}.bg-cyan-700{--tw-bg-opacity: 1;background-color:rgb(14 116 144 / var(--tw-bg-opacity))}.bg-cyan-800{--tw-bg-opacity: 1;background-color:rgb(21 94 117 / var(--tw-bg-opacity))}.bg-cyan-900{--tw-bg-opacity: 1;background-color:rgb(22 78 99 / var(--tw-bg-opacity))}.bg-cyan-950{--tw-bg-opacity: 1;background-color:rgb(8 51 68 / var(--tw-bg-opacity))}.bg-green-700{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity))}.bg-green-800{--tw-bg-opacity: 1;background-color:rgb(22 101 52 / var(--tw-bg-opacity))}.bg-green-900{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity))}.bg-green-950{--tw-bg-opacity: 1;background-color:rgb(5 46 22 / var(--tw-bg-opacity))}.bg-neutral-700{--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity))}.bg-neutral-800{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity))}.bg-neutral-900{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity))}.bg-neutral-950{--tw-bg-opacity: 1;background-color:rgb(10 10 10 / var(--tw-bg-opacity))}.bg-orange-700{--tw-bg-opacity: 1;background-color:rgb(194 65 12 / var(--tw-bg-opacity))}.bg-orange-800{--tw-bg-opacity: 1;background-color:rgb(154 52 18 / var(--tw-bg-opacity))}.bg-orange-900{--tw-bg-opacity: 1;background-color:rgb(124 45 18 / var(--tw-bg-opacity))}.bg-orange-950{--tw-bg-opacity: 1;background-color:rgb(67 20 7 / var(--tw-bg-opacity))}.bg-purple-700{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity))}.bg-purple-800{--tw-bg-opacity: 1;background-color:rgb(107 33 168 / var(--tw-bg-opacity))}.bg-purple-900{--tw-bg-opacity: 1;background-color:rgb(88 28 135 / var(--tw-bg-opacity))}.bg-purple-950{--tw-bg-opacity: 1;background-color:rgb(59 7 100 / var(--tw-bg-opacity))}.bg-red-700{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity))}.bg-red-800{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity))}.bg-red-900{--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity))}.bg-red-950{--tw-bg-opacity: 1;background-color:rgb(69 10 10 / var(--tw-bg-opacity))}.bg-stone-700{--tw-bg-opacity: 1;background-color:rgb(68 64 60 / var(--tw-bg-opacity))}.bg-stone-800{--tw-bg-opacity: 1;background-color:rgb(41 37 36 / var(--tw-bg-opacity))}.bg-stone-900{--tw-bg-opacity: 1;background-color:rgb(28 25 23 / var(--tw-bg-opacity))}.bg-stone-950{--tw-bg-opacity: 1;background-color:rgb(12 10 9 / var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity))}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.from-cyan-900{--tw-gradient-from: #164e63 var(--tw-gradient-from-position);--tw-gradient-to: rgb(22 78 99 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-900{--tw-gradient-from: #14532d var(--tw-gradient-from-position);--tw-gradient-to: rgb(20 83 45 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-neutral-900{--tw-gradient-from: #171717 var(--tw-gradient-from-position);--tw-gradient-to: rgb(23 23 23 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-900{--tw-gradient-from: #7c2d12 var(--tw-gradient-from-position);--tw-gradient-to: rgb(124 45 18 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-900{--tw-gradient-from: #581c87 var(--tw-gradient-from-position);--tw-gradient-to: rgb(88 28 135 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-red-900{--tw-gradient-from: #7f1d1d var(--tw-gradient-from-position);--tw-gradient-to: rgb(127 29 29 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-stone-900{--tw-gradient-from: #1c1917 var(--tw-gradient-from-position);--tw-gradient-to: rgb(28 25 23 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.to-cyan-700{--tw-gradient-to: #0e7490 var(--tw-gradient-to-position)}.to-green-700{--tw-gradient-to: #15803d var(--tw-gradient-to-position)}.to-neutral-700{--tw-gradient-to: #404040 var(--tw-gradient-to-position)}.to-orange-700{--tw-gradient-to: #c2410c var(--tw-gradient-to-position)}.to-purple-700{--tw-gradient-to: #7e22ce var(--tw-gradient-to-position)}.to-red-700{--tw-gradient-to: #b91c1c var(--tw-gradient-to-position)}.to-stone-700{--tw-gradient-to: #44403c var(--tw-gradient-to-position)}.p-2{padding:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.text-center{text-align:center}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.leading-3{line-height:.75rem}.leading-4{line-height:1rem}.leading-5{line-height:1.25rem}.text-cyan-600{--tw-text-opacity: 1;color:rgb(8 145 178 / var(--tw-text-opacity))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity))}.text-neutral-600{--tw-text-opacity: 1;color:rgb(82 82 82 / var(--tw-text-opacity))}.text-neutral-800{--tw-text-opacity: 1;color:rgb(38 38 38 / var(--tw-text-opacity))}.text-orange-600{--tw-text-opacity: 1;color:rgb(234 88 12 / var(--tw-text-opacity))}.text-purple-600{--tw-text-opacity: 1;color:rgb(147 51 234 / var(--tw-text-opacity))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity))}.text-stone-600{--tw-text-opacity: 1;color:rgb(87 83 78 / var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.underline{text-decoration-line:underline}.no-underline{text-decoration-line:none}.decoration-2{text-decoration-thickness:2px}.underline-offset-4{text-underline-offset:4px}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow-\\[0_0px_10px_0px_rgba\\(0\\,0\\,0\\,0\\.3\\)\\]{--tw-shadow: 0 0px 10px 0px rgba(0,0,0,.3);--tw-shadow-colored: 0 0px 10px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_0px_30px_0px_rgba\\(0\\,0\\,0\\,0\\.6\\)\\]{--tw-shadow: 0 0px 30px 0px rgba(0,0,0,.6);--tw-shadow-colored: 0 0px 30px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline-dashed{outline-style:dashed}.outline-1{outline-width:1px}.outline-offset-4{outline-offset:4px}.outline-cyan-500{outline-color:#06b6d4}.outline-green-500{outline-color:#22c55e}.outline-neutral-500{outline-color:#737373}.outline-orange-500{outline-color:#f97316}.outline-purple-500{outline-color:#a855f7}.outline-red-500{outline-color:#ef4444}.outline-stone-500{outline-color:#78716c}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.hover\\:bg-cyan-700:hover{--tw-bg-opacity: 1;background-color:rgb(14 116 144 / var(--tw-bg-opacity))}.hover\\:bg-cyan-800:hover{--tw-bg-opacity: 1;background-color:rgb(21 94 117 / var(--tw-bg-opacity))}.hover\\:bg-cyan-900:hover{--tw-bg-opacity: 1;background-color:rgb(22 78 99 / var(--tw-bg-opacity))}.hover\\:bg-cyan-950:hover{--tw-bg-opacity: 1;background-color:rgb(8 51 68 / var(--tw-bg-opacity))}.hover\\:bg-green-700:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity))}.hover\\:bg-green-800:hover{--tw-bg-opacity: 1;background-color:rgb(22 101 52 / var(--tw-bg-opacity))}.hover\\:bg-green-900:hover{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity))}.hover\\:bg-green-950:hover{--tw-bg-opacity: 1;background-color:rgb(5 46 22 / var(--tw-bg-opacity))}.hover\\:bg-neutral-700:hover{--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity))}.hover\\:bg-neutral-800:hover{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity))}.hover\\:bg-neutral-900:hover{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity))}.hover\\:bg-neutral-950:hover{--tw-bg-opacity: 1;background-color:rgb(10 10 10 / var(--tw-bg-opacity))}.hover\\:bg-orange-700:hover{--tw-bg-opacity: 1;background-color:rgb(194 65 12 / var(--tw-bg-opacity))}.hover\\:bg-orange-800:hover{--tw-bg-opacity: 1;background-color:rgb(154 52 18 / var(--tw-bg-opacity))}.hover\\:bg-orange-900:hover{--tw-bg-opacity: 1;background-color:rgb(124 45 18 / var(--tw-bg-opacity))}.hover\\:bg-orange-950:hover{--tw-bg-opacity: 1;background-color:rgb(67 20 7 / var(--tw-bg-opacity))}.hover\\:bg-purple-700:hover{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity))}.hover\\:bg-purple-800:hover{--tw-bg-opacity: 1;background-color:rgb(107 33 168 / var(--tw-bg-opacity))}.hover\\:bg-purple-900:hover{--tw-bg-opacity: 1;background-color:rgb(88 28 135 / var(--tw-bg-opacity))}.hover\\:bg-purple-950:hover{--tw-bg-opacity: 1;background-color:rgb(59 7 100 / var(--tw-bg-opacity))}.hover\\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity))}.hover\\:bg-red-800:hover{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity))}.hover\\:bg-red-900:hover{--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity))}.hover\\:bg-red-950:hover{--tw-bg-opacity: 1;background-color:rgb(69 10 10 / var(--tw-bg-opacity))}.hover\\:bg-stone-700:hover{--tw-bg-opacity: 1;background-color:rgb(68 64 60 / var(--tw-bg-opacity))}.hover\\:bg-stone-800:hover{--tw-bg-opacity: 1;background-color:rgb(41 37 36 / var(--tw-bg-opacity))}.hover\\:bg-stone-900:hover{--tw-bg-opacity: 1;background-color:rgb(28 25 23 / var(--tw-bg-opacity))}.hover\\:bg-stone-950:hover{--tw-bg-opacity: 1;background-color:rgb(12 10 9 / var(--tw-bg-opacity))}.disabled\\:cursor-default:disabled{cursor:default}.disabled\\:bg-neutral-400:disabled{--tw-bg-opacity: 1;background-color:rgb(163 163 163 / var(--tw-bg-opacity))}.disabled\\:text-neutral-200:disabled{--tw-text-opacity: 1;color:rgb(229 229 229 / var(--tw-text-opacity))}.group:hover .group-hover\\:underline{text-decoration-line:underline}@media (min-width: 640px){.sm\\:w-96{width:24rem}}';function c(){}function f(i){return i()}function d(){return Object.create(null)}function h(i){i.forEach(f)}function y(i){return typeof i=="function"}function b(i,a){return i!=i?a==a:i!==a||i&&typeof i=="object"||typeof i=="function"}let _;function T(i,a){return i===a?!0:(_||(_=document.createElement("a")),_.href=a,i===_.href)}function C(i){return Object.keys(i).length===0}function A(i,...a){if(i==null){for(const g of a)g(void 0);return c}const u=i.subscribe(...a);return u.unsubscribe?()=>u.unsubscribe():u}function L(i,a,u){i.$$.on_destroy.push(A(a,u))}const H=typeof window<"u"?window:typeof globalThis<"u"?globalThis:uw;function I(i,a){i.appendChild(a)}function N(i,a,u){i.insertBefore(a,u||null)}function l(i){i.parentNode&&i.parentNode.removeChild(i)}function w(i,a){for(let u=0;u<i.length;u+=1)i[u]&&i[u].d(a)}function p(i){return document.createElement(i)}function E(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function $(i){return document.createTextNode(i)}function R(){return $(" ")}function P(){return $("")}function v(i,a,u,g){return i.addEventListener(a,u,g),()=>i.removeEventListener(a,u,g)}function x(i,a,u){u==null?i.removeAttribute(a):i.getAttribute(a)!==u&&i.setAttribute(a,u)}function z(i){return Array.from(i.childNodes)}function V(i,a){a=""+a,i.data!==a&&(i.data=a)}function O(i,a){i.value=a??""}function S(i,a,u){for(let g=0;g<i.options.length;g+=1){const m=i.options[g];if(m.__value===a){m.selected=!0;return}}(!u||a!==void 0)&&(i.selectedIndex=-1)}function D(i){const a=i.querySelector(":checked");return a&&a.__value}function K(i,a,u){i.classList.toggle(a,!!u)}let W;function Z(i){W=i}function G(){if(!W)throw new Error("Function called outside component initialization");return W}function oe(i){G().$$.on_mount.push(i)}const he=[],me=[];let Ae=[];const re=[],ye=Promise.resolve();let Le=!1;function Ie(){Le||(Le=!0,ye.then(se))}function Me(i){Ae.push(i)}const pt=new Set;let Ke=0;function se(){if(Ke!==0)return;const i=W;do{try{for(;Ke<he.length;){const a=he[Ke];Ke++,Z(a),Oe(a.$$)}}catch(a){throw he.length=0,Ke=0,a}for(Z(null),he.length=0,Ke=0;me.length;)me.pop()();for(let a=0;a<Ae.length;a+=1){const u=Ae[a];pt.has(u)||(pt.add(u),u())}Ae.length=0}while(he.length);for(;re.length;)re.pop()();Le=!1,pt.clear(),Z(i)}function Oe(i){if(i.fragment!==null){i.update(),h(i.before_update);const a=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,a),i.after_update.forEach(Me)}}function xe(i){const a=[],u=[];Ae.forEach(g=>i.indexOf(g)===-1?a.push(g):u.push(g)),u.forEach(g=>g()),Ae=a}const Te=new Set;let je;function yt(){je={r:0,c:[],p:je}}function Ot(){je.r||h(je.c),je=je.p}function St(i,a){i&&i.i&&(Te.delete(i),i.i(a))}function Yt(i,a,u,g){if(i&&i.o){if(Te.has(i))return;Te.add(i),je.c.push(()=>{Te.delete(i),g&&(u&&i.d(1),g())}),i.o(a)}else g&&g()}function Xd(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Qd(i){i&&i.c()}function Tc(i,a,u){const{fragment:g,after_update:m}=i.$$;g&&g.m(a,u),Me(()=>{const k=i.$$.on_mount.map(f).filter(y);i.$$.on_destroy?i.$$.on_destroy.push(...k):h(k),i.$$.on_mount=[]}),m.forEach(Me)}function Pc(i,a){const u=i.$$;u.fragment!==null&&(xe(u.after_update),h(u.on_destroy),u.fragment&&u.fragment.d(a),u.on_destroy=u.fragment=null,u.ctx=[])}function Tb(i,a){i.$$.dirty[0]===-1&&(he.push(i),Ie(),i.$$.dirty.fill(0)),i.$$.dirty[a/31|0]|=1<<a%31}function ef(i,a,u,g,m,k,B=null,M=[-1]){const U=W;Z(i);const j=i.$$={fragment:null,ctx:[],props:k,update:c,not_equal:m,bound:d(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(U?U.$$.context:[])),callbacks:d(),dirty:M,skip_bound:!1,root:a.target||U.$$.root};B&&B(j.root);let F=!1;if(j.ctx=u?u(i,a.props||{},(q,X,...J)=>{const ee=J.length?J[0]:X;return j.ctx&&m(j.ctx[q],j.ctx[q]=ee)&&(!j.skip_bound&&j.bound[q]&&j.bound[q](ee),F&&Tb(i,q)),X}):[],j.update(),F=!0,h(j.before_update),j.fragment=g?g(j.ctx):!1,a.target){if(a.hydrate){const q=z(a.target);j.fragment&&j.fragment.l(q),q.forEach(l)}else j.fragment&&j.fragment.c();a.intro&&St(i.$$.fragment),Tc(i,a.target,a.anchor),se()}Z(U)}class tf{constructor(){ae(this,"$$"),ae(this,"$$set")}$destroy(){Pc(this,1),this.$destroy=c}$on(a,u){if(!y(u))return c;const g=this.$$.callbacks[a]||(this.$$.callbacks[a]=[]);return g.push(u),()=>{const m=g.indexOf(u);m!==-1&&g.splice(m,1)}}$set(a){this.$$set&&!C(a)&&(this.$$.skip_bound=!0,this.$$set(a),this.$$.skip_bound=!1)}}const Pb="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pb);function Bb(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Bc={exports:{}};function nf(i,a=100,u={}){if(typeof i!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof i}\`.`);if(a<0)throw new RangeError("`wait` must not be negative.");const{immediate:g}=typeof u=="boolean"?{immediate:u}:u;let m,k,B,M,U;function j(){const q=Date.now()-M;if(q<a&&q>=0)B=setTimeout(j,a-q);else if(B=void 0,!g){const X=m,J=k;m=void 0,k=void 0,U=i.apply(X,J)}}const F=function(...q){if(m&&this!==m)throw new Error("Debounced method called with different contexts.");m=this,k=q,M=Date.now();const X=g&&!B;if(B||(B=setTimeout(j,a)),X){const J=m,ee=k;m=void 0,k=void 0,U=i.apply(J,ee)}return U};return F.clear=()=>{B&&(clearTimeout(B),B=void 0)},F.flush=()=>{if(!B)return;const q=m,X=k;m=void 0,k=void 0,U=i.apply(q,X),clearTimeout(B),B=void 0},F}Bc.exports.debounce=nf,Bc.exports=nf;var Cb=Bc.exports;const rf=Bb(Cb),Cc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const of=i=>i instanceof Uint8Array,Lc=i=>new DataView(i.buffer,i.byteOffset,i.byteLength),_n=(i,a)=>i<<32-a|i>>>a;if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");const Lb=Array.from({length:256},(i,a)=>a.toString(16).padStart(2,"0"));function Nt(i){if(!of(i))throw new Error("Uint8Array expected");let a="";for(let u=0;u<i.length;u++)a+=Lb[i[u]];return a}function Ic(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);const a=i.length;if(a%2)throw new Error("padded hex string expected, got unpadded hex of length "+a);const u=new Uint8Array(a/2);for(let g=0;g<u.length;g++){const m=g*2,k=i.slice(m,m+2),B=Number.parseInt(k,16);if(Number.isNaN(B)||B<0)throw new Error("Invalid byte sequence");u[g]=B}return u}function Ib(i){if(typeof i!="string")throw new Error(`utf8ToBytes expected string, got ${typeof i}`);return new Uint8Array(new TextEncoder().encode(i))}function sf(i){if(typeof i=="string"&&(i=Ib(i)),!of(i))throw new Error(`expected Uint8Array, got ${typeof i}`);return i}let Ob=class{clone(){return this._cloneInto()}};function af(i){const a=g=>i().update(sf(g)).digest(),u=i();return a.outputLen=u.outputLen,a.blockLen=u.blockLen,a.create=()=>i(),a}function Nb(i=32){if(Cc&&typeof Cc.getRandomValues=="function")return Cc.getRandomValues(new Uint8Array(i));throw new Error("crypto.getRandomValues must be defined")}function cf(i){if(!Number.isSafeInteger(i)||i<0)throw new Error(`Wrong positive integer: ${i}`)}function uf(i,...a){if(!(i instanceof Uint8Array))throw new Error("Expected Uint8Array");if(a.length>0&&!a.includes(i.length))throw new Error(`Expected Uint8Array of length ${a}, not of length=${i.length}`)}function Rb(i){if(typeof i!="function"||typeof i.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");cf(i.outputLen),cf(i.blockLen)}function xs(i,a=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(a&&i.finished)throw new Error("Hash#digest() has already been called")}function zb(i,a){uf(i);const u=a.outputLen;if(i.length<u)throw new Error(`digestInto() expects output buffer of length at least ${u}`)}const Oc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lf=i=>i instanceof Uint8Array,Nc=i=>new DataView(i.buffer,i.byteOffset,i.byteLength),En=(i,a)=>i<<32-a|i>>>a;if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");function Ub(i){if(typeof i!="string")throw new Error(`utf8ToBytes expected string, got ${typeof i}`);return new Uint8Array(new TextEncoder().encode(i))}function Rc(i){if(typeof i=="string"&&(i=Ub(i)),!lf(i))throw new Error(`expected Uint8Array, got ${typeof i}`);return i}function Mb(...i){const a=new Uint8Array(i.reduce((g,m)=>g+m.length,0));let u=0;return i.forEach(g=>{if(!lf(g))throw new Error("Uint8Array expected");a.set(g,u),u+=g.length}),a}class df{clone(){return this._cloneInto()}}function Hb(i){const a=g=>i().update(Rc(g)).digest(),u=i();return a.outputLen=u.outputLen,a.blockLen=u.blockLen,a.create=()=>i(),a}function ff(i=32){if(Oc&&typeof Oc.getRandomValues=="function")return Oc.getRandomValues(new Uint8Array(i));throw new Error("crypto.getRandomValues must be defined")}function jb(i,a,u,g){if(typeof i.setBigUint64=="function")return i.setBigUint64(a,u,g);const m=BigInt(32),k=BigInt(4294967295),B=Number(u>>m&k),M=Number(u&k),U=g?4:0,j=g?0:4;i.setUint32(a+U,B,g),i.setUint32(a+j,M,g)}let Db=class extends df{constructor(i,a,u,g){super(),this.blockLen=i,this.outputLen=a,this.padOffset=u,this.isLE=g,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(i),this.view=Nc(this.buffer)}update(i){xs(this);const{view:a,buffer:u,blockLen:g}=this;i=Rc(i);const m=i.length;for(let k=0;k<m;){const B=Math.min(g-this.pos,m-k);if(B===g){const M=Nc(i);for(;g<=m-k;k+=g)this.process(M,k);continue}u.set(i.subarray(k,k+B),this.pos),this.pos+=B,k+=B,this.pos===g&&(this.process(a,0),this.pos=0)}return this.length+=i.length,this.roundClean(),this}digestInto(i){xs(this),zb(i,this),this.finished=!0;const{buffer:a,view:u,blockLen:g,isLE:m}=this;let{pos:k}=this;a[k++]=128,this.buffer.subarray(k).fill(0),this.padOffset>g-k&&(this.process(u,0),k=0);for(let F=k;F<g;F++)a[F]=0;jb(u,g-8,BigInt(this.length*8),m),this.process(u,0);const B=Nc(i),M=this.outputLen;if(M%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const U=M/4,j=this.get();if(U>j.length)throw new Error("_sha2: outputLen bigger than state");for(let F=0;F<U;F++)B.setUint32(4*F,j[F],m)}digest(){const{buffer:i,outputLen:a}=this;this.digestInto(i);const u=i.slice(0,a);return this.destroy(),u}_cloneInto(i){i||(i=new this.constructor),i.set(...this.get());const{blockLen:a,buffer:u,length:g,finished:m,destroyed:k,pos:B}=this;return i.length=g,i.pos=B,i.finished=m,i.destroyed=k,g%a&&i.buffer.set(u),i}};const qb=(i,a,u)=>i&a^~i&u,Vb=(i,a,u)=>i&a^i&u^a&u,Fb=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),mr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),yr=new Uint32Array(64);let Kb=class extends Db{constructor(){super(64,32,8,!1),this.A=mr[0]|0,this.B=mr[1]|0,this.C=mr[2]|0,this.D=mr[3]|0,this.E=mr[4]|0,this.F=mr[5]|0,this.G=mr[6]|0,this.H=mr[7]|0}get(){const{A:i,B:a,C:u,D:g,E:m,F:k,G:B,H:M}=this;return[i,a,u,g,m,k,B,M]}set(i,a,u,g,m,k,B,M){this.A=i|0,this.B=a|0,this.C=u|0,this.D=g|0,this.E=m|0,this.F=k|0,this.G=B|0,this.H=M|0}process(i,a){for(let F=0;F<16;F++,a+=4)yr[F]=i.getUint32(a,!1);for(let F=16;F<64;F++){const q=yr[F-15],X=yr[F-2],J=En(q,7)^En(q,18)^q>>>3,ee=En(X,17)^En(X,19)^X>>>10;yr[F]=ee+yr[F-7]+J+yr[F-16]|0}let{A:u,B:g,C:m,D:k,E:B,F:M,G:U,H:j}=this;for(let F=0;F<64;F++){const q=En(B,6)^En(B,11)^En(B,25),X=j+q+qb(B,M,U)+Fb[F]+yr[F]|0,J=(En(u,2)^En(u,13)^En(u,22))+Vb(u,g,m)|0;j=U,U=M,M=B,B=k+X|0,k=m,m=g,g=u,u=X+J|0}u=u+this.A|0,g=g+this.B|0,m=m+this.C|0,k=k+this.D|0,B=B+this.E|0,M=M+this.F|0,U=U+this.G|0,j=j+this.H|0,this.set(u,g,m,k,B,M,U,j)}roundClean(){yr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const zc=Hb(()=>new Kb);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hf=BigInt(0),Ts=BigInt(1),Wb=BigInt(2),Ps=i=>i instanceof Uint8Array,Gb=Array.from({length:256},(i,a)=>a.toString(16).padStart(2,"0"));function Ho(i){if(!Ps(i))throw new Error("Uint8Array expected");let a="";for(let u=0;u<i.length;u++)a+=Gb[i[u]];return a}function pf(i){const a=i.toString(16);return a.length&1?`0${a}`:a}function Uc(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);return BigInt(i===""?"0":`0x${i}`)}function jo(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);const a=i.length;if(a%2)throw new Error("padded hex string expected, got unpadded hex of length "+a);const u=new Uint8Array(a/2);for(let g=0;g<u.length;g++){const m=g*2,k=i.slice(m,m+2),B=Number.parseInt(k,16);if(Number.isNaN(B)||B<0)throw new Error("Invalid byte sequence");u[g]=B}return u}function Ht(i){return Uc(Ho(i))}function Mc(i){if(!Ps(i))throw new Error("Uint8Array expected");return Uc(Ho(Uint8Array.from(i).reverse()))}function vr(i,a){return jo(i.toString(16).padStart(a*2,"0"))}function Hc(i,a){return vr(i,a).reverse()}function Zb(i){return jo(pf(i))}function $t(i,a,u){let g;if(typeof a=="string")try{g=jo(a)}catch(k){throw new Error(`${i} must be valid hex string, got "${a}". Cause: ${k}`)}else if(Ps(a))g=Uint8Array.from(a);else throw new Error(`${i} must be hex string or Uint8Array`);const m=g.length;if(typeof u=="number"&&m!==u)throw new Error(`${i} expected ${u} bytes, got ${m}`);return g}function uo(...i){const a=new Uint8Array(i.reduce((g,m)=>g+m.length,0));let u=0;return i.forEach(g=>{if(!Ps(g))throw new Error("Uint8Array expected");a.set(g,u),u+=g.length}),a}function Yb(i,a){if(i.length!==a.length)return!1;for(let u=0;u<i.length;u++)if(i[u]!==a[u])return!1;return!0}function Jb(i){if(typeof i!="string")throw new Error(`utf8ToBytes expected string, got ${typeof i}`);return new Uint8Array(new TextEncoder().encode(i))}function Xb(i){let a;for(a=0;i>hf;i>>=Ts,a+=1);return a}function Qb(i,a){return i>>BigInt(a)&Ts}const em=(i,a,u)=>i|(u?Ts:hf)<<BigInt(a),jc=i=>(Wb<<BigInt(i-1))-Ts,Dc=i=>new Uint8Array(i),gf=i=>Uint8Array.from(i);function wf(i,a,u){if(typeof i!="number"||i<2)throw new Error("hashLen must be a number");if(typeof a!="number"||a<2)throw new Error("qByteLen must be a number");if(typeof u!="function")throw new Error("hmacFn must be a function");let g=Dc(i),m=Dc(i),k=0;const B=()=>{g.fill(1),m.fill(0),k=0},M=(...F)=>u(m,g,...F),U=(F=Dc())=>{m=M(gf([0]),F),g=M(),F.length!==0&&(m=M(gf([1]),F),g=M())},j=()=>{if(k++>=1e3)throw new Error("drbg: tried 1000 values");let F=0;const q=[];for(;F<a;){g=M();const X=g.slice();q.push(X),F+=g.length}return uo(...q)};return(F,q)=>{B(),U(F);let X;for(;!(X=q(j()));)U();return B(),X}}const tm={bigint:i=>typeof i=="bigint",function:i=>typeof i=="function",boolean:i=>typeof i=="boolean",string:i=>typeof i=="string",stringOrUint8Array:i=>typeof i=="string"||i instanceof Uint8Array,isSafeInteger:i=>Number.isSafeInteger(i),array:i=>Array.isArray(i),field:(i,a)=>a.Fp.isValid(i),hash:i=>typeof i=="function"&&Number.isSafeInteger(i.outputLen)};function Ni(i,a,u={}){const g=(m,k,B)=>{const M=tm[k];if(typeof M!="function")throw new Error(`Invalid validator "${k}", expected function`);const U=i[m];if(!(B&&U===void 0)&&!M(U,i))throw new Error(`Invalid param ${String(m)}=${U} (${typeof U}), expected ${k}`)};for(const[m,k]of Object.entries(a))g(m,k,!1);for(const[m,k]of Object.entries(u))g(m,k,!0);return i}const nm=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Qb,bitLen:Xb,bitMask:jc,bitSet:em,bytesToHex:Ho,bytesToNumberBE:Ht,bytesToNumberLE:Mc,concatBytes:uo,createHmacDrbg:wf,ensureBytes:$t,equalBytes:Yb,hexToBytes:jo,hexToNumber:Uc,numberToBytesBE:vr,numberToBytesLE:Hc,numberToHexUnpadded:pf,numberToVarBytesBE:Zb,utf8ToBytes:Jb,validateObject:Ni},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gt=BigInt(0),nt=BigInt(1),lo=BigInt(2),rm=BigInt(3),qc=BigInt(4),bf=BigInt(5),mf=BigInt(8);BigInt(9),BigInt(16);function vt(i,a){const u=i%a;return u>=gt?u:a+u}function om(i,a,u){if(u<=gt||a<gt)throw new Error("Expected power/modulo > 0");if(u===nt)return gt;let g=nt;for(;a>gt;)a&nt&&(g=g*i%u),i=i*i%u,a>>=nt;return g}function Jt(i,a,u){let g=i;for(;a-- >gt;)g*=g,g%=u;return g}function Vc(i,a){if(i===gt||a<=gt)throw new Error(`invert: expected positive integers, got n=${i} mod=${a}`);let u=vt(i,a),g=a,m=gt,k=nt;for(;u!==gt;){const B=g/u,M=g%u,U=m-k*B;g=u,u=M,m=k,k=U}if(g!==nt)throw new Error("invert: does not exist");return vt(m,a)}function im(i){const a=(i-nt)/lo;let u,g,m;for(u=i-nt,g=0;u%lo===gt;u/=lo,g++);for(m=lo;m<i&&om(m,a,i)!==i-nt;m++);if(g===1){const B=(i+nt)/qc;return function(M,U){const j=M.pow(U,B);if(!M.eql(M.sqr(j),U))throw new Error("Cannot find square root");return j}}const k=(u+nt)/lo;return function(B,M){if(B.pow(M,a)===B.neg(B.ONE))throw new Error("Cannot find square root");let U=g,j=B.pow(B.mul(B.ONE,m),u),F=B.pow(M,k),q=B.pow(M,u);for(;!B.eql(q,B.ONE);){if(B.eql(q,B.ZERO))return B.ZERO;let X=1;for(let ee=B.sqr(q);X<U&&!B.eql(ee,B.ONE);X++)ee=B.sqr(ee);const J=B.pow(j,nt<<BigInt(U-X-1));j=B.sqr(J),F=B.mul(F,J),q=B.mul(q,j),U=X}return F}}function sm(i){if(i%qc===rm){const a=(i+nt)/qc;return function(u,g){const m=u.pow(g,a);if(!u.eql(u.sqr(m),g))throw new Error("Cannot find square root");return m}}if(i%mf===bf){const a=(i-bf)/mf;return function(u,g){const m=u.mul(g,lo),k=u.pow(m,a),B=u.mul(g,k),M=u.mul(u.mul(B,lo),k),U=u.mul(B,u.sub(M,u.ONE));if(!u.eql(u.sqr(U),g))throw new Error("Cannot find square root");return U}}return im(i)}const am=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function cm(i){const a={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},u=am.reduce((g,m)=>(g[m]="function",g),a);return Ni(i,u)}function um(i,a,u){if(u<gt)throw new Error("Expected power > 0");if(u===gt)return i.ONE;if(u===nt)return a;let g=i.ONE,m=a;for(;u>gt;)u&nt&&(g=i.mul(g,m)),m=i.sqr(m),u>>=nt;return g}function lm(i,a){const u=new Array(a.length),g=a.reduce((k,B,M)=>i.is0(B)?k:(u[M]=k,i.mul(k,B)),i.ONE),m=i.inv(g);return a.reduceRight((k,B,M)=>i.is0(B)?k:(u[M]=i.mul(k,u[M]),i.mul(k,B)),m),u}function yf(i,a){const u=a!==void 0?a:i.toString(2).length,g=Math.ceil(u/8);return{nBitLength:u,nByteLength:g}}function dm(i,a,u=!1,g={}){if(i<=gt)throw new Error(`Expected Field ORDER > 0, got ${i}`);const{nBitLength:m,nByteLength:k}=yf(i,a);if(k>2048)throw new Error("Field lengths over 2048 bytes are not supported");const B=sm(i),M=Object.freeze({ORDER:i,BITS:m,BYTES:k,MASK:jc(m),ZERO:gt,ONE:nt,create:U=>vt(U,i),isValid:U=>{if(typeof U!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof U}`);return gt<=U&&U<i},is0:U=>U===gt,isOdd:U=>(U&nt)===nt,neg:U=>vt(-U,i),eql:(U,j)=>U===j,sqr:U=>vt(U*U,i),add:(U,j)=>vt(U+j,i),sub:(U,j)=>vt(U-j,i),mul:(U,j)=>vt(U*j,i),pow:(U,j)=>um(M,U,j),div:(U,j)=>vt(U*Vc(j,i),i),sqrN:U=>U*U,addN:(U,j)=>U+j,subN:(U,j)=>U-j,mulN:(U,j)=>U*j,inv:U=>Vc(U,i),sqrt:g.sqrt||(U=>B(M,U)),invertBatch:U=>lm(M,U),cmov:(U,j,F)=>F?j:U,toBytes:U=>u?Hc(U,k):vr(U,k),fromBytes:U=>{if(U.length!==k)throw new Error(`Fp.fromBytes: expected ${k}, got ${U.length}`);return u?Mc(U):Ht(U)}});return Object.freeze(M)}function vf(i){if(typeof i!="bigint")throw new Error("field order must be bigint");const a=i.toString(2).length;return Math.ceil(a/8)}function _f(i){const a=vf(i);return a+Math.ceil(a/2)}function fm(i,a,u=!1){const g=i.length,m=vf(a),k=_f(a);if(g<16||g<k||g>1024)throw new Error(`expected ${k}-1024 bytes of input, got ${g}`);const B=u?Ht(i):Mc(i),M=vt(B,a-nt)+nt;return u?Hc(M,m):vr(M,m)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hm=BigInt(0),Fc=BigInt(1);function pm(i,a){const u=(m,k)=>{const B=k.negate();return m?B:k},g=m=>{const k=Math.ceil(a/m)+1,B=2**(m-1);return{windows:k,windowSize:B}};return{constTimeNegate:u,unsafeLadder(m,k){let B=i.ZERO,M=m;for(;k>hm;)k&Fc&&(B=B.add(M)),M=M.double(),k>>=Fc;return B},precomputeWindow(m,k){const{windows:B,windowSize:M}=g(k),U=[];let j=m,F=j;for(let q=0;q<B;q++){F=j,U.push(F);for(let X=1;X<M;X++)F=F.add(j),U.push(F);j=F.double()}return U},wNAF(m,k,B){const{windows:M,windowSize:U}=g(m);let j=i.ZERO,F=i.BASE;const q=BigInt(2**m-1),X=2**m,J=BigInt(m);for(let ee=0;ee<M;ee++){const Y=ee*U;let te=Number(B&q);B>>=J,te>U&&(te-=X,B+=Fc);const ne=Y,Q=Y+Math.abs(te)-1,ue=ee%2!==0,_e=te<0;te===0?F=F.add(u(ue,k[ne])):j=j.add(u(_e,k[Q]))}return{p:j,f:F}},wNAFCached(m,k,B,M){const U=m._WINDOW_SIZE||1;let j=k.get(m);return j||(j=this.precomputeWindow(m,U),U!==1&&k.set(m,M(j))),this.wNAF(U,j,B)}}}function Ef(i){return cm(i.Fp),Ni(i,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...yf(i.n,i.nBitLength),...i,p:i.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function gm(i){const a=Ef(i);Ni(a,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:u,Fp:g,a:m}=a;if(u){if(!g.eql(m,g.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof u!="object"||typeof u.beta!="bigint"||typeof u.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...a})}const{bytesToNumberBE:wm,hexToBytes:bm}=nm,fo={Err:class extends Error{constructor(i=""){super(i)}},_parseInt(i){const{Err:a}=fo;if(i.length<2||i[0]!==2)throw new a("Invalid signature integer tag");const u=i[1],g=i.subarray(2,u+2);if(!u||g.length!==u)throw new a("Invalid signature integer: wrong length");if(g[0]&128)throw new a("Invalid signature integer: negative");if(g[0]===0&&!(g[1]&128))throw new a("Invalid signature integer: unnecessary leading zero");return{d:wm(g),l:i.subarray(u+2)}},toSig(i){const{Err:a}=fo,u=typeof i=="string"?bm(i):i;if(!(u instanceof Uint8Array))throw new Error("ui8a expected");let g=u.length;if(g<2||u[0]!=48)throw new a("Invalid signature tag");if(u[1]!==g-2)throw new a("Invalid signature: incorrect length");const{d:m,l:k}=fo._parseInt(u.subarray(2)),{d:B,l:M}=fo._parseInt(k);if(M.length)throw new a("Invalid signature: left bytes after parsing");return{r:m,s:B}},hexFromSig(i){const a=j=>Number.parseInt(j[0],16)&8?"00"+j:j,u=j=>{const F=j.toString(16);return F.length&1?`0${F}`:F},g=a(u(i.s)),m=a(u(i.r)),k=g.length/2,B=m.length/2,M=u(k),U=u(B);return`30${u(B+k+4)}02${U}${m}02${M}${g}`}},Dn=BigInt(0),Xt=BigInt(1);BigInt(2);const kf=BigInt(3);BigInt(4);function mm(i){const a=gm(i),{Fp:u}=a,g=a.toBytes||((ee,Y,te)=>{const ne=Y.toAffine();return uo(Uint8Array.from([4]),u.toBytes(ne.x),u.toBytes(ne.y))}),m=a.fromBytes||(ee=>{const Y=ee.subarray(1),te=u.fromBytes(Y.subarray(0,u.BYTES)),ne=u.fromBytes(Y.subarray(u.BYTES,2*u.BYTES));return{x:te,y:ne}});function k(ee){const{a:Y,b:te}=a,ne=u.sqr(ee),Q=u.mul(ne,ee);return u.add(u.add(Q,u.mul(ee,Y)),te)}if(!u.eql(u.sqr(a.Gy),k(a.Gx)))throw new Error("bad generator point: equation left != right");function B(ee){return typeof ee=="bigint"&&Dn<ee&&ee<a.n}function M(ee){if(!B(ee))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function U(ee){const{allowedPrivateKeyLengths:Y,nByteLength:te,wrapPrivateKey:ne,n:Q}=a;if(Y&&typeof ee!="bigint"){if(ee instanceof Uint8Array&&(ee=Ho(ee)),typeof ee!="string"||!Y.includes(ee.length))throw new Error("Invalid key");ee=ee.padStart(te*2,"0")}let ue;try{ue=typeof ee=="bigint"?ee:Ht($t("private key",ee,te))}catch{throw new Error(`private key must be ${te} bytes, hex or bigint, not ${typeof ee}`)}return ne&&(ue=vt(ue,Q)),M(ue),ue}const j=new Map;function F(ee){if(!(ee instanceof q))throw new Error("ProjectivePoint expected")}class q{constructor(Y,te,ne){if(this.px=Y,this.py=te,this.pz=ne,Y==null||!u.isValid(Y))throw new Error("x required");if(te==null||!u.isValid(te))throw new Error("y required");if(ne==null||!u.isValid(ne))throw new Error("z required")}static fromAffine(Y){const{x:te,y:ne}=Y||{};if(!Y||!u.isValid(te)||!u.isValid(ne))throw new Error("invalid affine point");if(Y instanceof q)throw new Error("projective point not allowed");const Q=ue=>u.eql(ue,u.ZERO);return Q(te)&&Q(ne)?q.ZERO:new q(te,ne,u.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(Y){const te=u.invertBatch(Y.map(ne=>ne.pz));return Y.map((ne,Q)=>ne.toAffine(te[Q])).map(q.fromAffine)}static fromHex(Y){const te=q.fromAffine(m($t("pointHex",Y)));return te.assertValidity(),te}static fromPrivateKey(Y){return q.BASE.multiply(U(Y))}_setWindowSize(Y){this._WINDOW_SIZE=Y,j.delete(this)}assertValidity(){if(this.is0()){if(a.allowInfinityPoint&&!u.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:Y,y:te}=this.toAffine();if(!u.isValid(Y)||!u.isValid(te))throw new Error("bad point: x or y not FE");const ne=u.sqr(te),Q=k(Y);if(!u.eql(ne,Q))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:Y}=this.toAffine();if(u.isOdd)return!u.isOdd(Y);throw new Error("Field doesn't support isOdd")}equals(Y){F(Y);const{px:te,py:ne,pz:Q}=this,{px:ue,py:_e,pz:ke}=Y,le=u.eql(u.mul(te,ke),u.mul(ue,Q)),ce=u.eql(u.mul(ne,ke),u.mul(_e,Q));return le&&ce}negate(){return new q(this.px,u.neg(this.py),this.pz)}double(){const{a:Y,b:te}=a,ne=u.mul(te,kf),{px:Q,py:ue,pz:_e}=this;let ke=u.ZERO,le=u.ZERO,ce=u.ZERO,ie=u.mul(Q,Q),fe=u.mul(ue,ue),Se=u.mul(_e,_e),Be=u.mul(Q,ue);return Be=u.add(Be,Be),ce=u.mul(Q,_e),ce=u.add(ce,ce),ke=u.mul(Y,ce),le=u.mul(ne,Se),le=u.add(ke,le),ke=u.sub(fe,le),le=u.add(fe,le),le=u.mul(ke,le),ke=u.mul(Be,ke),ce=u.mul(ne,ce),Se=u.mul(Y,Se),Be=u.sub(ie,Se),Be=u.mul(Y,Be),Be=u.add(Be,ce),ce=u.add(ie,ie),ie=u.add(ce,ie),ie=u.add(ie,Se),ie=u.mul(ie,Be),le=u.add(le,ie),Se=u.mul(ue,_e),Se=u.add(Se,Se),ie=u.mul(Se,Be),ke=u.sub(ke,ie),ce=u.mul(Se,fe),ce=u.add(ce,ce),ce=u.add(ce,ce),new q(ke,le,ce)}add(Y){F(Y);const{px:te,py:ne,pz:Q}=this,{px:ue,py:_e,pz:ke}=Y;let le=u.ZERO,ce=u.ZERO,ie=u.ZERO;const fe=a.a,Se=u.mul(a.b,kf);let Be=u.mul(te,ue),at=u.mul(ne,_e),ct=u.mul(Q,ke),ut=u.add(te,ne),de=u.add(ue,_e);ut=u.mul(ut,de),de=u.add(Be,at),ut=u.sub(ut,de),de=u.add(te,Q);let ve=u.add(ue,ke);return de=u.mul(de,ve),ve=u.add(Be,ct),de=u.sub(de,ve),ve=u.add(ne,Q),le=u.add(_e,ke),ve=u.mul(ve,le),le=u.add(at,ct),ve=u.sub(ve,le),ie=u.mul(fe,de),le=u.mul(Se,ct),ie=u.add(le,ie),le=u.sub(at,ie),ie=u.add(at,ie),ce=u.mul(le,ie),at=u.add(Be,Be),at=u.add(at,Be),ct=u.mul(fe,ct),de=u.mul(Se,de),at=u.add(at,ct),ct=u.sub(Be,ct),ct=u.mul(fe,ct),de=u.add(de,ct),Be=u.mul(at,de),ce=u.add(ce,Be),Be=u.mul(ve,de),le=u.mul(ut,le),le=u.sub(le,Be),Be=u.mul(ut,at),ie=u.mul(ve,ie),ie=u.add(ie,Be),new q(le,ce,ie)}subtract(Y){return this.add(Y.negate())}is0(){return this.equals(q.ZERO)}wNAF(Y){return J.wNAFCached(this,j,Y,te=>{const ne=u.invertBatch(te.map(Q=>Q.pz));return te.map((Q,ue)=>Q.toAffine(ne[ue])).map(q.fromAffine)})}multiplyUnsafe(Y){const te=q.ZERO;if(Y===Dn)return te;if(M(Y),Y===Xt)return this;const{endo:ne}=a;if(!ne)return J.unsafeLadder(this,Y);let{k1neg:Q,k1:ue,k2neg:_e,k2:ke}=ne.splitScalar(Y),le=te,ce=te,ie=this;for(;ue>Dn||ke>Dn;)ue&Xt&&(le=le.add(ie)),ke&Xt&&(ce=ce.add(ie)),ie=ie.double(),ue>>=Xt,ke>>=Xt;return Q&&(le=le.negate()),_e&&(ce=ce.negate()),ce=new q(u.mul(ce.px,ne.beta),ce.py,ce.pz),le.add(ce)}multiply(Y){M(Y);let te=Y,ne,Q;const{endo:ue}=a;if(ue){const{k1neg:_e,k1:ke,k2neg:le,k2:ce}=ue.splitScalar(te);let{p:ie,f:fe}=this.wNAF(ke),{p:Se,f:Be}=this.wNAF(ce);ie=J.constTimeNegate(_e,ie),Se=J.constTimeNegate(le,Se),Se=new q(u.mul(Se.px,ue.beta),Se.py,Se.pz),ne=ie.add(Se),Q=fe.add(Be)}else{const{p:_e,f:ke}=this.wNAF(te);ne=_e,Q=ke}return q.normalizeZ([ne,Q])[0]}multiplyAndAddUnsafe(Y,te,ne){const Q=q.BASE,ue=(ke,le)=>le===Dn||le===Xt||!ke.equals(Q)?ke.multiplyUnsafe(le):ke.multiply(le),_e=ue(this,te).add(ue(Y,ne));return _e.is0()?void 0:_e}toAffine(Y){const{px:te,py:ne,pz:Q}=this,ue=this.is0();Y==null&&(Y=ue?u.ONE:u.inv(Q));const _e=u.mul(te,Y),ke=u.mul(ne,Y),le=u.mul(Q,Y);if(ue)return{x:u.ZERO,y:u.ZERO};if(!u.eql(le,u.ONE))throw new Error("invZ was invalid");return{x:_e,y:ke}}isTorsionFree(){const{h:Y,isTorsionFree:te}=a;if(Y===Xt)return!0;if(te)return te(q,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:Y,clearCofactor:te}=a;return Y===Xt?this:te?te(q,this):this.multiplyUnsafe(a.h)}toRawBytes(Y=!0){return this.assertValidity(),g(q,this,Y)}toHex(Y=!0){return Ho(this.toRawBytes(Y))}}q.BASE=new q(a.Gx,a.Gy,u.ONE),q.ZERO=new q(u.ZERO,u.ONE,u.ZERO);const X=a.nBitLength,J=pm(q,a.endo?Math.ceil(X/2):X);return{CURVE:a,ProjectivePoint:q,normPrivateKeyToScalar:U,weierstrassEquation:k,isWithinCurveOrder:B}}function ym(i){const a=Ef(i);return Ni(a,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...a})}function vm(i){const a=ym(i),{Fp:u,n:g}=a,m=u.BYTES+1,k=2*u.BYTES+1;function B(de){return Dn<de&&de<u.ORDER}function M(de){return vt(de,g)}function U(de){return Vc(de,g)}const{ProjectivePoint:j,normPrivateKeyToScalar:F,weierstrassEquation:q,isWithinCurveOrder:X}=mm({...a,toBytes(de,ve,Ne){const We=ve.toAffine(),Ze=u.toBytes(We.x),qe=uo;return Ne?qe(Uint8Array.from([ve.hasEvenY()?2:3]),Ze):qe(Uint8Array.from([4]),Ze,u.toBytes(We.y))},fromBytes(de){const ve=de.length,Ne=de[0],We=de.subarray(1);if(ve===m&&(Ne===2||Ne===3)){const Ze=Ht(We);if(!B(Ze))throw new Error("Point is not on curve");const qe=q(Ze);let xt=u.sqrt(qe);const _t=(xt&Xt)===Xt;return(Ne&1)===1!==_t&&(xt=u.neg(xt)),{x:Ze,y:xt}}else if(ve===k&&Ne===4){const Ze=u.fromBytes(We.subarray(0,u.BYTES)),qe=u.fromBytes(We.subarray(u.BYTES,2*u.BYTES));return{x:Ze,y:qe}}else throw new Error(`Point of length ${ve} was invalid. Expected ${m} compressed bytes or ${k} uncompressed bytes`)}}),J=de=>Ho(vr(de,a.nByteLength));function ee(de){const ve=g>>Xt;return de>ve}function Y(de){return ee(de)?M(-de):de}const te=(de,ve,Ne)=>Ht(de.slice(ve,Ne));class ne{constructor(ve,Ne,We){this.r=ve,this.s=Ne,this.recovery=We,this.assertValidity()}static fromCompact(ve){const Ne=a.nByteLength;return ve=$t("compactSignature",ve,Ne*2),new ne(te(ve,0,Ne),te(ve,Ne,2*Ne))}static fromDER(ve){const{r:Ne,s:We}=fo.toSig($t("DER",ve));return new ne(Ne,We)}assertValidity(){if(!X(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!X(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(ve){return new ne(this.r,this.s,ve)}recoverPublicKey(ve){const{r:Ne,s:We,recovery:Ze}=this,qe=ce($t("msgHash",ve));if(Ze==null||![0,1,2,3].includes(Ze))throw new Error("recovery id invalid");const xt=Ze===2||Ze===3?Ne+a.n:Ne;if(xt>=u.ORDER)throw new Error("recovery id 2 or 3 invalid");const _t=Ze&1?"03":"02",jt=j.fromHex(_t+J(xt)),lt=U(xt),en=M(-qe*lt),fn=M(We*lt),Sn=j.BASE.multiplyAndAddUnsafe(jt,en,fn);if(!Sn)throw new Error("point at infinify");return Sn.assertValidity(),Sn}hasHighS(){return ee(this.s)}normalizeS(){return this.hasHighS()?new ne(this.r,M(-this.s),this.recovery):this}toDERRawBytes(){return jo(this.toDERHex())}toDERHex(){return fo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return jo(this.toCompactHex())}toCompactHex(){return J(this.r)+J(this.s)}}const Q={isValidPrivateKey(de){try{return F(de),!0}catch{return!1}},normPrivateKeyToScalar:F,randomPrivateKey:()=>{const de=_f(a.n);return fm(a.randomBytes(de),a.n)},precompute(de=8,ve=j.BASE){return ve._setWindowSize(de),ve.multiply(BigInt(3)),ve}};function ue(de,ve=!0){return j.fromPrivateKey(de).toRawBytes(ve)}function _e(de){const ve=de instanceof Uint8Array,Ne=typeof de=="string",We=(ve||Ne)&&de.length;return ve?We===m||We===k:Ne?We===2*m||We===2*k:de instanceof j}function ke(de,ve,Ne=!0){if(_e(de))throw new Error("first arg must be private key");if(!_e(ve))throw new Error("second arg must be public key");return j.fromHex(ve).multiply(F(de)).toRawBytes(Ne)}const le=a.bits2int||function(de){const ve=Ht(de),Ne=de.length*8-a.nBitLength;return Ne>0?ve>>BigInt(Ne):ve},ce=a.bits2int_modN||function(de){return M(le(de))},ie=jc(a.nBitLength);function fe(de){if(typeof de!="bigint")throw new Error("bigint expected");if(!(Dn<=de&&de<ie))throw new Error(`bigint expected < 2^${a.nBitLength}`);return vr(de,a.nByteLength)}function Se(de,ve,Ne=Be){if(["recovered","canonical"].some(Gt=>Gt in Ne))throw new Error("sign() legacy options not supported");const{hash:We,randomBytes:Ze}=a;let{lowS:qe,prehash:xt,extraEntropy:_t}=Ne;qe==null&&(qe=!0),de=$t("msgHash",de),xt&&(de=$t("prehashed msgHash",We(de)));const jt=ce(de),lt=F(ve),en=[fe(lt),fe(jt)];if(_t!=null){const Gt=_t===!0?Ze(u.BYTES):_t;en.push($t("extraEntropy",Gt))}const fn=uo(...en),Sn=jt;function xr(Gt){const Tr=le(Gt);if(!X(Tr))return;const wo=U(Tr),Zt=j.BASE.multiply(Tr).toAffine(),Wn=M(Zt.x);if(Wn===Dn)return;const bo=M(wo*M(Sn+Wn*lt));if(bo===Dn)return;let mo=(Zt.x===Wn?0:2)|Number(Zt.y&Xt),Pr=bo;return qe&&ee(bo)&&(Pr=Y(bo),mo^=1),new ne(Wn,Pr,mo)}return{seed:fn,k2sig:xr}}const Be={lowS:a.lowS,prehash:!1},at={lowS:a.lowS,prehash:!1};function ct(de,ve,Ne=Be){const{seed:We,k2sig:Ze}=Se(de,ve,Ne),qe=a;return wf(qe.hash.outputLen,qe.nByteLength,qe.hmac)(We,Ze)}j.BASE._setWindowSize(8);function ut(de,ve,Ne,We=at){var Ze;const qe=de;if(ve=$t("msgHash",ve),Ne=$t("publicKey",Ne),"strict"in We)throw new Error("options.strict was renamed to lowS");const{lowS:xt,prehash:_t}=We;let jt,lt;try{if(typeof qe=="string"||qe instanceof Uint8Array)try{jt=ne.fromDER(qe)}catch(Zt){if(!(Zt instanceof fo.Err))throw Zt;jt=ne.fromCompact(qe)}else if(typeof qe=="object"&&typeof qe.r=="bigint"&&typeof qe.s=="bigint"){const{r:Zt,s:Wn}=qe;jt=new ne(Zt,Wn)}else throw new Error("PARSE");lt=j.fromHex(Ne)}catch(Zt){if(Zt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(xt&&jt.hasHighS())return!1;_t&&(ve=a.hash(ve));const{r:en,s:fn}=jt,Sn=ce(ve),xr=U(fn),Gt=M(Sn*xr),Tr=M(en*xr),wo=(Ze=j.BASE.multiplyAndAddUnsafe(lt,Gt,Tr))==null?void 0:Ze.toAffine();return wo?M(wo.x)===en:!1}return{CURVE:a,getPublicKey:ue,getSharedSecret:ke,sign:ct,verify:ut,ProjectivePoint:j,Signature:ne,utils:Q}}class Af extends df{constructor(a,u){super(),this.finished=!1,this.destroyed=!1,Rb(a);const g=Rc(u);if(this.iHash=a.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const m=this.blockLen,k=new Uint8Array(m);k.set(g.length>m?a.create().update(g).digest():g);for(let B=0;B<k.length;B++)k[B]^=54;this.iHash.update(k),this.oHash=a.create();for(let B=0;B<k.length;B++)k[B]^=106;this.oHash.update(k),k.fill(0)}update(a){return xs(this),this.iHash.update(a),this}digestInto(a){xs(this),uf(a,this.outputLen),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){const a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||(a=Object.create(Object.getPrototypeOf(this),{}));const{oHash:u,iHash:g,finished:m,destroyed:k,blockLen:B,outputLen:M}=this;return a=a,a.finished=m,a.destroyed=k,a.blockLen=B,a.outputLen=M,a.oHash=u._cloneInto(a.oHash),a.iHash=g._cloneInto(a.iHash),a}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Sf=(i,a,u)=>new Af(i,a).update(u).digest();Sf.create=(i,a)=>new Af(i,a);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _m(i){return{hash:i,hmac:(a,...u)=>Sf(i,a,Mb(...u)),randomBytes:ff}}function Em(i,a){const u=g=>vm({...i,..._m(g)});return Object.freeze({...u(a),create:u})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bs=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Cs=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),$f=BigInt(1),Ls=BigInt(2),xf=(i,a)=>(i+a/Ls)/a;function Tf(i){const a=Bs,u=BigInt(3),g=BigInt(6),m=BigInt(11),k=BigInt(22),B=BigInt(23),M=BigInt(44),U=BigInt(88),j=i*i*i%a,F=j*j*i%a,q=Jt(F,u,a)*F%a,X=Jt(q,u,a)*F%a,J=Jt(X,Ls,a)*j%a,ee=Jt(J,m,a)*J%a,Y=Jt(ee,k,a)*ee%a,te=Jt(Y,M,a)*Y%a,ne=Jt(te,U,a)*te%a,Q=Jt(ne,M,a)*Y%a,ue=Jt(Q,u,a)*F%a,_e=Jt(ue,B,a)*ee%a,ke=Jt(_e,g,a)*j%a,le=Jt(ke,Ls,a);if(!Kc.eql(Kc.sqr(le),i))throw new Error("Cannot find square root");return le}const Kc=dm(Bs,void 0,void 0,{sqrt:Tf}),Ri=Em({a:BigInt(0),b:BigInt(7),Fp:Kc,n:Cs,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:i=>{const a=Cs,u=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),g=-$f*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),m=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),k=u,B=BigInt("0x100000000000000000000000000000000"),M=xf(k*i,a),U=xf(-g*i,a);let j=vt(i-M*u-U*m,a),F=vt(-M*g-U*k,a);const q=j>B,X=F>B;if(q&&(j=a-j),X&&(F=a-F),j>B||F>B)throw new Error("splitScalar: Endomorphism failed, k="+i);return{k1neg:q,k1:j,k2neg:X,k2:F}}}},zc),Is=BigInt(0),Pf=i=>typeof i=="bigint"&&Is<i&&i<Bs,km=i=>typeof i=="bigint"&&Is<i&&i<Cs,Bf={};function Os(i,...a){let u=Bf[i];if(u===void 0){const g=zc(Uint8Array.from(i,m=>m.charCodeAt(0)));u=uo(g,g),Bf[i]=u}return zc(uo(u,...a))}const Wc=i=>i.toRawBytes(!0).slice(1),Gc=i=>vr(i,32),Zc=i=>vt(i,Bs),zi=i=>vt(i,Cs),Yc=Ri.ProjectivePoint,Am=(i,a,u)=>Yc.BASE.multiplyAndAddUnsafe(i,a,u);function Jc(i){let a=Ri.utils.normPrivateKeyToScalar(i),u=Yc.fromPrivateKey(a);return{scalar:u.hasEvenY()?a:zi(-a),bytes:Wc(u)}}function Cf(i){if(!Pf(i))throw new Error("bad x: need 0 < x < p");const a=Zc(i*i),u=Zc(a*i+BigInt(7));let g=Tf(u);g%Ls!==Is&&(g=Zc(-g));const m=new Yc(i,g,$f);return m.assertValidity(),m}function Lf(...i){return zi(Ht(Os("BIP0340/challenge",...i)))}function Sm(i){return Jc(i).bytes}function $m(i,a,u=ff(32)){const g=$t("message",i),{bytes:m,scalar:k}=Jc(a),B=$t("auxRand",u,32),M=Gc(k^Ht(Os("BIP0340/aux",B))),U=Os("BIP0340/nonce",M,m,g),j=zi(Ht(U));if(j===Is)throw new Error("sign failed: k is zero");const{bytes:F,scalar:q}=Jc(j),X=Lf(F,m,g),J=new Uint8Array(64);if(J.set(F,0),J.set(Gc(zi(q+X*k)),32),!If(J,g,m))throw new Error("sign: Invalid signature produced");return J}function If(i,a,u){const g=$t("signature",i,64),m=$t("message",a),k=$t("publicKey",u,32);try{const B=Cf(Ht(k)),M=Ht(g.subarray(0,32));if(!Pf(M))return!1;const U=Ht(g.subarray(32,64));if(!km(U))return!1;const j=Lf(Gc(M),Wc(B),m),F=Am(B,U,zi(-j));return!(!F||!F.hasEvenY()||F.toAffine().x!==M)}catch{return!1}}const Rt={getPublicKey:Sm,sign:$m,verify:If,utils:{randomPrivateKey:Ri.utils.randomPrivateKey,lift_x:Cf,pointToBytes:Wc,numberToBytesBE:vr,bytesToNumberBE:Ht,taggedHash:Os,mod:vt}};function Xc(i){if(!Number.isSafeInteger(i)||i<0)throw new Error(`Wrong positive integer: ${i}`)}function xm(i){if(typeof i!="boolean")throw new Error(`Expected boolean, not ${i}`)}function Of(i,...a){if(!(i instanceof Uint8Array))throw new Error("Expected Uint8Array");if(a.length>0&&!a.includes(i.length))throw new Error(`Expected Uint8Array of length ${a}, not of length=${i.length}`)}function Tm(i){if(typeof i!="function"||typeof i.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Xc(i.outputLen),Xc(i.blockLen)}function Pm(i,a=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(a&&i.finished)throw new Error("Hash#digest() has already been called")}function Bm(i,a){Of(i);const u=a.outputLen;if(i.length<u)throw new Error(`digestInto() expects output buffer of length at least ${u}`)}const Qc={number:Xc,bool:xm,bytes:Of,hash:Tm,exists:Pm,output:Bm};function Cm(i,a,u,g){if(typeof i.setBigUint64=="function")return i.setBigUint64(a,u,g);const m=BigInt(32),k=BigInt(4294967295),B=Number(u>>m&k),M=Number(u&k),U=g?4:0,j=g?0:4;i.setUint32(a+U,B,g),i.setUint32(a+j,M,g)}class Lm extends Ob{constructor(a,u,g,m){super(),this.blockLen=a,this.outputLen=u,this.padOffset=g,this.isLE=m,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(a),this.view=Lc(this.buffer)}update(a){Qc.exists(this);const{view:u,buffer:g,blockLen:m}=this;a=sf(a);const k=a.length;for(let B=0;B<k;){const M=Math.min(m-this.pos,k-B);if(M===m){const U=Lc(a);for(;m<=k-B;B+=m)this.process(U,B);continue}g.set(a.subarray(B,B+M),this.pos),this.pos+=M,B+=M,this.pos===m&&(this.process(u,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){Qc.exists(this),Qc.output(a,this),this.finished=!0;const{buffer:u,view:g,blockLen:m,isLE:k}=this;let{pos:B}=this;u[B++]=128,this.buffer.subarray(B).fill(0),this.padOffset>m-B&&(this.process(g,0),B=0);for(let q=B;q<m;q++)u[q]=0;Cm(g,m-8,BigInt(this.length*8),k),this.process(g,0);const M=Lc(a),U=this.outputLen;if(U%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const j=U/4,F=this.get();if(j>F.length)throw new Error("_sha2: outputLen bigger than state");for(let q=0;q<j;q++)M.setUint32(4*q,F[q],k)}digest(){const{buffer:a,outputLen:u}=this;this.digestInto(a);const g=a.slice(0,u);return this.destroy(),g}_cloneInto(a){a||(a=new this.constructor),a.set(...this.get());const{blockLen:u,buffer:g,length:m,finished:k,destroyed:B,pos:M}=this;return a.length=m,a.pos=M,a.finished=k,a.destroyed=B,m%u&&a.buffer.set(g),a}}const Im=(i,a,u)=>i&a^~i&u,Om=(i,a,u)=>i&a^i&u^a&u,Nm=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_r=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Er=new Uint32Array(64);class Nf extends Lm{constructor(){super(64,32,8,!1),this.A=_r[0]|0,this.B=_r[1]|0,this.C=_r[2]|0,this.D=_r[3]|0,this.E=_r[4]|0,this.F=_r[5]|0,this.G=_r[6]|0,this.H=_r[7]|0}get(){const{A:a,B:u,C:g,D:m,E:k,F:B,G:M,H:U}=this;return[a,u,g,m,k,B,M,U]}set(a,u,g,m,k,B,M,U){this.A=a|0,this.B=u|0,this.C=g|0,this.D=m|0,this.E=k|0,this.F=B|0,this.G=M|0,this.H=U|0}process(a,u){for(let q=0;q<16;q++,u+=4)Er[q]=a.getUint32(u,!1);for(let q=16;q<64;q++){const X=Er[q-15],J=Er[q-2],ee=_n(X,7)^_n(X,18)^X>>>3,Y=_n(J,17)^_n(J,19)^J>>>10;Er[q]=Y+Er[q-7]+ee+Er[q-16]|0}let{A:g,B:m,C:k,D:B,E:M,F:U,G:j,H:F}=this;for(let q=0;q<64;q++){const X=_n(M,6)^_n(M,11)^_n(M,25),J=F+X+Im(M,U,j)+Nm[q]+Er[q]|0,ee=(_n(g,2)^_n(g,13)^_n(g,22))+Om(g,m,k)|0;F=j,j=U,U=M,M=B+J|0,B=k,k=m,m=g,g=J+ee|0}g=g+this.A|0,m=m+this.B|0,k=k+this.C|0,B=B+this.D|0,M=M+this.E|0,U=U+this.F|0,j=j+this.G|0,F=F+this.H|0,this.set(g,m,k,B,M,U,j,F)}roundClean(){Er.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Rm extends Nf{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const eu=af(()=>new Nf);af(()=>new Rm);var Do=Symbol("verified"),zm=i=>i instanceof Object;function Um(i){if(!zm(i)||typeof i.kind!="number"||typeof i.content!="string"||typeof i.created_at!="number"||typeof i.pubkey!="string"||!i.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(i.tags))return!1;for(let a=0;a<i.tags.length;a++){let u=i.tags[a];if(!Array.isArray(u))return!1;for(let g=0;g<u.length;g++)if(typeof u[g]=="object")return!1}return!0}new TextDecoder("utf-8");var Mm=new TextEncoder,Hm=class{generateSecretKey(){return Rt.utils.randomPrivateKey()}getPublicKey(i){return Nt(Rt.getPublicKey(i))}finalizeEvent(i,a){const u=i;return u.pubkey=Nt(Rt.getPublicKey(a)),u.id=tu(u),u.sig=Nt(Rt.sign(tu(u),a)),u[Do]=!0,u}verifyEvent(i){if(typeof i[Do]=="boolean")return i[Do];const a=tu(i);if(a!==i.id)return i[Do]=!1,!1;try{const u=Rt.verify(i.sig,a,i.pubkey);return i[Do]=u,u}catch{return i[Do]=!1,!1}}};function jm(i){if(!Um(i))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,i.pubkey,i.created_at,i.kind,i.tags,i.content])}function tu(i){let a=eu(Mm.encode(jm(i)));return Nt(a)}var Ns=new Hm,Dm=Ns.generateSecretKey,Rf=Ns.getPublicKey;Ns.finalizeEvent,Ns.verifyEvent;var ho=Symbol("verified"),qm=i=>i instanceof Object;function Vm(i){if(!qm(i)||typeof i.kind!="number"||typeof i.content!="string"||typeof i.created_at!="number"||typeof i.pubkey!="string"||!i.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(i.tags))return!1;for(let a=0;a<i.tags.length;a++){let u=i.tags[a];if(!Array.isArray(u))return!1;for(let g=0;g<u.length;g++)if(typeof u[g]=="object")return!1}return!0}new TextDecoder("utf-8");var Fm=new TextEncoder;function Ui(i){i.indexOf("://")===-1&&(i="wss://"+i);let a=new URL(i);return a.pathname=a.pathname.replace(/\/+/g,"/"),a.pathname.endsWith("/")&&(a.pathname=a.pathname.slice(0,-1)),(a.port==="80"&&a.protocol==="ws:"||a.port==="443"&&a.protocol==="wss:")&&(a.port=""),a.searchParams.sort(),a.hash="",a.toString()}var Km=class{constructor(i){ae(this,"value"),ae(this,"next",null),ae(this,"prev",null),this.value=i}},Wm=class{constructor(){ae(this,"first"),ae(this,"last"),this.first=null,this.last=null}enqueue(i){const a=new Km(i);return this.last?this.last===this.first?(this.last=a,this.last.prev=this.first,this.first.next=a):(a.prev=this.last,this.last.next=a,this.last=a):(this.first=a,this.last=a),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const a=this.first;return this.first=null,this.last=null,a.value}const i=this.first;return this.first=i.next,i.value}},Gm=class{generateSecretKey(){return Rt.utils.randomPrivateKey()}getPublicKey(i){return Nt(Rt.getPublicKey(i))}finalizeEvent(i,a){const u=i;return u.pubkey=Nt(Rt.getPublicKey(a)),u.id=nu(u),u.sig=Nt(Rt.sign(nu(u),a)),u[ho]=!0,u}verifyEvent(i){if(typeof i[ho]=="boolean")return i[ho];const a=nu(i);if(a!==i.id)return i[ho]=!1,!1;try{const u=Rt.verify(i.sig,a,i.pubkey);return i[ho]=u,u}catch{return i[ho]=!1,!1}}};function Zm(i){if(!Vm(i))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,i.pubkey,i.created_at,i.kind,i.tags,i.content])}function nu(i){let a=eu(Fm.encode(Zm(i)));return Nt(a)}var Rs=new Gm;Rs.generateSecretKey,Rs.getPublicKey,Rs.finalizeEvent;var Ym=Rs.verifyEvent,Jm=22242;function Xm(i,a){if(i.ids&&i.ids.indexOf(a.id)===-1&&!i.ids.some(u=>a.id.startsWith(u))||i.kinds&&i.kinds.indexOf(a.kind)===-1||i.authors&&i.authors.indexOf(a.pubkey)===-1&&!i.authors.some(u=>a.pubkey.startsWith(u)))return!1;for(let u in i)if(u[0]==="#"){let g=u.slice(1),m=i[`#${g}`];if(m&&!a.tags.find(([k,B])=>k===u.slice(1)&&m.indexOf(B)!==-1))return!1}return!(i.since&&a.created_at<i.since||i.until&&a.created_at>i.until)}function Qm(i,a){for(let u=0;u<i.length;u++)if(Xm(i[u],a))return!0;return!1}function ey(i,a){let u=a.length+3,g=i.indexOf(`"${a}":`)+u,m=i.slice(g).indexOf('"')+g+1;return i.slice(m,m+64)}function ty(i){let a=i.slice(0,22).indexOf('"EVENT"');if(a===-1)return null;let u=i.slice(a+7+1).indexOf('"');if(u===-1)return null;let g=a+7+1+u,m=i.slice(g+1,80).indexOf('"');if(m===-1)return null;let k=g+1+m;return i.slice(g+1,k)}function ny(i,a){return{kind:Jm,created_at:Math.floor(Date.now()/1e3),tags:[["relay",i],["challenge",a]],content:""}}async function ry(){return new Promise(i=>{const a=new MessageChannel,u=()=>{a.port1.removeEventListener("message",u),i()};a.port1.addEventListener("message",u),a.port2.postMessage(0),a.port1.start()})}var oy=i=>(i[ho]=!0,!0),zf;try{zf=WebSocket}catch{}var Uf=class{constructor(i,a){ae(this,"url"),ae(this,"_connected",!1),ae(this,"onclose",null),ae(this,"onnotice",u=>console.debug(`NOTICE from ${this.url}: ${u}`)),ae(this,"_onauth",null),ae(this,"baseEoseTimeout",4400),ae(this,"connectionTimeout",4400),ae(this,"openSubs",new Map),ae(this,"connectionTimeoutHandle"),ae(this,"connectionPromise"),ae(this,"openCountRequests",new Map),ae(this,"openEventPublishes",new Map),ae(this,"ws"),ae(this,"incomingMessageQueue",new Wm),ae(this,"queueRunning",!1),ae(this,"challenge"),ae(this,"serial",0),ae(this,"verifyEvent"),this.url=Ui(i),this.verifyEvent=a.verifyEvent}static async connect(i,a){const u=new Uf(i,a);return await u.connect(),u}closeAllSubscriptions(i){for(let[a,u]of this.openSubs)u.close(i);this.openSubs.clear();for(let[a,u]of this.openEventPublishes)u.reject(new Error(i));this.openEventPublishes.clear();for(let[a,u]of this.openCountRequests)u.reject(new Error(i));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((i,a)=>{this.connectionTimeoutHandle=setTimeout(()=>{var u;a("connection timed out"),this.connectionPromise=void 0,(u=this.onclose)==null||u.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new zf(this.url)}catch(u){a(u);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,i()},this.ws.onerror=u=>{var g;a(u.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(g=this.onclose)==null||g.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var u;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(u=this.onclose)==null||u.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await ry();this.queueRunning=!1}handleNext(){var i,a,u;const g=this.incomingMessageQueue.dequeue();if(!g)return!1;const m=ty(g);if(m){const k=this.openSubs.get(m);if(!k)return;const B=ey(g,"id"),M=(i=k.alreadyHaveEvent)==null?void 0:i.call(k,B);if((a=k.receivedEvent)==null||a.call(k,this,B),M)return}try{let k=JSON.parse(g);switch(k[0]){case"EVENT":{const B=this.openSubs.get(k[1]),M=k[2];this.verifyEvent(M)&&Qm(B.filters,M)&&B.onevent(M);return}case"COUNT":{const B=k[1],M=k[2],U=this.openCountRequests.get(B);U&&(U.resolve(M.count),this.openCountRequests.delete(B));return}case"EOSE":{const B=this.openSubs.get(k[1]);if(!B)return;B.receivedEose();return}case"OK":{const B=k[1],M=k[2],U=k[3],j=this.openEventPublishes.get(B);M?j.resolve(U):j.reject(new Error(U)),this.openEventPublishes.delete(B);return}case"CLOSED":{const B=k[1],M=this.openSubs.get(B);if(!M)return;M.closed=!0,M.close(k[2]);return}case"NOTICE":this.onnotice(k[1]);return;case"AUTH":{this.challenge=k[1],(u=this._onauth)==null||u.call(this,k[1]);return}}}catch{return}}async send(i){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var a;(a=this.ws)==null||a.send(i)})}async auth(i){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const a=await i(ny(this.url,this.challenge)),u=new Promise((g,m)=>{this.openEventPublishes.set(a.id,{resolve:g,reject:m})});return this.send('["AUTH",'+JSON.stringify(a)+"]"),u}async publish(i){const a=new Promise((u,g)=>{this.openEventPublishes.set(i.id,{resolve:u,reject:g})});return this.send('["EVENT",'+JSON.stringify(i)+"]"),a}async count(i,a){this.serial++;const u=(a==null?void 0:a.id)||"count:"+this.serial,g=new Promise((m,k)=>{this.openCountRequests.set(u,{resolve:m,reject:k})});return this.send('["COUNT","'+u+'",'+JSON.stringify(i)+"]"),g}subscribe(i,a){const u=this.prepareSubscription(i,a);return u.fire(),u}prepareSubscription(i,a){this.serial++;const u=a.id||"sub:"+this.serial,g=new iy(this,u,i,a);return this.openSubs.set(u,g),g}close(){var i;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(i=this.ws)==null||i.close()}_onmessage(i){this.incomingMessageQueue.enqueue(i.data),this.queueRunning||this.runQueue()}},iy=class{constructor(i,a,u,g){ae(this,"relay"),ae(this,"id"),ae(this,"closed",!1),ae(this,"eosed",!1),ae(this,"filters"),ae(this,"alreadyHaveEvent"),ae(this,"receivedEvent"),ae(this,"onevent"),ae(this,"oneose"),ae(this,"onclose"),ae(this,"eoseTimeout"),ae(this,"eoseTimeoutHandle"),this.relay=i,this.filters=u,this.id=a,this.alreadyHaveEvent=g.alreadyHaveEvent,this.receivedEvent=g.receivedEvent,this.eoseTimeout=g.eoseTimeout||i.baseEoseTimeout,this.oneose=g.oneose,this.onclose=g.onclose,this.onevent=g.onevent||(m=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,m)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var i;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(i=this.oneose)==null||i.call(this))}close(i="closed by caller"){var a;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(a=this.onclose)==null||a.call(this,i)}},sy=class{constructor(i){ae(this,"relays",new Map),ae(this,"seenOn",new Map),ae(this,"trackRelays",!1),ae(this,"verifyEvent"),ae(this,"trustedRelayURLs",new Set),this.verifyEvent=i.verifyEvent}async ensureRelay(i,a){i=Ui(i);let u=this.relays.get(i);return u||(u=new Uf(i,{verifyEvent:this.trustedRelayURLs.has(i)?oy:this.verifyEvent}),a!=null&&a.connectionTimeout&&(u.connectionTimeout=a.connectionTimeout),this.relays.set(i,u)),await u.connect(),u}close(i){i.map(Ui).forEach(a=>{var u;(u=this.relays.get(a))==null||u.close()})}subscribeMany(i,a,u){return this.subscribeManyMap(Object.fromEntries(i.map(g=>[g,a])),u)}subscribeManyMap(i,a){this.trackRelays&&(a.receivedEvent=(q,X)=>{let J=this.seenOn.get(X);J||(J=new Set,this.seenOn.set(X,J)),J.add(q)});const u=new Set,g=[],m=Object.keys(i).length,k=[];let B=q=>{var X;k[q]=!0,k.filter(J=>J).length===m&&((X=a.oneose)==null||X.call(a),B=()=>{})};const M=[];let U=(q,X)=>{var J;B(q),M[q]=X,M.filter(ee=>ee).length===m&&((J=a.onclose)==null||J.call(a,M),U=()=>{})};const j=q=>{var X;if((X=a.alreadyHaveEvent)!=null&&X.call(a,q))return!0;const J=u.has(q);return u.add(q),J},F=Promise.all(Object.entries(i).map(async(q,X,J)=>{if(J.indexOf(q)!==X){U(X,"duplicate url");return}let[ee,Y]=q;ee=Ui(ee);let te;try{te=await this.ensureRelay(ee,{connectionTimeout:a.maxWait?Math.max(a.maxWait*.8,a.maxWait-1e3):void 0})}catch(Q){U(X,(Q==null?void 0:Q.message)||String(Q));return}let ne=te.subscribe(Y,{...a,oneose:()=>B(X),onclose:Q=>U(X,Q),alreadyHaveEvent:j,eoseTimeout:a.maxWait});g.push(ne)}));return{async close(){await F,g.forEach(q=>{q.close()})}}}subscribeManyEose(i,a,u){const g=this.subscribeMany(i,a,{...u,oneose(){g.close()}});return g}async querySync(i,a,u){return new Promise(async g=>{const m=[];this.subscribeManyEose(i,[a],{...u,onevent(k){m.push(k)},onclose(k){g(m)}})})}async get(i,a,u){a.limit=1;const g=await this.querySync(i,a,u);return g.sort((m,k)=>k.created_at-m.created_at),g[0]||null}publish(i,a){return i.map(Ui).map(async(u,g,m)=>m.indexOf(u)!==g?Promise.reject("duplicate url"):(await this.ensureRelay(u)).publish(a))}},ay=class extends sy{constructor(){super({verifyEvent:Ym})}};function Mf(i){return i instanceof Uint8Array||i!=null&&typeof i=="object"&&i.constructor.name==="Uint8Array"}function po(i,...a){if(!Mf(i))throw new Error("Uint8Array expected");if(a.length>0&&!a.includes(i.length))throw new Error(`Uint8Array expected of length ${a}, not of length=${i.length}`)}function zs(i,a=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(a&&i.finished)throw new Error("Hash#digest() has already been called")}function Hf(i,a){po(i);const u=a.outputLen;if(i.length<u)throw new Error(`digestInto() expects output buffer of length at least ${u}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const Wt=i=>new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)),cy=i=>new DataView(i.buffer,i.byteOffset,i.byteLength);if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");function uy(i){if(typeof i!="string")throw new Error(`string expected, got ${typeof i}`);return new Uint8Array(new TextEncoder().encode(i))}function Mi(i){if(typeof i=="string")i=uy(i);else if(Mf(i))i=i.slice();else throw new Error(`Uint8Array expected, got ${typeof i}`);return i}const ly=(i,a)=>(Object.assign(a,i),a),qn=16,ru=new Uint8Array(16),kn=Wt(ru),dy=225,fy=(i,a,u,g)=>{const m=g&1;return{s3:u<<31|g>>>1,s2:a<<31|u>>>1,s1:i<<31|a>>>1,s0:i>>>1^dy<<24&-(m&1)}},Qt=i=>(i>>>0&255)<<24|(i>>>8&255)<<16|(i>>>16&255)<<8|i>>>24&255|0;function hy(i){i.reverse();const a=i[15]&1;let u=0;for(let g=0;g<i.length;g++){const m=i[g];i[g]=m>>>1|u,u=(m&1)<<7}return i[0]^=-a&225,i}const py=i=>i>64*1024?8:i>1024?4:2;class jf{constructor(a,u){this.blockLen=qn,this.outputLen=qn,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,a=Mi(a),po(a,16);const g=cy(a);let m=g.getUint32(0,!1),k=g.getUint32(4,!1),B=g.getUint32(8,!1),M=g.getUint32(12,!1);const U=[];for(let J=0;J<128;J++)U.push({s0:Qt(m),s1:Qt(k),s2:Qt(B),s3:Qt(M)}),{s0:m,s1:k,s2:B,s3:M}=fy(m,k,B,M);const j=py(u||1024);if(![1,2,4,8].includes(j))throw new Error(`ghash: wrong window size=${j}, should be 2, 4 or 8`);this.W=j;const F=128/j,q=this.windowSize=2**j,X=[];for(let J=0;J<F;J++)for(let ee=0;ee<q;ee++){let Y=0,te=0,ne=0,Q=0;for(let ue=0;ue<j;ue++){if(!(ee>>>j-ue-1&1))continue;const{s0:_e,s1:ke,s2:le,s3:ce}=U[j*J+ue];Y^=_e,te^=ke,ne^=le,Q^=ce}X.push({s0:Y,s1:te,s2:ne,s3:Q})}this.t=X}_updateBlock(a,u,g,m){a^=this.s0,u^=this.s1,g^=this.s2,m^=this.s3;const{W:k,t:B,windowSize:M}=this;let U=0,j=0,F=0,q=0;const X=(1<<k)-1;let J=0;for(const ee of[a,u,g,m])for(let Y=0;Y<4;Y++){const te=ee>>>8*Y&255;for(let ne=8/k-1;ne>=0;ne--){const Q=te>>>k*ne&X,{s0:ue,s1:_e,s2:ke,s3:le}=B[J*M+Q];U^=ue,j^=_e,F^=ke,q^=le,J+=1}}this.s0=U,this.s1=j,this.s2=F,this.s3=q}update(a){a=Mi(a),zs(this);const u=Wt(a),g=Math.floor(a.length/qn),m=a.length%qn;for(let k=0;k<g;k++)this._updateBlock(u[k*4+0],u[k*4+1],u[k*4+2],u[k*4+3]);return m&&(ru.set(a.subarray(g*qn)),this._updateBlock(kn[0],kn[1],kn[2],kn[3]),kn.fill(0)),this}destroy(){const{t:a}=this;for(const u of a)u.s0=0,u.s1=0,u.s2=0,u.s3=0}digestInto(a){zs(this),Hf(a,this),this.finished=!0;const{s0:u,s1:g,s2:m,s3:k}=this,B=Wt(a);return B[0]=u,B[1]=g,B[2]=m,B[3]=k,a}digest(){const a=new Uint8Array(qn);return this.digestInto(a),this.destroy(),a}}class gy extends jf{constructor(a,u){a=Mi(a);const g=hy(a.slice());super(g,u),g.fill(0)}update(a){a=Mi(a),zs(this);const u=Wt(a),g=a.length%qn,m=Math.floor(a.length/qn);for(let k=0;k<m;k++)this._updateBlock(Qt(u[k*4+3]),Qt(u[k*4+2]),Qt(u[k*4+1]),Qt(u[k*4+0]));return g&&(ru.set(a.subarray(m*qn)),this._updateBlock(Qt(kn[3]),Qt(kn[2]),Qt(kn[1]),Qt(kn[0])),kn.fill(0)),this}digestInto(a){zs(this),Hf(a,this),this.finished=!0;const{s0:u,s1:g,s2:m,s3:k}=this,B=Wt(a);return B[0]=u,B[1]=g,B[2]=m,B[3]=k,a.reverse()}}function Df(i){const a=(g,m)=>i(m,g.length).update(Mi(g)).digest(),u=i(new Uint8Array(16),0);return a.outputLen=u.outputLen,a.blockLen=u.blockLen,a.create=(g,m)=>i(g,m),a}Df((i,a)=>new jf(i,a)),Df((i,a)=>new gy(i,a));const kr=16,wy=283;function ou(i){return i<<1^wy&-(i>>7)}function qo(i,a){let u=0;for(;a>0;a>>=1)u^=i&-(a&1),i=ou(i);return u}const iu=(()=>{let i=new Uint8Array(256);for(let u=0,g=1;u<256;u++,g^=ou(g))i[u]=g;const a=new Uint8Array(256);a[0]=99;for(let u=0;u<255;u++){let g=i[255-u];g|=g<<8,a[i[u]]=(g^g>>4^g>>5^g>>6^g>>7^99)&255}return a})(),by=iu.map((i,a)=>iu.indexOf(a)),my=i=>i<<24|i>>>8,su=i=>i<<8|i>>>24;function qf(i,a){if(i.length!==256)throw new Error("Wrong sbox length");const u=new Uint32Array(256).map((j,F)=>a(i[F])),g=u.map(su),m=g.map(su),k=m.map(su),B=new Uint32Array(256*256),M=new Uint32Array(256*256),U=new Uint16Array(256*256);for(let j=0;j<256;j++)for(let F=0;F<256;F++){const q=j*256+F;B[q]=u[j]^g[F],M[q]=m[j]^k[F],U[q]=i[j]<<8|i[F]}return{sbox:i,sbox2:U,T0:u,T1:g,T2:m,T3:k,T01:B,T23:M}}const au=qf(iu,i=>qo(i,3)<<24|i<<16|i<<8|qo(i,2)),Vf=qf(by,i=>qo(i,11)<<24|qo(i,13)<<16|qo(i,9)<<8|qo(i,14)),yy=(()=>{const i=new Uint8Array(16);for(let a=0,u=1;a<16;a++,u=ou(u))i[a]=u;return i})();function Ff(i){po(i);const a=i.length;if(![16,24,32].includes(a))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${a}`);const{sbox2:u}=au,g=Wt(i),m=g.length,k=M=>An(u,M,M,M,M),B=new Uint32Array(a+28);B.set(g);for(let M=m;M<B.length;M++){let U=B[M-1];M%m===0?U=k(my(U))^yy[M/m-1]:m>6&&M%m===4&&(U=k(U)),B[M]=B[M-m]^U}return B}function vy(i){const a=Ff(i),u=a.slice(),g=a.length,{sbox2:m}=au,{T0:k,T1:B,T2:M,T3:U}=Vf;for(let j=0;j<g;j+=4)for(let F=0;F<4;F++)u[j+F]=a[g-j-4+F];a.fill(0);for(let j=4;j<g-4;j++){const F=u[j],q=An(m,F,F,F,F);u[j]=k[q&255]^B[q>>>8&255]^M[q>>>16&255]^U[q>>>24]}return u}function Ar(i,a,u,g,m,k){return i[u<<8&65280|g>>>8&255]^a[m>>>8&65280|k>>>24&255]}function An(i,a,u,g,m){return i[a&255|u&65280]|i[g>>>16&255|m>>>16&65280]<<16}function Kf(i,a,u,g,m){const{sbox2:k,T01:B,T23:M}=au;let U=0;a^=i[U++],u^=i[U++],g^=i[U++],m^=i[U++];const j=i.length/4-2;for(let ee=0;ee<j;ee++){const Y=i[U++]^Ar(B,M,a,u,g,m),te=i[U++]^Ar(B,M,u,g,m,a),ne=i[U++]^Ar(B,M,g,m,a,u),Q=i[U++]^Ar(B,M,m,a,u,g);a=Y,u=te,g=ne,m=Q}const F=i[U++]^An(k,a,u,g,m),q=i[U++]^An(k,u,g,m,a),X=i[U++]^An(k,g,m,a,u),J=i[U++]^An(k,m,a,u,g);return{s0:F,s1:q,s2:X,s3:J}}function _y(i,a,u,g,m){const{sbox2:k,T01:B,T23:M}=Vf;let U=0;a^=i[U++],u^=i[U++],g^=i[U++],m^=i[U++];const j=i.length/4-2;for(let ee=0;ee<j;ee++){const Y=i[U++]^Ar(B,M,a,m,g,u),te=i[U++]^Ar(B,M,u,a,m,g),ne=i[U++]^Ar(B,M,g,u,a,m),Q=i[U++]^Ar(B,M,m,g,u,a);a=Y,u=te,g=ne,m=Q}const F=i[U++]^An(k,a,m,g,u),q=i[U++]^An(k,u,a,m,g),X=i[U++]^An(k,g,u,a,m),J=i[U++]^An(k,m,g,u,a);return{s0:F,s1:q,s2:X,s3:J}}function Wf(i,a){if(!a)return new Uint8Array(i);if(po(a),a.length<i)throw new Error(`aes: wrong destination length, expected at least ${i}, got: ${a.length}`);return a}function Ey(i){if(po(i),i.length%kr!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${kr}`)}function ky(i,a,u){let g=i.length;const m=g%kr;if(!a&&m!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const k=Wt(i);if(a){let U=kr-m;U||(U=kr),g=g+U}const B=Wf(g,u),M=Wt(B);return{b:k,o:M,out:B}}function Ay(i,a){if(!a)return i;const u=i.length;if(!u)throw new Error("aes/pcks5: empty ciphertext not allowed");const g=i[u-1];if(g<=0||g>16)throw new Error(`aes/pcks5: wrong padding byte: ${g}`);const m=i.subarray(0,-g);for(let k=0;k<g;k++)if(i[u-k-1]!==g)throw new Error("aes/pcks5: wrong padding");return m}function Sy(i){const a=new Uint8Array(16),u=Wt(a);a.set(i);const g=kr-i.length;for(let m=kr-g;m<kr;m++)a[m]=g;return u}const Gf=ly({blockSize:16,nonceLength:16},function(i,a,u={}){po(i),po(a,16);const g=!u.disablePadding;return{encrypt:(m,k)=>{const B=Ff(i),{b:M,o:U,out:j}=ky(m,g,k),F=Wt(a);let q=F[0],X=F[1],J=F[2],ee=F[3],Y=0;for(;Y+4<=M.length;)q^=M[Y+0],X^=M[Y+1],J^=M[Y+2],ee^=M[Y+3],{s0:q,s1:X,s2:J,s3:ee}=Kf(B,q,X,J,ee),U[Y++]=q,U[Y++]=X,U[Y++]=J,U[Y++]=ee;if(g){const te=Sy(m.subarray(Y*4));q^=te[0],X^=te[1],J^=te[2],ee^=te[3],{s0:q,s1:X,s2:J,s3:ee}=Kf(B,q,X,J,ee),U[Y++]=q,U[Y++]=X,U[Y++]=J,U[Y++]=ee}return B.fill(0),j},decrypt:(m,k)=>{Ey(m);const B=vy(i),M=Wt(a),U=Wf(m.length,k),j=Wt(m),F=Wt(U);let q=M[0],X=M[1],J=M[2],ee=M[3];for(let Y=0;Y+4<=j.length;){const te=q,ne=X,Q=J,ue=ee;q=j[Y+0],X=j[Y+1],J=j[Y+2],ee=j[Y+3];const{s0:_e,s1:ke,s2:le,s3:ce}=_y(B,q,X,J,ee);F[Y++]=_e^te,F[Y++]=ke^ne,F[Y++]=le^Q,F[Y++]=ce^ue}return B.fill(0),Ay(U,g)}}});/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Vo(i){if(!Number.isSafeInteger(i))throw new Error(`Wrong integer: ${i}`)}function Vn(...i){const a=(m,k)=>B=>m(k(B)),u=Array.from(i).reverse().reduce((m,k)=>m?a(m,k.encode):k.encode,void 0),g=i.reduce((m,k)=>m?a(m,k.decode):k.decode,void 0);return{encode:u,decode:g}}function Fn(i){return{encode:a=>{if(!Array.isArray(a)||a.length&&typeof a[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return a.map(u=>{if(Vo(u),u<0||u>=i.length)throw new Error(`Digit index outside alphabet: ${u} (alphabet: ${i.length})`);return i[u]})},decode:a=>{if(!Array.isArray(a)||a.length&&typeof a[0]!="string")throw new Error("alphabet.decode input should be array of strings");return a.map(u=>{if(typeof u!="string")throw new Error(`alphabet.decode: not string element=${u}`);const g=i.indexOf(u);if(g===-1)throw new Error(`Unknown letter: "${u}". Allowed: ${i}`);return g})}}}function Kn(i=""){if(typeof i!="string")throw new Error("join separator should be string");return{encode:a=>{if(!Array.isArray(a)||a.length&&typeof a[0]!="string")throw new Error("join.encode input should be array of strings");for(let u of a)if(typeof u!="string")throw new Error(`join.encode: non-string input=${u}`);return a.join(i)},decode:a=>{if(typeof a!="string")throw new Error("join.decode input should be string");return a.split(i)}}}function Us(i,a="="){if(Vo(i),typeof a!="string")throw new Error("padding chr should be string");return{encode(u){if(!Array.isArray(u)||u.length&&typeof u[0]!="string")throw new Error("padding.encode input should be array of strings");for(let g of u)if(typeof g!="string")throw new Error(`padding.encode: non-string input=${g}`);for(;u.length*i%8;)u.push(a);return u},decode(u){if(!Array.isArray(u)||u.length&&typeof u[0]!="string")throw new Error("padding.encode input should be array of strings");for(let m of u)if(typeof m!="string")throw new Error(`padding.decode: non-string input=${m}`);let g=u.length;if(g*i%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;g>0&&u[g-1]===a;g--)if(!((g-1)*i%8))throw new Error("Invalid padding: string has too much padding");return u.slice(0,g)}}}function Zf(i){if(typeof i!="function")throw new Error("normalize fn should be function");return{encode:a=>a,decode:a=>i(a)}}function Yf(i,a,u){if(a<2)throw new Error(`convertRadix: wrong from=${a}, base cannot be less than 2`);if(u<2)throw new Error(`convertRadix: wrong to=${u}, base cannot be less than 2`);if(!Array.isArray(i))throw new Error("convertRadix: data should be array");if(!i.length)return[];let g=0;const m=[],k=Array.from(i);for(k.forEach(B=>{if(Vo(B),B<0||B>=a)throw new Error(`Wrong integer: ${B}`)});;){let B=0,M=!0;for(let U=g;U<k.length;U++){const j=k[U],F=a*B+j;if(!Number.isSafeInteger(F)||a*B/a!==B||F-j!==a*B)throw new Error("convertRadix: carry overflow");if(B=F%u,k[U]=Math.floor(F/u),!Number.isSafeInteger(k[U])||k[U]*u+B!==F)throw new Error("convertRadix: carry overflow");if(M)k[U]?M=!1:g=U;else continue}if(m.push(B),M)break}for(let B=0;B<i.length-1&&i[B]===0;B++)m.push(0);return m.reverse()}const Jf=(i,a)=>a?Jf(a,i%a):i,Ms=(i,a)=>i+(a-Jf(i,a));function cu(i,a,u,g){if(!Array.isArray(i))throw new Error("convertRadix2: data should be array");if(a<=0||a>32)throw new Error(`convertRadix2: wrong from=${a}`);if(u<=0||u>32)throw new Error(`convertRadix2: wrong to=${u}`);if(Ms(a,u)>32)throw new Error(`convertRadix2: carry overflow from=${a} to=${u} carryBits=${Ms(a,u)}`);let m=0,k=0;const B=2**u-1,M=[];for(const U of i){if(Vo(U),U>=2**a)throw new Error(`convertRadix2: invalid data word=${U} from=${a}`);if(m=m<<a|U,k+a>32)throw new Error(`convertRadix2: carry overflow pos=${k} from=${a}`);for(k+=a;k>=u;k-=u)M.push((m>>k-u&B)>>>0);m&=2**k-1}if(m=m<<u-k&B,!g&&k>=a)throw new Error("Excess padding");if(!g&&m)throw new Error(`Non-zero padding: ${m}`);return g&&k>0&&M.push(m>>>0),M}function $y(i){return Vo(i),{encode:a=>{if(!(a instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Yf(Array.from(a),2**8,i)},decode:a=>{if(!Array.isArray(a)||a.length&&typeof a[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Yf(a,i,2**8))}}}function Sr(i,a=!1){if(Vo(i),i<=0||i>32)throw new Error("radix2: bits should be in (0..32]");if(Ms(8,i)>32||Ms(i,8)>32)throw new Error("radix2: carry overflow");return{encode:u=>{if(!(u instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return cu(Array.from(u),8,i,!a)},decode:u=>{if(!Array.isArray(u)||u.length&&typeof u[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(cu(u,i,8,a))}}}function Xf(i){if(typeof i!="function")throw new Error("unsafeWrapper fn should be function");return function(...a){try{return i.apply(null,a)}catch{}}}const xy=Vn(Sr(4),Fn("0123456789ABCDEF"),Kn("")),Ty=Vn(Sr(5),Fn("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Us(5),Kn(""));Vn(Sr(5),Fn("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Us(5),Kn("")),Vn(Sr(5),Fn("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Kn(""),Zf(i=>i.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const Hi=Vn(Sr(6),Fn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Us(6),Kn("")),Py=Vn(Sr(6),Fn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Us(6),Kn("")),uu=i=>Vn($y(58),Fn(i),Kn("")),lu=uu("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");uu("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),uu("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const Qf=[0,2,3,5,6,7,9,10,11],By={encode(i){let a="";for(let u=0;u<i.length;u+=8){const g=i.subarray(u,u+8);a+=lu.encode(g).padStart(Qf[g.length],"1")}return a},decode(i){let a=[];for(let u=0;u<i.length;u+=11){const g=i.slice(u,u+11),m=Qf.indexOf(g.length),k=lu.decode(g);for(let B=0;B<k.length-m;B++)if(k[B]!==0)throw new Error("base58xmr: wrong padding");a=a.concat(Array.from(k.slice(k.length-m)))}return Uint8Array.from(a)}},du=Vn(Fn("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Kn("")),eh=[996825010,642813549,513874426,1027748829,705979059];function ji(i){const a=i>>25;let u=(i&33554431)<<5;for(let g=0;g<eh.length;g++)(a>>g&1)===1&&(u^=eh[g]);return u}function th(i,a,u=1){const g=i.length;let m=1;for(let k=0;k<g;k++){const B=i.charCodeAt(k);if(B<33||B>126)throw new Error(`Invalid prefix (${i})`);m=ji(m)^B>>5}m=ji(m);for(let k=0;k<g;k++)m=ji(m)^i.charCodeAt(k)&31;for(let k of a)m=ji(m)^k;for(let k=0;k<6;k++)m=ji(m);return m^=u,du.encode(cu([m%2**30],30,5,!1))}function nh(i){const a=i==="bech32"?1:734539939,u=Sr(5),g=u.decode,m=u.encode,k=Xf(g);function B(F,q,X=90){if(typeof F!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof F}`);if(!Array.isArray(q)||q.length&&typeof q[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof q}`);const J=F.length+7+q.length;if(X!==!1&&J>X)throw new TypeError(`Length ${J} exceeds limit ${X}`);return F=F.toLowerCase(),`${F}1${du.encode(q)}${th(F,q,a)}`}function M(F,q=90){if(typeof F!="string")throw new Error(`bech32.decode input should be string, not ${typeof F}`);if(F.length<8||q!==!1&&F.length>q)throw new TypeError(`Wrong string length: ${F.length} (${F}). Expected (8..${q})`);const X=F.toLowerCase();if(F!==X&&F!==F.toUpperCase())throw new Error("String must be lowercase or uppercase");F=X;const J=F.lastIndexOf("1");if(J===0||J===-1)throw new Error('Letter "1" must be present between prefix and data only');const ee=F.slice(0,J),Y=F.slice(J+1);if(Y.length<6)throw new Error("Data must be at least 6 characters long");const te=du.decode(Y).slice(0,-6),ne=th(ee,te,a);if(!Y.endsWith(ne))throw new Error(`Invalid checksum in ${F}: expected "${ne}"`);return{prefix:ee,words:te}}const U=Xf(M);function j(F){const{prefix:q,words:X}=M(F,!1);return{prefix:q,words:X,bytes:g(X)}}return{encode:B,decode:M,decodeToBytes:j,decodeUnsafe:U,fromWords:g,fromWordsUnsafe:k,toWords:m}}const rh=nh("bech32");nh("bech32m");const Cy={encode:i=>new TextDecoder().decode(i),decode:i=>new TextEncoder().encode(i)},Ly=Vn(Sr(4),Fn("0123456789abcdef"),Kn(""),Zf(i=>{if(typeof i!="string"||i.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof i} with length ${i.length}`);return i.toLowerCase()}));`${Object.keys({utf8:Cy,hex:Ly,base16:xy,base32:Ty,base64:Hi,base64url:Py,base58:lu,base58xmr:By}).join(", ")}`;var go=Symbol("verified"),Iy=i=>i instanceof Object;function Oy(i){if(!Iy(i)||typeof i.kind!="number"||typeof i.content!="string"||typeof i.created_at!="number"||typeof i.pubkey!="string"||!i.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(i.tags))return!1;for(let a=0;a<i.tags.length;a++){let u=i.tags[a];if(!Array.isArray(u))return!1;for(let g=0;g<u.length;g++)if(typeof u[g]=="object")return!1}return!0}var Ny=new TextDecoder("utf-8"),oh=new TextEncoder;function Di(i){i.indexOf("://")===-1&&(i="wss://"+i);let a=new URL(i);return a.pathname=a.pathname.replace(/\/+/g,"/"),a.pathname.endsWith("/")&&(a.pathname=a.pathname.slice(0,-1)),(a.port==="80"&&a.protocol==="ws:"||a.port==="443"&&a.protocol==="wss:")&&(a.port=""),a.searchParams.sort(),a.hash="",a.toString()}var Ry=class{constructor(i){ae(this,"value"),ae(this,"next",null),ae(this,"prev",null),this.value=i}},zy=class{constructor(){ae(this,"first"),ae(this,"last"),this.first=null,this.last=null}enqueue(i){const a=new Ry(i);return this.last?this.last===this.first?(this.last=a,this.last.prev=this.first,this.first.next=a):(a.prev=this.last,this.last.next=a,this.last=a):(this.first=a,this.last=a),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const a=this.first;return this.first=null,this.last=null,a.value}const i=this.first;return this.first=i.next,i.value}},Uy=class{generateSecretKey(){return Rt.utils.randomPrivateKey()}getPublicKey(i){return Nt(Rt.getPublicKey(i))}finalizeEvent(i,a){const u=i;return u.pubkey=Nt(Rt.getPublicKey(a)),u.id=fu(u),u.sig=Nt(Rt.sign(fu(u),a)),u[go]=!0,u}verifyEvent(i){if(typeof i[go]=="boolean")return i[go];const a=fu(i);if(a!==i.id)return i[go]=!1,!1;try{const u=Rt.verify(i.sig,a,i.pubkey);return i[go]=u,u}catch{return i[go]=!1,!1}}};function My(i){if(!Oy(i))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,i.pubkey,i.created_at,i.kind,i.tags,i.content])}function fu(i){let a=eu(oh.encode(My(i)));return Nt(a)}var Hs=new Uy,Hy=Hs.generateSecretKey,jy=Hs.getPublicKey,Dy=Hs.finalizeEvent,ih=Hs.verifyEvent;async function qy(i,a,u){const g=i instanceof Uint8Array?Nt(i):i,m=Ri.getSharedSecret(g,"02"+a),k=sh(m);let B=Uint8Array.from(Nb(16)),M=oh.encode(u),U=Gf(k,B).encrypt(M),j=Hi.encode(new Uint8Array(U)),F=Hi.encode(new Uint8Array(B.buffer));return`${j}?iv=${F}`}async function Vy(i,a,u){const g=i instanceof Uint8Array?Nt(i):i;let[m,k]=u.split("?iv="),B=Ri.getSharedSecret(g,"02"+a),M=sh(B),U=Hi.decode(k),j=Hi.decode(m),F=Gf(M,U).decrypt(j);return Ny.decode(F)}function sh(i){return i.slice(1,33)}var Fy=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,Ky;try{Ky=fetch}catch{}var Wy=22242,hu=24133,Gy=31990;function Zy(i,a){if(i.ids&&i.ids.indexOf(a.id)===-1&&!i.ids.some(u=>a.id.startsWith(u))||i.kinds&&i.kinds.indexOf(a.kind)===-1||i.authors&&i.authors.indexOf(a.pubkey)===-1&&!i.authors.some(u=>a.pubkey.startsWith(u)))return!1;for(let u in i)if(u[0]==="#"){let g=u.slice(1),m=i[`#${g}`];if(m&&!a.tags.find(([k,B])=>k===u.slice(1)&&m.indexOf(B)!==-1))return!1}return!(i.since&&a.created_at<i.since||i.until&&a.created_at>i.until)}function Yy(i,a){for(let u=0;u<i.length;u++)if(Zy(i[u],a))return!0;return!1}function Jy(i,a){let u=a.length+3,g=i.indexOf(`"${a}":`)+u,m=i.slice(g).indexOf('"')+g+1;return i.slice(m,m+64)}function Xy(i){let a=i.slice(0,22).indexOf('"EVENT"');if(a===-1)return null;let u=i.slice(a+7+1).indexOf('"');if(u===-1)return null;let g=a+7+1+u,m=i.slice(g+1,80).indexOf('"');if(m===-1)return null;let k=g+1+m;return i.slice(g+1,k)}function Qy(i,a){return{kind:Wy,created_at:Math.floor(Date.now()/1e3),tags:[["relay",i],["challenge",a]],content:""}}async function e1(){return new Promise(i=>{const a=new MessageChannel,u=()=>{a.port1.removeEventListener("message",u),i()};a.port1.addEventListener("message",u),a.port2.postMessage(0),a.port1.start()})}var t1=i=>(i[go]=!0,!0),ah;try{ah=WebSocket}catch{}var ch=class{constructor(i,a){ae(this,"url"),ae(this,"_connected",!1),ae(this,"onclose",null),ae(this,"onnotice",u=>console.debug(`NOTICE from ${this.url}: ${u}`)),ae(this,"_onauth",null),ae(this,"baseEoseTimeout",4400),ae(this,"connectionTimeout",4400),ae(this,"openSubs",new Map),ae(this,"connectionTimeoutHandle"),ae(this,"connectionPromise"),ae(this,"openCountRequests",new Map),ae(this,"openEventPublishes",new Map),ae(this,"ws"),ae(this,"incomingMessageQueue",new zy),ae(this,"queueRunning",!1),ae(this,"challenge"),ae(this,"serial",0),ae(this,"verifyEvent"),this.url=Di(i),this.verifyEvent=a.verifyEvent}static async connect(i,a){const u=new ch(i,a);return await u.connect(),u}closeAllSubscriptions(i){for(let[a,u]of this.openSubs)u.close(i);this.openSubs.clear();for(let[a,u]of this.openEventPublishes)u.reject(new Error(i));this.openEventPublishes.clear();for(let[a,u]of this.openCountRequests)u.reject(new Error(i));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((i,a)=>{this.connectionTimeoutHandle=setTimeout(()=>{var u;a("connection timed out"),this.connectionPromise=void 0,(u=this.onclose)==null||u.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new ah(this.url)}catch(u){a(u);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,i()},this.ws.onerror=u=>{var g;a(u.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(g=this.onclose)==null||g.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var u;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(u=this.onclose)==null||u.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await e1();this.queueRunning=!1}handleNext(){var i,a,u;const g=this.incomingMessageQueue.dequeue();if(!g)return!1;const m=Xy(g);if(m){const k=this.openSubs.get(m);if(!k)return;const B=Jy(g,"id"),M=(i=k.alreadyHaveEvent)==null?void 0:i.call(k,B);if((a=k.receivedEvent)==null||a.call(k,this,B),M)return}try{let k=JSON.parse(g);switch(k[0]){case"EVENT":{const B=this.openSubs.get(k[1]),M=k[2];this.verifyEvent(M)&&Yy(B.filters,M)&&B.onevent(M);return}case"COUNT":{const B=k[1],M=k[2],U=this.openCountRequests.get(B);U&&(U.resolve(M.count),this.openCountRequests.delete(B));return}case"EOSE":{const B=this.openSubs.get(k[1]);if(!B)return;B.receivedEose();return}case"OK":{const B=k[1],M=k[2],U=k[3],j=this.openEventPublishes.get(B);M?j.resolve(U):j.reject(new Error(U)),this.openEventPublishes.delete(B);return}case"CLOSED":{const B=k[1],M=this.openSubs.get(B);if(!M)return;M.closed=!0,M.close(k[2]);return}case"NOTICE":this.onnotice(k[1]);return;case"AUTH":{this.challenge=k[1],(u=this._onauth)==null||u.call(this,k[1]);return}}}catch{return}}async send(i){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var a;(a=this.ws)==null||a.send(i)})}async auth(i){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const a=await i(Qy(this.url,this.challenge)),u=new Promise((g,m)=>{this.openEventPublishes.set(a.id,{resolve:g,reject:m})});return this.send('["AUTH",'+JSON.stringify(a)+"]"),u}async publish(i){const a=new Promise((u,g)=>{this.openEventPublishes.set(i.id,{resolve:u,reject:g})});return this.send('["EVENT",'+JSON.stringify(i)+"]"),a}async count(i,a){this.serial++;const u=(a==null?void 0:a.id)||"count:"+this.serial,g=new Promise((m,k)=>{this.openCountRequests.set(u,{resolve:m,reject:k})});return this.send('["COUNT","'+u+'",'+JSON.stringify(i)+"]"),g}subscribe(i,a){const u=this.prepareSubscription(i,a);return u.fire(),u}prepareSubscription(i,a){this.serial++;const u=a.id||"sub:"+this.serial,g=new n1(this,u,i,a);return this.openSubs.set(u,g),g}close(){var i;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(i=this.ws)==null||i.close()}_onmessage(i){this.incomingMessageQueue.enqueue(i.data),this.queueRunning||this.runQueue()}},n1=class{constructor(i,a,u,g){ae(this,"relay"),ae(this,"id"),ae(this,"closed",!1),ae(this,"eosed",!1),ae(this,"filters"),ae(this,"alreadyHaveEvent"),ae(this,"receivedEvent"),ae(this,"onevent"),ae(this,"oneose"),ae(this,"onclose"),ae(this,"eoseTimeout"),ae(this,"eoseTimeoutHandle"),this.relay=i,this.filters=u,this.id=a,this.alreadyHaveEvent=g.alreadyHaveEvent,this.receivedEvent=g.receivedEvent,this.eoseTimeout=g.eoseTimeout||i.baseEoseTimeout,this.oneose=g.oneose,this.onclose=g.onclose,this.onevent=g.onevent||(m=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,m)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var i;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(i=this.oneose)==null||i.call(this))}close(i="closed by caller"){var a;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(a=this.onclose)==null||a.call(this,i)}},r1=class{constructor(i){ae(this,"relays",new Map),ae(this,"seenOn",new Map),ae(this,"trackRelays",!1),ae(this,"verifyEvent"),ae(this,"trustedRelayURLs",new Set),this.verifyEvent=i.verifyEvent}async ensureRelay(i,a){i=Di(i);let u=this.relays.get(i);return u||(u=new ch(i,{verifyEvent:this.trustedRelayURLs.has(i)?t1:this.verifyEvent}),a!=null&&a.connectionTimeout&&(u.connectionTimeout=a.connectionTimeout),this.relays.set(i,u)),await u.connect(),u}close(i){i.map(Di).forEach(a=>{var u;(u=this.relays.get(a))==null||u.close()})}subscribeMany(i,a,u){return this.subscribeManyMap(Object.fromEntries(i.map(g=>[g,a])),u)}subscribeManyMap(i,a){this.trackRelays&&(a.receivedEvent=(q,X)=>{let J=this.seenOn.get(X);J||(J=new Set,this.seenOn.set(X,J)),J.add(q)});const u=new Set,g=[],m=Object.keys(i).length,k=[];let B=q=>{var X;k[q]=!0,k.filter(J=>J).length===m&&((X=a.oneose)==null||X.call(a),B=()=>{})};const M=[];let U=(q,X)=>{var J;B(q),M[q]=X,M.filter(ee=>ee).length===m&&((J=a.onclose)==null||J.call(a,M),U=()=>{})};const j=q=>{var X;if((X=a.alreadyHaveEvent)!=null&&X.call(a,q))return!0;const J=u.has(q);return u.add(q),J},F=Promise.all(Object.entries(i).map(async(q,X,J)=>{if(J.indexOf(q)!==X){U(X,"duplicate url");return}let[ee,Y]=q;ee=Di(ee);let te;try{te=await this.ensureRelay(ee,{connectionTimeout:a.maxWait?Math.max(a.maxWait*.8,a.maxWait-1e3):void 0})}catch(Q){U(X,(Q==null?void 0:Q.message)||String(Q));return}let ne=te.subscribe(Y,{...a,oneose:()=>B(X),onclose:Q=>U(X,Q),alreadyHaveEvent:j,eoseTimeout:a.maxWait});g.push(ne)}));return{async close(){await F,g.forEach(q=>{q.close()})}}}subscribeManyEose(i,a,u){const g=this.subscribeMany(i,a,{...u,oneose(){g.close()}});return g}async querySync(i,a,u){return new Promise(async g=>{const m=[];this.subscribeManyEose(i,[a],{...u,onevent(k){m.push(k)},onclose(k){g(m)}})})}async get(i,a,u){a.limit=1;const g=await this.querySync(i,a,u);return g.sort((m,k)=>k.created_at-m.created_at),g[0]||null}publish(i,a){return i.map(Di).map(async(u,g,m)=>m.indexOf(u)!==g?Promise.reject("duplicate url"):(await this.ensureRelay(u)).publish(a))}},o1=class extends r1{constructor(){super({verifyEvent:ih})}},uh;try{uh=fetch}catch{}var js=/^bunker:\/\/([0-9a-f]{64})\??([?\/\w:.=&%]*)$/;async function i1(i){let a=i.match(js);if(a)try{const u=a[1],g=new URLSearchParams(a[2]);return{pubkey:u,relays:g.getAll("relay"),secret:g.get("secret")}}catch{}return lh(i)}async function lh(i){const a=i.match(Fy);if(!a)return null;const[u,g="_",m]=a;try{const k=`https://${m}/.well-known/nostr.json?name=${g}`,B=await(await uh(k,{redirect:"error"})).json();let M=B.names[g],U=B.nip46[M]||[];return{pubkey:M,relays:U,secret:null}}catch{return null}}var dh=class{constructor(i,a,u={}){if(ae(this,"pool"),ae(this,"subCloser"),ae(this,"isOpen"),ae(this,"serial"),ae(this,"idPrefix"),ae(this,"listeners"),ae(this,"waitingForAuth"),ae(this,"secretKey"),ae(this,"bp"),a.relays.length===0)throw new Error("no relays are specified for this bunker");this.pool=u.pool||new o1,this.secretKey=i,this.bp=a,this.isOpen=!1,this.idPrefix=Math.random().toString(36).substring(7),this.serial=0,this.listeners={},this.waitingForAuth={};const g=this.listeners,m=this.waitingForAuth;this.subCloser=this.pool.subscribeMany(this.bp.relays,[{kinds:[hu],"#p":[jy(this.secretKey)]}],{async onevent(k){const{id:B,result:M,error:U}=JSON.parse(await Vy(i,k.pubkey,k.content));if(M==="auth_url"&&m[B]){delete m[B],u.onauth?u.onauth(U):console.warn(`nostr-tools/nip46: remote signer ${a.pubkey} tried to send an "auth_url"='${U}' but there was no onauth() callback configured.`);return}let j=g[B];j&&(U?j.reject(U):M&&j.resolve(M),delete g[B])}}),this.isOpen=!0}async close(){this.isOpen=!1,this.subCloser.close()}async sendRequest(i,a){return new Promise(async(u,g)=>{try{if(!this.isOpen)throw new Error("this signer is not open anymore, create a new one");this.serial++;const m=`${this.idPrefix}-${this.serial}`,k=await qy(this.secretKey,this.bp.pubkey,JSON.stringify({id:m,method:i,params:a})),B=Dy({kind:hu,tags:[["p",this.bp.pubkey]],content:k,created_at:Math.floor(Date.now()/1e3)},this.secretKey);this.listeners[m]={resolve:u,reject:g},this.waitingForAuth[m]=!0,await Promise.any(this.pool.publish(this.bp.relays,B))}catch(m){g(m)}})}async ping(){let i=await this.sendRequest("ping",[]);if(i!=="pong")throw new Error(`result is not pong: ${i}`)}async connect(){await this.sendRequest("connect",[this.bp.pubkey,this.bp.secret||""])}async getPublicKey(){return this.bp.pubkey}async getRelays(){return JSON.parse(await this.sendRequest("get_relays",[]))}async signEvent(i){let a=await this.sendRequest("sign_event",[JSON.stringify(i)]),u=JSON.parse(a);if(u.pubkey===this.bp.pubkey&&ih(u))return u;throw new Error(`event returned from bunker is improperly signed: ${JSON.stringify(u)}`)}async nip04Encrypt(i,a){return await this.sendRequest("nip04_encrypt",[i,a])}async nip04Decrypt(i,a){return await this.sendRequest("nip04_decrypt",[i,a])}async nip44GetKey(i){let a=await this.sendRequest("nip44_get_key",[i]);return Ic(a)}async nip44Encrypt(i,a){return await this.sendRequest("nip44_encrypt",[i,a])}async nip44Decrypt(i,a){return await this.sendRequest("nip44_encrypt",[i,a])}};async function s1(i,a,u,g,m){let k=Hy(),B=new dh(k,i.bunkerPointer,a),M=await B.sendRequest("create_account",[u,g,""]);return B.bp.pubkey=M,await B.connect(),B}async function a1(i,a){const u=await i.querySync(a,{kinds:[Gy],"#k":[hu.toString()]});return u.sort((g,m)=>m.created_at-g.created_at),(await Promise.all(u.map(async(g,m)=>{try{const k=JSON.parse(g.content);try{if(u.findIndex(M=>JSON.parse(M.content).nip05===k.nip05)!==m)return}catch{}const B=await lh(k.nip05);if(B&&B.pubkey===g.pubkey&&B.relays.length)return{bunkerPointer:B,nip05:k.nip05,domain:k.nip05.split("@")[1],name:k.name||k.display_name,picture:k.picture,about:k.about,website:k.website,local:!1}}catch{return}}))).filter(g=>g!==void 0)}var fh=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,hh;try{hh=fetch}catch{}async function c1(i){var a;const u=i.match(fh);if(!u)return null;const[g,m="_",k]=u;try{const B=`https://${k}/.well-known/nostr.json?name=${m}`,M=await(await hh(B,{redirect:"error"})).json();let U=M.names[m];return U?{pubkey:U,relays:(a=M.relays)==null?void 0:a[U]}:null}catch{return null}}new TextDecoder("utf-8"),new TextEncoder;var u1=5e3;function l1(i){return f1("npub",Ic(i))}function d1(i,a){let u=rh.toWords(a);return rh.encode(i,u,u1)}function f1(i,a){return d1(i,a)}const Fo=[];function h1(i,a=c){let u;const g=new Set;function m(M){if(b(i,M)&&(i=M,u)){const U=!Fo.length;for(const j of g)j[1](),Fo.push(j,i);if(U){for(let j=0;j<Fo.length;j+=2)Fo[j][0](Fo[j+1]);Fo.length=0}}}function k(M){m(M(i))}function B(M,U=c){const j=[M,U];return g.add(j),g.size===1&&(u=a(m,k)||c),M(i),()=>{g.delete(j),g.size===0&&u&&(u(),u=null)}}return{set:m,update:k,subscribe:B}}const p1=i=>{const{subscribe:a,set:u}=h1(void 0,()=>{let g=window.matchMedia(i);u(g.matches);const m=()=>u(g.matches);return"addEventListener"in g?g.addEventListener("change",m):g.addListener(m),()=>{"removeEventListener"in g?g.removeEventListener("change",m):g.removeListener(m)}});return{subscribe:a}};function g1(i){let a,u,g;return{c(){a=E("svg"),u=E("circle"),g=E("path"),x(u,"class","opacity-25"),x(u,"cx","12"),x(u,"cy","12"),x(u,"r","10"),x(u,"stroke","currentColor"),x(u,"stroke-width","4"),x(g,"class","opacity-75"),x(g,"fill","currentColor"),x(g,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),x(a,"class","ml-2 h-5 w-5 animate-spin text-white"),x(a,"xmlns","http://www.w3.org/2000/svg"),x(a,"fill","none"),x(a,"viewBox","0 0 24 24")},m(m,k){N(m,a,k),I(a,u),I(a,g)},p:c,i:c,o:c,d(m){m&&l(a)}}}class ph extends tf{constructor(a){super(),ef(this,a,null,g1,b,{})}}const{window:pu}=H;function gh(i,a,u){const g=i.slice();return g[78]=a[u],g}function w1(i){let a,u,g,m,k,B,M,U,j,F,q,X,J=!i[20]&&!i[13]&&!i[14]&&!i[15]&&wh(i);const ee=[S1,A1,k1,E1,_1,v1,y1],Y=[];function te(ne,Q){return ne[13]?0:ne[14]?1:ne[15]?2:ne[20]?3:ne[17]?4:ne[21]?6:5}return M=te(i),U=Y[M]=ee[M](i),{c(){a=p("div"),u=p("button"),g=$(""),k=R(),J&&J.c(),B=R(),U.c(),x(u,"class",m="absolute right-2 top-0 cursor-pointer bg-transparent text-3xl text-"+i[0]+"-600"),x(a,"class",j="animate-show rounded-md bg-gradient-to-b px-8 py-8 shadow-[0_0px_30px_0px_rgba(0,0,0,0.6)] transition-all sm:w-96 from-"+i[0]+"-900 to-"+i[0]+"-700 "+i[27])},m(ne,Q){N(ne,a,Q),I(a,u),I(u,g),I(a,k),J&&J.m(a,null),I(a,B),Y[M].m(a,null),F=!0,q||(X=v(u,"click",function(){y(i[20]?i[32]:i[30])&&(i[20]?i[32]:i[30]).apply(this,arguments)}),q=!0)},p(ne,Q){i=ne,(!F||Q[0]&1&&m!==(m="absolute right-2 top-0 cursor-pointer bg-transparent text-3xl text-"+i[0]+"-600"))&&x(u,"class",m),!i[20]&&!i[13]&&!i[14]&&!i[15]?J?J.p(i,Q):(J=wh(i),J.c(),J.m(a,B)):J&&(J.d(1),J=null);let ue=M;M=te(i),M===ue?Y[M].p(i,Q):(yt(),Yt(Y[ue],1,1,()=>{Y[ue]=null}),Ot(),U=Y[M],U?U.p(i,Q):(U=Y[M]=ee[M](i),U.c()),St(U,1),U.m(a,null)),(!F||Q[0]&134217729&&j!==(j="animate-show rounded-md bg-gradient-to-b px-8 py-8 shadow-[0_0px_30px_0px_rgba(0,0,0,0.6)] transition-all sm:w-96 from-"+i[0]+"-900 to-"+i[0]+"-700 "+i[27]))&&x(a,"class",j)},i(ne){F||(St(U),F=!0)},o(ne){Yt(U),F=!1},d(ne){ne&&l(a),J&&J.d(),Y[M].d(),q=!1,X()}}}function b1(i){let a,u,g,m,k;const B=[L1,C1,B1,P1,T1],M=[];function U(j,F){return j[12]?0:!j[21]&&!j[2]?1:!j[21]&&j[2]?2:j[2]?4:3}return u=U(i),g=M[u]=B[u](i),{c(){a=p("div"),g.c(),x(a,"class",m="rounded px-2 py-2 shadow-[0_0px_10px_0px_rgba(0,0,0,0.3)] transition-all duration-200 bg-"+i[0]+"-700 hover:bg-"+i[0]+"-800 "+i[27])},m(j,F){N(j,a,F),M[u].m(a,null),k=!0},p(j,F){let q=u;u=U(j),u===q?M[u].p(j,F):(yt(),Yt(M[q],1,1,()=>{M[q]=null}),Ot(),g=M[u],g?g.p(j,F):(g=M[u]=B[u](j),g.c()),St(g,1),g.m(a,null)),(!k||F[0]&134217729&&m!==(m="rounded px-2 py-2 shadow-[0_0px_10px_0px_rgba(0,0,0,0.3)] transition-all duration-200 bg-"+j[0]+"-700 hover:bg-"+j[0]+"-800 "+j[27]))&&x(a,"class",m)},i(j){k||(St(g),k=!0)},o(j){Yt(g),k=!1},d(j){j&&l(a),M[u].d()}}}function m1(i){return{c,m:c,p:c,i:c,o:c,d:c}}function wh(i){let a,u,g,m,k;return{c(){a=p("button"),u=$("?"),x(a,"class",g="absolute bottom-1 right-3 cursor-pointer bg-transparent text-xl text-"+i[0]+"-600")},m(B,M){N(B,a,M),I(a,u),m||(k=v(a,"click",i[31]),m=!0)},p(B,M){M[0]&1&&g!==(g="absolute bottom-1 right-3 cursor-pointer bg-transparent text-xl text-"+B[0]+"-600")&&x(a,"class",g)},d(B){B&&l(a),m=!1,k()}}}function y1(i){let a,u,g,m,k,B,M=i[21].npub+"",U,j,F,q,X,J,ee,Y,te,ne,Q,ue=Rf(i[11])+"",_e,ke,le,ce=(i[21].picture||i[21].name)&&bh(i);return{c(){a=p("div"),u=p("div"),u.textContent="You are connected to Nostr as",g=R(),m=p("a"),ce&&ce.c(),k=R(),B=p("div"),U=$(M),F=R(),q=p("button"),X=$("Disconnect"),ee=R(),Y=p("div"),te=$("This webpage is using the public key:"),ne=p("br"),Q=R(),_e=$(ue),x(u,"class","mb-4 text-sm"),x(B,"class","block break-all"),x(m,"target","_blank"),x(m,"href",j="https://nosta.me/"+i[21].npub),x(m,"class","group text-white no-underline"),x(a,"class","text-center"),x(q,"class",J="my-2 mt-6 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),x(Y,"class","mt-6 block break-all text-center text-sm")},m(ie,fe){N(ie,a,fe),I(a,u),I(a,g),I(a,m),ce&&ce.m(m,null),I(m,k),I(m,B),I(B,U),N(ie,F,fe),N(ie,q,fe),I(q,X),N(ie,ee,fe),N(ie,Y,fe),I(Y,te),I(Y,ne),I(Y,Q),I(Y,_e),ke||(le=v(q,"click",i[34]),ke=!0)},p(ie,fe){ie[21].picture||ie[21].name?ce?ce.p(ie,fe):(ce=bh(ie),ce.c(),ce.m(m,k)):ce&&(ce.d(1),ce=null),fe[0]&2097152&&M!==(M=ie[21].npub+"")&&V(U,M),fe[0]&2097152&&j!==(j="https://nosta.me/"+ie[21].npub)&&x(m,"href",j),fe[0]&1&&J!==(J="my-2 mt-6 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white bg-"+ie[0]+"-900 hover:bg-"+ie[0]+"-950")&&x(q,"class",J),fe[0]&2048&&ue!==(ue=Rf(ie[11])+"")&&V(_e,ue)},i:c,o:c,d(ie){ie&&(l(a),l(F),l(q),l(ee),l(Y)),ce&&ce.d(),ke=!1,le()}}}function v1(i){let a,u,g,m,k,B,M,U,j,F,q,X,J,ee,Y,te,ne,Q=i[19]&&vh(i);const ue=[x1,$1],_e=[];function ke(ie,fe){return ie[12]?0:1}U=ke(i),j=_e[U]=ue[U](i);let le=i[12]&&i[16]&&_h(i),ce=!i[12]&&Eh(i);return{c(){a=p("div"),a.textContent="How do you want to connect to Nostr?",u=R(),g=p("form"),m=p("input"),k=R(),Q&&Q.c(),B=R(),M=p("button"),j.c(),X=R(),le&&le.c(),J=R(),ce&&ce.c(),ee=P(),x(a,"class","text-center text-lg"),x(m,"class","box-border w-full rounded px-2 py-1 text-lg text-neutral-800 outline-none"),x(m,"placeholder","user@provider or bunker://..."),m.autofocus=!0,m.disabled=i[12],x(m,"autocapitalize","none"),x(M,"class",F="mt-4 flex w-full cursor-pointer items-center justify-center rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),M.disabled=q=!i[26]||i[12],x(g,"class","mb-1 mt-4 flex flex-col")},m(ie,fe){N(ie,a,fe),N(ie,u,fe),N(ie,g,fe),I(g,m),i[52](m),O(m,i[4]),I(g,k),Q&&Q.m(g,null),I(g,B),I(g,M),_e[U].m(M,null),I(g,X),le&&le.m(g,null),N(ie,J,fe),ce&&ce.m(ie,fe),N(ie,ee,fe),Y=!0,m.focus(),te||(ne=[v(m,"input",i[53]),v(g,"submit",i[33])],te=!0)},p(ie,fe){(!Y||fe[0]&4096)&&(m.disabled=ie[12]),fe[0]&16&&m.value!==ie[4]&&O(m,ie[4]),ie[19]?Q?Q.p(ie,fe):(Q=vh(ie),Q.c(),Q.m(g,B)):Q&&(Q.d(1),Q=null);let Se=U;U=ke(ie),U!==Se&&(yt(),Yt(_e[Se],1,1,()=>{_e[Se]=null}),Ot(),j=_e[U],j||(j=_e[U]=ue[U](ie),j.c()),St(j,1),j.m(M,null)),(!Y||fe[0]&1&&F!==(F="mt-4 flex w-full cursor-pointer items-center justify-center rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+ie[0]+"-900 hover:bg-"+ie[0]+"-950"))&&x(M,"class",F),(!Y||fe[0]&67112960&&q!==(q=!ie[26]||ie[12]))&&(M.disabled=q),ie[12]&&ie[16]?le?le.p(ie,fe):(le=_h(ie),le.c(),le.m(g,null)):le&&(le.d(1),le=null),ie[12]?ce&&(ce.d(1),ce=null):ce?ce.p(ie,fe):(ce=Eh(ie),ce.c(),ce.m(ee.parentNode,ee))},i(ie){Y||(St(j),Y=!0)},o(ie){Yt(j),Y=!1},d(ie){ie&&(l(a),l(u),l(g),l(J),l(ee)),i[52](null),Q&&Q.d(),_e[U].d(),le&&le.d(),ce&&ce.d(ie),te=!1,h(ne)}}}function _1(i){let a,u,g,m,k,B,M,U,j,F,q,X,J,ee,Y,te,ne,Q,ue,_e,ke,le,ce=Xd(i[22]),ie=[];for(let fe=0;fe<ce.length;fe+=1)ie[fe]=kh(gh(i,ce,fe));return{c(){a=p("div"),a.textContent="Create a Nostr account",u=R(),g=p("form"),m=p("div"),k=p("input"),B=R(),M=p("div"),M.textContent="@",U=R(),j=p("select");for(let fe=0;fe<ie.length;fe+=1)ie[fe].c();F=R(),q=p("button"),X=$("Continue "),Y=R(),te=p("div"),ne=$("Do you already have a Nostr address?"),Q=p("br"),ue=R(),_e=p("button"),_e.textContent="Login now",x(a,"class","text-center text-lg"),x(k,"class","box-border w-40 rounded px-2 py-1 text-lg text-neutral-800 outline-none"),x(k,"placeholder","bob"),k.autofocus=!0,x(k,"autocapitalize","none"),x(M,"class","mx-2 text-2xl"),x(j,"class","box-border w-full rounded px-2 py-1 text-lg text-neutral-800 outline-none"),i[10]===void 0&&Me(()=>i[51].call(j)),x(m,"class","flex flex-row"),x(q,"class",J="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),q.disabled=ee=!i[10]||!i[9]||i[18],x(g,"class","mb-1 mt-4"),x(_e,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),x(te,"class","mt-6 text-center text-sm leading-3")},m(fe,Se){N(fe,a,Se),N(fe,u,Se),N(fe,g,Se),I(g,m),I(m,k),i[49](k),O(k,i[9]),I(m,B),I(m,M),I(m,U),I(m,j);for(let Be=0;Be<ie.length;Be+=1)ie[Be]&&ie[Be].m(j,null);S(j,i[10],!0),I(g,F),I(g,q),I(q,X),N(fe,Y,Se),N(fe,te,Se),I(te,ne),I(te,Q),I(te,ue),I(te,_e),k.focus(),ke||(le=[v(k,"input",i[50]),v(k,"input",i[38]),v(j,"change",i[51]),v(g,"submit",i[37]),v(_e,"click",i[36])],ke=!0)},p(fe,Se){if(Se[0]&512&&k.value!==fe[9]&&O(k,fe[9]),Se[0]&4194304){ce=Xd(fe[22]);let Be;for(Be=0;Be<ce.length;Be+=1){const at=gh(fe,ce,Be);ie[Be]?ie[Be].p(at,Se):(ie[Be]=kh(at),ie[Be].c(),ie[Be].m(j,null))}for(;Be<ie.length;Be+=1)ie[Be].d(1);ie.length=ce.length}Se[0]&4195328&&S(j,fe[10]),Se[0]&1&&J!==(J="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+fe[0]+"-900 hover:bg-"+fe[0]+"-950")&&x(q,"class",J),Se[0]&4457984&&ee!==(ee=!fe[10]||!fe[9]||fe[18])&&(q.disabled=ee)},i:c,o:c,d(fe){fe&&(l(a),l(u),l(g),l(Y),l(te)),i[49](null),w(ie,fe),ke=!1,h(le)}}}function E1(i){let a,u,g;return{c(){a=p("div"),a.textContent="What is that?",u=R(),g=p("div"),g.innerHTML=`<p class="mb mt-4">This widget is created with <i>window.nostr.js</i>, a small script
            you can drop in any page that already uses NIP-07 and make it also
            work with NIP-46 automatically when the user doesn&#39;t have an
            extension installed.
            <br/>
            It adds a small floating button on the side of the window that users
            can use to create Nostr accuonts or connect to their NIP-46 bunkers.</p> <p class="mt-4">This tool is opensource, get the code from the <a target="_blank" class="underline" href="https://github.com/fiatjaf/window.nostr.js">project&#39;s page</a>.</p> <p class="mt-4">You don&#39;t know what Nostr is?
            <a target="_blank" class="underline" href="https://www.nostr.com">Learn more</a>.</p>`,x(a,"class","text-center text-lg"),x(g,"class","text-base leading-5")},m(m,k){N(m,a,k),N(m,u,k),N(m,g,k)},p:c,i:c,o:c,d(m){m&&(l(a),l(u),l(g))}}}function k1(i){let a,u,g,m,k,B,M=new URL(i[15]).host+"",U,j,F,q,X,J,ee,Y,te,ne;return{c(){a=p("div"),u=p("div"),u.textContent="An action requires your confirmation",g=R(),m=p("div"),k=$("Now you a new window will bring you to "),B=p("strong"),U=$(M),j=$(" where you can approve the current action. If nothing happens check that if your browser is blocking popups, pleaase."),F=p("br"),q=$(`
            After that you will be returned to this page.`),X=R(),J=p("button"),ee=$("Confirm action "),x(u,"class","text-center text-lg"),x(m,"class","mt-4 text-center text-sm leading-4"),x(J,"class",Y="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),x(a,"class","m-auto w-full")},m(Q,ue){N(Q,a,ue),I(a,u),I(a,g),I(a,m),I(m,k),I(m,B),I(B,U),I(m,j),I(m,F),I(m,q),I(a,X),I(a,J),I(J,ee),te||(ne=v(J,"click",i[48]),te=!0)},p(Q,ue){ue[0]&32768&&M!==(M=new URL(Q[15]).host+"")&&V(U,M),ue[0]&1&&Y!==(Y="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+Q[0]+"-900 hover:bg-"+Q[0]+"-950")&&x(J,"class",Y)},i:c,o:c,d(Q){Q&&l(a),te=!1,ne()}}}function A1(i){let a,u,g,m,k,B,M=new URL(i[14]).host+"",U,j,F,q,X,J,ee,Y,te,ne;return{c(){a=p("div"),u=p("div"),u.textContent="Login into a Nostr account",g=R(),m=p("div"),k=$("Now you a new window will bring you to "),B=p("strong"),U=$(M),j=$(" where you can login and approve the permissions. If nothing happens check that if your browser is blocking popups, pleaase."),F=p("br"),q=$(`
            After that you will be returned to this page.`),X=R(),J=p("button"),ee=$("Login now "),x(u,"class","text-center text-lg"),x(m,"class","mt-4 text-center text-sm leading-4"),x(J,"class",Y="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),x(a,"class","m-auto w-full")},m(Q,ue){N(Q,a,ue),I(a,u),I(a,g),I(a,m),I(m,k),I(m,B),I(B,U),I(m,j),I(m,F),I(m,q),I(a,X),I(a,J),I(J,ee),te||(ne=v(J,"click",i[47]),te=!0)},p(Q,ue){ue[0]&16384&&M!==(M=new URL(Q[14]).host+"")&&V(U,M),ue[0]&1&&Y!==(Y="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+Q[0]+"-900 hover:bg-"+Q[0]+"-950")&&x(J,"class",Y)},i:c,o:c,d(Q){Q&&l(a),te=!1,ne()}}}function S1(i){let a,u,g,m,k,B,M=new URL(i[13]).host+"",U,j,F,q,X,J,ee,Y,te,ne;return{c(){a=p("div"),u=p("div"),u.textContent="Create a Nostr account",g=R(),m=p("div"),k=$("Now you a new window will bring you to "),B=p("strong"),U=$(M),j=$(" where the account creation will take place. If nothing happens check that if your browser is blocking popups, pleaase."),F=p("br"),q=$(`
            After that you will be returned to this page.`),X=R(),J=p("button"),ee=$("Start account creation "),x(u,"class","text-center text-lg"),x(m,"class","mt-4 text-center text-sm leading-4"),x(J,"class",Y="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),x(a,"class","m-auto w-full")},m(Q,ue){N(Q,a,ue),I(a,u),I(a,g),I(a,m),I(m,k),I(m,B),I(B,U),I(m,j),I(m,F),I(m,q),I(a,X),I(a,J),I(J,ee),te||(ne=v(J,"click",i[46]),te=!0)},p(Q,ue){ue[0]&8192&&M!==(M=new URL(Q[13]).host+"")&&V(U,M),ue[0]&1&&Y!==(Y="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+Q[0]+"-900 hover:bg-"+Q[0]+"-950")&&x(J,"class",Y)},i:c,o:c,d(Q){Q&&l(a),te=!1,ne()}}}function bh(i){let a,u,g=i[21].picture&&mh(i),m=i[21].name&&yh(i);return{c(){a=p("div"),g&&g.c(),u=R(),m&&m.c(),x(a,"class","mb-2 flex items-center justify-center gap-2")},m(k,B){N(k,a,B),g&&g.m(a,null),I(a,u),m&&m.m(a,null)},p(k,B){k[21].picture?g?g.p(k,B):(g=mh(k),g.c(),g.m(a,u)):g&&(g.d(1),g=null),k[21].name?m?m.p(k,B):(m=yh(k),m.c(),m.m(a,null)):m&&(m.d(1),m=null)},d(k){k&&l(a),g&&g.d(),m&&m.d()}}}function mh(i){let a,u,g;return{c(){a=p("img"),T(a.src,u=i[21].picture)||x(a,"src",u),x(a,"alt",""),x(a,"class",g="h-10 w-10 rounded-full border-2 border-solid border-transparent group-hover:border-"+i[0]+"-100")},m(m,k){N(m,a,k)},p(m,k){k[0]&2097152&&!T(a.src,u=m[21].picture)&&x(a,"src",u),k[0]&1&&g!==(g="h-10 w-10 rounded-full border-2 border-solid border-transparent group-hover:border-"+m[0]+"-100")&&x(a,"class",g)},d(m){m&&l(a)}}}function yh(i){let a,u=i[21].name+"",g;return{c(){a=p("div"),g=$(u),x(a,"class","text-3xl decoration-2 underline-offset-4 group-hover:underline")},m(m,k){N(m,a,k),I(a,g)},p(m,k){k[0]&2097152&&u!==(u=m[21].name+"")&&V(g,u)},d(m){m&&l(a)}}}function vh(i){let a,u;return{c(){a=p("div"),u=$(i[19]),x(a,"class","my-2 rounded bg-yellow-100 p-2 text-center text-sm leading-4 text-red-400")},m(g,m){N(g,a,m),I(a,u)},p(g,m){m[0]&524288&&V(u,g[19])},d(g){g&&l(a)}}}function $1(i){let a;return{c(){a=$("Connect ")},m(u,g){N(u,a,g)},i:c,o:c,d(u){u&&l(a)}}}function x1(i){let a,u,g;return u=new ph({}),{c(){a=$(`Connecting to bunker
              `),Qd(u.$$.fragment)},m(m,k){N(m,a,k),Tc(u,m,k),g=!0},i(m){g||(St(u.$$.fragment,m),g=!0)},o(m){Yt(u.$$.fragment,m),g=!1},d(m){m&&l(a),Pc(u,m)}}}function _h(i){let a,u,g,m,k;return{c(){a=p("div"),u=$(`Waiting too much?
              `),g=p("button"),g.textContent="Cancel the connection",x(g,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),x(a,"class","mt-6 text-center text-sm leading-3")},m(B,M){N(B,a,M),I(a,u),I(a,g),m||(k=v(g,"click",i[39]),m=!0)},p:c,d(B){B&&l(a),m=!1,k()}}}function Eh(i){let a,u,g,m,k,B,M;return{c(){a=p("div"),u=$("Do you need a Nostr account?"),g=p("br"),m=R(),k=p("button"),k.textContent="Sign up now",x(k,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),x(a,"class","mt-6 text-center text-sm leading-3")},m(U,j){N(U,a,j),I(a,u),I(a,g),I(a,m),I(a,k),B||(M=v(k,"click",i[35]),B=!0)},p:c,d(U){U&&l(a),B=!1,M()}}}function kh(i){let a,u,g;return{c(){a=p("option"),x(a,"label",u=i[78].domain),a.__value=g=i[78],O(a,a.__value),x(a,"class","px-2 py-1 text-lg")},m(m,k){N(m,a,k)},p(m,k){k[0]&4194304&&u!==(u=m[78].domain)&&x(a,"label",u),k[0]&4194304&&g!==(g=m[78])&&(a.__value=g,O(a,a.__value))},d(m){m&&l(a)}}}function T1(i){let a,u;return{c(){a=p("img"),T(a.src,u=i[21].picture)||x(a,"src",u),x(a,"alt",""),x(a,"class","h-6 w-6 rounded-full")},m(g,m){N(g,a,m)},p(g,m){m[0]&2097152&&!T(a.src,u=g[21].picture)&&x(a,"src",u)},i:c,o:c,d(g){g&&l(a)}}}function P1(i){let a,u,g,m=(i[21].name||i[21].npub.slice(0,7)+""+i[21].npub.slice(-4))+"",k;function B(j,F){return j[21].picture?O1:I1}let M=B(i),U=M(i);return{c(){a=p("div"),U.c(),u=R(),g=p("div"),k=$(m),x(g,"class","max-w-56 overflow-hidden whitespace-nowrap overflow-ellipsis inline-block"),x(a,"class","flex px-2 items-center")},m(j,F){N(j,a,F),U.m(a,null),I(a,u),I(a,g),I(g,k)},p(j,F){M===(M=B(j))&&U?U.p(j,F):(U.d(1),U=M(j),U&&(U.c(),U.m(a,u))),F[0]&2097152&&m!==(m=(j[21].name||j[21].npub.slice(0,7)+""+j[21].npub.slice(-4))+"")&&V(k,m)},i:c,o:c,d(j){j&&l(a),U.d()}}}function B1(i){let a;return{c(){a=p("div"),a.textContent="N",x(a,"class","w-6 text-center")},m(u,g){N(u,a,g)},p:c,i:c,o:c,d(u){u&&l(a)}}}function C1(i){let a;return{c(){a=p("div"),a.textContent="Connect with Nostr",x(a,"class","flex px-2 items-center")},m(u,g){N(u,a,g)},p:c,i:c,o:c,d(u){u&&l(a)}}}function L1(i){let a,u,g,m;return g=new ph({}),{c(){a=p("div"),u=$(`Connecting to bunker
          `),Qd(g.$$.fragment),x(a,"class","flex px-2 items-center")},m(k,B){N(k,a,B),I(a,u),Tc(g,a,null),m=!0},p:c,i(k){m||(St(g.$$.fragment,k),m=!0)},o(k){Yt(g.$$.fragment,k),m=!1},d(k){k&&l(a),Pc(g)}}}function I1(i){let a;return{c(){a=$("")},m(u,g){N(u,a,g)},p:c,d(u){u&&l(a)}}}function O1(i){let a,u;return{c(){a=p("img"),T(a.src,u=i[21].picture)||x(a,"src",u),x(a,"alt",""),x(a,"class","mr-2 h-5 w-5 rounded-full")},m(g,m){N(g,a,m)},p(g,m){m[0]&2097152&&!T(a.src,u=g[21].picture)&&x(a,"src",u)},d(g){g&&l(a)}}}function N1(i){let a,u,g,m,k,B,M;const U=[m1,b1,w1],j=[];function F(q,X){return!q[25]&&!q[21]&&q[1]?0:q[25]?2:1}return u=F(i),g=j[u]=U[u](i),{c(){a=p("div"),g.c(),x(a,"class","draggable animate-fadein font-sans text-white"),x(a,"style",m="position: fixed; "+(i[25]&&i[5]?"width: 100vw;":"")+"; right: "+(i[25]&&i[5]?"0":i[3])+"px; user-select: none; "+(i[25]&&i[5]?"bottom: 0px":i[24]+":"+i[23]+"px")),K(a,"cursor-pointer",!i[21]&&!i[25])},m(q,X){N(q,a,X),j[u].m(a,null),i[54](a),k=!0,B||(M=[v(pu,"click",i[29]),v(pu,"mouseup",i[42]),v(pu,"mousemove",i[41]),v(a,"mousedown",i[40])],B=!0)},p(q,X){let J=u;u=F(q),u===J?j[u].p(q,X):(yt(),Yt(j[J],1,1,()=>{j[J]=null}),Ot(),g=j[u],g?g.p(q,X):(g=j[u]=U[u](q),g.c()),St(g,1),g.m(a,null)),(!k||X[0]&58720296&&m!==(m="position: fixed; "+(q[25]&&q[5]?"width: 100vw;":"")+"; right: "+(q[25]&&q[5]?"0":q[3])+"px; user-select: none; "+(q[25]&&q[5]?"bottom: 0px":q[24]+":"+q[23]+"px")))&&x(a,"style",m),(!k||X[0]&35651584)&&K(a,"cursor-pointer",!q[21]&&!q[25])},i(q){k||(St(g),k=!0)},o(q){Yt(g),k=!1},d(q){q&&l(a),j[u].d(),i[54](null),B=!1,h(M)}}}const Ah="We could not connect to a NIP-46 bunker with that url, are you sure it is set up correctly?",Sh="We were not able to connect using this address. For it to work it has to come from a NIP-46 provider.",$r=20;function gu(i){return window.open(i,"window.nostr","width=600,height=800,popup=yes")}function R1(i,a,u){let g,m,k,B,M,U;const j=p1("only screen and (max-width: 640px)");L(i,j,ge=>u(5,U=ge));const F={ORIGIN:"wnj:origin",CLIENT_SECRET:"wnj:clientSecret",Y_POS:"wnj:ypos",CALLBACK_TOKEN:"wnj:callbackToken",BUNKER_POINTER:"wnj:bunkerPointer"};let q,{accent:X}=a,{position:J="top"}=a,{startHidden:ee}=a,{compactMode:Y}=a;const te=window,ne=new ay;let Q,ue,_e,ke,le,ce;const ie=localStorage.getItem(F.CLIENT_SECRET);ie?ce=Ic(ie):(ce=Dm(),localStorage.setItem(F.CLIENT_SECRET,Nt(ce)));let fe="closed",Se,Be,at,ct,ut,de,ve=null,Ne=null,We=null,Ze=!1,qe,xt,_t,jt=!1,lt,en,fn=[],{right:Sn=20}=a,xr=!1,Gt=!1,Tr,wo,Zt;const Wn={pool:ne,onauth(ge){qe?u(13,ve=ge):lt?(u(15,We=ge),u(25,k=!0)):u(14,Ne=ge)}},bo=rf(()=>{switch(fe){case"justopened":u(44,fe="opened");break;case"justclosed":u(44,fe="closed");break}},500);function mo(){u(44,fe="justopened"),bo()}function Pr(){u(44,fe="justclosed"),bo()}function Ds(){if(Se&&!de){yu();return}mo()}mu();let Ph={isWnj:!0,async getPublicKey(){return Se?Se.pubkey:(!ut&&!de&&mo(),(await ct).bp.pubkey)},async signEvent(ge){try{return!ut&&!de&&Ds(),await(await ct).signEvent(ge)}finally{u(15,We=null),Pr()}},async getRelays(){return!ut&&!de&&Ds(),(await ct).getRelays()},nip04:{async encrypt(ge,rt){return!ut&&!de&&Ds(),(await ct).nip04Encrypt(ge,rt)},async decrypt(ge,rt){return!ut&&!de&&Ds(),(await ct).nip04Decrypt(ge,rt)}}};function mu(){Pr(),Se=null,ct=new Promise((ge,rt)=>{Be=ge,at=rt}),u(21,lt=null),u(12,ut=!1),u(16,Ze=!1),u(17,qe=!1),de=!1,en=null,u(19,_t="")}oe(()=>{if(!Se){let ge=localStorage.getItem(F.BUNKER_POINTER);ge&&(Se=JSON.parse(ge),vu())}if(te.nostr&&!te.nostr.isWnj){te.destroyWnj();return}else Object.defineProperty(window,"nostr",{get(){return Ph},set(ge){Ph=ge,ge.isWnj||te.destroyWnj()},configurable:!0});return()=>{en&&en.close()}});function H1(ge){Math.abs(m-wo)>6||Date.now()-Zt>600||fe==="justopened"||fe==="justclosed"||(ge.composedPath().find(rt=>rt.id==="wnj")?mo():Pr())}function j1(ge){Pr(),u(17,qe=!1),u(13,ve=null),u(14,Ne=null),u(15,We=null),ge.stopPropagation()}function D1(ge){u(20,jt=!0),ge.stopPropagation()}function q1(ge){u(20,jt=!1),ge.stopPropagation()}async function V1(ge){ge.preventDefault();try{if(Se=await i1(Q.value),!Se){Q.value.match(js)?u(19,_t=Ah):u(19,_t=Sh);return}Q.setCustomValidity(""),u(19,_t=""),await yu(),vu()}catch{Q.value.match(js)?u(19,_t=Ah):u(19,_t=Sh),u(12,ut=!1)}}async function F1(ge){ge.preventDefault(),localStorage.removeItem(F.BUNKER_POINTER),mu()}async function K1(ge){ge.preventDefault(),u(17,qe=!0),fn.length===0&&(u(22,fn=await a1(ne,["wss://relay.nostr.band","wss://nos.lol","wss://nostr-pub.wellorder.net"])),u(10,le=fn[0]))}function W1(ge){u(17,qe=!1)}async function G1(ge){if(ge.preventDefault(),!le)return;u(18,xt=!0);let rt=await s1(le,Wn,_e.value,le.domain);u(18,xt=!1),mo(),u(17,qe=!1),Se=rt.bp,vu(),yu(rt)}const Z1=rf(async()=>{le&&_e.value.length>0&&(await c1(_e.value+"@"+le.domain)?_e.setCustomValidity(`'${_e.value}' is already taken.`):_e.setCustomValidity(""))},500);function Y1(){u(16,Ze=!1),u(12,ut=!1),at("connection aborted"),mu()}async function yu(ge=void 0){ge=ge||new dh(ce,Se,Wn),u(12,ut=!0);let rt=setTimeout(()=>{u(16,Ze=!0),u(25,k=!0)},5e3);try{await ge.connect(),de=!0,localStorage.setItem(F.BUNKER_POINTER,JSON.stringify(Se)),Pr(),Be(ge)}catch(Gn){at((Gn==null?void 0:Gn.message)||String(Gn))}finally{clearTimeout(rt),u(12,ut=!1),u(16,Ze=!1),u(13,ve=null),u(14,Ne=null),u(15,We=null)}}function vu(ge=null){let rt=Se.pubkey;u(21,lt={pubkey:rt,npub:l1(rt),event:null}),en=ne.subscribeMany(["wss://purplepag.es","wss://relay.snort.social","wss://relay.nos.social"],[{kinds:[0],authors:[rt]}],{onevent(Gn){var Bh;if(!((((Bh=lt.event)==null?void 0:Bh.created_at)||0)>=Gn.created_at))try{let{name:uv,picture:lv}=JSON.parse(Gn.content);u(21,lt.event=Gn,lt),u(21,lt.name=uv,lt),u(21,lt.picture=lv,lt),ge==null||ge(),ge=null}catch{}}})}function J1(ge){if(k)return;xr=!0;const rt=q.getBoundingClientRect();Tr=ge.clientY-rt.top,wo=m,Zt=Date.now()}function X1(ge){xr&&(g==="top"?u(23,m=ge.clientY):u(23,m=window.innerHeight-ge.clientY),u(23,m-=Tr),u(45,Gt=!0),m<$r&&u(23,m=$r),m>window.innerHeight-$r&&u(23,m=window.innerHeight-$r))}function Q1(){if(xr=!1,setTimeout(()=>{u(45,Gt=!1)},10),Gt){const ge=q.getBoundingClientRect(),rt=window.innerHeight,Gn=rt/2;ge.top<Gn?(u(24,g="top"),u(23,m=ge.top)):(u(24,g="bottom"),u(23,m=rt-ge.bottom)),m<$r&&u(23,m=$r),localStorage.setItem(F.ORIGIN,g),localStorage.setItem(F.Y_POS,m.toString())}}const ev=()=>gu(ve),tv=()=>gu(Ne),nv=()=>{gu(We)};function rv(ge){me[ge?"unshift":"push"](()=>{_e=ge,u(8,_e)})}function ov(){ke=this.value,u(9,ke)}function iv(){le=D(this),u(10,le),u(22,fn)}function sv(ge){me[ge?"unshift":"push"](()=>{Q=ge,u(7,Q)})}function av(){ue=this.value,u(4,ue)}function cv(ge){me[ge?"unshift":"push"](()=>{q=ge,u(6,q)})}return i.$$set=ge=>{"accent"in ge&&u(0,X=ge.accent),"position"in ge&&u(43,J=ge.position),"startHidden"in ge&&u(1,ee=ge.startHidden),"compactMode"in ge&&u(2,Y=ge.compactMode),"right"in ge&&u(3,Sn=ge.right)},i.$$.update=()=>{i.$$.dirty[0]&32|i.$$.dirty[1]&4096&&u(24,g=U?"bottom":localStorage.getItem(F.ORIGIN)||J),i.$$.dirty[0]&32&&u(23,m=U?$r:parseInt(localStorage.getItem(F.Y_POS)||"0")||$r),i.$$.dirty[1]&8192&&u(25,k=fe==="justopened"||fe==="opened"),i.$$.dirty[0]&1|i.$$.dirty[1]&16384&&u(27,B=Gt?"cursor-grabbing outline-dashed outline-"+X+"-500 outline-1 outline-offset-4":"outline-none"),i.$$.dirty[0]&16&&u(26,M=ue&&(ue.match(js)||ue.match(fh)))},[X,ee,Y,Sn,ue,U,q,Q,_e,ke,le,ce,ut,ve,Ne,We,Ze,qe,xt,_t,jt,lt,fn,m,g,k,M,B,j,H1,j1,D1,q1,V1,F1,K1,W1,G1,Z1,Y1,J1,X1,Q1,J,fe,Gt,ev,tv,nv,rv,ov,iv,sv,av,cv]}class z1 extends tf{constructor(a){super(),ef(this,a,R1,N1,b,{accent:0,position:43,startHidden:1,compactMode:2,right:3},null,[-1,-1,-1])}}const Ko=window;Ko.destroyWnj=()=>{setTimeout(()=>{U1.$destroy()},1)};const wu=document.createElement("div");wu.style.zIndex="90000",document.body.appendChild(wu);const bu=document.createElement("div");bu.id="wnj";const $h=document.createElement("style");$h.innerHTML=s;const xh=wu.attachShadow({mode:"open"});xh.appendChild(bu),xh.appendChild($h);const U1=new z1({target:bu,props:{accent:((e=Ko.wnjParams)==null?void 0:e.accent)||"cyan",position:((t=Ko.wnjParams)==null?void 0:t.position)==="bottom"?"bottom":"top",startHidden:!!((n=Ko.wnjParams)!=null&&n.startHidden),compactMode:!!((r=Ko.wnjParams)!=null&&r.compactMode)}});if(!((o=Ko.wnjParams)!=null&&o.disableOverflowFix)){var Th=document.createElement("style"),M1=`
    html, body {
      overflow: auto;
      height: 100%;
    }
  `;Th.innerHTML=M1,document.head.appendChild(Th)}})();const JS=hv({__proto__:null,default:ug},[ug]);
</script>
    <style rel="stylesheet" crossorigin>html{font-size:20px}@media only screen and (max-width: 768px){html{font-size:18px}}body{margin:0;padding:0}#app{box-sizing:border-box;width:80%;max-width:760px;margin:2rem auto;font-family:Arial,Helvetica,sans-serif;color:#242424}@media only screen and (max-width: 768px){#app{width:100%;padding:0 1rem;max-width:unset}}a,a:visited{color:#242424}ol,ul{padding-left:1rem;margin:0}ol li,ul li{margin-bottom:1rem}blockquote{margin:0;padding-left:1rem;border-left:8px solid #ebebeb}code{font-size:.9rem;background-color:#f6f6f6}pre code{overflow:scroll;display:block;padding:1rem .5rem}.unfinished-setup{width:80%;margin:0 auto;text-align:center}.header.home h1{font-size:3rem}.header .external-link{text-align:right;margin-top:-1rem;font-size:.8em;color:#cbcbcb}@media only screen and (max-width: 768px){.header .external-link{margin-bottom:1rem}}.header .external-link a{text-decoration:underline;color:#cbcbcb}.header .picture-container{position:relative;display:inline-block;width:2.5rem;height:2.5rem;overflow:hidden;border-radius:50%;margin-bottom:-.25rem}.header .picture-container img{position:absolute;top:50%;left:50%;width:100%;height:100%;object-fit:cover;transform:translate(-50%,-50%);clip-path:circle(50%)}.header.note .picture-container{width:1.5rem;height:1.5rem;margin-bottom:-.4rem}.header a{text-decoration:none}.header a span{text-decoration:underline}.topic-wrapper{margin-bottom:1.5rem;display:flex;flex-direction:row;flex-wrap:wrap;row-gap:1rem}.topic-wrapper div{display:inline-grid;margin-right:1rem}.topic-wrapper div a{padding:.4rem 1rem;background-color:#e0e0e0;text-decoration:none;border-radius:4px}.topic-wrapper div a:hover{background-color:#ebebeb}.topic-wrapper div a.selected{background-color:#242424;color:#fff}.externalLink{display:block;text-align:right;margin-top:-1rem;font-size:.8em;color:#cbcbcb}.externalLink a{color:#cbcbcb}.about{margin-bottom:2rem;padding-bottom:1rem;border-bottom:8px solid #ebebeb}.separator{margin-bottom:2rem;border-bottom:8px solid #ebebeb}.top-notes{display:flex;flex-wrap:wrap;justify-content:space-between;gap:2rem;width:100%;margin-bottom:1rem;padding-bottom:2rem;border-bottom:8px solid #f5f5f5}@media only screen and (max-width: 768px){.top-notes{display:block}}@media only screen and (max-width: 768px){.top-notes{padding-bottom:0rem}}.top-notes .note{flex:1 1 calc(50% - 2rem);box-sizing:border-box}@media only screen and (max-width: 768px){.top-notes .note{margin-bottom:2rem}}.top-notes .note a{text-decoration:none}.top-notes .note img{width:100%;height:200px;object-fit:cover;margin-bottom:.5rem;border-radius:4px}.top-notes .note .title{display:block;margin-bottom:.4rem;font-size:1.1rem;font-weight:bolder}.top-notes .note .summary{margin-bottom:.4rem;font-size:.9rem}.top-notes .note .date{font-size:.8rem;color:#a9a9a9}.short-notes{border-bottom:8px solid #f5f5f5;padding-bottom:1rem;margin-bottom:2rem}.short-notes .splide__slide{font-size:.9rem;overflow-wrap:break-word}.short-notes .splide__slide a{text-decoration:none}.short-notes .splide__slide .date{font-size:.8rem;color:#a9a9a9;margin-bottom:.3rem}.short-notes .splide__arrow--prev{left:-3em}.short-notes .splide__arrow--next{right:-3em}@media only screen and (max-width: 768px){.short-notes .splide__arrow--prev,.short-notes .splide__arrow--next{display:none}}.short-notes .splide__arrow{background:none}.short-notes .splide__arrow svg{fill:#a9a9a9}.listing-notes{margin-top:1rem}.listing-notes ul{list-style-type:none;padding:0;margin:0}.listing-notes ul li{margin-bottom:1rem}.listing-notes ul li a{display:block;margin-bottom:.4rem;font-size:1.1rem}.listing-notes ul li .summary{margin-bottom:.4rem;overflow-wrap:break-word}.listing-notes ul li .date{font-size:.8rem;color:#a9a9a9}h1{font-size:2rem;line-height:.9;margin-top:0}@media only screen and (max-width: 768px){h1{font-size:1.6rem}}.note-wrapper{position:relative;margin-top:2rem;overflow-wrap:break-word}.note-wrapper h1,.note-wrapper h2,.note-wrapper h3{margin-top:1.4rem;margin-bottom:.6rem}.note-wrapper h1:first-of-type{margin-top:0rem}.note-wrapper .content{margin-top:1.5rem}.note-wrapper p{line-height:1.3rem;margin-top:0rem}.note-wrapper .date{display:block;margin-bottom:.5rem;font-size:.8rem;color:#a9a9a9}.note-wrapper img{display:block;margin:2rem auto;max-width:100%;border-radius:4px}.note-wrapper img.note-banner{margin:2.5rem auto 3.5rem;transform:scale(1.1)}.note-wrapper video{width:100%;margin:2rem auto}.footer{margin-top:4rem;padding-top:2rem;margin-bottom:2rem;border-top:8px solid #ebebeb;font-size:.8rem;text-align:center;color:#cbcbcb}.footer a{color:#cbcbcb}zap-threads{font-size:.9rem}.splide__container{box-sizing:border-box;position:relative}.splide__list{backface-visibility:hidden;display:-ms-flexbox;display:flex;height:100%;margin:0!important;padding:0!important}.splide.is-initialized:not(.is-active) .splide__list{display:block}.splide__pagination{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;margin:0;pointer-events:none}.splide__pagination li{display:inline-block;line-height:1;list-style-type:none;margin:0;pointer-events:auto}.splide:not(.is-overflow) .splide__pagination{display:none}.splide__progress__bar{width:0}.splide{position:relative;visibility:hidden}.splide.is-initialized,.splide.is-rendered{visibility:visible}.splide__slide{backface-visibility:hidden;box-sizing:border-box;-ms-flex-negative:0;flex-shrink:0;list-style-type:none!important;margin:0;position:relative}.splide__slide img{vertical-align:bottom}.splide__spinner{animation:splide-loading 1s linear infinite;border:2px solid #999;border-left-color:transparent;border-radius:50%;bottom:0;contain:strict;display:inline-block;height:20px;left:0;margin:auto;position:absolute;right:0;top:0;width:20px}.splide__sr{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.splide__toggle.is-active .splide__toggle__play,.splide__toggle__pause{display:none}.splide__toggle.is-active .splide__toggle__pause{display:inline}.splide__track{overflow:hidden;position:relative;z-index:0}@keyframes splide-loading{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.splide__track--draggable{-webkit-touch-callout:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.splide__track--fade>.splide__list>.splide__slide{margin:0!important;opacity:0;z-index:0}.splide__track--fade>.splide__list>.splide__slide.is-active{opacity:1;z-index:1}.splide--rtl{direction:rtl}.splide__track--ttb>.splide__list{display:block}.splide__arrow{-ms-flex-align:center;align-items:center;background:#ccc;border:0;border-radius:50%;cursor:pointer;display:-ms-flexbox;display:flex;height:2em;-ms-flex-pack:center;justify-content:center;opacity:.7;padding:0;position:absolute;top:50%;transform:translateY(-50%);width:2em;z-index:1}.splide__arrow svg{fill:#000;height:1.2em;width:1.2em}.splide__arrow:hover:not(:disabled){opacity:.9}.splide__arrow:disabled{opacity:.3}.splide__arrow:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide__arrow--prev{left:1em}.splide__arrow--prev svg{transform:scaleX(-1)}.splide__arrow--next{right:1em}.splide.is-focus-in .splide__arrow:focus{outline:3px solid #0bf;outline-offset:3px}.splide__pagination{bottom:.5em;left:0;padding:0 1em;position:absolute;right:0;z-index:1}.splide__pagination__page{background:#ccc;border:0;border-radius:50%;display:inline-block;height:8px;margin:3px;opacity:.7;padding:0;position:relative;transition:transform .2s linear;width:8px}.splide__pagination__page.is-active{background:#fff;transform:scale(1.4);z-index:1}.splide__pagination__page:hover{cursor:pointer;opacity:.9}.splide__pagination__page:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide.is-focus-in .splide__pagination__page:focus{outline:3px solid #0bf;outline-offset:3px}.splide__progress__bar{background:#ccc;height:3px}.splide__slide{-webkit-tap-highlight-color:rgba(0,0,0,0)}.splide__slide:focus{outline:0}@supports (outline-offset:-3px){.splide__slide:focus-visible{outline:3px solid #0bf;outline-offset:-3px}}@media screen and (-ms-high-contrast:none){.splide__slide:focus-visible{border:3px solid #0bf}}@supports (outline-offset:-3px){.splide.is-focus-in .splide__slide:focus{outline:3px solid #0bf;outline-offset:-3px}}@media screen and (-ms-high-contrast:none){.splide.is-focus-in .splide__slide:focus{border:3px solid #0bf}.splide.is-focus-in .splide__track>.splide__list>.splide__slide:focus{border-color:#0bf}}.splide__toggle{cursor:pointer}.splide__toggle:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide.is-focus-in .splide__toggle:focus{outline:3px solid #0bf;outline-offset:3px}.splide__track--nav>.splide__list>.splide__slide{border:3px solid transparent;cursor:pointer}.splide__track--nav>.splide__list>.splide__slide.is-active{border:3px solid #000}.splide__arrows--rtl .splide__arrow--prev{left:auto;right:1em}.splide__arrows--rtl .splide__arrow--prev svg{transform:scaleX(1)}.splide__arrows--rtl .splide__arrow--next{left:1em;right:auto}.splide__arrows--rtl .splide__arrow--next svg{transform:scaleX(-1)}.splide__arrows--ttb .splide__arrow{left:50%;transform:translate(-50%)}.splide__arrows--ttb .splide__arrow--prev{top:1em}.splide__arrows--ttb .splide__arrow--prev svg{transform:rotate(-90deg)}.splide__arrows--ttb .splide__arrow--next{bottom:1em;top:auto}.splide__arrows--ttb .splide__arrow--next svg{transform:rotate(90deg)}.splide__pagination--ttb{bottom:0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;left:auto;padding:1em 0;right:.5em;top:0}.loader-container.svelte-1b13ty7{display:flex;align-items:center;justify-content:center}.loader.svelte-1b13ty7{display:inline-block;width:92px;height:92px;opacity:0;animation:svelte-1b13ty7-fade-in .5s .4s forwards,svelte-1b13ty7-loader-animation 2s linear infinite .4s}.loader.svelte-1b13ty7:after{content:" ";display:block;width:64px;height:64px;margin:8px;border-radius:50%;border:6px solid #a9a9a9;border-color:#a9a9a9 transparent #a9a9a9 transparent;animation:svelte-1b13ty7-loader-animation 2s linear infinite}@keyframes svelte-1b13ty7-loader-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes svelte-1b13ty7-fade-in{to{opacity:1}}
</style>
  </head>
  <body>
    <div id="app"></div>
    <script>
      window.wnjParams = {
        position: 'bottom',
        accent: 'neutral',
        startHidden: true,
        compactMode: true,
      };
    </script>
  </body>
</html>
