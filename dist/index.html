<!doctype html>
<html lang="en">
  <head>
    <!-- -=*=- -->
    <!-- Configure with your npub/nprofile -->
    <meta name="author" value="replace_with_your_npub" />

    <!-- Personalize your relays list -->
    <meta name="relays" value="wss://nos.lol, wss://relay.damus.io, wss://relay.nostr.band, wss://nostr.wine" />

    <!-- Show top notes with images, use a even value, zero to disable -->
    <meta name="top-notes" value="2" />

    <!-- Show short notes as carousel (value 'carousel') or in the main feed (value 'main'), empty to disable -->
    <meta name="short-notes" value="carousel" />

    <!-- Show short notes with X minimum characters for the 'short-notes' setting, zero to disable -->
    <meta name="short-notes-min-chars" value="800" />

    <!-- Size in characters of the short notes preview in the feed, zero to display full content -->
    <meta name="short-notes-summary-max-chars" value="400" />

    <!-- Enable navigation by topics (tags), empty to disable -->
    <meta name="topics" value="" />

    <!-- Enable comments, 'yes' to enable -->
    <meta name="comments" value="yes" />
    <!-- -=*=- -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <script type="module" crossorigin>var Xy=Object.defineProperty;var e1=(e,t,n)=>t in e?Xy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Le=(e,t,n)=>e1(e,typeof t!="symbol"?t+"":t,n);function t1(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const n1="modulepreload",r1=function(e,t){return new URL(e,t).href},Qf={},o1=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){const c=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=Promise.allSettled(n.map(h=>{if(h=r1(h,r),h in Qf)return;Qf[h]=!0;const y=h.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(!!r)for(let L=c.length-1;L>=0;L--){const A=c[L];if(A.href===h&&(!y||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${b}`))return;const C=document.createElement("link");if(C.rel=y?"stylesheet":n1,y||(C.as="script"),C.crossOrigin="",C.href=h,f&&C.setAttribute("nonce",f),document.head.appendChild(C),y)return new Promise((L,A)=>{C.addEventListener("load",L),C.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return t().catch(a)})};function _t(){}function Pn(e,t){for(const n in t)e[n]=t[n];return e}function Ip(e){return e()}function Xf(){return Object.create(null)}function Xi(e){e.forEach(Ip)}function Lp(e){return typeof e=="function"}function Cn(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let $s;function Cr(e,t){return e===t?!0:($s||($s=document.createElement("a")),$s.href=t,e===$s.href)}function i1(e){return Object.keys(e).length===0}function ga(e,t,n,r){if(e){const o=Cp(e,t,n,r);return e[0](o)}}function Cp(e,t,n,r){return e[1]&&r?Pn(n.ctx.slice(),e[1](r(t))):n.ctx}function wa(e,t,n,r){return e[2],t.dirty}function ba(e,t,n,r,o,a){if(o){const c=Cp(t,n,r,a);e.p(c,o)}}function ma(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function kl(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function Qo(e,t){const n={};t=new Set(t);for(const r in e)!t.has(r)&&r[0]!=="$"&&(n[r]=e[r]);return n}function we(e,t){e.appendChild(t)}function Ne(e,t,n){e.insertBefore(t,n||null)}function Ce(e){e.parentNode&&e.parentNode.removeChild(e)}function ya(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ke(e){return document.createElement(e)}function Je(e){return document.createTextNode(e)}function Ke(){return Je(" ")}function Ao(){return Je("")}function s1(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function Ee(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const a1=["width","height"];function Xo(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)t[r]==null?e.removeAttribute(r):r==="style"?e.style.cssText=t[r]:r==="__value"?e.value=e[r]=t[r]:n[r]&&n[r].set&&a1.indexOf(r)===-1?e[r]=t[r]:Ee(e,r,t[r])}function Wc(e,t,n){const r=t.toLowerCase();r in e?e[r]=typeof e[r]=="boolean"&&n===""?!0:n:t in e?e[t]=typeof e[t]=="boolean"&&n===""?!0:n:Ee(e,t,n)}function c1(e){return Array.from(e.childNodes)}function Pt(e,t){t=""+t,e.data!==t&&(e.data=t)}function eh(e,t,n){e.classList.toggle(t,!!n)}function u1(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let ji;function Ni(e){ji=e}function va(){if(!ji)throw new Error("Function called outside component initialization");return ji}function _a(e){va().$$.on_mount.push(e)}function l1(e){va().$$.after_update.push(e)}function d1(e){va().$$.on_destroy.push(e)}function f1(){const e=va();return(t,n,{cancelable:r=!1}={})=>{const o=e.$$.callbacks[t];if(o){const a=u1(t,n,{cancelable:r});return o.slice().forEach(c=>{c.call(e,a)}),!a.defaultPrevented}return!0}}const Mo=[],Pu=[];let qo=[];const th=[],h1=Promise.resolve();let Bu=!1;function p1(){Bu||(Bu=!0,h1.then(Pr))}function Iu(e){qo.push(e)}const Kc=new Set;let Co=0;function Pr(){if(Co!==0)return;const e=ji;do{try{for(;Co<Mo.length;){const t=Mo[Co];Co++,Ni(t),g1(t.$$)}}catch(t){throw Mo.length=0,Co=0,t}for(Ni(null),Mo.length=0,Co=0;Pu.length;)Pu.pop()();for(let t=0;t<qo.length;t+=1){const n=qo[t];Kc.has(n)||(Kc.add(n),n())}qo.length=0}while(Mo.length);for(;th.length;)th.pop()();Bu=!1,Kc.clear(),Ni(e)}function g1(e){if(e.fragment!==null){e.update(),Xi(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Iu)}}function w1(e){const t=[],n=[];qo.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),qo=t}const Cs=new Set;let po;function Hr(){po={r:0,c:[],p:po}}function Dr(){po.r||Xi(po.c),po=po.p}function qe(e,t){e&&e.i&&(Cs.delete(e),e.i(t))}function Ge(e,t,n,r){if(e&&e.o){if(Cs.has(e))return;Cs.add(e),po.c.push(()=>{Cs.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Or(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Al(e,t){const n={},r={},o={$$scope:1};let a=e.length;for(;a--;){const c=e[a],d=t[a];if(d){for(const f in c)f in d||(r[f]=1);for(const f in d)o[f]||(n[f]=d[f],o[f]=1);e[a]=d}else for(const f in c)o[f]=1}for(const c in r)c in n||(n[c]=void 0);return n}function tr(e){e&&e.c()}function On(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),Iu(()=>{const a=e.$$.on_mount.map(Ip).filter(Lp);e.$$.on_destroy?e.$$.on_destroy.push(...a):Xi(a),e.$$.on_mount=[]}),o.forEach(Iu)}function Nn(e,t){const n=e.$$;n.fragment!==null&&(w1(n.after_update),Xi(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function b1(e,t){e.$$.dirty[0]===-1&&(Mo.push(e),p1(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Vr(e,t,n,r,o,a,c=null,d=[-1]){const f=ji;Ni(e);const h=e.$$={fragment:null,ctx:[],props:a,update:_t,not_equal:o,bound:Xf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:Xf(),dirty:d,skip_bound:!1,root:t.target||f.$$.root};c&&c(h.root);let y=!1;if(h.ctx=n?n(e,t.props||{},(b,S,...C)=>{const L=C.length?C[0]:S;return h.ctx&&o(h.ctx[b],h.ctx[b]=L)&&(!h.skip_bound&&h.bound[b]&&h.bound[b](L),y&&b1(e,b)),S}):[],h.update(),y=!0,Xi(h.before_update),h.fragment=r?r(h.ctx):!1,t.target){if(t.hydrate){const b=c1(t.target);h.fragment&&h.fragment.l(b),b.forEach(Ce)}else h.fragment&&h.fragment.c();t.intro&&qe(e.$$.fragment),On(e,t.target,t.anchor),Pr()}Ni(f)}class qr{constructor(){Le(this,"$$");Le(this,"$$set")}$destroy(){Nn(this,1),this.$destroy=_t}$on(t,n){if(!Lp(n))return _t;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!i1(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const m1="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(m1);var Op=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Np(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var y1=function(){function e(n,r){if(typeof n!="function")throw new TypeError("DataLoader must be constructed with a function which accepts "+("Array<key> and returns Promise<Array<value>>, but got: "+n+"."));this._batchLoadFn=n,this._maxBatchSize=k1(r),this._batchScheduleFn=A1(r),this._cacheKeyFn=S1(r),this._cacheMap=$1(r),this._batch=null,this.name=x1(r)}var t=e.prototype;return t.load=function(r){if(r==null)throw new TypeError("The loader.load() function must be called with a value, "+("but got: "+String(r)+"."));var o=_1(this),a=this._cacheMap,c;if(a){c=this._cacheKeyFn(r);var d=a.get(c);if(d){var f=o.cacheHits||(o.cacheHits=[]);return new Promise(function(y){f.push(function(){y(d)})})}}o.keys.push(r);var h=new Promise(function(y,b){o.callbacks.push({resolve:y,reject:b})});return a&&a.set(c,h),h},t.loadMany=function(r){if(!Rp(r))throw new TypeError("The loader.loadMany() function must be called with Array<key> "+("but got: "+r+"."));for(var o=[],a=0;a<r.length;a++)o.push(this.load(r[a]).catch(function(c){return c}));return Promise.all(o)},t.clear=function(r){var o=this._cacheMap;if(o){var a=this._cacheKeyFn(r);o.delete(a)}return this},t.clearAll=function(){var r=this._cacheMap;return r&&r.clear(),this},t.prime=function(r,o){var a=this._cacheMap;if(a){var c=this._cacheKeyFn(r);if(a.get(c)===void 0){var d;o instanceof Error?(d=Promise.reject(o),d.catch(function(){})):d=Promise.resolve(o),a.set(c,d)}}return this},e}(),v1=typeof process=="object"&&typeof process.nextTick=="function"?function(e){Gc||(Gc=Promise.resolve()),Gc.then(function(){process.nextTick(e)})}:typeof setImmediate=="function"?function(e){setImmediate(e)}:function(e){setTimeout(e)},Gc;function _1(e){var t=e._batch;if(t!==null&&!t.hasDispatched&&t.keys.length<e._maxBatchSize)return t;var n={hasDispatched:!1,keys:[],callbacks:[]};return e._batch=n,e._batchScheduleFn(function(){E1(e,n)}),n}function E1(e,t){if(t.hasDispatched=!0,t.keys.length===0){Lu(t);return}var n;try{n=e._batchLoadFn(t.keys)}catch(r){return Zc(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function "+("errored synchronously: "+String(r)+".")))}if(!n||typeof n.then!="function")return Zc(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did "+("not return a Promise: "+String(n)+".")));n.then(function(r){if(!Rp(r))throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did "+("not return a Promise of an Array: "+String(r)+"."));if(r.length!==t.keys.length)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys."+(`

Keys:
`+String(t.keys))+(`

Values:
`+String(r)));Lu(t);for(var o=0;o<t.callbacks.length;o++){var a=r[o];a instanceof Error?t.callbacks[o].reject(a):t.callbacks[o].resolve(a)}}).catch(function(r){Zc(e,t,r)})}function Zc(e,t,n){Lu(t);for(var r=0;r<t.keys.length;r++)e.clear(t.keys[r]),t.callbacks[r].reject(n)}function Lu(e){if(e.cacheHits)for(var t=0;t<e.cacheHits.length;t++)e.cacheHits[t]()}function k1(e){var t=!e||e.batch!==!1;if(!t)return 1;var n=e&&e.maxBatchSize;if(n===void 0)return 1/0;if(typeof n!="number"||n<1)throw new TypeError("maxBatchSize must be a positive number: "+n);return n}function A1(e){var t=e&&e.batchScheduleFn;if(t===void 0)return v1;if(typeof t!="function")throw new TypeError("batchScheduleFn must be a function: "+t);return t}function S1(e){var t=e&&e.cacheKeyFn;if(t===void 0)return function(n){return n};if(typeof t!="function")throw new TypeError("cacheKeyFn must be a function: "+t);return t}function $1(e){var t=!e||e.cache!==!1;if(!t)return null;var n=e&&e.cacheMap;if(n===void 0)return new Map;if(n!==null){var r=["get","set","delete","clear"],o=r.filter(function(a){return n&&typeof n[a]!="function"});if(o.length!==0)throw new TypeError("Custom cacheMap missing methods: "+o.join(", "))}return n}function x1(e){return e&&e.name?e.name:null}function Rp(e){return typeof e=="object"&&e!==null&&typeof e.length=="number"&&(e.length===0||e.length>0&&Object.prototype.hasOwnProperty.call(e,e.length-1))}var T1=y1;const zp=Np(T1);/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sl=e=>e instanceof Uint8Array,Yc=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),En=(e,t)=>e<<32-t|e>>>t,P1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!P1)throw new Error("Non little-endian hardware is not supported");const B1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Nt(e){if(!Sl(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=B1[e[n]];return t}function Cu(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,a=e.slice(o,o+2),c=Number.parseInt(a,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");n[r]=c}return n}function I1(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Up(e){if(typeof e=="string"&&(e=I1(e)),!Sl(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function L1(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Sl(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let C1=class{clone(){return this._cloneInto()}};function Mp(e){const t=r=>e().update(Up(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function pi(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function nr(...e){const t=(o,a)=>c=>o(a(c)),n=Array.from(e).reverse().reduce((o,a)=>o?t(o,a.encode):a.encode,void 0),r=e.reduce((o,a)=>o?t(o,a.decode):a.decode,void 0);return{encode:n,decode:r}}function rr(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(pi(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function or(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Ea(e,t="="){if(pi(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of n)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function jp(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function nh(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],a=Array.from(e);for(a.forEach(c=>{if(pi(c),c<0||c>=t)throw new Error(`Wrong integer: ${c}`)});;){let c=0,d=!0;for(let f=r;f<a.length;f++){const h=a[f],y=t*c+h;if(!Number.isSafeInteger(y)||t*c/t!==c||y-h!==t*c)throw new Error("convertRadix: carry overflow");if(c=y%n,a[f]=Math.floor(y/n),!Number.isSafeInteger(a[f])||a[f]*n+c!==y)throw new Error("convertRadix: carry overflow");if(d)a[f]?d=!1:r=f;else continue}if(o.push(c),d)break}for(let c=0;c<e.length-1&&e[c]===0;c++)o.push(0);return o.reverse()}const Hp=(e,t)=>t?Hp(t,e%t):e,Ds=(e,t)=>e+(t-Hp(e,t));function Ou(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Ds(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Ds(t,n)}`);let o=0,a=0;const c=2**n-1,d=[];for(const f of e){if(pi(f),f>=2**t)throw new Error(`convertRadix2: invalid data word=${f} from=${t}`);if(o=o<<t|f,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=n;a-=n)d.push((o>>a-n&c)>>>0);o&=2**a-1}if(o=o<<n-a&c,!r&&a>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&a>0&&d.push(o>>>0),d}function O1(e){return pi(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return nh(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(nh(t,e,2**8))}}}function Fr(e,t=!1){if(pi(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Ds(8,e)>32||Ds(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Ou(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Ou(n,e,8,t))}}}function rh(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}const N1=nr(Fr(4),rr("0123456789ABCDEF"),or("")),R1=nr(Fr(5),rr("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Ea(5),or(""));nr(Fr(5),rr("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Ea(5),or(""));nr(Fr(5),rr("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),or(""),jp(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const z1=nr(Fr(6),rr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ea(6),or("")),U1=nr(Fr(6),rr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Ea(6),or("")),$l=e=>nr(O1(58),rr(e),or("")),Nu=$l("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");$l("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");$l("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const oh=[0,2,3,5,6,7,9,10,11],M1={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=Nu.encode(r).padStart(oh[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=oh.indexOf(r.length),a=Nu.decode(r);for(let c=0;c<a.length-o;c++)if(a[c]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(a.slice(a.length-o)))}return Uint8Array.from(t)}},Ru=nr(rr("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),or("")),ih=[996825010,642813549,513874426,1027748829,705979059];function xi(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<ih.length;r++)(t>>r&1)===1&&(n^=ih[r]);return n}function sh(e,t,n=1){const r=e.length;let o=1;for(let a=0;a<r;a++){const c=e.charCodeAt(a);if(c<33||c>126)throw new Error(`Invalid prefix (${e})`);o=xi(o)^c>>5}o=xi(o);for(let a=0;a<r;a++)o=xi(o)^e.charCodeAt(a)&31;for(let a of t)o=xi(o)^a;for(let a=0;a<6;a++)o=xi(o);return o^=n,Ru.encode(Ou([o%2**30],30,5,!1))}function Dp(e){const t=e==="bech32"?1:734539939,n=Fr(5),r=n.decode,o=n.encode,a=rh(r);function c(y,b,S=90){if(typeof y!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof y}`);if(!Array.isArray(b)||b.length&&typeof b[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof b}`);const C=y.length+7+b.length;if(S!==!1&&C>S)throw new TypeError(`Length ${C} exceeds limit ${S}`);return y=y.toLowerCase(),`${y}1${Ru.encode(b)}${sh(y,b,t)}`}function d(y,b=90){if(typeof y!="string")throw new Error(`bech32.decode input should be string, not ${typeof y}`);if(y.length<8||b!==!1&&y.length>b)throw new TypeError(`Wrong string length: ${y.length} (${y}). Expected (8..${b})`);const S=y.toLowerCase();if(y!==S&&y!==y.toUpperCase())throw new Error("String must be lowercase or uppercase");y=S;const C=y.lastIndexOf("1");if(C===0||C===-1)throw new Error('Letter "1" must be present between prefix and data only');const L=y.slice(0,C),A=y.slice(C+1);if(A.length<6)throw new Error("Data must be at least 6 characters long");const N=Ru.decode(A).slice(0,-6),M=sh(L,N,t);if(!A.endsWith(M))throw new Error(`Invalid checksum in ${y}: expected "${M}"`);return{prefix:L,words:N}}const f=rh(d);function h(y){const{prefix:b,words:S}=d(y,!1);return{prefix:b,words:S,bytes:r(S)}}return{encode:c,decode:d,decodeToBytes:h,decodeUnsafe:f,fromWords:r,fromWordsUnsafe:a,toWords:o}}const ei=Dp("bech32");Dp("bech32m");const j1={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},H1=nr(Fr(4),rr("0123456789abcdef"),or(""),jp(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),D1={utf8:j1,hex:H1,base16:N1,base32:R1,base64:z1,base64url:U1,base58:Nu,base58xmr:M1};`${Object.keys(D1).join(", ")}`;new TextDecoder("utf-8");const V1=new TextEncoder;function Ii(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}class q1{constructor(t){Le(this,"value");Le(this,"next",null);Le(this,"prev",null);this.value=t}}class F1{constructor(){Le(this,"first");Le(this,"last");this.first=null,this.last=null}enqueue(t){const n=new q1(t);return this.last?this.last===this.first?(this.last=n,this.last.prev=this.first,this.first.next=n):(n.prev=this.last,this.last.next=n,this.last=n):(this.first=n,this.last=n),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const n=this.first;return this.first=null,this.last=null,n.value}const t=this.first;return this.first=t.next,t.value}}const W1=5e3;function K1(e){return Z1("npub",Cu(e))}function G1(e,t){let n=ei.toWords(t);return ei.encode(e,n,W1)}function Z1(e,t){return G1(e,t)}function xl(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Tl(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=xl(n);return(o,a)=>r.then(c=>a(c.transaction(t,o).objectStore(t)))}let Jc;function Vp(){return Jc||(Jc=Tl("keyval-store","keyval")),Jc}function qp(e,t=Vp()){return t("readwrite",n=>(e.forEach(r=>n.put(r[1],r[0])),xl(n.transaction)))}function Fp(e,t=Vp()){return t("readonly",n=>Promise.all(e.map(r=>xl(n.get(r)))))}var Y1=Math.pow(2,8)-1,J1=Math.pow(2,16)-1,Q1=Math.pow(2,32)-1;const X1=function(e){var t=e-1;if(t<=Y1)return Uint8Array;if(t<=J1)return Uint16Array;if(t<=Q1)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")};function Wr(e){if(this.capacity=e,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var t=X1(e);this.forward=new t(e),this.backward=new t(e),this.K=new Array(e),this.V=new Array(e),this.size=0,this.head=0,this.tail=0,this.items={}}Wr.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};Wr.prototype.splayOnTop=function(e){var t=this.head;if(this.head===e)return this;var n=this.backward[e],r=this.forward[e];return this.tail===e?this.tail=n:this.backward[r]=n,this.forward[n]=r,this.backward[t]=e,this.head=e,this.forward[e]=t,this};Wr.prototype.set=function(e,t){var n=this.items[e];if(typeof n<"u"){this.splayOnTop(n),this.V[n]=t;return}this.size<this.capacity?n=this.size++:(n=this.tail,this.tail=this.backward[n],delete this.items[this.K[n]]),this.items[e]=n,this.K[n]=e,this.V[n]=t,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n};Wr.prototype.setpop=function(e,t){var n=null,r=null,o=this.items[e];return typeof o<"u"?(this.splayOnTop(o),n=this.V[o],this.V[o]=t,{evicted:!1,key:e,value:n}):(this.size<this.capacity?o=this.size++:(o=this.tail,this.tail=this.backward[o],n=this.V[o],r=this.K[o],delete this.items[r]),this.items[e]=o,this.K[o]=e,this.V[o]=t,this.forward[o]=this.head,this.backward[this.head]=o,this.head=o,r?{evicted:!0,key:r,value:n}:null)};Wr.prototype.has=function(e){return e in this.items};Wr.prototype.get=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.splayOnTop(t),this.V[t]};Wr.prototype.peek=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.V[t]};function Wp(){const e=new Wr(2e3);return e.delete=t=>{},e}function e2(e){return!!e}function ah(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Kp(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function t2(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ah(e.outputLen),ah(e.blockLen)}function Vs(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function n2(e,t){Kp(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Qc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gp=e=>e instanceof Uint8Array,Xc=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),kn=(e,t)=>e<<32-t|e>>>t,r2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!r2)throw new Error("Non little-endian hardware is not supported");function o2(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Pl(e){if(typeof e=="string"&&(e=o2(e)),!Gp(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function i2(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Gp(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}class Zp{clone(){return this._cloneInto()}}function s2(e){const t=r=>e().update(Pl(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Yp(e=32){if(Qc&&typeof Qc.getRandomValues=="function")return Qc.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function a2(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),a=BigInt(4294967295),c=Number(n>>o&a),d=Number(n&a),f=r?4:0,h=r?0:4;e.setUint32(t+f,c,r),e.setUint32(t+h,d,r)}let c2=class extends Zp{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Xc(this.buffer)}update(t){Vs(this);const{view:n,buffer:r,blockLen:o}=this;t=Pl(t);const a=t.length;for(let c=0;c<a;){const d=Math.min(o-this.pos,a-c);if(d===o){const f=Xc(t);for(;o<=a-c;c+=o)this.process(f,c);continue}r.set(t.subarray(c,c+d),this.pos),this.pos+=d,c+=d,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Vs(this),n2(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:a}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>o-c&&(this.process(r,0),c=0);for(let b=c;b<o;b++)n[b]=0;a2(r,o-8,BigInt(this.length*8),a),this.process(r,0);const d=Xc(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,y=this.get();if(h>y.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<h;b++)d.setUint32(4*b,y[b],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:a,destroyed:c,pos:d}=this;return t.length=o,t.pos=d,t.finished=a,t.destroyed=c,o%n&&t.buffer.set(r),t}};const u2=(e,t,n)=>e&t^~e&n,l2=(e,t,n)=>e&t^e&n^t&n,d2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_r=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Er=new Uint32Array(64);let f2=class extends c2{constructor(){super(64,32,8,!1),this.A=_r[0]|0,this.B=_r[1]|0,this.C=_r[2]|0,this.D=_r[3]|0,this.E=_r[4]|0,this.F=_r[5]|0,this.G=_r[6]|0,this.H=_r[7]|0}get(){const{A:t,B:n,C:r,D:o,E:a,F:c,G:d,H:f}=this;return[t,n,r,o,a,c,d,f]}set(t,n,r,o,a,c,d,f){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=a|0,this.F=c|0,this.G=d|0,this.H=f|0}process(t,n){for(let b=0;b<16;b++,n+=4)Er[b]=t.getUint32(n,!1);for(let b=16;b<64;b++){const S=Er[b-15],C=Er[b-2],L=kn(S,7)^kn(S,18)^S>>>3,A=kn(C,17)^kn(C,19)^C>>>10;Er[b]=A+Er[b-7]+L+Er[b-16]|0}let{A:r,B:o,C:a,D:c,E:d,F:f,G:h,H:y}=this;for(let b=0;b<64;b++){const S=kn(d,6)^kn(d,11)^kn(d,25),C=y+S+u2(d,f,h)+d2[b]+Er[b]|0,A=(kn(r,2)^kn(r,13)^kn(r,22))+l2(r,o,a)|0;y=h,h=f,f=d,d=c+C|0,c=a,a=o,o=r,r=C+A|0}r=r+this.A|0,o=o+this.B|0,a=a+this.C|0,c=c+this.D|0,d=d+this.E|0,f=f+this.F|0,h=h+this.G|0,y=y+this.H|0,this.set(r,o,a,c,d,f,h,y)}roundClean(){Er.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const zu=s2(()=>new f2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jp=BigInt(0),ka=BigInt(1),h2=BigInt(2),Aa=e=>e instanceof Uint8Array,p2=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ti(e){if(!Aa(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=p2[e[n]];return t}function Qp(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Bl(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function ni(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,a=e.slice(o,o+2),c=Number.parseInt(a,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");n[r]=c}return n}function Ht(e){return Bl(ti(e))}function Il(e){if(!Aa(e))throw new Error("Uint8Array expected");return Bl(ti(Uint8Array.from(e).reverse()))}function Nr(e,t){return ni(e.toString(16).padStart(t*2,"0"))}function Ll(e,t){return Nr(e,t).reverse()}function g2(e){return ni(Qp(e))}function St(e,t,n){let r;if(typeof t=="string")try{r=ni(t)}catch(a){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${a}`)}else if(Aa(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function mo(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Aa(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function w2(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function b2(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function m2(e){let t;for(t=0;e>Jp;e>>=ka,t+=1);return t}function y2(e,t){return e>>BigInt(t)&ka}const v2=(e,t,n)=>e|(n?ka:Jp)<<BigInt(t),Cl=e=>(h2<<BigInt(e-1))-ka,eu=e=>new Uint8Array(e),ch=e=>Uint8Array.from(e);function Xp(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=eu(e),o=eu(e),a=0;const c=()=>{r.fill(1),o.fill(0),a=0},d=(...b)=>n(o,r,...b),f=(b=eu())=>{o=d(ch([0]),b),r=d(),b.length!==0&&(o=d(ch([1]),b),r=d())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const S=[];for(;b<t;){r=d();const C=r.slice();S.push(C),b+=r.length}return mo(...S)};return(b,S)=>{c(),f(b);let C;for(;!(C=S(h()));)f();return c(),C}}const _2={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function es(e,t,n={}){const r=(o,a,c)=>{const d=_2[a];if(typeof d!="function")throw new Error(`Invalid validator "${a}", expected function`);const f=e[o];if(!(c&&f===void 0)&&!d(f,e))throw new Error(`Invalid param ${String(o)}=${f} (${typeof f}), expected ${a}`)};for(const[o,a]of Object.entries(t))r(o,a,!1);for(const[o,a]of Object.entries(n))r(o,a,!0);return e}const E2=Object.freeze(Object.defineProperty({__proto__:null,bitGet:y2,bitLen:m2,bitMask:Cl,bitSet:v2,bytesToHex:ti,bytesToNumberBE:Ht,bytesToNumberLE:Il,concatBytes:mo,createHmacDrbg:Xp,ensureBytes:St,equalBytes:w2,hexToBytes:ni,hexToNumber:Bl,numberToBytesBE:Nr,numberToBytesLE:Ll,numberToHexUnpadded:Qp,numberToVarBytesBE:g2,utf8ToBytes:b2,validateObject:es},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pt=BigInt(0),rt=BigInt(1),lo=BigInt(2),k2=BigInt(3),Uu=BigInt(4),uh=BigInt(5),lh=BigInt(8);BigInt(9);BigInt(16);function yt(e,t){const n=e%t;return n>=pt?n:t+n}function A2(e,t,n){if(n<=pt||t<pt)throw new Error("Expected power/modulo > 0");if(n===rt)return pt;let r=rt;for(;t>pt;)t&rt&&(r=r*e%n),e=e*e%n,t>>=rt;return r}function Qt(e,t,n){let r=e;for(;t-- >pt;)r*=r,r%=n;return r}function Mu(e,t){if(e===pt||t<=pt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=yt(e,t),r=t,o=pt,a=rt;for(;n!==pt;){const d=r/n,f=r%n,h=o-a*d;r=n,n=f,o=a,a=h}if(r!==rt)throw new Error("invert: does not exist");return yt(o,t)}function S2(e){const t=(e-rt)/lo;let n,r,o;for(n=e-rt,r=0;n%lo===pt;n/=lo,r++);for(o=lo;o<e&&A2(o,t,e)!==e-rt;o++);if(r===1){const c=(e+rt)/Uu;return function(f,h){const y=f.pow(h,c);if(!f.eql(f.sqr(y),h))throw new Error("Cannot find square root");return y}}const a=(n+rt)/lo;return function(d,f){if(d.pow(f,t)===d.neg(d.ONE))throw new Error("Cannot find square root");let h=r,y=d.pow(d.mul(d.ONE,o),n),b=d.pow(f,a),S=d.pow(f,n);for(;!d.eql(S,d.ONE);){if(d.eql(S,d.ZERO))return d.ZERO;let C=1;for(let A=d.sqr(S);C<h&&!d.eql(A,d.ONE);C++)A=d.sqr(A);const L=d.pow(y,rt<<BigInt(h-C-1));y=d.sqr(L),b=d.mul(b,L),S=d.mul(S,y),h=C}return b}}function $2(e){if(e%Uu===k2){const t=(e+rt)/Uu;return function(r,o){const a=r.pow(o,t);if(!r.eql(r.sqr(a),o))throw new Error("Cannot find square root");return a}}if(e%lh===uh){const t=(e-uh)/lh;return function(r,o){const a=r.mul(o,lo),c=r.pow(a,t),d=r.mul(o,c),f=r.mul(r.mul(d,lo),c),h=r.mul(d,r.sub(f,r.ONE));if(!r.eql(r.sqr(h),o))throw new Error("Cannot find square root");return h}}return S2(e)}const x2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function T2(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=x2.reduce((r,o)=>(r[o]="function",r),t);return es(e,n)}function P2(e,t,n){if(n<pt)throw new Error("Expected power > 0");if(n===pt)return e.ONE;if(n===rt)return t;let r=e.ONE,o=t;for(;n>pt;)n&rt&&(r=e.mul(r,o)),o=e.sqr(o),n>>=rt;return r}function B2(e,t){const n=new Array(t.length),r=t.reduce((a,c,d)=>e.is0(c)?a:(n[d]=a,e.mul(a,c)),e.ONE),o=e.inv(r);return t.reduceRight((a,c,d)=>e.is0(c)?a:(n[d]=e.mul(a,n[d]),e.mul(a,c)),o),n}function eg(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function I2(e,t,n=!1,r={}){if(e<=pt)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:a}=eg(e,t);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=$2(e),d=Object.freeze({ORDER:e,BITS:o,BYTES:a,MASK:Cl(o),ZERO:pt,ONE:rt,create:f=>yt(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return pt<=f&&f<e},is0:f=>f===pt,isOdd:f=>(f&rt)===rt,neg:f=>yt(-f,e),eql:(f,h)=>f===h,sqr:f=>yt(f*f,e),add:(f,h)=>yt(f+h,e),sub:(f,h)=>yt(f-h,e),mul:(f,h)=>yt(f*h,e),pow:(f,h)=>P2(d,f,h),div:(f,h)=>yt(f*Mu(h,e),e),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>Mu(f,e),sqrt:r.sqrt||(f=>c(d,f)),invertBatch:f=>B2(d,f),cmov:(f,h,y)=>y?h:f,toBytes:f=>n?Ll(f,a):Nr(f,a),fromBytes:f=>{if(f.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${f.length}`);return n?Il(f):Ht(f)}});return Object.freeze(d)}function tg(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function ng(e){const t=tg(e);return t+Math.ceil(t/2)}function L2(e,t,n=!1){const r=e.length,o=tg(t),a=ng(t);if(r<16||r<a||r>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${r}`);const c=n?Ht(e):Il(e),d=yt(c,t-rt)+rt;return n?Ll(d,o):Nr(d,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const C2=BigInt(0),tu=BigInt(1);function O2(e,t){const n=(o,a)=>{const c=a.negate();return o?c:a},r=o=>{const a=Math.ceil(t/o)+1,c=2**(o-1);return{windows:a,windowSize:c}};return{constTimeNegate:n,unsafeLadder(o,a){let c=e.ZERO,d=o;for(;a>C2;)a&tu&&(c=c.add(d)),d=d.double(),a>>=tu;return c},precomputeWindow(o,a){const{windows:c,windowSize:d}=r(a),f=[];let h=o,y=h;for(let b=0;b<c;b++){y=h,f.push(y);for(let S=1;S<d;S++)y=y.add(h),f.push(y);h=y.double()}return f},wNAF(o,a,c){const{windows:d,windowSize:f}=r(o);let h=e.ZERO,y=e.BASE;const b=BigInt(2**o-1),S=2**o,C=BigInt(o);for(let L=0;L<d;L++){const A=L*f;let N=Number(c&b);c>>=C,N>f&&(N-=S,c+=tu);const M=A,B=A+Math.abs(N)-1,O=L%2!==0,l=N<0;N===0?y=y.add(n(O,a[M])):h=h.add(n(l,a[B]))}return{p:h,f:y}},wNAFCached(o,a,c,d){const f=o._WINDOW_SIZE||1;let h=a.get(o);return h||(h=this.precomputeWindow(o,f),f!==1&&a.set(o,d(h))),this.wNAF(f,h,c)}}}function rg(e){return T2(e.Fp),es(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...eg(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function N2(e){const t=rg(e);es(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:R2,hexToBytes:z2}=E2,go={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=go;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:R2(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=go,n=typeof e=="string"?z2(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:a}=go._parseInt(n.subarray(2)),{d:c,l:d}=go._parseInt(a);if(d.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:c}},hexFromSig(e){const t=h=>Number.parseInt(h[0],16)&8?"00"+h:h,n=h=>{const y=h.toString(16);return y.length&1?`0${y}`:y},r=t(n(e.s)),o=t(n(e.r)),a=r.length/2,c=o.length/2,d=n(a),f=n(c);return`30${n(c+a+4)}02${f}${o}02${d}${r}`}},Wn=BigInt(0),en=BigInt(1);BigInt(2);const dh=BigInt(3);BigInt(4);function U2(e){const t=N2(e),{Fp:n}=t,r=t.toBytes||((L,A,N)=>{const M=A.toAffine();return mo(Uint8Array.from([4]),n.toBytes(M.x),n.toBytes(M.y))}),o=t.fromBytes||(L=>{const A=L.subarray(1),N=n.fromBytes(A.subarray(0,n.BYTES)),M=n.fromBytes(A.subarray(n.BYTES,2*n.BYTES));return{x:N,y:M}});function a(L){const{a:A,b:N}=t,M=n.sqr(L),B=n.mul(M,L);return n.add(n.add(B,n.mul(L,A)),N)}if(!n.eql(n.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function c(L){return typeof L=="bigint"&&Wn<L&&L<t.n}function d(L){if(!c(L))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(L){const{allowedPrivateKeyLengths:A,nByteLength:N,wrapPrivateKey:M,n:B}=t;if(A&&typeof L!="bigint"){if(L instanceof Uint8Array&&(L=ti(L)),typeof L!="string"||!A.includes(L.length))throw new Error("Invalid key");L=L.padStart(N*2,"0")}let O;try{O=typeof L=="bigint"?L:Ht(St("private key",L,N))}catch{throw new Error(`private key must be ${N} bytes, hex or bigint, not ${typeof L}`)}return M&&(O=yt(O,B)),d(O),O}const h=new Map;function y(L){if(!(L instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(A,N,M){if(this.px=A,this.py=N,this.pz=M,A==null||!n.isValid(A))throw new Error("x required");if(N==null||!n.isValid(N))throw new Error("y required");if(M==null||!n.isValid(M))throw new Error("z required")}static fromAffine(A){const{x:N,y:M}=A||{};if(!A||!n.isValid(N)||!n.isValid(M))throw new Error("invalid affine point");if(A instanceof b)throw new Error("projective point not allowed");const B=O=>n.eql(O,n.ZERO);return B(N)&&B(M)?b.ZERO:new b(N,M,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const N=n.invertBatch(A.map(M=>M.pz));return A.map((M,B)=>M.toAffine(N[B])).map(b.fromAffine)}static fromHex(A){const N=b.fromAffine(o(St("pointHex",A)));return N.assertValidity(),N}static fromPrivateKey(A){return b.BASE.multiply(f(A))}_setWindowSize(A){this._WINDOW_SIZE=A,h.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:A,y:N}=this.toAffine();if(!n.isValid(A)||!n.isValid(N))throw new Error("bad point: x or y not FE");const M=n.sqr(N),B=a(A);if(!n.eql(M,B))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:A}=this.toAffine();if(n.isOdd)return!n.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){y(A);const{px:N,py:M,pz:B}=this,{px:O,py:l,pz:w}=A,p=n.eql(n.mul(N,w),n.mul(O,B)),v=n.eql(n.mul(M,w),n.mul(l,B));return p&&v}negate(){return new b(this.px,n.neg(this.py),this.pz)}double(){const{a:A,b:N}=t,M=n.mul(N,dh),{px:B,py:O,pz:l}=this;let w=n.ZERO,p=n.ZERO,v=n.ZERO,x=n.mul(B,B),R=n.mul(O,O),T=n.mul(l,l),E=n.mul(B,O);return E=n.add(E,E),v=n.mul(B,l),v=n.add(v,v),w=n.mul(A,v),p=n.mul(M,T),p=n.add(w,p),w=n.sub(R,p),p=n.add(R,p),p=n.mul(w,p),w=n.mul(E,w),v=n.mul(M,v),T=n.mul(A,T),E=n.sub(x,T),E=n.mul(A,E),E=n.add(E,v),v=n.add(x,x),x=n.add(v,x),x=n.add(x,T),x=n.mul(x,E),p=n.add(p,x),T=n.mul(O,l),T=n.add(T,T),x=n.mul(T,E),w=n.sub(w,x),v=n.mul(T,R),v=n.add(v,v),v=n.add(v,v),new b(w,p,v)}add(A){y(A);const{px:N,py:M,pz:B}=this,{px:O,py:l,pz:w}=A;let p=n.ZERO,v=n.ZERO,x=n.ZERO;const R=t.a,T=n.mul(t.b,dh);let E=n.mul(N,O),$=n.mul(M,l),j=n.mul(B,w),F=n.add(N,M),I=n.add(O,l);F=n.mul(F,I),I=n.add(E,$),F=n.sub(F,I),I=n.add(N,B);let k=n.add(O,w);return I=n.mul(I,k),k=n.add(E,j),I=n.sub(I,k),k=n.add(M,B),p=n.add(l,w),k=n.mul(k,p),p=n.add($,j),k=n.sub(k,p),x=n.mul(R,I),p=n.mul(T,j),x=n.add(p,x),p=n.sub($,x),x=n.add($,x),v=n.mul(p,x),$=n.add(E,E),$=n.add($,E),j=n.mul(R,j),I=n.mul(T,I),$=n.add($,j),j=n.sub(E,j),j=n.mul(R,j),I=n.add(I,j),E=n.mul($,I),v=n.add(v,E),E=n.mul(k,I),p=n.mul(F,p),p=n.sub(p,E),E=n.mul(F,$),x=n.mul(k,x),x=n.add(x,E),new b(p,v,x)}subtract(A){return this.add(A.negate())}is0(){return this.equals(b.ZERO)}wNAF(A){return C.wNAFCached(this,h,A,N=>{const M=n.invertBatch(N.map(B=>B.pz));return N.map((B,O)=>B.toAffine(M[O])).map(b.fromAffine)})}multiplyUnsafe(A){const N=b.ZERO;if(A===Wn)return N;if(d(A),A===en)return this;const{endo:M}=t;if(!M)return C.unsafeLadder(this,A);let{k1neg:B,k1:O,k2neg:l,k2:w}=M.splitScalar(A),p=N,v=N,x=this;for(;O>Wn||w>Wn;)O&en&&(p=p.add(x)),w&en&&(v=v.add(x)),x=x.double(),O>>=en,w>>=en;return B&&(p=p.negate()),l&&(v=v.negate()),v=new b(n.mul(v.px,M.beta),v.py,v.pz),p.add(v)}multiply(A){d(A);let N=A,M,B;const{endo:O}=t;if(O){const{k1neg:l,k1:w,k2neg:p,k2:v}=O.splitScalar(N);let{p:x,f:R}=this.wNAF(w),{p:T,f:E}=this.wNAF(v);x=C.constTimeNegate(l,x),T=C.constTimeNegate(p,T),T=new b(n.mul(T.px,O.beta),T.py,T.pz),M=x.add(T),B=R.add(E)}else{const{p:l,f:w}=this.wNAF(N);M=l,B=w}return b.normalizeZ([M,B])[0]}multiplyAndAddUnsafe(A,N,M){const B=b.BASE,O=(w,p)=>p===Wn||p===en||!w.equals(B)?w.multiplyUnsafe(p):w.multiply(p),l=O(this,N).add(O(A,M));return l.is0()?void 0:l}toAffine(A){const{px:N,py:M,pz:B}=this,O=this.is0();A==null&&(A=O?n.ONE:n.inv(B));const l=n.mul(N,A),w=n.mul(M,A),p=n.mul(B,A);if(O)return{x:n.ZERO,y:n.ZERO};if(!n.eql(p,n.ONE))throw new Error("invZ was invalid");return{x:l,y:w}}isTorsionFree(){const{h:A,isTorsionFree:N}=t;if(A===en)return!0;if(N)return N(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:N}=t;return A===en?this:N?N(b,this):this.multiplyUnsafe(t.h)}toRawBytes(A=!0){return this.assertValidity(),r(b,this,A)}toHex(A=!0){return ti(this.toRawBytes(A))}}b.BASE=new b(t.Gx,t.Gy,n.ONE),b.ZERO=new b(n.ZERO,n.ONE,n.ZERO);const S=t.nBitLength,C=O2(b,t.endo?Math.ceil(S/2):S);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:f,weierstrassEquation:a,isWithinCurveOrder:c}}function M2(e){const t=rg(e);return es(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function j2(e){const t=M2(e),{Fp:n,n:r}=t,o=n.BYTES+1,a=2*n.BYTES+1;function c(I){return Wn<I&&I<n.ORDER}function d(I){return yt(I,r)}function f(I){return Mu(I,r)}const{ProjectivePoint:h,normPrivateKeyToScalar:y,weierstrassEquation:b,isWithinCurveOrder:S}=U2({...t,toBytes(I,k,V){const W=k.toAffine(),K=n.toBytes(W.x),Y=mo;return V?Y(Uint8Array.from([k.hasEvenY()?2:3]),K):Y(Uint8Array.from([4]),K,n.toBytes(W.y))},fromBytes(I){const k=I.length,V=I[0],W=I.subarray(1);if(k===o&&(V===2||V===3)){const K=Ht(W);if(!c(K))throw new Error("Point is not on curve");const Y=b(K);let Z=n.sqrt(Y);const se=(Z&en)===en;return(V&1)===1!==se&&(Z=n.neg(Z)),{x:K,y:Z}}else if(k===a&&V===4){const K=n.fromBytes(W.subarray(0,n.BYTES)),Y=n.fromBytes(W.subarray(n.BYTES,2*n.BYTES));return{x:K,y:Y}}else throw new Error(`Point of length ${k} was invalid. Expected ${o} compressed bytes or ${a} uncompressed bytes`)}}),C=I=>ti(Nr(I,t.nByteLength));function L(I){const k=r>>en;return I>k}function A(I){return L(I)?d(-I):I}const N=(I,k,V)=>Ht(I.slice(k,V));class M{constructor(k,V,W){this.r=k,this.s=V,this.recovery=W,this.assertValidity()}static fromCompact(k){const V=t.nByteLength;return k=St("compactSignature",k,V*2),new M(N(k,0,V),N(k,V,2*V))}static fromDER(k){const{r:V,s:W}=go.toSig(St("DER",k));return new M(V,W)}assertValidity(){if(!S(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!S(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(k){return new M(this.r,this.s,k)}recoverPublicKey(k){const{r:V,s:W,recovery:K}=this,Y=v(St("msgHash",k));if(K==null||![0,1,2,3].includes(K))throw new Error("recovery id invalid");const Z=K===2||K===3?V+t.n:V;if(Z>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const se=K&1?"03":"02",ge=h.fromHex(se+C(Z)),me=f(Z),Se=d(-Y*me),re=d(W*me),ye=h.BASE.multiplyAndAddUnsafe(ge,Se,re);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return L(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,d(-this.s),this.recovery):this}toDERRawBytes(){return ni(this.toDERHex())}toDERHex(){return go.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ni(this.toCompactHex())}toCompactHex(){return C(this.r)+C(this.s)}}const B={isValidPrivateKey(I){try{return y(I),!0}catch{return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const I=ng(t.n);return L2(t.randomBytes(I),t.n)},precompute(I=8,k=h.BASE){return k._setWindowSize(I),k.multiply(BigInt(3)),k}};function O(I,k=!0){return h.fromPrivateKey(I).toRawBytes(k)}function l(I){const k=I instanceof Uint8Array,V=typeof I=="string",W=(k||V)&&I.length;return k?W===o||W===a:V?W===2*o||W===2*a:I instanceof h}function w(I,k,V=!0){if(l(I))throw new Error("first arg must be private key");if(!l(k))throw new Error("second arg must be public key");return h.fromHex(k).multiply(y(I)).toRawBytes(V)}const p=t.bits2int||function(I){const k=Ht(I),V=I.length*8-t.nBitLength;return V>0?k>>BigInt(V):k},v=t.bits2int_modN||function(I){return d(p(I))},x=Cl(t.nBitLength);function R(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Wn<=I&&I<x))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Nr(I,t.nByteLength)}function T(I,k,V=E){if(["recovered","canonical"].some(Oe=>Oe in V))throw new Error("sign() legacy options not supported");const{hash:W,randomBytes:K}=t;let{lowS:Y,prehash:Z,extraEntropy:se}=V;Y==null&&(Y=!0),I=St("msgHash",I),Z&&(I=St("prehashed msgHash",W(I)));const ge=v(I),me=y(k),Se=[R(me),R(ge)];if(se!=null){const Oe=se===!0?K(n.BYTES):se;Se.push(St("extraEntropy",Oe))}const re=mo(...Se),ye=ge;function Ie(Oe){const Me=p(Oe);if(!S(Me))return;const ft=f(Me),Fe=h.BASE.multiply(Me).toAffine(),ie=d(Fe.x);if(ie===Wn)return;const Re=d(ft*d(ye+ie*me));if(Re===Wn)return;let Te=(Fe.x===ie?0:2)|Number(Fe.y&en),Pe=Re;return Y&&L(Re)&&(Pe=A(Re),Te^=1),new M(ie,Pe,Te)}return{seed:re,k2sig:Ie}}const E={lowS:t.lowS,prehash:!1},$={lowS:t.lowS,prehash:!1};function j(I,k,V=E){const{seed:W,k2sig:K}=T(I,k,V),Y=t;return Xp(Y.hash.outputLen,Y.nByteLength,Y.hmac)(W,K)}h.BASE._setWindowSize(8);function F(I,k,V,W=$){var Fe;const K=I;if(k=St("msgHash",k),V=St("publicKey",V),"strict"in W)throw new Error("options.strict was renamed to lowS");const{lowS:Y,prehash:Z}=W;let se,ge;try{if(typeof K=="string"||K instanceof Uint8Array)try{se=M.fromDER(K)}catch(ie){if(!(ie instanceof go.Err))throw ie;se=M.fromCompact(K)}else if(typeof K=="object"&&typeof K.r=="bigint"&&typeof K.s=="bigint"){const{r:ie,s:Re}=K;se=new M(ie,Re)}else throw new Error("PARSE");ge=h.fromHex(V)}catch(ie){if(ie.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Y&&se.hasHighS())return!1;Z&&(k=t.hash(k));const{r:me,s:Se}=se,re=v(k),ye=f(Se),Ie=d(re*ye),Oe=d(me*ye),Me=(Fe=h.BASE.multiplyAndAddUnsafe(ge,Ie,Oe))==null?void 0:Fe.toAffine();return Me?d(Me.x)===me:!1}return{CURVE:t,getPublicKey:O,getSharedSecret:w,sign:j,verify:F,ProjectivePoint:h,Signature:M,utils:B}}let og=class extends Zp{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,t2(t);const r=Pl(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,a=new Uint8Array(o);a.set(r.length>o?t.create().update(r).digest():r);for(let c=0;c<a.length;c++)a[c]^=54;this.iHash.update(a),this.oHash=t.create();for(let c=0;c<a.length;c++)a[c]^=106;this.oHash.update(a),a.fill(0)}update(t){return Vs(this),this.iHash.update(t),this}digestInto(t){Vs(this),Kp(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:a,blockLen:c,outputLen:d}=this;return t=t,t.finished=o,t.destroyed=a,t.blockLen=c,t.outputLen=d,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const ig=(e,t,n)=>new og(e,t).update(n).digest();ig.create=(e,t)=>new og(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function H2(e){return{hash:e,hmac:(t,...n)=>ig(e,t,i2(...n)),randomBytes:Yp}}function D2(e,t){const n=r=>j2({...e,...H2(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sa=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),qs=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),sg=BigInt(1),Fs=BigInt(2),fh=(e,t)=>(e+t/Fs)/t;function ag(e){const t=Sa,n=BigInt(3),r=BigInt(6),o=BigInt(11),a=BigInt(22),c=BigInt(23),d=BigInt(44),f=BigInt(88),h=e*e*e%t,y=h*h*e%t,b=Qt(y,n,t)*y%t,S=Qt(b,n,t)*y%t,C=Qt(S,Fs,t)*h%t,L=Qt(C,o,t)*C%t,A=Qt(L,a,t)*L%t,N=Qt(A,d,t)*A%t,M=Qt(N,f,t)*N%t,B=Qt(M,d,t)*A%t,O=Qt(B,n,t)*y%t,l=Qt(O,c,t)*L%t,w=Qt(l,r,t)*h%t,p=Qt(w,Fs,t);if(!ju.eql(ju.sqr(p),e))throw new Error("Cannot find square root");return p}const ju=I2(Sa,void 0,void 0,{sqrt:ag}),Ol=D2({a:BigInt(0),b:BigInt(7),Fp:ju,n:qs,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=qs,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-sg*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=n,c=BigInt("0x100000000000000000000000000000000"),d=fh(a*e,t),f=fh(-r*e,t);let h=yt(e-d*n-f*o,t),y=yt(-d*r-f*a,t);const b=h>c,S=y>c;if(b&&(h=t-h),S&&(y=t-y),h>c||y>c)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:b,k1:h,k2neg:S,k2:y}}}},zu),$a=BigInt(0),cg=e=>typeof e=="bigint"&&$a<e&&e<Sa,V2=e=>typeof e=="bigint"&&$a<e&&e<qs,hh={};function Ws(e,...t){let n=hh[e];if(n===void 0){const r=zu(Uint8Array.from(e,o=>o.charCodeAt(0)));n=mo(r,r),hh[e]=n}return zu(mo(n,...t))}const Nl=e=>e.toRawBytes(!0).slice(1),Hu=e=>Nr(e,32),nu=e=>yt(e,Sa),Hi=e=>yt(e,qs),Rl=Ol.ProjectivePoint,q2=(e,t,n)=>Rl.BASE.multiplyAndAddUnsafe(e,t,n);function Du(e){let t=Ol.utils.normPrivateKeyToScalar(e),n=Rl.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Hi(-t),bytes:Nl(n)}}function ug(e){if(!cg(e))throw new Error("bad x: need 0 < x < p");const t=nu(e*e),n=nu(t*e+BigInt(7));let r=ag(n);r%Fs!==$a&&(r=nu(-r));const o=new Rl(e,r,sg);return o.assertValidity(),o}function lg(...e){return Hi(Ht(Ws("BIP0340/challenge",...e)))}function F2(e){return Du(e).bytes}function W2(e,t,n=Yp(32)){const r=St("message",e),{bytes:o,scalar:a}=Du(t),c=St("auxRand",n,32),d=Hu(a^Ht(Ws("BIP0340/aux",c))),f=Ws("BIP0340/nonce",d,o,r),h=Hi(Ht(f));if(h===$a)throw new Error("sign failed: k is zero");const{bytes:y,scalar:b}=Du(h),S=lg(y,o,r),C=new Uint8Array(64);if(C.set(y,0),C.set(Hu(Hi(b+S*a)),32),!dg(C,r,o))throw new Error("sign: Invalid signature produced");return C}function dg(e,t,n){const r=St("signature",e,64),o=St("message",t),a=St("publicKey",n,32);try{const c=ug(Ht(a)),d=Ht(r.subarray(0,32));if(!cg(d))return!1;const f=Ht(r.subarray(32,64));if(!V2(f))return!1;const h=lg(Hu(d),Nl(c),o),y=q2(c,f,Hi(-h));return!(!y||!y.hasEvenY()||y.toAffine().x!==d)}catch{return!1}}const xn={getPublicKey:F2,sign:W2,verify:dg,utils:{randomPrivateKey:Ol.utils.randomPrivateKey,lift_x:ug,pointToBytes:Nl,numberToBytesBE:Nr,bytesToNumberBE:Ht,taggedHash:Ws,mod:yt}},ao=Symbol("verified"),K2=e=>e instanceof Object;function G2(e){if(!K2(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}function Vu(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Z2(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function fg(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Y2(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Vu(e.outputLen),Vu(e.blockLen)}function J2(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Q2(e,t){fg(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const ru={number:Vu,bool:Z2,bytes:fg,hash:Y2,exists:J2,output:Q2};function X2(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),a=BigInt(4294967295),c=Number(n>>o&a),d=Number(n&a),f=r?4:0,h=r?0:4;e.setUint32(t+f,c,r),e.setUint32(t+h,d,r)}class ev extends C1{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Yc(this.buffer)}update(t){ru.exists(this);const{view:n,buffer:r,blockLen:o}=this;t=Up(t);const a=t.length;for(let c=0;c<a;){const d=Math.min(o-this.pos,a-c);if(d===o){const f=Yc(t);for(;o<=a-c;c+=o)this.process(f,c);continue}r.set(t.subarray(c,c+d),this.pos),this.pos+=d,c+=d,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ru.exists(this),ru.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:a}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>o-c&&(this.process(r,0),c=0);for(let b=c;b<o;b++)n[b]=0;X2(r,o-8,BigInt(this.length*8),a),this.process(r,0);const d=Yc(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,y=this.get();if(h>y.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<h;b++)d.setUint32(4*b,y[b],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:a,destroyed:c,pos:d}=this;return t.length=o,t.pos=d,t.finished=a,t.destroyed=c,o%n&&t.buffer.set(r),t}}const tv=(e,t,n)=>e&t^~e&n,nv=(e,t,n)=>e&t^e&n^t&n,rv=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ar=new Uint32Array(64);class hg extends ev{constructor(){super(64,32,8,!1),this.A=kr[0]|0,this.B=kr[1]|0,this.C=kr[2]|0,this.D=kr[3]|0,this.E=kr[4]|0,this.F=kr[5]|0,this.G=kr[6]|0,this.H=kr[7]|0}get(){const{A:t,B:n,C:r,D:o,E:a,F:c,G:d,H:f}=this;return[t,n,r,o,a,c,d,f]}set(t,n,r,o,a,c,d,f){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=a|0,this.F=c|0,this.G=d|0,this.H=f|0}process(t,n){for(let b=0;b<16;b++,n+=4)Ar[b]=t.getUint32(n,!1);for(let b=16;b<64;b++){const S=Ar[b-15],C=Ar[b-2],L=En(S,7)^En(S,18)^S>>>3,A=En(C,17)^En(C,19)^C>>>10;Ar[b]=A+Ar[b-7]+L+Ar[b-16]|0}let{A:r,B:o,C:a,D:c,E:d,F:f,G:h,H:y}=this;for(let b=0;b<64;b++){const S=En(d,6)^En(d,11)^En(d,25),C=y+S+tv(d,f,h)+rv[b]+Ar[b]|0,A=(En(r,2)^En(r,13)^En(r,22))+nv(r,o,a)|0;y=h,h=f,f=d,d=c+C|0,c=a,a=o,o=r,r=C+A|0}r=r+this.A|0,o=o+this.B|0,a=a+this.C|0,c=c+this.D|0,d=d+this.E|0,f=f+this.F|0,h=h+this.G|0,y=y+this.H|0,this.set(r,o,a,c,d,f,h,y)}roundClean(){Ar.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let ov=class extends hg{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const pg=Mp(()=>new hg);Mp(()=>new ov);let iv=class{generateSecretKey(){return xn.utils.randomPrivateKey()}getPublicKey(t){return Nt(xn.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=Nt(xn.getPublicKey(n)),r.id=ou(r),r.sig=Nt(xn.sign(ou(r),n)),r[ao]=!0,r}verifyEvent(t){if(typeof t[ao]=="boolean")return t[ao];const n=ou(t);if(n!==t.id)return t[ao]=!1,!1;try{const r=xn.verify(t.sig,n,t.pubkey);return t[ao]=r,r}catch{return t[ao]=!1,!1}}};function sv(e){if(!G2(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function ou(e){let t=pg(V1.encode(sv(e)));return Nt(t)}const xa=new iv;xa.generateSecretKey;xa.getPublicKey;xa.finalizeEvent;const av=xa.verifyEvent,cv=22242;function uv(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1)return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([a,c])=>a===n.slice(1)&&o.indexOf(c)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function lv(e,t){for(let n=0;n<e.length;n++)if(uv(e[n],t))return!0;return!1}function dv(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function fv(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let a=r+1+o;return e.slice(r+1,a)}function hv(e,t){return{kind:cv,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function pv(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}const gv=e=>(e[ao]=!0,!0);class zl{constructor(t,n){Le(this,"url");Le(this,"_connected",!1);Le(this,"onclose",null);Le(this,"onnotice",t=>console.debug(`NOTICE from ${this.url}: ${t}`));Le(this,"_onauth",null);Le(this,"baseEoseTimeout",4400);Le(this,"connectionTimeout",4400);Le(this,"publishTimeout",4400);Le(this,"openSubs",new Map);Le(this,"connectionTimeoutHandle");Le(this,"connectionPromise");Le(this,"openCountRequests",new Map);Le(this,"openEventPublishes",new Map);Le(this,"ws");Le(this,"incomingMessageQueue",new F1);Le(this,"queueRunning",!1);Le(this,"challenge");Le(this,"serial",0);Le(this,"verifyEvent");Le(this,"_WebSocket");this.url=Ii(t),this.verifyEvent=n.verifyEvent,this._WebSocket=n.websocketImplementation||WebSocket}static async connect(t,n){const r=new zl(t,n);return await r.connect(),r}closeAllSubscriptions(t){for(let[n,r]of this.openSubs)r.close(t);this.openSubs.clear();for(let[n,r]of this.openEventPublishes)r.reject(new Error(t));this.openEventPublishes.clear();for(let[n,r]of this.openCountRequests)r.reject(new Error(t));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((t,n)=>{this.connectionTimeoutHandle=setTimeout(()=>{var r;n("connection timed out"),this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(r){n(r);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,t()},this.ws.onerror=r=>{var o;n(r.message||"websocket error"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(o=this.onclose)==null||o.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var r;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await pv();this.queueRunning=!1}handleNext(){var r,o,a;const t=this.incomingMessageQueue.dequeue();if(!t)return!1;const n=fv(t);if(n){const c=this.openSubs.get(n);if(!c)return;const d=dv(t,"id"),f=(r=c.alreadyHaveEvent)==null?void 0:r.call(c,d);if((o=c.receivedEvent)==null||o.call(c,this,d),f)return}try{let c=JSON.parse(t);switch(c[0]){case"EVENT":{const d=this.openSubs.get(c[1]),f=c[2];this.verifyEvent(f)&&lv(d.filters,f)&&d.onevent(f);return}case"COUNT":{const d=c[1],f=c[2],h=this.openCountRequests.get(d);h&&(h.resolve(f.count),this.openCountRequests.delete(d));return}case"EOSE":{const d=this.openSubs.get(c[1]);if(!d)return;d.receivedEose();return}case"OK":{const d=c[1],f=c[2],h=c[3],y=this.openEventPublishes.get(d);y&&(f?y.resolve(h):y.reject(new Error(h)),this.openEventPublishes.delete(d));return}case"CLOSED":{const d=c[1],f=this.openSubs.get(d);if(!f)return;f.closed=!0,f.close(c[2]);return}case"NOTICE":this.onnotice(c[1]);return;case"AUTH":{this.challenge=c[1],(a=this._onauth)==null||a.call(this,c[1]);return}}}catch{return}}async send(t){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var n;(n=this.ws)==null||n.send(t)})}async auth(t){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const n=await t(hv(this.url,this.challenge)),r=new Promise((o,a)=>{this.openEventPublishes.set(n.id,{resolve:o,reject:a})});return this.send('["AUTH",'+JSON.stringify(n)+"]"),r}async publish(t){const n=new Promise((r,o)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:o})});return this.send('["EVENT",'+JSON.stringify(t)+"]"),setTimeout(()=>{const r=this.openEventPublishes.get(t.id);r&&(r.reject(new Error("publish timed out")),this.openEventPublishes.delete(t.id))},this.publishTimeout),n}async count(t,n){this.serial++;const r=(n==null?void 0:n.id)||"count:"+this.serial,o=new Promise((a,c)=>{this.openCountRequests.set(r,{resolve:a,reject:c})});return this.send('["COUNT","'+r+'",'+JSON.stringify(t).substring(1)),o}subscribe(t,n){const r=this.prepareSubscription(t,n);return r.fire(),r}prepareSubscription(t,n){this.serial++;const r=n.id||"sub:"+this.serial,o=new wv(this,r,t,n);return this.openSubs.set(r,o),o}close(){var t;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(t=this.ws)==null||t.close()}_onmessage(t){this.incomingMessageQueue.enqueue(t.data),this.queueRunning||this.runQueue()}}class wv{constructor(t,n,r,o){Le(this,"relay");Le(this,"id");Le(this,"closed",!1);Le(this,"eosed",!1);Le(this,"filters");Le(this,"alreadyHaveEvent");Le(this,"receivedEvent");Le(this,"onevent");Le(this,"oneose");Le(this,"onclose");Le(this,"eoseTimeout");Le(this,"eoseTimeoutHandle");this.relay=t,this.filters=r,this.id=n,this.alreadyHaveEvent=o.alreadyHaveEvent,this.receivedEvent=o.receivedEvent,this.eoseTimeout=o.eoseTimeout||t.baseEoseTimeout,this.oneose=o.oneose,this.onclose=o.onclose,this.onevent=o.onevent||(a=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,a)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var t;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(t=this.oneose)==null||t.call(this))}close(t="closed by caller"){var n;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(n=this.onclose)==null||n.call(this,t)}}var bv;try{bv=WebSocket}catch{}let mv=class{constructor(t){Le(this,"relays",new Map);Le(this,"seenOn",new Map);Le(this,"trackRelays",!1);Le(this,"verifyEvent");Le(this,"trustedRelayURLs",new Set);Le(this,"_WebSocket");this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation}async ensureRelay(t,n){t=Ii(t);let r=this.relays.get(t);return r||(r=new zl(t,{verifyEvent:this.trustedRelayURLs.has(t)?gv:this.verifyEvent,websocketImplementation:this._WebSocket}),n!=null&&n.connectionTimeout&&(r.connectionTimeout=n.connectionTimeout),this.relays.set(t,r)),await r.connect(),r}close(t){t.map(Ii).forEach(n=>{var r;(r=this.relays.get(n))==null||r.close()})}subscribeMany(t,n,r){return this.subscribeManyMap(Object.fromEntries(t.map(o=>[o,n])),r)}subscribeManyMap(t,n){this.trackRelays&&(n.receivedEvent=(S,C)=>{let L=this.seenOn.get(C);L||(L=new Set,this.seenOn.set(C,L)),L.add(S)});const r=new Set,o=[],a=Object.keys(t).length,c=[];let d=S=>{var C;c[S]=!0,c.filter(L=>L).length===a&&((C=n.oneose)==null||C.call(n),d=()=>{})};const f=[];let h=(S,C)=>{var L;d(S),f[S]=C,f.filter(A=>A).length===a&&((L=n.onclose)==null||L.call(n,f),h=()=>{})};const y=S=>{var L;if((L=n.alreadyHaveEvent)!=null&&L.call(n,S))return!0;const C=r.has(S);return r.add(S),C},b=Promise.all(Object.entries(t).map(async(S,C,L)=>{if(L.indexOf(S)!==C){h(C,"duplicate url");return}let[A,N]=S;A=Ii(A);let M;try{M=await this.ensureRelay(A,{connectionTimeout:n.maxWait?Math.max(n.maxWait*.8,n.maxWait-1e3):void 0})}catch(O){h(C,(O==null?void 0:O.message)||String(O));return}let B=M.subscribe(N,{...n,oneose:()=>d(C),onclose:O=>h(C,O),alreadyHaveEvent:y,eoseTimeout:n.maxWait});o.push(B)}));return{async close(){await b,o.forEach(S=>{S.close()})}}}subscribeManyEose(t,n,r){const o=this.subscribeMany(t,n,{...r,oneose(){o.close()}});return o}async querySync(t,n,r){return new Promise(async o=>{const a=[];this.subscribeManyEose(t,[n],{...r,onevent(c){a.push(c)},onclose(c){o(a)}})})}async get(t,n,r){n.limit=1;const o=await this.querySync(t,n,r);return o.sort((a,c)=>c.created_at-a.created_at),o[0]||null}publish(t,n){return t.map(Ii).map(async(r,o,a)=>{if(a.indexOf(r)!==o)return Promise.reject("duplicate url");let c=await this.ensureRelay(r);return c.publish(n).then(d=>{if(this.trackRelays){let f=this.seenOn.get(n.id);f||(f=new Set,this.seenOn.set(n.id,f)),f.add(c)}return d})})}listConnectionStatus(){const t=new Map;return this.relays.forEach((n,r)=>t.set(r,n.connected)),t}destroy(){this.relays.forEach(t=>t.close()),this.relays=new Map}};var gg;try{gg=WebSocket}catch{}let yv=class extends mv{constructor(){super({verifyEvent:av,websocketImplementation:gg})}},vv;try{vv=fetch}catch{}var _v;try{_v=fetch}catch{}var Ev;try{Ev=fetch}catch{}var kv;try{kv=fetch}catch{}const wg=["wss://purplepag.es","wss://relay.nos.social","wss://user.kindpag.es"],Av=["wss://purplepag.es","wss://relay.nos.social","wss://user.kindpag.es"];let Sv=0,$v=0;jl(3,wg,Ml(e=>{if(e.length>=2&&e[0]==="p")return e[1]}),e=>[]);const Ul=jl(10002,Av,Ml(e=>{if(e.length===2)return{url:e[1],read:!0,write:!0};if(e[2]==="read")return{url:e[1],read:!0,write:!1};if(e[2]==="write")return{url:e[1],read:!1,write:!0}}),e=>[{url:"wss://relay.damus.io",read:!0,write:!0},{url:"wss://nos.lol",read:!0,write:!0}]);jl(1e4,[],Ml(e=>{if(e.length>=2){switch(e[0]){case"p":return{label:"pubkey",value:e[1]};case"e":return{label:"thread",value:e[1]};case"t":return{label:"hashtag",value:e[1]};case"word":return{label:"word",value:e[1]}}return}}),e=>[]);function Ml(e){return t=>t?t.tags.map(e).filter(e2):[]}function jl(e,t,n,r){const o=Wp(),a=Tl(`@nostr/gadgets/list:${e}`,"cache"),c=new zp(d=>new Promise(async f=>{var S,C;let h=[],y=await Fp(d.map(L=>L.target),a).then(L=>L.map((A,N)=>{const M=d[N];return M.index=N,A?A.lastAttempt<Date.now()/1e3-172800?(h.push(M),A.lastAttempt=Math.round(Date.now()/1e3),A):(A.event===null&&A.lastAttempt<Date.now()/1e3-3600&&(h.push(M),A.lastAttempt=Math.round(Date.now()/1e3)),A):(h.push(M),{items:r(M.target),event:null})}));if(h.length===0){f(y);return}const b={};for(let L=0;L<h.length;L++){const A=h[L],N=A.relays.slice(0,Math.min(4,A.relays.length));do N.push(xv(t));while(N.length<3);for(let M=0;M<N.length;M++){const B=N[M];let O=b[B];O||(O=[{kinds:[e],authors:[]}],b[B]=O),(C=(S=O[0])==null?void 0:S.authors)==null||C.push(A.target)}}try{let L;L=Di.subscribeManyMap(b,{id:`kind:${e}:batch(${h.length})-${$v++}`,onevent(A){var N;for(let M=0;M<h.length;M++){const B=h[M];if(B.target===A.pubkey){const O=(N=y[B.index])==null?void 0:N.event;if(O!=null&&O.created_at||0>A.created_at)return;y[B.index]={event:A,items:n(A)};return}}},oneose(){L==null||L.close()},async onclose(){f(y),qp(h.map(A=>[A.target,y[A.index]]),a)}})}catch(L){f(y.map(A=>L))}}),{cache:!0,cacheKeyFn:d=>d.target,cacheMap:o});return async function(d,f=[]){let h=f;if(e===10002)return await c.load({target:d,relays:h});{const y=await Ul(d,f);return h.push(...y.items.filter(({write:b})=>b).map(({url:b})=>b).slice(0,3)),await c.load({target:d,relays:h})}}}function xv(e){return e[Sv++%e.length]}var qn;(function(e){e[e.lastFetchAttempt=0]="lastFetchAttempt",e[e.mostRecentEventFetched=1]="mostRecentEventFetched",e[e.lastInRelayList=2]="lastInRelayList",e[e.lastInTag=3]="lastInTag",e[e.lastInNprofile=4]="lastInNprofile",e[e.lastInNevent=5]="lastInNevent",e[e.lastInNIP05=6]="lastInNIP05"})(qn||(qn={}));qn.lastFetchAttempt+"",qn.mostRecentEventFetched+"",qn.lastInRelayList+"",qn.lastInTag+"",qn.lastInNprofile+"",qn.lastInNevent+"",qn.lastInNIP05+"";let Di=new yv,Tv=0,ph=0;const gh=Tl("@nostr/gadgets/metadata","cache");function Pv(e){return typeof e=="string"?wh.load({pubkey:e}):wh.load(e)}const wh=new zp(async e=>new Promise(async t=>{const n=[];let r=await Fp(e.map(a=>a.pubkey),gh).then(a=>a.map((c,d)=>{const f=e[d];if(c)return c.lastAttempt<Date.now()/1e3-172800?(n.push(f),c.lastAttempt=Math.round(Date.now()/1e3),c):(c.lastAttempt<Date.now()/1e3-3600&&!c.metadata.name&&!c.metadata.picture&&!c.metadata.about&&(n.push(f),c.lastAttempt=Math.round(Date.now()/1e3)),c);{n.push(f);let h=Bv(f.pubkey);return h.lastAttempt=Math.round(Date.now()/1e3),h}}));if(n.length===0){t(r);return}const o={};await Promise.all(n.map(async({pubkey:a,relays:c=[]})=>{const d=new Set(c.slice(0,3));try{const{items:f}=await Ul(a);let h=0;for(let y=0;y<f.length&&!(f[y].write&&(d.add(f[y].url),h++,h>=3));y++);}catch(f){console.error("Failed to load relay list for",a,f)}do d.add(wg[ph]),ph++;while(d.size<3);o[a]=Array.from(d)}));try{const a={};for(const[d,f]of Object.entries(o))for(const h of f)a[h]||(a[h]=[{kinds:[0],authors:[]}]),a[h][0].authors.push(d);let c=Di.subscribeManyMap(a,{id:`metadata(${e.length})-${Tv++}`,onevent(d){for(let f=0;f<e.length;f++)if(e[f].pubkey===d.pubkey){const h=r[f];if(h.lastUpdated>d.created_at)return;Iv(h,d);return}},oneose(){t(r),c.close();let d=[];for(let f=0;f<r.length;f++){let h=r[f];h.pubkey&&d.push([h.pubkey,h])}qp(d,gh)}})}catch(a){for(let c=0;c<r.length;c++)r[c]=a;t(r)}}),{cacheKeyFn:e=>e.pubkey,cache:!0,cacheMap:Wp()});function Bv(e){const t=K1(e);return{pubkey:e,npub:t,shortName:t.substring(0,8)+""+t.substring(59),lastUpdated:0,metadata:{}}}function Iv(e,t){var r,o;let n={};try{n=JSON.parse(t.content)}catch{}e.metadata=n,e.shortName=n.name||n.display_name||((o=(r=n.nip05)==null?void 0:r.split("@"))==null?void 0:o[0])||e.shortName,n.picture&&(e.image=n.picture)}const xs=new TextDecoder("utf-8"),bg=new TextEncoder,mg=5e3;function Lv(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}function yg(e){var o,a,c,d,f,h,y;let{prefix:t,words:n}=ei.decode(e,mg),r=new Uint8Array(ei.fromWords(n));switch(t){case"nprofile":{let b=iu(r);if(!((o=b[0])!=null&&o[0]))throw new Error("missing TLV 0 for nprofile");if(b[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Nt(b[0][0]),relays:b[1]?b[1].map(S=>xs.decode(S)):[]}}}case"nevent":{let b=iu(r);if(!((a=b[0])!=null&&a[0]))throw new Error("missing TLV 0 for nevent");if(b[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(b[2]&&b[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(b[3]&&b[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Nt(b[0][0]),relays:b[1]?b[1].map(S=>xs.decode(S)):[],author:(c=b[2])!=null&&c[0]?Nt(b[2][0]):void 0,kind:(d=b[3])!=null&&d[0]?parseInt(Nt(b[3][0]),16):void 0}}}case"naddr":{let b=iu(r);if(!((f=b[0])!=null&&f[0]))throw new Error("missing TLV 0 for naddr");if(!((h=b[2])!=null&&h[0]))throw new Error("missing TLV 2 for naddr");if(b[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((y=b[3])!=null&&y[0]))throw new Error("missing TLV 3 for naddr");if(b[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:xs.decode(b[0][0]),pubkey:Nt(b[2][0]),kind:parseInt(Nt(b[3][0]),16),relays:b[1]?b[1].map(S=>xs.decode(S)):[]}}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:Nt(r)};default:throw new Error(`unknown prefix ${t}`)}}function iu(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],a=n.slice(2,2+o);if(n=n.slice(2+o),a.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(a)}return t}function Cv(e,t){let n=ei.toWords(t);return ei.encode(e,n,mg)}function Ov(e){let t;e.kind!==void 0&&(t=Lv(e.kind));let n=Nv({0:[Cu(e.id)],1:(e.relays||[]).map(r=>bg.encode(r)),2:e.author?[Cu(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return Cv("nevent",n)}function Nv(e){let t=[];return Object.entries(e).reverse().forEach(([n,r])=>{r.forEach(o=>{let a=new Uint8Array(o.length+2);a.set([parseInt(n)],0),a.set([o.length],1),a.set(o,2),t.push(a)})}),L1(...t)}async function Hl(){var B,O,l,w,p,v,x,R;const e=document.querySelector('meta[name="author"]'),t=document.querySelector('meta[name="relays"]'),n=document.querySelector('meta[name="top-notes"]'),r=document.querySelector('meta[name="short-notes"]'),o=document.querySelector('meta[name="short-notes-min-chars"]'),a=document.querySelector('meta[name="short-notes-summary-max-chars"]'),c=document.querySelector('meta[name="topics"]'),d=document.querySelector('meta[name="comments"]');if(!e)throw new Error("Missing meta tags for configuration");const f=e.getAttribute("value");let h=[],y=[];const b=(O=(B=t==null?void 0:t.getAttribute)==null?void 0:B.call(t,"value"))==null?void 0:O.split(",").map(T=>T.trim());if(b&&b.length>0)h=b,y=b;else{const T=(await Ul(yg(f).data)).items;y=T.filter(E=>E.write).map(E=>E.url),h=T.filter(E=>E.read).map(E=>E.url)}const S=parseFloat(((l=n==null?void 0:n.getAttribute)==null?void 0:l.call(n,"value"))||"2")||2,C=parseFloat(((w=o==null?void 0:o.getAttribute)==null?void 0:w.call(o,"value"))||"800")||800,L=(()=>{var T;switch(((T=r==null?void 0:r.getAttribute)==null?void 0:T.call(r,"value"))||"carousel"){case"carousel":return"carousel";case"main":return"main";default:return""}})(),A=parseFloat(((p=a==null?void 0:a.getAttribute)==null?void 0:p.call(a,"value"))||"400")||400,N=((x=(v=c==null?void 0:c.getAttribute)==null?void 0:v.call(c,"value"))==null?void 0:x.split(",").map(T=>T.trim()).filter(T=>T!==""))||[],M=(((R=d==null?void 0:d.getAttribute)==null?void 0:R.call(d,"value"))||"yes")==="yes";return{npub:f,readRelays:h,writeRelays:y,topNotes:S,shortNotesMinChars:C,shortNotes:L,shortFeedSummaryMaxChars:A,topics:N,comments:M}}var vg={exports:{}};(function(e){(function(){function t(l){var w={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `` and `` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(l===!1)return JSON.parse(JSON.stringify(w));var p={};for(var v in w)w.hasOwnProperty(v)&&(p[v]=w[v].defaultValue);return p}function n(){var l=t(!0),w={};for(var p in l)l.hasOwnProperty(p)&&(w[p]=!0);return w}var r={},o={},a={},c=t(!0),d="vanilla",f={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:t(!0),allOn:n()};r.helper={},r.extensions={},r.setOption=function(l,w){return c[l]=w,this},r.getOption=function(l){return c[l]},r.getOptions=function(){return c},r.resetOptions=function(){c=t(!0)},r.setFlavor=function(l){if(!f.hasOwnProperty(l))throw Error(l+" flavor was not found");r.resetOptions();var w=f[l];d=l;for(var p in w)w.hasOwnProperty(p)&&(c[p]=w[p])},r.getFlavor=function(){return d},r.getFlavorOptions=function(l){if(f.hasOwnProperty(l))return f[l]},r.getDefaultOptions=function(l){return t(l)},r.subParser=function(l,w){if(r.helper.isString(l))if(typeof w<"u")o[l]=w;else{if(o.hasOwnProperty(l))return o[l];throw Error("SubParser named "+l+" not registered!")}},r.extension=function(l,w){if(!r.helper.isString(l))throw Error("Extension 'name' must be a string");if(l=r.helper.stdExtName(l),r.helper.isUndefined(w)){if(!a.hasOwnProperty(l))throw Error("Extension named "+l+" is not registered!");return a[l]}else{typeof w=="function"&&(w=w()),r.helper.isArray(w)||(w=[w]);var p=h(w,l);if(p.valid)a[l]=w;else throw Error(p.error)}},r.getAllExtensions=function(){return a},r.removeExtension=function(l){delete a[l]},r.resetExtensions=function(){a={}};function h(l,w){var p=w?"Error in "+w+" extension->":"Error in unnamed extension",v={valid:!0,error:""};r.helper.isArray(l)||(l=[l]);for(var x=0;x<l.length;++x){var R=p+" sub-extension "+x+": ",T=l[x];if(typeof T!="object")return v.valid=!1,v.error=R+"must be an object, but "+typeof T+" given",v;if(!r.helper.isString(T.type))return v.valid=!1,v.error=R+'property "type" must be a string, but '+typeof T.type+" given",v;var E=T.type=T.type.toLowerCase();if(E==="language"&&(E=T.type="lang"),E==="html"&&(E=T.type="output"),E!=="lang"&&E!=="output"&&E!=="listener")return v.valid=!1,v.error=R+"type "+E+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',v;if(E==="listener"){if(r.helper.isUndefined(T.listeners))return v.valid=!1,v.error=R+'. Extensions of type "listener" must have a property called "listeners"',v}else if(r.helper.isUndefined(T.filter)&&r.helper.isUndefined(T.regex))return v.valid=!1,v.error=R+E+' extensions must define either a "regex" property or a "filter" method',v;if(T.listeners){if(typeof T.listeners!="object")return v.valid=!1,v.error=R+'"listeners" property must be an object but '+typeof T.listeners+" given",v;for(var $ in T.listeners)if(T.listeners.hasOwnProperty($)&&typeof T.listeners[$]!="function")return v.valid=!1,v.error=R+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+$+" must be a function but "+typeof T.listeners[$]+" given",v}if(T.filter){if(typeof T.filter!="function")return v.valid=!1,v.error=R+'"filter" must be a function, but '+typeof T.filter+" given",v}else if(T.regex){if(r.helper.isString(T.regex)&&(T.regex=new RegExp(T.regex,"g")),!(T.regex instanceof RegExp))return v.valid=!1,v.error=R+'"regex" property must either be a string or a RegExp object, but '+typeof T.regex+" given",v;if(r.helper.isUndefined(T.replace))return v.valid=!1,v.error=R+'"regex" extensions must implement a replace string or function',v}}return v}r.validateExtension=function(l){var w=h(l,null);return w.valid?!0:(console.warn(w.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(l){return typeof l=="string"||l instanceof String},r.helper.isFunction=function(l){var w={};return l&&w.toString.call(l)==="[object Function]"},r.helper.isArray=function(l){return Array.isArray(l)},r.helper.isUndefined=function(l){return typeof l>"u"},r.helper.forEach=function(l,w){if(r.helper.isUndefined(l))throw new Error("obj param is required");if(r.helper.isUndefined(w))throw new Error("callback param is required");if(!r.helper.isFunction(w))throw new Error("callback param must be a function/closure");if(typeof l.forEach=="function")l.forEach(w);else if(r.helper.isArray(l))for(var p=0;p<l.length;p++)w(l[p],p,l);else if(typeof l=="object")for(var v in l)l.hasOwnProperty(v)&&w(l[v],v,l);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(l){return l.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function y(l,w){var p=w.charCodeAt(0);return"E"+p+"E"}r.helper.escapeCharactersCallback=y,r.helper.escapeCharacters=function(l,w,p){var v="(["+w.replace(/([\[\]\\])/g,"\\$1")+"])";p&&(v="\\\\"+v);var x=new RegExp(v,"g");return l=l.replace(x,y),l},r.helper.unescapeHTMLEntities=function(l){return l.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var b=function(l,w,p,v){var x=v||"",R=x.indexOf("g")>-1,T=new RegExp(w+"|"+p,"g"+x.replace(/g/g,"")),E=new RegExp(w,x.replace(/g/g,"")),$=[],j,F,I,k,V;do for(j=0;I=T.exec(l);)if(E.test(I[0]))j++||(F=T.lastIndex,k=F-I[0].length);else if(j&&!--j){V=I.index+I[0].length;var W={left:{start:k,end:F},match:{start:F,end:I.index},right:{start:I.index,end:V},wholeMatch:{start:k,end:V}};if($.push(W),!R)return $}while(j&&(T.lastIndex=F));return $};r.helper.matchRecursiveRegExp=function(l,w,p,v){for(var x=b(l,w,p,v),R=[],T=0;T<x.length;++T)R.push([l.slice(x[T].wholeMatch.start,x[T].wholeMatch.end),l.slice(x[T].match.start,x[T].match.end),l.slice(x[T].left.start,x[T].left.end),l.slice(x[T].right.start,x[T].right.end)]);return R},r.helper.replaceRecursiveRegExp=function(l,w,p,v,x){if(!r.helper.isFunction(w)){var R=w;w=function(){return R}}var T=b(l,p,v,x),E=l,$=T.length;if($>0){var j=[];T[0].wholeMatch.start!==0&&j.push(l.slice(0,T[0].wholeMatch.start));for(var F=0;F<$;++F)j.push(w(l.slice(T[F].wholeMatch.start,T[F].wholeMatch.end),l.slice(T[F].match.start,T[F].match.end),l.slice(T[F].left.start,T[F].left.end),l.slice(T[F].right.start,T[F].right.end))),F<$-1&&j.push(l.slice(T[F].wholeMatch.end,T[F+1].wholeMatch.start));T[$-1].wholeMatch.end<l.length&&j.push(l.slice(T[$-1].wholeMatch.end)),E=j.join("")}return E},r.helper.regexIndexOf=function(l,w,p){if(!r.helper.isString(l))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(w instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var v=l.substring(p||0).search(w);return v>=0?v+(p||0):v},r.helper.splitAtIndex=function(l,w){if(!r.helper.isString(l))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[l.substring(0,w),l.substring(w)]},r.helper.encodeEmailAddress=function(l){var w=[function(p){return"&#"+p.charCodeAt(0)+";"},function(p){return"&#x"+p.charCodeAt(0).toString(16)+";"},function(p){return p}];return l=l.replace(/./g,function(p){if(p==="@")p=w[Math.floor(Math.random()*2)](p);else{var v=Math.random();p=v>.9?w[2](p):v>.45?w[1](p):w[0](p)}return p}),l},r.helper.padEnd=function(w,p,v){return p=p>>0,v=String(v||" "),w.length>p?String(w):(p=p-w.length,p>v.length&&(v+=v.repeat(p/v.length)),String(w)+v.slice(0,p))},typeof console>"u"&&(console={warn:function(l){alert(l)},log:function(l){alert(l)},error:function(l){throw l}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"","-1":"",100:"",1234:"","1st_place_medal":"","2nd_place_medal":"","3rd_place_medal":"","8ball":"",a:"",ab:"",abc:"",abcd:"",accept:"",aerial_tramway:"",airplane:"",alarm_clock:"",alembic:"",alien:"",ambulance:"",amphora:"",anchor:"",angel:"",anger:"",angry:"",anguished:"",ant:"",apple:"",aquarius:"",aries:"",arrow_backward:"",arrow_double_down:"",arrow_double_up:"",arrow_down:"",arrow_down_small:"",arrow_forward:"",arrow_heading_down:"",arrow_heading_up:"",arrow_left:"",arrow_lower_left:"",arrow_lower_right:"",arrow_right:"",arrow_right_hook:"",arrow_up:"",arrow_up_down:"",arrow_up_small:"",arrow_upper_left:"",arrow_upper_right:"",arrows_clockwise:"",arrows_counterclockwise:"",art:"",articulated_lorry:"",artificial_satellite:"",astonished:"",athletic_shoe:"",atm:"",atom_symbol:"",avocado:"",b:"",baby:"",baby_bottle:"",baby_chick:"",baby_symbol:"",back:"",bacon:"",badminton:"",baggage_claim:"",baguette_bread:"",balance_scale:"",balloon:"",ballot_box:"",ballot_box_with_check:"",bamboo:"",banana:"",bangbang:"",bank:"",bar_chart:"",barber:"",baseball:"",basketball:"",basketball_man:"",basketball_woman:"&zwj;",bat:"",bath:"",bathtub:"",battery:"",beach_umbrella:"",bear:"",bed:"",bee:"",beer:"",beers:"",beetle:"",beginner:"",bell:"",bellhop_bell:"",bento:"",biking_man:"",bike:"",biking_woman:"&zwj;",bikini:"",biohazard:"",bird:"",birthday:"",black_circle:"",black_flag:"",black_heart:"",black_joker:"",black_large_square:"",black_medium_small_square:"",black_medium_square:"",black_nib:"",black_small_square:"",black_square_button:"",blonde_man:"",blonde_woman:"&zwj;",blossom:"",blowfish:"",blue_book:"",blue_car:"",blue_heart:"",blush:"",boar:"",boat:"",bomb:"",book:"",bookmark:"",bookmark_tabs:"",books:"",boom:"",boot:"",bouquet:"",bowing_man:"",bow_and_arrow:"",bowing_woman:"&zwj;",bowling:"",boxing_glove:"",boy:"",bread:"",bride_with_veil:"",bridge_at_night:"",briefcase:"",broken_heart:"",bug:"",building_construction:"",bulb:"",bullettrain_front:"",bullettrain_side:"",burrito:"",bus:"",business_suit_levitating:"",busstop:"",bust_in_silhouette:"",busts_in_silhouette:"",butterfly:"",cactus:"",cake:"",calendar:"",call_me_hand:"",calling:"",camel:"",camera:"",camera_flash:"",camping:"",cancer:"",candle:"",candy:"",canoe:"",capital_abcd:"",capricorn:"",car:"",card_file_box:"",card_index:"",card_index_dividers:"",carousel_horse:"",carrot:"",cat:"",cat2:"",cd:"",chains:"",champagne:"",chart:"",chart_with_downwards_trend:"",chart_with_upwards_trend:"",checkered_flag:"",cheese:"",cherries:"",cherry_blossom:"",chestnut:"",chicken:"",children_crossing:"",chipmunk:"",chocolate_bar:"",christmas_tree:"",church:"",cinema:"",circus_tent:"",city_sunrise:"",city_sunset:"",cityscape:"",cl:"",clamp:"",clap:"",clapper:"",classical_building:"",clinking_glasses:"",clipboard:"",clock1:"",clock10:"",clock1030:"",clock11:"",clock1130:"",clock12:"",clock1230:"",clock130:"",clock2:"",clock230:"",clock3:"",clock330:"",clock4:"",clock430:"",clock5:"",clock530:"",clock6:"",clock630:"",clock7:"",clock730:"",clock8:"",clock830:"",clock9:"",clock930:"",closed_book:"",closed_lock_with_key:"",closed_umbrella:"",cloud:"",cloud_with_lightning:"",cloud_with_lightning_and_rain:"",cloud_with_rain:"",cloud_with_snow:"",clown_face:"",clubs:"",cocktail:"",coffee:"",coffin:"",cold_sweat:"",comet:"",computer:"",computer_mouse:"",confetti_ball:"",confounded:"",confused:"",congratulations:"",construction:"",construction_worker_man:"",construction_worker_woman:"&zwj;",control_knobs:"",convenience_store:"",cookie:"",cool:"",policeman:"",copyright:"",corn:"",couch_and_lamp:"",couple:"",couple_with_heart_woman_man:"",couple_with_heart_man_man:"&zwj;&zwj;",couple_with_heart_woman_woman:"&zwj;&zwj;",couplekiss_man_man:"&zwj;&zwj;&zwj;",couplekiss_man_woman:"",couplekiss_woman_woman:"&zwj;&zwj;&zwj;",cow:"",cow2:"",cowboy_hat_face:"",crab:"",crayon:"",credit_card:"",crescent_moon:"",cricket:"",crocodile:"",croissant:"",crossed_fingers:"",crossed_flags:"",crossed_swords:"",crown:"",cry:"",crying_cat_face:"",crystal_ball:"",cucumber:"",cupid:"",curly_loop:"",currency_exchange:"",curry:"",custard:"",customs:"",cyclone:"",dagger:"",dancer:"",dancing_women:"",dancing_men:"&zwj;",dango:"",dark_sunglasses:"",dart:"",dash:"",date:"",deciduous_tree:"",deer:"",department_store:"",derelict_house:"",desert:"",desert_island:"",desktop_computer:"",male_detective:"",diamond_shape_with_a_dot_inside:"",diamonds:"",disappointed:"",disappointed_relieved:"",dizzy:"",dizzy_face:"",do_not_litter:"",dog:"",dog2:"",dollar:"",dolls:"",dolphin:"",door:"",doughnut:"",dove:"",dragon:"",dragon_face:"",dress:"",dromedary_camel:"",drooling_face:"",droplet:"",drum:"",duck:"",dvd:"","e-mail":"",eagle:"",ear:"",ear_of_rice:"",earth_africa:"",earth_americas:"",earth_asia:"",egg:"",eggplant:"",eight_pointed_black_star:"",eight_spoked_asterisk:"",electric_plug:"",elephant:"",email:"",end:"",envelope_with_arrow:"",euro:"",european_castle:"",european_post_office:"",evergreen_tree:"",exclamation:"",expressionless:"",eye:"",eye_speech_bubble:"&zwj;",eyeglasses:"",eyes:"",face_with_head_bandage:"",face_with_thermometer:"",fist_oncoming:"",factory:"",fallen_leaf:"",family_man_woman_boy:"",family_man_boy:"&zwj;",family_man_boy_boy:"&zwj;&zwj;",family_man_girl:"&zwj;",family_man_girl_boy:"&zwj;&zwj;",family_man_girl_girl:"&zwj;&zwj;",family_man_man_boy:"&zwj;&zwj;",family_man_man_boy_boy:"&zwj;&zwj;&zwj;",family_man_man_girl:"&zwj;&zwj;",family_man_man_girl_boy:"&zwj;&zwj;&zwj;",family_man_man_girl_girl:"&zwj;&zwj;&zwj;",family_man_woman_boy_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl:"&zwj;&zwj;",family_man_woman_girl_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl_girl:"&zwj;&zwj;&zwj;",family_woman_boy:"&zwj;",family_woman_boy_boy:"&zwj;&zwj;",family_woman_girl:"&zwj;",family_woman_girl_boy:"&zwj;&zwj;",family_woman_girl_girl:"&zwj;&zwj;",family_woman_woman_boy:"&zwj;&zwj;",family_woman_woman_boy_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl:"&zwj;&zwj;",family_woman_woman_girl_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl_girl:"&zwj;&zwj;&zwj;",fast_forward:"",fax:"",fearful:"",feet:"",female_detective:"&zwj;",ferris_wheel:"",ferry:"",field_hockey:"",file_cabinet:"",file_folder:"",film_projector:"",film_strip:"",fire:"",fire_engine:"",fireworks:"",first_quarter_moon:"",first_quarter_moon_with_face:"",fish:"",fish_cake:"",fishing_pole_and_fish:"",fist_raised:"",fist_left:"",fist_right:"",flags:"",flashlight:"",fleur_de_lis:"",flight_arrival:"",flight_departure:"",floppy_disk:"",flower_playing_cards:"",flushed:"",fog:"",foggy:"",football:"",footprints:"",fork_and_knife:"",fountain:"",fountain_pen:"",four_leaf_clover:"",fox_face:"",framed_picture:"",free:"",fried_egg:"",fried_shrimp:"",fries:"",frog:"",frowning:"",frowning_face:"",frowning_man:"&zwj;",frowning_woman:"",middle_finger:"",fuelpump:"",full_moon:"",full_moon_with_face:"",funeral_urn:"",game_die:"",gear:"",gem:"",gemini:"",ghost:"",gift:"",gift_heart:"",girl:"",globe_with_meridians:"",goal_net:"",goat:"",golf:"",golfing_man:"",golfing_woman:"&zwj;",gorilla:"",grapes:"",green_apple:"",green_book:"",green_heart:"",green_salad:"",grey_exclamation:"",grey_question:"",grimacing:"",grin:"",grinning:"",guardsman:"",guardswoman:"&zwj;",guitar:"",gun:"",haircut_woman:"",haircut_man:"&zwj;",hamburger:"",hammer:"",hammer_and_pick:"",hammer_and_wrench:"",hamster:"",hand:"",handbag:"",handshake:"",hankey:"",hatched_chick:"",hatching_chick:"",headphones:"",hear_no_evil:"",heart:"",heart_decoration:"",heart_eyes:"",heart_eyes_cat:"",heartbeat:"",heartpulse:"",hearts:"",heavy_check_mark:"",heavy_division_sign:"",heavy_dollar_sign:"",heavy_heart_exclamation:"",heavy_minus_sign:"",heavy_multiplication_x:"",heavy_plus_sign:"",helicopter:"",herb:"",hibiscus:"",high_brightness:"",high_heel:"",hocho:"",hole:"",honey_pot:"",horse:"",horse_racing:"",hospital:"",hot_pepper:"",hotdog:"",hotel:"",hotsprings:"",hourglass:"",hourglass_flowing_sand:"",house:"",house_with_garden:"",houses:"",hugs:"",hushed:"",ice_cream:"",ice_hockey:"",ice_skate:"",icecream:"",id:"",ideograph_advantage:"",imp:"",inbox_tray:"",incoming_envelope:"",tipping_hand_woman:"",information_source:"",innocent:"",interrobang:"",iphone:"",izakaya_lantern:"",jack_o_lantern:"",japan:"",japanese_castle:"",japanese_goblin:"",japanese_ogre:"",jeans:"",joy:"",joy_cat:"",joystick:"",kaaba:"",key:"",keyboard:"",keycap_ten:"",kick_scooter:"",kimono:"",kiss:"",kissing:"",kissing_cat:"",kissing_closed_eyes:"",kissing_heart:"",kissing_smiling_eyes:"",kiwi_fruit:"",koala:"",koko:"",label:"",large_blue_circle:"",large_blue_diamond:"",large_orange_diamond:"",last_quarter_moon:"",last_quarter_moon_with_face:"",latin_cross:"",laughing:"",leaves:"",ledger:"",left_luggage:"",left_right_arrow:"",leftwards_arrow_with_hook:"",lemon:"",leo:"",leopard:"",level_slider:"",libra:"",light_rail:"",link:"",lion:"",lips:"",lipstick:"",lizard:"",lock:"",lock_with_ink_pen:"",lollipop:"",loop:"",loud_sound:"",loudspeaker:"",love_hotel:"",love_letter:"",low_brightness:"",lying_face:"",m:"",mag:"",mag_right:"",mahjong:"",mailbox:"",mailbox_closed:"",mailbox_with_mail:"",mailbox_with_no_mail:"",man:"",man_artist:"&zwj;",man_astronaut:"&zwj;",man_cartwheeling:"&zwj;",man_cook:"&zwj;",man_dancing:"",man_facepalming:"&zwj;",man_factory_worker:"&zwj;",man_farmer:"&zwj;",man_firefighter:"&zwj;",man_health_worker:"&zwj;",man_in_tuxedo:"",man_judge:"&zwj;",man_juggling:"&zwj;",man_mechanic:"&zwj;",man_office_worker:"&zwj;",man_pilot:"&zwj;",man_playing_handball:"&zwj;",man_playing_water_polo:"&zwj;",man_scientist:"&zwj;",man_shrugging:"&zwj;",man_singer:"&zwj;",man_student:"&zwj;",man_teacher:"&zwj;",man_technologist:"&zwj;",man_with_gua_pi_mao:"",man_with_turban:"",tangerine:"",mans_shoe:"",mantelpiece_clock:"",maple_leaf:"",martial_arts_uniform:"",mask:"",massage_woman:"",massage_man:"&zwj;",meat_on_bone:"",medal_military:"",medal_sports:"",mega:"",melon:"",memo:"",men_wrestling:"&zwj;",menorah:"",mens:"",metal:"",metro:"",microphone:"",microscope:"",milk_glass:"",milky_way:"",minibus:"",minidisc:"",mobile_phone_off:"",money_mouth_face:"",money_with_wings:"",moneybag:"",monkey:"",monkey_face:"",monorail:"",moon:"",mortar_board:"",mosque:"",motor_boat:"",motor_scooter:"",motorcycle:"",motorway:"",mount_fuji:"",mountain:"",mountain_biking_man:"",mountain_biking_woman:"&zwj;",mountain_cableway:"",mountain_railway:"",mountain_snow:"",mouse:"",mouse2:"",movie_camera:"",moyai:"",mrs_claus:"",muscle:"",mushroom:"",musical_keyboard:"",musical_note:"",musical_score:"",mute:"",nail_care:"",name_badge:"",national_park:"",nauseated_face:"",necktie:"",negative_squared_cross_mark:"",nerd_face:"",neutral_face:"",new:"",new_moon:"",new_moon_with_face:"",newspaper:"",newspaper_roll:"",next_track_button:"",ng:"",no_good_man:"&zwj;",no_good_woman:"",night_with_stars:"",no_bell:"",no_bicycles:"",no_entry:"",no_entry_sign:"",no_mobile_phones:"",no_mouth:"",no_pedestrians:"",no_smoking:"","non-potable_water":"",nose:"",notebook:"",notebook_with_decorative_cover:"",notes:"",nut_and_bolt:"",o:"",o2:"",ocean:"",octopus:"",oden:"",office:"",oil_drum:"",ok:"",ok_hand:"",ok_man:"&zwj;",ok_woman:"",old_key:"",older_man:"",older_woman:"",om:"",on:"",oncoming_automobile:"",oncoming_bus:"",oncoming_police_car:"",oncoming_taxi:"",open_file_folder:"",open_hands:"",open_mouth:"",open_umbrella:"",ophiuchus:"",orange_book:"",orthodox_cross:"",outbox_tray:"",owl:"",ox:"",package:"",page_facing_up:"",page_with_curl:"",pager:"",paintbrush:"",palm_tree:"",pancakes:"",panda_face:"",paperclip:"",paperclips:"",parasol_on_ground:"",parking:"",part_alternation_mark:"",partly_sunny:"",passenger_ship:"",passport_control:"",pause_button:"",peace_symbol:"",peach:"",peanuts:"",pear:"",pen:"",pencil2:"",penguin:"",pensive:"",performing_arts:"",persevere:"",person_fencing:"",pouting_woman:"",phone:"",pick:"",pig:"",pig2:"",pig_nose:"",pill:"",pineapple:"",ping_pong:"",pisces:"",pizza:"",place_of_worship:"",plate_with_cutlery:"",play_or_pause_button:"",point_down:"",point_left:"",point_right:"",point_up:"",point_up_2:"",police_car:"",policewoman:"&zwj;",poodle:"",popcorn:"",post_office:"",postal_horn:"",postbox:"",potable_water:"",potato:"",pouch:"",poultry_leg:"",pound:"",rage:"",pouting_cat:"",pouting_man:"&zwj;",pray:"",prayer_beads:"",pregnant_woman:"",previous_track_button:"",prince:"",princess:"",printer:"",purple_heart:"",purse:"",pushpin:"",put_litter_in_its_place:"",question:"",rabbit:"",rabbit2:"",racehorse:"",racing_car:"",radio:"",radio_button:"",radioactive:"",railway_car:"",railway_track:"",rainbow:"",rainbow_flag:"&zwj;",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",raised_hands:"",raising_hand_woman:"",raising_hand_man:"&zwj;",ram:"",ramen:"",rat:"",record_button:"",recycle:"",red_circle:"",registered:"",relaxed:"",relieved:"",reminder_ribbon:"",repeat:"",repeat_one:"",rescue_worker_helmet:"",restroom:"",revolving_hearts:"",rewind:"",rhinoceros:"",ribbon:"",rice:"",rice_ball:"",rice_cracker:"",rice_scene:"",right_anger_bubble:"",ring:"",robot:"",rocket:"",rofl:"",roll_eyes:"",roller_coaster:"",rooster:"",rose:"",rosette:"",rotating_light:"",round_pushpin:"",rowing_man:"",rowing_woman:"&zwj;",rugby_football:"",running_man:"",running_shirt_with_sash:"",running_woman:"&zwj;",sa:"",sagittarius:"",sake:"",sandal:"",santa:"",satellite:"",saxophone:"",school:"",school_satchel:"",scissors:"",scorpion:"",scorpius:"",scream:"",scream_cat:"",scroll:"",seat:"",secret:"",see_no_evil:"",seedling:"",selfie:"",shallow_pan_of_food:"",shamrock:"",shark:"",shaved_ice:"",sheep:"",shell:"",shield:"",shinto_shrine:"",ship:"",shirt:"",shopping:"",shopping_cart:"",shower:"",shrimp:"",signal_strength:"",six_pointed_star:"",ski:"",skier:"",skull:"",skull_and_crossbones:"",sleeping:"",sleeping_bed:"",sleepy:"",slightly_frowning_face:"",slightly_smiling_face:"",slot_machine:"",small_airplane:"",small_blue_diamond:"",small_orange_diamond:"",small_red_triangle:"",small_red_triangle_down:"",smile:"",smile_cat:"",smiley:"",smiley_cat:"",smiling_imp:"",smirk:"",smirk_cat:"",smoking:"",snail:"",snake:"",sneezing_face:"",snowboarder:"",snowflake:"",snowman:"",snowman_with_snow:"",sob:"",soccer:"",soon:"",sos:"",sound:"",space_invader:"",spades:"",spaghetti:"",sparkle:"",sparkler:"",sparkles:"",sparkling_heart:"",speak_no_evil:"",speaker:"",speaking_head:"",speech_balloon:"",speedboat:"",spider:"",spider_web:"",spiral_calendar:"",spiral_notepad:"",spoon:"",squid:"",stadium:"",star:"",star2:"",star_and_crescent:"",star_of_david:"",stars:"",station:"",statue_of_liberty:"",steam_locomotive:"",stew:"",stop_button:"",stop_sign:"",stopwatch:"",straight_ruler:"",strawberry:"",stuck_out_tongue:"",stuck_out_tongue_closed_eyes:"",stuck_out_tongue_winking_eye:"",studio_microphone:"",stuffed_flatbread:"",sun_behind_large_cloud:"",sun_behind_rain_cloud:"",sun_behind_small_cloud:"",sun_with_face:"",sunflower:"",sunglasses:"",sunny:"",sunrise:"",sunrise_over_mountains:"",surfing_man:"",surfing_woman:"&zwj;",sushi:"",suspension_railway:"",sweat:"",sweat_drops:"",sweat_smile:"",sweet_potato:"",swimming_man:"",swimming_woman:"&zwj;",symbols:"",synagogue:"",syringe:"",taco:"",tada:"",tanabata_tree:"",taurus:"",taxi:"",tea:"",telephone_receiver:"",telescope:"",tennis:"",tent:"",thermometer:"",thinking:"",thought_balloon:"",ticket:"",tickets:"",tiger:"",tiger2:"",timer_clock:"",tipping_hand_man:"&zwj;",tired_face:"",tm:"",toilet:"",tokyo_tower:"",tomato:"",tongue:"",top:"",tophat:"",tornado:"",trackball:"",tractor:"",traffic_light:"",train:"",train2:"",tram:"",triangular_flag_on_post:"",triangular_ruler:"",trident:"",triumph:"",trolleybus:"",trophy:"",tropical_drink:"",tropical_fish:"",truck:"",trumpet:"",tulip:"",tumbler_glass:"",turkey:"",turtle:"",tv:"",twisted_rightwards_arrows:"",two_hearts:"",two_men_holding_hands:"",two_women_holding_hands:"",u5272:"",u5408:"",u55b6:"",u6307:"",u6708:"",u6709:"",u6e80:"",u7121:"",u7533:"",u7981:"",u7a7a:"",umbrella:"",unamused:"",underage:"",unicorn:"",unlock:"",up:"",upside_down_face:"",v:"",vertical_traffic_light:"",vhs:"",vibration_mode:"",video_camera:"",video_game:"",violin:"",virgo:"",volcano:"",volleyball:"",vs:"",vulcan_salute:"",walking_man:"",walking_woman:"&zwj;",waning_crescent_moon:"",waning_gibbous_moon:"",warning:"",wastebasket:"",watch:"",water_buffalo:"",watermelon:"",wave:"",wavy_dash:"",waxing_crescent_moon:"",wc:"",weary:"",wedding:"",weight_lifting_man:"",weight_lifting_woman:"&zwj;",whale:"",whale2:"",wheel_of_dharma:"",wheelchair:"",white_check_mark:"",white_circle:"",white_flag:"",white_flower:"",white_large_square:"",white_medium_small_square:"",white_medium_square:"",white_small_square:"",white_square_button:"",wilted_flower:"",wind_chime:"",wind_face:"",wine_glass:"",wink:"",wolf:"",woman:"",woman_artist:"&zwj;",woman_astronaut:"&zwj;",woman_cartwheeling:"&zwj;",woman_cook:"&zwj;",woman_facepalming:"&zwj;",woman_factory_worker:"&zwj;",woman_farmer:"&zwj;",woman_firefighter:"&zwj;",woman_health_worker:"&zwj;",woman_judge:"&zwj;",woman_juggling:"&zwj;",woman_mechanic:"&zwj;",woman_office_worker:"&zwj;",woman_pilot:"&zwj;",woman_playing_handball:"&zwj;",woman_playing_water_polo:"&zwj;",woman_scientist:"&zwj;",woman_shrugging:"&zwj;",woman_singer:"&zwj;",woman_student:"&zwj;",woman_teacher:"&zwj;",woman_technologist:"&zwj;",woman_with_turban:"&zwj;",womans_clothes:"",womans_hat:"",women_wrestling:"&zwj;",womens:"",world_map:"",worried:"",wrench:"",writing_hand:"",x:"",yellow_heart:"",yen:"",yin_yang:"",yum:"",zap:"",zipper_mouth_face:"",zzz:"",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(l){var w={},p=[],v=[],x={},R=d,T={parsed:{},raw:"",format:""};E();function E(){l=l||{};for(var k in c)c.hasOwnProperty(k)&&(w[k]=c[k]);if(typeof l=="object")for(var V in l)l.hasOwnProperty(V)&&(w[V]=l[V]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof l+" was passed instead.");w.extensions&&r.helper.forEach(w.extensions,$)}function $(k,V){if(V=V||null,r.helper.isString(k))if(k=r.helper.stdExtName(k),V=k,r.extensions[k]){console.warn("DEPRECATION WARNING: "+k+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),j(r.extensions[k],k);return}else if(!r.helper.isUndefined(a[k]))k=a[k];else throw Error('Extension "'+k+'" could not be loaded. It was either not found or is not a valid extension.');typeof k=="function"&&(k=k()),r.helper.isArray(k)||(k=[k]);var W=h(k,V);if(!W.valid)throw Error(W.error);for(var K=0;K<k.length;++K){switch(k[K].type){case"lang":p.push(k[K]);break;case"output":v.push(k[K]);break}if(k[K].hasOwnProperty("listeners"))for(var Y in k[K].listeners)k[K].listeners.hasOwnProperty(Y)&&F(Y,k[K].listeners[Y])}}function j(k,V){typeof k=="function"&&(k=k(new r.Converter)),r.helper.isArray(k)||(k=[k]);var W=h(k,V);if(!W.valid)throw Error(W.error);for(var K=0;K<k.length;++K)switch(k[K].type){case"lang":p.push(k[K]);break;case"output":v.push(k[K]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function F(k,V){if(!r.helper.isString(k))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof k+" given");if(typeof V!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof V+" given");x.hasOwnProperty(k)||(x[k]=[]),x[k].push(V)}function I(k){var V=k.match(/^\s*/)[0].length,W=new RegExp("^\\s{0,"+V+"}","gm");return k.replace(W,"")}this._dispatch=function(V,W,K,Y){if(x.hasOwnProperty(V))for(var Z=0;Z<x[V].length;++Z){var se=x[V][Z](V,W,this,K,Y);se&&typeof se<"u"&&(W=se)}return W},this.listen=function(k,V){return F(k,V),this},this.makeHtml=function(k){if(!k)return k;var V={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:p,outputModifiers:v,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return k=k.replace(//g,"T"),k=k.replace(/\$/g,"D"),k=k.replace(/\r\n/g,`
`),k=k.replace(/\r/g,`
`),k=k.replace(/\u00A0/g,"&nbsp;"),w.smartIndentationFix&&(k=I(k)),k=`

`+k+`

`,k=r.subParser("detab")(k,w,V),k=k.replace(/^[ \t]+$/mg,""),r.helper.forEach(p,function(W){k=r.subParser("runExtension")(W,k,w,V)}),k=r.subParser("metadata")(k,w,V),k=r.subParser("hashPreCodeTags")(k,w,V),k=r.subParser("githubCodeBlocks")(k,w,V),k=r.subParser("hashHTMLBlocks")(k,w,V),k=r.subParser("hashCodeTags")(k,w,V),k=r.subParser("stripLinkDefinitions")(k,w,V),k=r.subParser("blockGamut")(k,w,V),k=r.subParser("unhashHTMLSpans")(k,w,V),k=r.subParser("unescapeSpecialChars")(k,w,V),k=k.replace(/D/g,"$$"),k=k.replace(/T/g,""),k=r.subParser("completeHTMLDocument")(k,w,V),r.helper.forEach(v,function(W){k=r.subParser("runExtension")(W,k,w,V)}),T=V.metadata,k},this.makeMarkdown=this.makeMd=function(k,V){if(k=k.replace(/\r\n/g,`
`),k=k.replace(/\r/g,`
`),k=k.replace(/>[ \t]+</,">NBSP;<"),!V)if(window&&window.document)V=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var W=V.createElement("div");W.innerHTML=k;var K={preList:me(W)};ge(W);for(var Y=W.childNodes,Z="",se=0;se<Y.length;se++)Z+=r.subParser("makeMarkdown.node")(Y[se],K);function ge(Se){for(var re=0;re<Se.childNodes.length;++re){var ye=Se.childNodes[re];ye.nodeType===3?!/\S/.test(ye.nodeValue)&&!/^[ ]+$/.test(ye.nodeValue)?(Se.removeChild(ye),--re):(ye.nodeValue=ye.nodeValue.split(`
`).join(" "),ye.nodeValue=ye.nodeValue.replace(/(\s)+/g,"$1")):ye.nodeType===1&&ge(ye)}}function me(Se){for(var re=Se.querySelectorAll("pre"),ye=[],Ie=0;Ie<re.length;++Ie)if(re[Ie].childElementCount===1&&re[Ie].firstChild.tagName.toLowerCase()==="code"){var Oe=re[Ie].firstChild.innerHTML.trim(),Me=re[Ie].firstChild.getAttribute("data-language")||"";if(Me==="")for(var ft=re[Ie].firstChild.className.split(" "),Fe=0;Fe<ft.length;++Fe){var ie=ft[Fe].match(/^language-(.+)$/);if(ie!==null){Me=ie[1];break}}Oe=r.helper.unescapeHTMLEntities(Oe),ye.push(Oe),re[Ie].outerHTML='<precode language="'+Me+'" precodenum="'+Ie.toString()+'"></precode>'}else ye.push(re[Ie].innerHTML),re[Ie].innerHTML="",re[Ie].setAttribute("prenum",Ie.toString());return ye}return Z},this.setOption=function(k,V){w[k]=V},this.getOption=function(k){return w[k]},this.getOptions=function(){return w},this.addExtension=function(k,V){V=V||null,$(k,V)},this.useExtension=function(k){$(k)},this.setFlavor=function(k){if(!f.hasOwnProperty(k))throw Error(k+" flavor was not found");var V=f[k];R=k;for(var W in V)V.hasOwnProperty(W)&&(w[W]=V[W])},this.getFlavor=function(){return R},this.removeExtension=function(k){r.helper.isArray(k)||(k=[k]);for(var V=0;V<k.length;++V){for(var W=k[V],K=0;K<p.length;++K)p[K]===W&&p.splice(K,1);for(var Y=0;Y<v.length;++Y)v[Y]===W&&v.splice(Y,1)}},this.getAllExtensions=function(){return{language:p,output:v}},this.getMetadata=function(k){return k?T.raw:T.parsed},this.getMetadataFormat=function(){return T.format},this._setMetadataPair=function(k,V){T.parsed[k]=V},this._setMetadataFormat=function(k){T.format=k},this._setMetadataRaw=function(k){T.raw=k}},r.subParser("anchors",function(l,w,p){l=p.converter._dispatch("anchors.before",l,w,p);var v=function(x,R,T,E,$,j,F){if(r.helper.isUndefined(F)&&(F=""),T=T.toLowerCase(),x.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)E="";else if(!E)if(T||(T=R.toLowerCase().replace(/ ?\n/g," ")),E="#"+T,!r.helper.isUndefined(p.gUrls[T]))E=p.gUrls[T],r.helper.isUndefined(p.gTitles[T])||(F=p.gTitles[T]);else return x;E=E.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var I='<a href="'+E+'"';return F!==""&&F!==null&&(F=F.replace(/"/g,"&quot;"),F=F.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),I+=' title="'+F+'"'),w.openLinksInNewWindow&&!/^#/.test(E)&&(I+=' rel="noopener noreferrer" target="E95Eblank"'),I+=">"+R+"</a>",I};return l=l.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,v),l=l.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,v),l=l.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,v),l=l.replace(/\[([^\[\]]+)]()()()()()/g,v),w.ghMentions&&(l=l.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(x,R,T,E,$){if(T==="\\")return R+E;if(!r.helper.isString(w.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var j=w.ghMentionsLink.replace(/\{u}/g,$),F="";return w.openLinksInNewWindow&&(F=' rel="noopener noreferrer" target="E95Eblank"'),R+'<a href="'+j+'"'+F+">"+E+"</a>"})),l=p.converter._dispatch("anchors.after",l,w,p),l});var S=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,C=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,L=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,A=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,N=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,M=function(l){return function(w,p,v,x,R,T,E){v=v.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var $=v,j="",F="",I=p||"",k=E||"";return/^www\./i.test(v)&&(v=v.replace(/^www\./i,"http://www.")),l.excludeTrailingPunctuationFromURLs&&T&&(j=T),l.openLinksInNewWindow&&(F=' rel="noopener noreferrer" target="E95Eblank"'),I+'<a href="'+v+'"'+F+">"+$+"</a>"+j+k}},B=function(l,w){return function(p,v,x){var R="mailto:";return v=v||"",x=r.subParser("unescapeSpecialChars")(x,l,w),l.encodeEmails?(R=r.helper.encodeEmailAddress(R+x),x=r.helper.encodeEmailAddress(x)):R=R+x,v+'<a href="'+R+'">'+x+"</a>"}};r.subParser("autoLinks",function(l,w,p){return l=p.converter._dispatch("autoLinks.before",l,w,p),l=l.replace(L,M(w)),l=l.replace(N,B(w,p)),l=p.converter._dispatch("autoLinks.after",l,w,p),l}),r.subParser("simplifiedAutoLinks",function(l,w,p){return w.simplifiedAutoLink&&(l=p.converter._dispatch("simplifiedAutoLinks.before",l,w,p),w.excludeTrailingPunctuationFromURLs?l=l.replace(C,M(w)):l=l.replace(S,M(w)),l=l.replace(A,B(w,p)),l=p.converter._dispatch("simplifiedAutoLinks.after",l,w,p)),l}),r.subParser("blockGamut",function(l,w,p){return l=p.converter._dispatch("blockGamut.before",l,w,p),l=r.subParser("blockQuotes")(l,w,p),l=r.subParser("headers")(l,w,p),l=r.subParser("horizontalRule")(l,w,p),l=r.subParser("lists")(l,w,p),l=r.subParser("codeBlocks")(l,w,p),l=r.subParser("tables")(l,w,p),l=r.subParser("hashHTMLBlocks")(l,w,p),l=r.subParser("paragraphs")(l,w,p),l=p.converter._dispatch("blockGamut.after",l,w,p),l}),r.subParser("blockQuotes",function(l,w,p){l=p.converter._dispatch("blockQuotes.before",l,w,p),l=l+`

`;var v=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return w.splitAdjacentBlockquotes&&(v=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),l=l.replace(v,function(x){return x=x.replace(/^[ \t]*>[ \t]?/gm,""),x=x.replace(/0/g,""),x=x.replace(/^[ \t]+$/gm,""),x=r.subParser("githubCodeBlocks")(x,w,p),x=r.subParser("blockGamut")(x,w,p),x=x.replace(/(^|\n)/g,"$1  "),x=x.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(R,T){var E=T;return E=E.replace(/^  /mg,"0"),E=E.replace(/0/g,""),E}),r.subParser("hashBlock")(`<blockquote>
`+x+`
</blockquote>`,w,p)}),l=p.converter._dispatch("blockQuotes.after",l,w,p),l}),r.subParser("codeBlocks",function(l,w,p){l=p.converter._dispatch("codeBlocks.before",l,w,p),l+="0";var v=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return l=l.replace(v,function(x,R,T){var E=R,$=T,j=`
`;return E=r.subParser("outdent")(E,w,p),E=r.subParser("encodeCode")(E,w,p),E=r.subParser("detab")(E,w,p),E=E.replace(/^\n+/g,""),E=E.replace(/\n+$/g,""),w.omitExtraWLInCodeBlocks&&(j=""),E="<pre><code>"+E+j+"</code></pre>",r.subParser("hashBlock")(E,w,p)+$}),l=l.replace(/0/,""),l=p.converter._dispatch("codeBlocks.after",l,w,p),l}),r.subParser("codeSpans",function(l,w,p){return l=p.converter._dispatch("codeSpans.before",l,w,p),typeof l>"u"&&(l=""),l=l.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(v,x,R,T){var E=T;return E=E.replace(/^([ \t]*)/g,""),E=E.replace(/[ \t]*$/g,""),E=r.subParser("encodeCode")(E,w,p),E=x+"<code>"+E+"</code>",E=r.subParser("hashHTMLSpans")(E,w,p),E}),l=p.converter._dispatch("codeSpans.after",l,w,p),l}),r.subParser("completeHTMLDocument",function(l,w,p){if(!w.completeHTMLDocument)return l;l=p.converter._dispatch("completeHTMLDocument.before",l,w,p);var v="html",x=`<!DOCTYPE HTML>
`,R="",T=`<meta charset="utf-8">
`,E="",$="";typeof p.metadata.parsed.doctype<"u"&&(x="<!DOCTYPE "+p.metadata.parsed.doctype+`>
`,v=p.metadata.parsed.doctype.toString().toLowerCase(),(v==="html"||v==="html5")&&(T='<meta charset="utf-8">'));for(var j in p.metadata.parsed)if(p.metadata.parsed.hasOwnProperty(j))switch(j.toLowerCase()){case"doctype":break;case"title":R="<title>"+p.metadata.parsed.title+`</title>
`;break;case"charset":v==="html"||v==="html5"?T='<meta charset="'+p.metadata.parsed.charset+`">
`:T='<meta name="charset" content="'+p.metadata.parsed.charset+`">
`;break;case"language":case"lang":E=' lang="'+p.metadata.parsed[j]+'"',$+='<meta name="'+j+'" content="'+p.metadata.parsed[j]+`">
`;break;default:$+='<meta name="'+j+'" content="'+p.metadata.parsed[j]+`">
`}return l=x+"<html"+E+`>
<head>
`+R+T+$+`</head>
<body>
`+l.trim()+`
</body>
</html>`,l=p.converter._dispatch("completeHTMLDocument.after",l,w,p),l}),r.subParser("detab",function(l,w,p){return l=p.converter._dispatch("detab.before",l,w,p),l=l.replace(/\t(?=\t)/g,"    "),l=l.replace(/\t/g,"AB"),l=l.replace(/B(.+?)A/g,function(v,x){for(var R=x,T=4-R.length%4,E=0;E<T;E++)R+=" ";return R}),l=l.replace(/A/g,"    "),l=l.replace(/B/g,""),l=p.converter._dispatch("detab.after",l,w,p),l}),r.subParser("ellipsis",function(l,w,p){return w.ellipsis&&(l=p.converter._dispatch("ellipsis.before",l,w,p),l=l.replace(/\.\.\./g,""),l=p.converter._dispatch("ellipsis.after",l,w,p)),l}),r.subParser("emoji",function(l,w,p){if(!w.emoji)return l;l=p.converter._dispatch("emoji.before",l,w,p);var v=/:([\S]+?):/g;return l=l.replace(v,function(x,R){return r.helper.emojis.hasOwnProperty(R)?r.helper.emojis[R]:x}),l=p.converter._dispatch("emoji.after",l,w,p),l}),r.subParser("encodeAmpsAndAngles",function(l,w,p){return l=p.converter._dispatch("encodeAmpsAndAngles.before",l,w,p),l=l.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),l=l.replace(/<(?![a-z\/?$!])/gi,"&lt;"),l=l.replace(/</g,"&lt;"),l=l.replace(/>/g,"&gt;"),l=p.converter._dispatch("encodeAmpsAndAngles.after",l,w,p),l}),r.subParser("encodeBackslashEscapes",function(l,w,p){return l=p.converter._dispatch("encodeBackslashEscapes.before",l,w,p),l=l.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),l=l.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),l=p.converter._dispatch("encodeBackslashEscapes.after",l,w,p),l}),r.subParser("encodeCode",function(l,w,p){return l=p.converter._dispatch("encodeCode.before",l,w,p),l=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),l=p.converter._dispatch("encodeCode.after",l,w,p),l}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(l,w,p){l=p.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",l,w,p);var v=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,x=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return l=l.replace(v,function(R){return R.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),l=l.replace(x,function(R){return R.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),l=p.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",l,w,p),l}),r.subParser("githubCodeBlocks",function(l,w,p){return w.ghCodeBlocks?(l=p.converter._dispatch("githubCodeBlocks.before",l,w,p),l+="0",l=l.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(v,x,R,T){var E=w.omitExtraWLInCodeBlocks?"":`
`;return T=r.subParser("encodeCode")(T,w,p),T=r.subParser("detab")(T,w,p),T=T.replace(/^\n+/g,""),T=T.replace(/\n+$/g,""),T="<pre><code"+(R?' class="'+R+" language-"+R+'"':"")+">"+T+E+"</code></pre>",T=r.subParser("hashBlock")(T,w,p),`

G`+(p.ghCodeBlocks.push({text:v,codeblock:T})-1)+`G

`}),l=l.replace(/0/,""),p.converter._dispatch("githubCodeBlocks.after",l,w,p)):l}),r.subParser("hashBlock",function(l,w,p){return l=p.converter._dispatch("hashBlock.before",l,w,p),l=l.replace(/(^\n+|\n+$)/g,""),l=`

K`+(p.gHtmlBlocks.push(l)-1)+`K

`,l=p.converter._dispatch("hashBlock.after",l,w,p),l}),r.subParser("hashCodeTags",function(l,w,p){l=p.converter._dispatch("hashCodeTags.before",l,w,p);var v=function(x,R,T,E){var $=T+r.subParser("encodeCode")(R,w,p)+E;return"C"+(p.gHtmlSpans.push($)-1)+"C"};return l=r.helper.replaceRecursiveRegExp(l,v,"<code\\b[^>]*>","</code>","gim"),l=p.converter._dispatch("hashCodeTags.after",l,w,p),l}),r.subParser("hashElement",function(l,w,p){return function(v,x){var R=x;return R=R.replace(/\n\n/g,`
`),R=R.replace(/^\n/,""),R=R.replace(/\n+$/g,""),R=`

K`+(p.gHtmlBlocks.push(R)-1)+`K

`,R}}),r.subParser("hashHTMLBlocks",function(l,w,p){l=p.converter._dispatch("hashHTMLBlocks.before",l,w,p);var v=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],x=function(k,V,W,K){var Y=k;return W.search(/\bmarkdown\b/)!==-1&&(Y=W+p.converter.makeHtml(V)+K),`

K`+(p.gHtmlBlocks.push(Y)-1)+`K

`};w.backslashEscapesHTMLTags&&(l=l.replace(/\\<(\/?[^>]+?)>/g,function(k,V){return"&lt;"+V+"&gt;"}));for(var R=0;R<v.length;++R)for(var T,E=new RegExp("^ {0,3}(<"+v[R]+"\\b[^>]*>)","im"),$="<"+v[R]+"\\b[^>]*>",j="</"+v[R]+">";(T=r.helper.regexIndexOf(l,E))!==-1;){var F=r.helper.splitAtIndex(l,T),I=r.helper.replaceRecursiveRegExp(F[1],x,$,j,"im");if(I===F[1])break;l=F[0].concat(I)}return l=l.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(l,w,p)),l=r.helper.replaceRecursiveRegExp(l,function(k){return`

K`+(p.gHtmlBlocks.push(k)-1)+`K

`},"^ {0,3}\x3C!--","-->","gm"),l=l.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(l,w,p)),l=p.converter._dispatch("hashHTMLBlocks.after",l,w,p),l}),r.subParser("hashHTMLSpans",function(l,w,p){l=p.converter._dispatch("hashHTMLSpans.before",l,w,p);function v(x){return"C"+(p.gHtmlSpans.push(x)-1)+"C"}return l=l.replace(/<[^>]+?\/>/gi,function(x){return v(x)}),l=l.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(x){return v(x)}),l=l.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(x){return v(x)}),l=l.replace(/<[^>]+?>/gi,function(x){return v(x)}),l=p.converter._dispatch("hashHTMLSpans.after",l,w,p),l}),r.subParser("unhashHTMLSpans",function(l,w,p){l=p.converter._dispatch("unhashHTMLSpans.before",l,w,p);for(var v=0;v<p.gHtmlSpans.length;++v){for(var x=p.gHtmlSpans[v],R=0;/C(\d+)C/.test(x);){var T=RegExp.$1;if(x=x.replace("C"+T+"C",p.gHtmlSpans[T]),R===10){console.error("maximum nesting of 10 spans reached!!!");break}++R}l=l.replace("C"+v+"C",x)}return l=p.converter._dispatch("unhashHTMLSpans.after",l,w,p),l}),r.subParser("hashPreCodeTags",function(l,w,p){l=p.converter._dispatch("hashPreCodeTags.before",l,w,p);var v=function(x,R,T,E){var $=T+r.subParser("encodeCode")(R,w,p)+E;return`

G`+(p.ghCodeBlocks.push({text:x,codeblock:$})-1)+`G

`};return l=r.helper.replaceRecursiveRegExp(l,v,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),l=p.converter._dispatch("hashPreCodeTags.after",l,w,p),l}),r.subParser("headers",function(l,w,p){l=p.converter._dispatch("headers.before",l,w,p);var v=isNaN(parseInt(w.headerLevelStart))?1:parseInt(w.headerLevelStart),x=w.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,R=w.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;l=l.replace(x,function($,j){var F=r.subParser("spanGamut")(j,w,p),I=w.noHeaderId?"":' id="'+E(j)+'"',k=v,V="<h"+k+I+">"+F+"</h"+k+">";return r.subParser("hashBlock")(V,w,p)}),l=l.replace(R,function($,j){var F=r.subParser("spanGamut")(j,w,p),I=w.noHeaderId?"":' id="'+E(j)+'"',k=v+1,V="<h"+k+I+">"+F+"</h"+k+">";return r.subParser("hashBlock")(V,w,p)});var T=w.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;l=l.replace(T,function($,j,F){var I=F;w.customizedHeaderId&&(I=F.replace(/\s?\{([^{]+?)}\s*$/,""));var k=r.subParser("spanGamut")(I,w,p),V=w.noHeaderId?"":' id="'+E(F)+'"',W=v-1+j.length,K="<h"+W+V+">"+k+"</h"+W+">";return r.subParser("hashBlock")(K,w,p)});function E($){var j,F;if(w.customizedHeaderId){var I=$.match(/\{([^{]+?)}\s*$/);I&&I[1]&&($=I[1])}return j=$,r.helper.isString(w.prefixHeaderId)?F=w.prefixHeaderId:w.prefixHeaderId===!0?F="section-":F="",w.rawPrefixHeaderId||(j=F+j),w.ghCompatibleHeaderId?j=j.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():w.rawHeaderId?j=j.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():j=j.replace(/[^\w]/g,"").toLowerCase(),w.rawPrefixHeaderId&&(j=F+j),p.hashLinkCounts[j]?j=j+"-"+p.hashLinkCounts[j]++:p.hashLinkCounts[j]=1,j}return l=p.converter._dispatch("headers.after",l,w,p),l}),r.subParser("horizontalRule",function(l,w,p){l=p.converter._dispatch("horizontalRule.before",l,w,p);var v=r.subParser("hashBlock")("<hr />",w,p);return l=l.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,v),l=l.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,v),l=l.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,v),l=p.converter._dispatch("horizontalRule.after",l,w,p),l}),r.subParser("images",function(l,w,p){l=p.converter._dispatch("images.before",l,w,p);var v=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,x=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,R=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,T=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,E=/!\[([^\[\]]+)]()()()()()/g;function $(F,I,k,V,W,K,Y,Z){return V=V.replace(/\s/g,""),j(F,I,k,V,W,K,Y,Z)}function j(F,I,k,V,W,K,Y,Z){var se=p.gUrls,ge=p.gTitles,me=p.gDimensions;if(k=k.toLowerCase(),Z||(Z=""),F.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)V="";else if(V===""||V===null)if((k===""||k===null)&&(k=I.toLowerCase().replace(/ ?\n/g," ")),V="#"+k,!r.helper.isUndefined(se[k]))V=se[k],r.helper.isUndefined(ge[k])||(Z=ge[k]),r.helper.isUndefined(me[k])||(W=me[k].width,K=me[k].height);else return F;I=I.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),V=V.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var Se='<img src="'+V+'" alt="'+I+'"';return Z&&r.helper.isString(Z)&&(Z=Z.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),Se+=' title="'+Z+'"'),W&&K&&(W=W==="*"?"auto":W,K=K==="*"?"auto":K,Se+=' width="'+W+'"',Se+=' height="'+K+'"'),Se+=" />",Se}return l=l.replace(T,j),l=l.replace(R,$),l=l.replace(x,j),l=l.replace(v,j),l=l.replace(E,j),l=p.converter._dispatch("images.after",l,w,p),l}),r.subParser("italicsAndBold",function(l,w,p){l=p.converter._dispatch("italicsAndBold.before",l,w,p);function v(x,R,T){return R+x+T}return w.literalMidWordUnderscores?(l=l.replace(/\b___(\S[\s\S]*?)___\b/g,function(x,R){return v(R,"<strong><em>","</em></strong>")}),l=l.replace(/\b__(\S[\s\S]*?)__\b/g,function(x,R){return v(R,"<strong>","</strong>")}),l=l.replace(/\b_(\S[\s\S]*?)_\b/g,function(x,R){return v(R,"<em>","</em>")})):(l=l.replace(/___(\S[\s\S]*?)___/g,function(x,R){return/\S$/.test(R)?v(R,"<strong><em>","</em></strong>"):x}),l=l.replace(/__(\S[\s\S]*?)__/g,function(x,R){return/\S$/.test(R)?v(R,"<strong>","</strong>"):x}),l=l.replace(/_([^\s_][\s\S]*?)_/g,function(x,R){return/\S$/.test(R)?v(R,"<em>","</em>"):x})),w.literalMidWordAsterisks?(l=l.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(x,R,T){return v(T,R+"<strong><em>","</em></strong>")}),l=l.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(x,R,T){return v(T,R+"<strong>","</strong>")}),l=l.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(x,R,T){return v(T,R+"<em>","</em>")})):(l=l.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(x,R){return/\S$/.test(R)?v(R,"<strong><em>","</em></strong>"):x}),l=l.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(x,R){return/\S$/.test(R)?v(R,"<strong>","</strong>"):x}),l=l.replace(/\*([^\s*][\s\S]*?)\*/g,function(x,R){return/\S$/.test(R)?v(R,"<em>","</em>"):x})),l=p.converter._dispatch("italicsAndBold.after",l,w,p),l}),r.subParser("lists",function(l,w,p){function v(T,E){p.gListLevel++,T=T.replace(/\n{2,}$/,`
`),T+="0";var $=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,j=/\n[ \t]*\n(?!0)/.test(T);return w.disableForced4SpacesIndentedSublists&&($=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),T=T.replace($,function(F,I,k,V,W,K,Y){Y=Y&&Y.trim()!=="";var Z=r.subParser("outdent")(W,w,p),se="";return K&&w.tasklists&&(se=' class="task-list-item" style="list-style-type: none;"',Z=Z.replace(/^[ \t]*\[(x|X| )?]/m,function(){var ge='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return Y&&(ge+=" checked"),ge+=">",ge})),Z=Z.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(ge){return"A"+ge}),I||Z.search(/\n{2,}/)>-1?(Z=r.subParser("githubCodeBlocks")(Z,w,p),Z=r.subParser("blockGamut")(Z,w,p)):(Z=r.subParser("lists")(Z,w,p),Z=Z.replace(/\n$/,""),Z=r.subParser("hashHTMLBlocks")(Z,w,p),Z=Z.replace(/\n\n+/g,`

`),j?Z=r.subParser("paragraphs")(Z,w,p):Z=r.subParser("spanGamut")(Z,w,p)),Z=Z.replace("A",""),Z="<li"+se+">"+Z+`</li>
`,Z}),T=T.replace(/0/g,""),p.gListLevel--,E&&(T=T.replace(/\s+$/,"")),T}function x(T,E){if(E==="ol"){var $=T.match(/^ *(\d+)\./);if($&&$[1]!=="1")return' start="'+$[1]+'"'}return""}function R(T,E,$){var j=w.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,F=w.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,I=E==="ul"?j:F,k="";if(T.search(I)!==-1)(function W(K){var Y=K.search(I),Z=x(T,E);Y!==-1?(k+=`

<`+E+Z+`>
`+v(K.slice(0,Y),!!$)+"</"+E+`>
`,E=E==="ul"?"ol":"ul",I=E==="ul"?j:F,W(K.slice(Y))):k+=`

<`+E+Z+`>
`+v(K,!!$)+"</"+E+`>
`})(T);else{var V=x(T,E);k=`

<`+E+V+`>
`+v(T,!!$)+"</"+E+`>
`}return k}return l=p.converter._dispatch("lists.before",l,w,p),l+="0",p.gListLevel?l=l.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(T,E,$){var j=$.search(/[*+-]/g)>-1?"ul":"ol";return R(E,j,!0)}):l=l.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(T,E,$,j){var F=j.search(/[*+-]/g)>-1?"ul":"ol";return R($,F,!1)}),l=l.replace(/0/,""),l=p.converter._dispatch("lists.after",l,w,p),l}),r.subParser("metadata",function(l,w,p){if(!w.metadata)return l;l=p.converter._dispatch("metadata.before",l,w,p);function v(x){p.metadata.raw=x,x=x.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),x=x.replace(/\n {4}/g," "),x.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(R,T,E){return p.metadata.parsed[T]=E,""})}return l=l.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function(x,R,T){return v(T),"M"}),l=l.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(x,R,T){return R&&(p.metadata.format=R),v(T),"M"}),l=l.replace(/M/g,""),l=p.converter._dispatch("metadata.after",l,w,p),l}),r.subParser("outdent",function(l,w,p){return l=p.converter._dispatch("outdent.before",l,w,p),l=l.replace(/^(\t|[ ]{1,4})/gm,"0"),l=l.replace(/0/g,""),l=p.converter._dispatch("outdent.after",l,w,p),l}),r.subParser("paragraphs",function(l,w,p){l=p.converter._dispatch("paragraphs.before",l,w,p),l=l.replace(/^\n+/g,""),l=l.replace(/\n+$/g,"");for(var v=l.split(/\n{2,}/g),x=[],R=v.length,T=0;T<R;T++){var E=v[T];E.search(/(K|G)(\d+)\1/g)>=0?x.push(E):E.search(/\S/)>=0&&(E=r.subParser("spanGamut")(E,w,p),E=E.replace(/^([ \t]*)/g,"<p>"),E+="</p>",x.push(E))}for(R=x.length,T=0;T<R;T++){for(var $="",j=x[T],F=!1;/(K|G)(\d+)\1/.test(j);){var I=RegExp.$1,k=RegExp.$2;I==="K"?$=p.gHtmlBlocks[k]:F?$=r.subParser("encodeCode")(p.ghCodeBlocks[k].text,w,p):$=p.ghCodeBlocks[k].codeblock,$=$.replace(/\$/g,"$$$$"),j=j.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,$),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(j)&&(F=!0)}x[T]=j}return l=x.join(`
`),l=l.replace(/^\n+/g,""),l=l.replace(/\n+$/g,""),p.converter._dispatch("paragraphs.after",l,w,p)}),r.subParser("runExtension",function(l,w,p,v){if(l.filter)w=l.filter(w,v.converter,p);else if(l.regex){var x=l.regex;x instanceof RegExp||(x=new RegExp(x,"g")),w=w.replace(x,l.replace)}return w}),r.subParser("spanGamut",function(l,w,p){return l=p.converter._dispatch("spanGamut.before",l,w,p),l=r.subParser("codeSpans")(l,w,p),l=r.subParser("escapeSpecialCharsWithinTagAttributes")(l,w,p),l=r.subParser("encodeBackslashEscapes")(l,w,p),l=r.subParser("images")(l,w,p),l=r.subParser("anchors")(l,w,p),l=r.subParser("autoLinks")(l,w,p),l=r.subParser("simplifiedAutoLinks")(l,w,p),l=r.subParser("emoji")(l,w,p),l=r.subParser("underline")(l,w,p),l=r.subParser("italicsAndBold")(l,w,p),l=r.subParser("strikethrough")(l,w,p),l=r.subParser("ellipsis")(l,w,p),l=r.subParser("hashHTMLSpans")(l,w,p),l=r.subParser("encodeAmpsAndAngles")(l,w,p),w.simpleLineBreaks?/\n\nK/.test(l)||(l=l.replace(/\n+/g,`<br />
`)):l=l.replace(/  +\n/g,`<br />
`),l=p.converter._dispatch("spanGamut.after",l,w,p),l}),r.subParser("strikethrough",function(l,w,p){function v(x){return w.simplifiedAutoLink&&(x=r.subParser("simplifiedAutoLinks")(x,w,p)),"<del>"+x+"</del>"}return w.strikethrough&&(l=p.converter._dispatch("strikethrough.before",l,w,p),l=l.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(x,R){return v(R)}),l=p.converter._dispatch("strikethrough.after",l,w,p)),l}),r.subParser("stripLinkDefinitions",function(l,w,p){var v=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,x=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;l+="0";var R=function(T,E,$,j,F,I,k){return E=E.toLowerCase(),l.toLowerCase().split(E).length-1<2?T:($.match(/^data:.+?\/.+?;base64,/)?p.gUrls[E]=$.replace(/\s/g,""):p.gUrls[E]=r.subParser("encodeAmpsAndAngles")($,w,p),I?I+k:(k&&(p.gTitles[E]=k.replace(/"|'/g,"&quot;")),w.parseImgDimensions&&j&&F&&(p.gDimensions[E]={width:j,height:F}),""))};return l=l.replace(x,R),l=l.replace(v,R),l=l.replace(/0/,""),l}),r.subParser("tables",function(l,w,p){if(!w.tables)return l;var v=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,x=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function R(F){return/^:[ \t]*--*$/.test(F)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(F)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(F)?' style="text-align:center;"':""}function T(F,I){var k="";return F=F.trim(),(w.tablesHeaderId||w.tableHeaderId)&&(k=' id="'+F.replace(/ /g,"_").toLowerCase()+'"'),F=r.subParser("spanGamut")(F,w,p),"<th"+k+I+">"+F+`</th>
`}function E(F,I){var k=r.subParser("spanGamut")(F,w,p);return"<td"+I+">"+k+`</td>
`}function $(F,I){for(var k=`<table>
<thead>
<tr>
`,V=F.length,W=0;W<V;++W)k+=F[W];for(k+=`</tr>
</thead>
<tbody>
`,W=0;W<I.length;++W){k+=`<tr>
`;for(var K=0;K<V;++K)k+=I[W][K];k+=`</tr>
`}return k+=`</tbody>
</table>
`,k}function j(F){var I,k=F.split(`
`);for(I=0;I<k.length;++I)/^ {0,3}\|/.test(k[I])&&(k[I]=k[I].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(k[I])&&(k[I]=k[I].replace(/\|[ \t]*$/,"")),k[I]=r.subParser("codeSpans")(k[I],w,p);var V=k[0].split("|").map(function(Se){return Se.trim()}),W=k[1].split("|").map(function(Se){return Se.trim()}),K=[],Y=[],Z=[],se=[];for(k.shift(),k.shift(),I=0;I<k.length;++I)k[I].trim()!==""&&K.push(k[I].split("|").map(function(Se){return Se.trim()}));if(V.length<W.length)return F;for(I=0;I<W.length;++I)Z.push(R(W[I]));for(I=0;I<V.length;++I)r.helper.isUndefined(Z[I])&&(Z[I]=""),Y.push(T(V[I],Z[I]));for(I=0;I<K.length;++I){for(var ge=[],me=0;me<Y.length;++me)r.helper.isUndefined(K[I][me]),ge.push(E(K[I][me],Z[me]));se.push(ge)}return $(Y,se)}return l=p.converter._dispatch("tables.before",l,w,p),l=l.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),l=l.replace(v,j),l=l.replace(x,j),l=p.converter._dispatch("tables.after",l,w,p),l}),r.subParser("underline",function(l,w,p){return w.underline&&(l=p.converter._dispatch("underline.before",l,w,p),w.literalMidWordUnderscores?(l=l.replace(/\b___(\S[\s\S]*?)___\b/g,function(v,x){return"<u>"+x+"</u>"}),l=l.replace(/\b__(\S[\s\S]*?)__\b/g,function(v,x){return"<u>"+x+"</u>"})):(l=l.replace(/___(\S[\s\S]*?)___/g,function(v,x){return/\S$/.test(x)?"<u>"+x+"</u>":v}),l=l.replace(/__(\S[\s\S]*?)__/g,function(v,x){return/\S$/.test(x)?"<u>"+x+"</u>":v})),l=l.replace(/(_)/g,r.helper.escapeCharactersCallback),l=p.converter._dispatch("underline.after",l,w,p)),l}),r.subParser("unescapeSpecialChars",function(l,w,p){return l=p.converter._dispatch("unescapeSpecialChars.before",l,w,p),l=l.replace(/E(\d+)E/g,function(v,x){var R=parseInt(x);return String.fromCharCode(R)}),l=p.converter._dispatch("unescapeSpecialChars.after",l,w,p),l}),r.subParser("makeMarkdown.blockquote",function(l,w){var p="";if(l.hasChildNodes())for(var v=l.childNodes,x=v.length,R=0;R<x;++R){var T=r.subParser("makeMarkdown.node")(v[R],w);T!==""&&(p+=T)}return p=p.trim(),p="> "+p.split(`
`).join(`
> `),p}),r.subParser("makeMarkdown.codeBlock",function(l,w){var p=l.getAttribute("language"),v=l.getAttribute("precodenum");return"```"+p+`
`+w.preList[v]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(l){return"`"+l.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(l,w){var p="";if(l.hasChildNodes()){p+="*";for(var v=l.childNodes,x=v.length,R=0;R<x;++R)p+=r.subParser("makeMarkdown.node")(v[R],w);p+="*"}return p}),r.subParser("makeMarkdown.header",function(l,w,p){var v=new Array(p+1).join("#"),x="";if(l.hasChildNodes()){x=v+" ";for(var R=l.childNodes,T=R.length,E=0;E<T;++E)x+=r.subParser("makeMarkdown.node")(R[E],w)}return x}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(l){var w="";return l.hasAttribute("src")&&(w+="!["+l.getAttribute("alt")+"](",w+="<"+l.getAttribute("src")+">",l.hasAttribute("width")&&l.hasAttribute("height")&&(w+=" ="+l.getAttribute("width")+"x"+l.getAttribute("height")),l.hasAttribute("title")&&(w+=' "'+l.getAttribute("title")+'"'),w+=")"),w}),r.subParser("makeMarkdown.links",function(l,w){var p="";if(l.hasChildNodes()&&l.hasAttribute("href")){var v=l.childNodes,x=v.length;p="[";for(var R=0;R<x;++R)p+=r.subParser("makeMarkdown.node")(v[R],w);p+="](",p+="<"+l.getAttribute("href")+">",l.hasAttribute("title")&&(p+=' "'+l.getAttribute("title")+'"'),p+=")"}return p}),r.subParser("makeMarkdown.list",function(l,w,p){var v="";if(!l.hasChildNodes())return"";for(var x=l.childNodes,R=x.length,T=l.getAttribute("start")||1,E=0;E<R;++E)if(!(typeof x[E].tagName>"u"||x[E].tagName.toLowerCase()!=="li")){var $="";p==="ol"?$=T.toString()+". ":$="- ",v+=$+r.subParser("makeMarkdown.listItem")(x[E],w),++T}return v+=`
\x3C!-- -->
`,v.trim()}),r.subParser("makeMarkdown.listItem",function(l,w){for(var p="",v=l.childNodes,x=v.length,R=0;R<x;++R)p+=r.subParser("makeMarkdown.node")(v[R],w);return/\n$/.test(p)?p=p.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):p+=`
`,p}),r.subParser("makeMarkdown.node",function(l,w,p){p=p||!1;var v="";if(l.nodeType===3)return r.subParser("makeMarkdown.txt")(l,w);if(l.nodeType===8)return"\x3C!--"+l.data+`-->

`;if(l.nodeType!==1)return"";var x=l.tagName.toLowerCase();switch(x){case"h1":p||(v=r.subParser("makeMarkdown.header")(l,w,1)+`

`);break;case"h2":p||(v=r.subParser("makeMarkdown.header")(l,w,2)+`

`);break;case"h3":p||(v=r.subParser("makeMarkdown.header")(l,w,3)+`

`);break;case"h4":p||(v=r.subParser("makeMarkdown.header")(l,w,4)+`

`);break;case"h5":p||(v=r.subParser("makeMarkdown.header")(l,w,5)+`

`);break;case"h6":p||(v=r.subParser("makeMarkdown.header")(l,w,6)+`

`);break;case"p":p||(v=r.subParser("makeMarkdown.paragraph")(l,w)+`

`);break;case"blockquote":p||(v=r.subParser("makeMarkdown.blockquote")(l,w)+`

`);break;case"hr":p||(v=r.subParser("makeMarkdown.hr")(l,w)+`

`);break;case"ol":p||(v=r.subParser("makeMarkdown.list")(l,w,"ol")+`

`);break;case"ul":p||(v=r.subParser("makeMarkdown.list")(l,w,"ul")+`

`);break;case"precode":p||(v=r.subParser("makeMarkdown.codeBlock")(l,w)+`

`);break;case"pre":p||(v=r.subParser("makeMarkdown.pre")(l,w)+`

`);break;case"table":p||(v=r.subParser("makeMarkdown.table")(l,w)+`

`);break;case"code":v=r.subParser("makeMarkdown.codeSpan")(l,w);break;case"em":case"i":v=r.subParser("makeMarkdown.emphasis")(l,w);break;case"strong":case"b":v=r.subParser("makeMarkdown.strong")(l,w);break;case"del":v=r.subParser("makeMarkdown.strikethrough")(l,w);break;case"a":v=r.subParser("makeMarkdown.links")(l,w);break;case"img":v=r.subParser("makeMarkdown.image")(l,w);break;default:v=l.outerHTML+`

`}return v}),r.subParser("makeMarkdown.paragraph",function(l,w){var p="";if(l.hasChildNodes())for(var v=l.childNodes,x=v.length,R=0;R<x;++R)p+=r.subParser("makeMarkdown.node")(v[R],w);return p=p.trim(),p}),r.subParser("makeMarkdown.pre",function(l,w){var p=l.getAttribute("prenum");return"<pre>"+w.preList[p]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(l,w){var p="";if(l.hasChildNodes()){p+="~~";for(var v=l.childNodes,x=v.length,R=0;R<x;++R)p+=r.subParser("makeMarkdown.node")(v[R],w);p+="~~"}return p}),r.subParser("makeMarkdown.strong",function(l,w){var p="";if(l.hasChildNodes()){p+="**";for(var v=l.childNodes,x=v.length,R=0;R<x;++R)p+=r.subParser("makeMarkdown.node")(v[R],w);p+="**"}return p}),r.subParser("makeMarkdown.table",function(l,w){var p="",v=[[],[]],x=l.querySelectorAll("thead>tr>th"),R=l.querySelectorAll("tbody>tr"),T,E;for(T=0;T<x.length;++T){var $=r.subParser("makeMarkdown.tableCell")(x[T],w),j="---";if(x[T].hasAttribute("style")){var F=x[T].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(F){case"text-align:left;":j=":---";break;case"text-align:right;":j="---:";break;case"text-align:center;":j=":---:";break}}v[0][T]=$.trim(),v[1][T]=j}for(T=0;T<R.length;++T){var I=v.push([])-1,k=R[T].getElementsByTagName("td");for(E=0;E<x.length;++E){var V=" ";typeof k[E]<"u"&&(V=r.subParser("makeMarkdown.tableCell")(k[E],w)),v[I].push(V)}}var W=3;for(T=0;T<v.length;++T)for(E=0;E<v[T].length;++E){var K=v[T][E].length;K>W&&(W=K)}for(T=0;T<v.length;++T){for(E=0;E<v[T].length;++E)T===1?v[T][E].slice(-1)===":"?v[T][E]=r.helper.padEnd(v[T][E].slice(-1),W-1,"-")+":":v[T][E]=r.helper.padEnd(v[T][E],W,"-"):v[T][E]=r.helper.padEnd(v[T][E],W);p+="| "+v[T].join(" | ")+` |
`}return p.trim()}),r.subParser("makeMarkdown.tableCell",function(l,w){var p="";if(!l.hasChildNodes())return"";for(var v=l.childNodes,x=v.length,R=0;R<x;++R)p+=r.subParser("makeMarkdown.node")(v[R],w,!0);return p.trim()}),r.subParser("makeMarkdown.txt",function(l){var w=l.nodeValue;return w=w.replace(/ +/g," "),w=w.replace(/NBSP;/g," "),w=r.helper.unescapeHTMLEntities(w),w=w.replace(/([*_~|`])/g,"\\$1"),w=w.replace(/^(\s*)>/g,"\\$1>"),w=w.replace(/^#/gm,"\\#"),w=w.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),w=w.replace(/^( {0,3}\d+)\./gm,"$1\\."),w=w.replace(/^( {0,3})([+-])/gm,"$1\\$2"),w=w.replace(/]([\s]*)\(/g,"\\]$1\\("),w=w.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),w});var O=this;e.exports?e.exports=r:O.showdown=r}).call(Op)})(vg);var Rv=vg.exports;const zv=Np(Rv),Oo=Symbol("verified"),Uv=e=>e instanceof Object;function Mv(e){if(!Uv(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}function bh(e){for(let t of e.tags)if(t[0]==="e"&&(t[3]==="root"||t[3]==="reply"))return!1;return!0}function Os(e){var r,o,a;let t,n;return e.kind==30023?(t=((r=e==null?void 0:e.tags.find(([c])=>c==="title"))==null?void 0:r[1])||"No title",n=((o=e==null?void 0:e.tags.find(([c])=>c==="summary"))==null?void 0:o[1])||void 0):(t="Note of "+new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"long",year:"numeric"}).format(new Date(e.created_at*1e3)),n=e.content.slice(0,200)+"..."),{id:e.id,kind:e.kind,created_at:e.created_at,title:t,image:((a=e==null?void 0:e.tags.find(([c])=>c==="image"))==null?void 0:a[1])||void 0,summary:n,content:e.content}}async function Ta(e){let t,n=[];try{let r=yg(e);if(r.type==="npub")t=r.data;else if(r.type==="nprofile")t=r.data.pubkey,n=r.data.relays||[];else return console.error("author should be an npub"),null}catch(r){if(e.length===64)t=e;else return console.error("Failed to decode npub:",r),null}return Pv({pubkey:t,relays:n})}async function _g(e){const t=/nostr:(npub1\w+|nprofile1\w+)/g,r=(e.match(t)||[]).map(async c=>{try{const d=await Ta(c.slice(6));return d?{match:c,replacement:`[${d.shortName}](${c})`}:{match:c,replacement:c}}catch(d){return console.error("Failed to fetch profile:",d),{match:c,replacement:c}}}),o=await Promise.all(r);let a=e;return o.forEach(({match:c,replacement:d})=>{a=a.replace(c,d)}),a}function Eg(e){const t=/(^|\s|\n|\()(nevent1\w+|note1\w+|npub1\w+|nprofile1\w+)(?=\s|\n|\)|$)/gm;e=e.replace(t,(o,a,c)=>`${a}nostr:${c}`);const n=/(^|\s|\n)nostr:(nevent1\w+|note1\w+|npub1\w+|nprofile1\w+)(?=\s|\n|$)/gm;e=e.replace(n,(o,a,c)=>{const d=c.slice(0,24);return`${a}[${d}...](nostr:${c})`});const r=/\(nostr:([a-zA-Z0-9]+)\)/g;return e=e.replace(r,(o,a)=>`(https://njump.me/${a})`),e}function jv(e){const t=/\[([^\]]+)\]\(([^)]+)\)/g;return e.replace(t,(r,o)=>o)}function Hv(e){const t=/\s*(https?:\/\/\S+\.(?:png|jpg|jpeg|gif|bmp))\s*/gi;return e.replace(t,(r,o)=>` ![Image](${o}) `)}function Dv(e){const t=/\s*(https?:\/\/\S+\.(?:mp4|webm|ogg|mov))(\s*|$)/gi;return e.replace(t,(r,o)=>` <video controls><source src="${o}" type="video/mp4"></video> `)}function Vv(e){const t=/\s*(https?:\/\/\S+\.(?:mp3))(\s*|$)/gi;return e.replace(t,(r,o)=>` <audio controls src="${o}"></audio> `)}function qv(e){return[{regex:/<<|/g,replacement:"&laquo;"},{regex:/>>|/g,replacement:"&raquo;"},{regex:/\.\.\./g,replacement:"&hellip;"},{regex:/---/g,replacement:"&mdash;"},{regex:/--/g,replacement:"&mdash;"}].forEach(({regex:n,replacement:r})=>{e=e.replace(n,r)}),e}async function kg(e){let t=e.content;return t=await _g(t),t=Eg(t),t=Hv(t),t=Dv(t),t=Vv(t),t=qv(t),e.kind==1&&(t=t.replace(/\n/g,`
<br/>`)),"title"in e&&(t=t.replace("# "+e.title,"")),t=new zv.Converter({simplifiedAutoLink:!0,tables:!0,strikethrough:!0}).makeHtml(t),t}function Rr(e,t=!1){const n=new Date(e*1e3),r={day:"2-digit",month:"long",year:"numeric"},o=new Intl.DateTimeFormat("en-US",r).formatToParts(n);let a,c,d;o.forEach(h=>{h.type==="day"&&(a=h.value),h.type==="month"&&(c=h.value),h.type==="year"&&(d=h.value)});let f=`${a} ${c} ${d}`;if(t){const h={hour:"2-digit",minute:"2-digit",hourCycle:"h23"},b=new Intl.DateTimeFormat("en-US",h).format(n);f+=` - ${b}`}return f}function ri(...e){return e.filter(Boolean).join(" ")}function Fv(e,t){if(e){const n=Object.keys(e);for(let r=0;r<n.length;r++){const o=n[r];if(o!=="__proto__"&&t(e[o],o)===!1)break}}return e}function mh(e){var n;const t=(n=e.Components.Elements)==null?void 0:n.list.children;return t&&Array.prototype.slice.call(t)||[]}function Ks(e){return e!==null&&typeof e=="object"}function qu(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&!e.some((n,r)=>!qu(n,t[r]));if(Ks(e)&&Ks(t)){const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&!n.some(o=>!Object.prototype.hasOwnProperty.call(t,o)||!qu(e[o],t[o]))}return e===t}function Wv(e,t){return e.length===t.length&&!e.some((n,r)=>n!==t[r])}function Fu(e,t){const n=e;return Fv(t,(r,o)=>{Array.isArray(r)?n[o]=r.slice():Ks(r)?n[o]=Fu(Ks(n[o])?n[o]:{},r):n[o]=r}),n}function Kv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gv(e,t,n){return t&&Kv(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}/*!
 * Splide.js
 * Version  : 4.1.4
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var yh="(prefers-reduced-motion: reduce)",Vo=1,Zv=2,oi=3,gi=4,ts=5,Ns=6,Gs=7,Yv={CREATED:Vo,MOUNTED:Zv,IDLE:oi,MOVING:gi,SCROLLING:ts,DRAGGING:Ns,DESTROYED:Gs};function Qn(e){e.length=0}function Kr(e,t,n){return Array.prototype.slice.call(e,t,n)}function Qe(e){return e.bind.apply(e,[null].concat(Kr(arguments,1)))}var Ag=setTimeout,Wu=function(){};function vh(e){return requestAnimationFrame(e)}function Pa(e,t){return typeof t===e}function Vi(e){return!Vl(e)&&Pa("object",e)}var Dl=Array.isArray,Sg=Qe(Pa,"function"),zr=Qe(Pa,"string"),ns=Qe(Pa,"undefined");function Vl(e){return e===null}function $g(e){try{return e instanceof(e.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function rs(e){return Dl(e)?e:[e]}function cn(e,t){rs(e).forEach(t)}function ql(e,t){return e.indexOf(t)>-1}function Rs(e,t){return e.push.apply(e,rs(t)),e}function Gn(e,t,n){e&&cn(t,function(r){r&&e.classList[n?"add":"remove"](r)})}function Bn(e,t){Gn(e,zr(t)?t.split(" "):t,!0)}function os(e,t){cn(t,e.appendChild.bind(e))}function Fl(e,t){cn(e,function(n){var r=(t||n).parentNode;r&&r.insertBefore(n,t)})}function qi(e,t){return $g(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function xg(e,t){var n=e?Kr(e.children):[];return t?n.filter(function(r){return qi(r,t)}):n}function is(e,t){return t?xg(e,t)[0]:e.firstElementChild}var Fi=Object.keys;function bo(e,t,n){return e&&(n?Fi(e).reverse():Fi(e)).forEach(function(r){r!=="__proto__"&&t(e[r],r)}),e}function Wi(e){return Kr(arguments,1).forEach(function(t){bo(t,function(n,r){e[r]=t[r]})}),e}function Ir(e){return Kr(arguments,1).forEach(function(t){bo(t,function(n,r){Dl(n)?e[r]=n.slice():Vi(n)?e[r]=Ir({},Vi(e[r])?e[r]:{},n):e[r]=n})}),e}function _h(e,t){cn(t||Fi(e),function(n){delete e[n]})}function In(e,t){cn(e,function(n){cn(t,function(r){n&&n.removeAttribute(r)})})}function Ue(e,t,n){Vi(t)?bo(t,function(r,o){Ue(e,o,r)}):cn(e,function(r){Vl(n)||n===""?In(r,t):r.setAttribute(t,String(n))})}function Fo(e,t,n){var r=document.createElement(e);return t&&(zr(t)?Bn(r,t):Ue(r,t)),n&&os(n,r),r}function ln(e,t,n){if(ns(n))return getComputedStyle(e)[t];Vl(n)||(e.style[t]=""+n)}function Ki(e,t){ln(e,"display",t)}function Tg(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function fn(e,t){return e.getAttribute(t)}function Eh(e,t){return e&&e.classList.contains(t)}function nn(e){return e.getBoundingClientRect()}function yo(e){cn(e,function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})}function Pg(e){return is(new DOMParser().parseFromString(e,"text/html").body)}function Fn(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function Bg(e,t){return e&&e.querySelector(t)}function Wl(e,t){return t?Kr(e.querySelectorAll(t)):[]}function Zn(e,t){Gn(e,t,!1)}function Ku(e){return e.timeStamp}function so(e){return zr(e)?e:e?e+"px":""}var ss="splide",Kl="data-"+ss;function Ri(e,t){if(!e)throw new Error("["+ss+"] "+(t||""))}var Ur=Math.min,Zs=Math.max,Ys=Math.floor,Gi=Math.ceil,jt=Math.abs;function Ig(e,t,n){return jt(e-t)<n}function zs(e,t,n,r){var o=Ur(t,n),a=Zs(t,n);return r?o<e&&e<a:o<=e&&e<=a}function jo(e,t,n){var r=Ur(t,n),o=Zs(t,n);return Ur(Zs(r,e),o)}function Gu(e){return+(e>0)-+(e<0)}function Zu(e,t){return cn(t,function(n){e=e.replace("%s",""+n)}),e}function Gl(e){return e<10?"0"+e:""+e}var kh={};function Jv(e){return""+e+Gl(kh[e]=(kh[e]||0)+1)}function Lg(){var e=[];function t(c,d,f,h){o(c,d,function(y,b,S){var C="addEventListener"in y,L=C?y.removeEventListener.bind(y,b,f,h):y.removeListener.bind(y,f);C?y.addEventListener(b,f,h):y.addListener(f),e.push([y,b,S,f,L])})}function n(c,d,f){o(c,d,function(h,y,b){e=e.filter(function(S){return S[0]===h&&S[1]===y&&S[2]===b&&(!f||S[3]===f)?(S[4](),!1):!0})})}function r(c,d,f){var h,y=!0;return typeof CustomEvent=="function"?h=new CustomEvent(d,{bubbles:y,detail:f}):(h=document.createEvent("CustomEvent"),h.initCustomEvent(d,y,!1,f)),c.dispatchEvent(h),h}function o(c,d,f){cn(c,function(h){h&&cn(d,function(y){y.split(" ").forEach(function(b){var S=b.split(".");f(h,S[0],S[1])})})})}function a(){e.forEach(function(c){c[4]()}),Qn(e)}return{bind:t,unbind:n,dispatch:r,destroy:a}}var Gr="mounted",Ah="ready",Ln="move",vo="moved",Js="click",Yu="active",Ju="inactive",Qu="visible",Xu="hidden",lt="refresh",Bt="updated",ii="resize",Ba="resized",Cg="drag",Og="dragging",Ng="dragged",Ia="scroll",So="scrolled",Qv="overflow",Zl="destroy",el="arrows:mounted",tl="arrows:updated",nl="pagination:mounted",rl="pagination:updated",Qs="navigation:mounted",Yl="autoplay:play",ol="autoplay:playing",Jl="autoplay:pause",Xs="lazyload:loaded",Rg="sk",zg="sh",ea="ei";function et(e){var t=e?e.event.bus:document.createDocumentFragment(),n=Lg();function r(a,c){n.bind(t,rs(a).join(" "),function(d){c.apply(c,Dl(d.detail)?d.detail:[])})}function o(a){n.dispatch(t,a,Kr(arguments,1))}return e&&e.event.on(Zl,n.destroy),Wi(n,{bus:t,on:r,off:Qe(n.unbind,t),emit:o})}function La(e,t,n,r){var o=Date.now,a,c=0,d,f=!0,h=0;function y(){if(!f){if(c=e?Ur((o()-a)/e,1):1,n&&n(c),c>=1&&(t(),a=o(),r&&++h>=r))return S();d=vh(y)}}function b(M){M||L(),a=o()-(M?c*e:0),f=!1,d=vh(y)}function S(){f=!0}function C(){a=o(),c=0,n&&n(c)}function L(){d&&cancelAnimationFrame(d),c=0,d=0,f=!0}function A(M){e=M}function N(){return f}return{start:b,rewind:C,pause:S,cancel:L,set:A,isPaused:N}}function Xv(e){var t=e;function n(o){t=o}function r(o){return ql(rs(o),t)}return{set:n,is:r}}function e3(e,t){var n=La(0,e,null,1);return function(){n.isPaused()&&n.start()}}function t3(e,t,n){var r=e.state,o=n.breakpoints||{},a=n.reducedMotion||{},c=Lg(),d=[];function f(){var L=n.mediaQuery==="min";Fi(o).sort(function(A,N){return L?+A-+N:+N-+A}).forEach(function(A){y(o[A],"("+(L?"min":"max")+"-width:"+A+"px)")}),y(a,yh),b()}function h(L){L&&c.destroy()}function y(L,A){var N=matchMedia(A);c.bind(N,"change",b),d.push([L,N])}function b(){var L=r.is(Gs),A=n.direction,N=d.reduce(function(M,B){return Ir(M,B[1].matches?B[0]:{})},{});_h(n),C(N),n.destroy?e.destroy(n.destroy==="completely"):L?(h(!0),e.mount()):A!==n.direction&&e.refresh()}function S(L){matchMedia(yh).matches&&(L?Ir(n,a):_h(n,Fi(a)))}function C(L,A,N){Ir(n,L),A&&Ir(Object.getPrototypeOf(n),L),(N||!r.is(Vo))&&e.emit(Bt,n)}return{setup:f,destroy:h,reduce:S,set:C}}var Ca="Arrow",Oa=Ca+"Left",Na=Ca+"Right",Ug=Ca+"Up",Mg=Ca+"Down",Sh="rtl",Ra="ttb",su={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[Ug,Na],ArrowRight:[Mg,Oa]};function n3(e,t,n){function r(a,c,d){d=d||n.direction;var f=d===Sh&&!c?1:d===Ra?0:-1;return su[a]&&su[a][f]||a.replace(/width|left|right/i,function(h,y){var b=su[h.toLowerCase()][f]||h;return y>0?b.charAt(0).toUpperCase()+b.slice(1):b})}function o(a){return a*(n.direction===Sh?1:-1)}return{resolve:r,orient:o}}var Yn="role",Wo="tabindex",r3="disabled",wn="aria-",as=wn+"controls",jg=wn+"current",$h=wn+"selected",an=wn+"label",Ql=wn+"labelledby",Hg=wn+"hidden",Xl=wn+"orientation",Zi=wn+"roledescription",xh=wn+"live",Th=wn+"busy",Ph=wn+"atomic",ed=[Yn,Wo,r3,as,jg,an,Ql,Hg,Xl,Zi],Rn=ss+"__",Zr="is-",au=ss,Bh=Rn+"track",o3=Rn+"list",za=Rn+"slide",Dg=za+"--clone",i3=za+"__container",td=Rn+"arrows",Ua=Rn+"arrow",Vg=Ua+"--prev",qg=Ua+"--next",Ma=Rn+"pagination",Fg=Ma+"__page",s3=Rn+"progress",a3=s3+"__bar",c3=Rn+"toggle",u3=Rn+"spinner",l3=Rn+"sr",d3=Zr+"initialized",_o=Zr+"active",Wg=Zr+"prev",Kg=Zr+"next",il=Zr+"visible",sl=Zr+"loading",Gg=Zr+"focus-in",Zg=Zr+"overflow",f3=[_o,il,Wg,Kg,sl,Gg,Zg],h3={slide:za,clone:Dg,arrows:td,arrow:Ua,prev:Vg,next:qg,pagination:Ma,page:Fg,spinner:u3};function p3(e,t){if(Sg(e.closest))return e.closest(t);for(var n=e;n&&n.nodeType===1&&!qi(n,t);)n=n.parentElement;return n}var g3=5,Ih=200,Yg="touchstart mousedown",cu="touchmove mousemove",uu="touchend touchcancel mouseup click";function w3(e,t,n){var r=et(e),o=r.on,a=r.bind,c=e.root,d=n.i18n,f={},h=[],y=[],b=[],S,C,L;function A(){O(),l(),B()}function N(){o(lt,M),o(lt,A),o(Bt,B),a(document,Yg+" keydown",function(v){L=v.type==="keydown"},{capture:!0}),a(c,"focusin",function(){Gn(c,Gg,!!L)})}function M(v){var x=ed.concat("style");Qn(h),Zn(c,y),Zn(S,b),In([S,C],x),In(c,v?x:["style",Zi])}function B(){Zn(c,y),Zn(S,b),y=p(au),b=p(Bh),Bn(c,y),Bn(S,b),Ue(c,an,n.label),Ue(c,Ql,n.labelledby)}function O(){S=w("."+Bh),C=is(S,"."+o3),Ri(S&&C,"A track/list element is missing."),Rs(h,xg(C,"."+za+":not(."+Dg+")")),bo({arrows:td,pagination:Ma,prev:Vg,next:qg,bar:a3,toggle:c3},function(v,x){f[x]=w("."+v)}),Wi(f,{root:c,track:S,list:C,slides:h})}function l(){var v=c.id||Jv(ss),x=n.role;c.id=v,S.id=S.id||v+"-track",C.id=C.id||v+"-list",!fn(c,Yn)&&c.tagName!=="SECTION"&&x&&Ue(c,Yn,x),Ue(c,Zi,d.carousel),Ue(C,Yn,"presentation")}function w(v){var x=Bg(c,v);return x&&p3(x,"."+au)===c?x:void 0}function p(v){return[v+"--"+n.type,v+"--"+n.direction,n.drag&&v+"--draggable",n.isNavigation&&v+"--nav",v===au&&_o]}return Wi(f,{setup:A,mount:N,destroy:M})}var si="slide",wi="loop",cs="fade";function b3(e,t,n,r){var o=et(e),a=o.on,c=o.emit,d=o.bind,f=e.Components,h=e.root,y=e.options,b=y.isNavigation,S=y.updateOnMove,C=y.i18n,L=y.pagination,A=y.slideFocus,N=f.Direction.resolve,M=fn(r,"style"),B=fn(r,an),O=n>-1,l=is(r,"."+i3),w;function p(){O||(r.id=h.id+"-slide"+Gl(t+1),Ue(r,Yn,L?"tabpanel":"group"),Ue(r,Zi,C.slide),Ue(r,an,B||Zu(C.slideLabel,[t+1,e.length]))),v()}function v(){d(r,"click",Qe(c,Js,W)),d(r,"keydown",Qe(c,Rg,W)),a([vo,zg,So],E),a(Qs,R),S&&a(Ln,T)}function x(){w=!0,o.destroy(),Zn(r,f3),In(r,ed),Ue(r,"style",M),Ue(r,an,B||"")}function R(){var K=e.splides.map(function(Y){var Z=Y.splide.Components.Slides.getAt(t);return Z?Z.slide.id:""}).join(" ");Ue(r,an,Zu(C.slideX,(O?n:t)+1)),Ue(r,as,K),Ue(r,Yn,A?"button":""),A&&In(r,Zi)}function T(){w||E()}function E(){if(!w){var K=e.index;$(),j(),Gn(r,Wg,t===K-1),Gn(r,Kg,t===K+1)}}function $(){var K=I();K!==Eh(r,_o)&&(Gn(r,_o,K),Ue(r,jg,b&&K||""),c(K?Yu:Ju,W))}function j(){var K=k(),Y=!K&&(!I()||O);if(e.state.is([gi,ts])||Ue(r,Hg,Y||""),Ue(Wl(r,y.focusableNodes||""),Wo,Y?-1:""),A&&Ue(r,Wo,Y?-1:0),K!==Eh(r,il)&&(Gn(r,il,K),c(K?Qu:Xu,W)),!K&&document.activeElement===r){var Z=f.Slides.getAt(e.index);Z&&Tg(Z.slide)}}function F(K,Y,Z){ln(Z&&l||r,K,Y)}function I(){var K=e.index;return K===t||y.cloneStatus&&K===n}function k(){if(e.is(cs))return I();var K=nn(f.Elements.track),Y=nn(r),Z=N("left",!0),se=N("right",!0);return Ys(K[Z])<=Gi(Y[Z])&&Ys(Y[se])<=Gi(K[se])}function V(K,Y){var Z=jt(K-t);return!O&&(y.rewind||e.is(wi))&&(Z=Ur(Z,e.length-Z)),Z<=Y}var W={index:t,slideIndex:n,slide:r,container:l,isClone:O,mount:p,destroy:x,update:E,style:F,isWithin:V};return W}function m3(e,t,n){var r=et(e),o=r.on,a=r.emit,c=r.bind,d=t.Elements,f=d.slides,h=d.list,y=[];function b(){S(),o(lt,C),o(lt,S)}function S(){f.forEach(function(E,$){A(E,$,-1)})}function C(){w(function(E){E.destroy()}),Qn(y)}function L(){w(function(E){E.update()})}function A(E,$,j){var F=b3(e,$,j,E);F.mount(),y.push(F),y.sort(function(I,k){return I.index-k.index})}function N(E){return E?p(function($){return!$.isClone}):y}function M(E){var $=t.Controller,j=$.toIndex(E),F=$.hasFocus()?1:n.perPage;return p(function(I){return zs(I.index,j,j+F-1)})}function B(E){return p(E)[0]}function O(E,$){cn(E,function(j){if(zr(j)&&(j=Pg(j)),$g(j)){var F=f[$];F?Fl(j,F):os(h,j),Bn(j,n.classes.slide),x(j,Qe(a,ii))}}),a(lt)}function l(E){yo(p(E).map(function($){return $.slide})),a(lt)}function w(E,$){N($).forEach(E)}function p(E){return y.filter(Sg(E)?E:function($){return zr(E)?qi($.slide,E):ql(rs(E),$.index)})}function v(E,$,j){w(function(F){F.style(E,$,j)})}function x(E,$){var j=Wl(E,"img"),F=j.length;F?j.forEach(function(I){c(I,"load error",function(){--F||$()})}):$()}function R(E){return E?f.length:y.length}function T(){return y.length>n.perPage}return{mount:b,destroy:C,update:L,register:A,get:N,getIn:M,getAt:B,add:O,remove:l,forEach:w,filter:p,style:v,getLength:R,isEnough:T}}function y3(e,t,n){var r=et(e),o=r.on,a=r.bind,c=r.emit,d=t.Slides,f=t.Direction.resolve,h=t.Elements,y=h.root,b=h.track,S=h.list,C=d.getAt,L=d.style,A,N,M;function B(){O(),a(window,"resize load",e3(Qe(c,ii))),o([Bt,lt],O),o(ii,l)}function O(){A=n.direction===Ra,ln(y,"maxWidth",so(n.width)),ln(b,f("paddingLeft"),w(!1)),ln(b,f("paddingRight"),w(!0)),l(!0)}function l(W){var K=nn(y);(W||N.width!==K.width||N.height!==K.height)&&(ln(b,"height",p()),L(f("marginRight"),so(n.gap)),L("width",x()),L("height",R(),!0),N=K,c(Ba),M!==(M=V())&&(Gn(y,Zg,M),c(Qv,M)))}function w(W){var K=n.padding,Y=f(W?"right":"left");return K&&so(K[Y]||(Vi(K)?0:K))||"0px"}function p(){var W="";return A&&(W=v(),Ri(W,"height or heightRatio is missing."),W="calc("+W+" - "+w(!1)+" - "+w(!0)+")"),W}function v(){return so(n.height||nn(S).width*n.heightRatio)}function x(){return n.autoWidth?null:so(n.fixedWidth)||(A?"":T())}function R(){return so(n.fixedHeight)||(A?n.autoHeight?null:T():v())}function T(){var W=so(n.gap);return"calc((100%"+(W&&" + "+W)+")/"+(n.perPage||1)+(W&&" - "+W)+")"}function E(){return nn(S)[f("width")]}function $(W,K){var Y=C(W||0);return Y?nn(Y.slide)[f("width")]+(K?0:I()):0}function j(W,K){var Y=C(W);if(Y){var Z=nn(Y.slide)[f("right")],se=nn(S)[f("left")];return jt(Z-se)+(K?0:I())}return 0}function F(W){return j(e.length-1)-j(0)+$(0,W)}function I(){var W=C(0);return W&&parseFloat(ln(W.slide,f("marginRight")))||0}function k(W){return parseFloat(ln(b,f("padding"+(W?"Right":"Left"))))||0}function V(){return e.is(cs)||F(!0)>E()}return{mount:B,resize:l,listSize:E,slideSize:$,sliderSize:F,totalSize:j,getPadding:k,isOverflow:V}}var v3=2;function _3(e,t,n){var r=et(e),o=r.on,a=t.Elements,c=t.Slides,d=t.Direction.resolve,f=[],h;function y(){o(lt,b),o([Bt,ii],C),(h=N())&&(L(h),t.Layout.resize(!0))}function b(){S(),y()}function S(){yo(f),Qn(f),r.destroy()}function C(){var M=N();h!==M&&(h<M||!M)&&r.emit(lt)}function L(M){var B=c.get().slice(),O=B.length;if(O){for(;B.length<M;)Rs(B,B);Rs(B.slice(-M),B.slice(0,M)).forEach(function(l,w){var p=w<M,v=A(l.slide,w);p?Fl(v,B[0].slide):os(a.list,v),Rs(f,v),c.register(v,w-M+(p?0:O),l.index)})}}function A(M,B){var O=M.cloneNode(!0);return Bn(O,n.classes.clone),O.id=e.root.id+"-clone"+Gl(B+1),O}function N(){var M=n.clones;if(!e.is(wi))M=0;else if(ns(M)){var B=n[d("fixedWidth")]&&t.Layout.slideSize(0),O=B&&Gi(nn(a.track)[d("width")]/B);M=O||n[d("autoWidth")]&&e.length||n.perPage*v3}return M}return{mount:y,destroy:S}}function E3(e,t,n){var r=et(e),o=r.on,a=r.emit,c=e.state.set,d=t.Layout,f=d.slideSize,h=d.getPadding,y=d.totalSize,b=d.listSize,S=d.sliderSize,C=t.Direction,L=C.resolve,A=C.orient,N=t.Elements,M=N.list,B=N.track,O;function l(){O=t.Transition,o([Gr,Ba,Bt,lt],w)}function w(){t.Controller.isBusy()||(t.Scroll.cancel(),v(e.index),t.Slides.update())}function p(Y,Z,se,ge){Y!==Z&&W(Y>se)&&(E(),x(T(F(),Y>se),!0)),c(gi),a(Ln,Z,se,Y),O.start(Z,function(){c(oi),a(vo,Z,se,Y),ge&&ge()})}function v(Y){x(j(Y,!0))}function x(Y,Z){if(!e.is(cs)){var se=Z?Y:R(Y);ln(M,"transform","translate"+L("X")+"("+se+"px)"),Y!==se&&a(zg)}}function R(Y){if(e.is(wi)){var Z=$(Y),se=Z>t.Controller.getEnd(),ge=Z<0;(ge||se)&&(Y=T(Y,se))}return Y}function T(Y,Z){var se=Y-V(Z),ge=S();return Y-=A(ge*(Gi(jt(se)/ge)||1))*(Z?1:-1),Y}function E(){x(F(),!0),O.cancel()}function $(Y){for(var Z=t.Slides.get(),se=0,ge=1/0,me=0;me<Z.length;me++){var Se=Z[me].index,re=jt(j(Se,!0)-Y);if(re<=ge)ge=re,se=Se;else break}return se}function j(Y,Z){var se=A(y(Y-1)-k(Y));return Z?I(se):se}function F(){var Y=L("left");return nn(M)[Y]-nn(B)[Y]+A(h(!1))}function I(Y){return n.trimSpace&&e.is(si)&&(Y=jo(Y,0,A(S(!0)-b()))),Y}function k(Y){var Z=n.focus;return Z==="center"?(b()-f(Y,!0))/2:+Z*f(Y)||0}function V(Y){return j(Y?t.Controller.getEnd():0,!!n.trimSpace)}function W(Y){var Z=A(T(F(),Y));return Y?Z>=0:Z<=M[L("scrollWidth")]-nn(B)[L("width")]}function K(Y,Z){Z=ns(Z)?F():Z;var se=Y!==!0&&A(Z)<A(V(!1)),ge=Y!==!1&&A(Z)>A(V(!0));return se||ge}return{mount:l,move:p,jump:v,translate:x,shift:T,cancel:E,toIndex:$,toPosition:j,getPosition:F,getLimit:V,exceededLimit:K,reposition:w}}function k3(e,t,n){var r=et(e),o=r.on,a=r.emit,c=t.Move,d=c.getPosition,f=c.getLimit,h=c.toPosition,y=t.Slides,b=y.isEnough,S=y.getLength,C=n.omitEnd,L=e.is(wi),A=e.is(si),N=Qe(F,!1),M=Qe(F,!0),B=n.start||0,O,l=B,w,p,v;function x(){R(),o([Bt,lt,ea],R),o(Ba,T)}function R(){w=S(!0),p=n.perMove,v=n.perPage,O=W();var re=jo(B,0,C?O:w-1);re!==B&&(B=re,c.reposition())}function T(){O!==W()&&a(ea)}function E(re,ye,Ie){if(!Se()){var Oe=j(re),Me=V(Oe);Me>-1&&(ye||Me!==B)&&(se(Me),c.move(Oe,Me,l,Ie))}}function $(re,ye,Ie,Oe){t.Scroll.scroll(re,ye,Ie,function(){var Me=V(c.toIndex(d()));se(C?Ur(Me,O):Me),Oe&&Oe()})}function j(re){var ye=B;if(zr(re)){var Ie=re.match(/([+\-<>])(\d+)?/)||[],Oe=Ie[1],Me=Ie[2];Oe==="+"||Oe==="-"?ye=I(B+ +(""+Oe+(+Me||1)),B):Oe===">"?ye=Me?K(+Me):N(!0):Oe==="<"&&(ye=M(!0))}else ye=L?re:jo(re,0,O);return ye}function F(re,ye){var Ie=p||(me()?1:v),Oe=I(B+Ie*(re?-1:1),B,!(p||me()));return Oe===-1&&A&&!Ig(d(),f(!re),1)?re?0:O:ye?Oe:V(Oe)}function I(re,ye,Ie){if(b()||me()){var Oe=k(re);Oe!==re&&(ye=re,re=Oe,Ie=!1),re<0||re>O?!p&&(zs(0,re,ye,!0)||zs(O,ye,re,!0))?re=K(Y(re)):L?re=Ie?re<0?-(w%v||v):w:re:n.rewind?re=re<0?O:0:re=-1:Ie&&re!==ye&&(re=K(Y(ye)+(re<ye?-1:1)))}else re=-1;return re}function k(re){if(A&&n.trimSpace==="move"&&re!==B)for(var ye=d();ye===h(re,!0)&&zs(re,0,e.length-1,!n.rewind);)re<B?--re:++re;return re}function V(re){return L?(re+w)%w||0:re}function W(){for(var re=w-(me()||L&&p?1:v);C&&re-- >0;)if(h(w-1,!0)!==h(re,!0)){re++;break}return jo(re,0,w-1)}function K(re){return jo(me()?re:v*re,0,O)}function Y(re){return me()?Ur(re,O):Ys((re>=O?w-1:re)/v)}function Z(re){var ye=c.toIndex(re);return A?jo(ye,0,O):ye}function se(re){re!==B&&(l=B,B=re)}function ge(re){return re?l:B}function me(){return!ns(n.focus)||n.isNavigation}function Se(){return e.state.is([gi,ts])&&!!n.waitForTransition}return{mount:x,go:E,scroll:$,getNext:N,getPrev:M,getAdjacent:F,getEnd:W,setIndex:se,getIndex:ge,toIndex:K,toPage:Y,toDest:Z,hasFocus:me,isBusy:Se}}var A3="http://www.w3.org/2000/svg",S3="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",Ts=40;function $3(e,t,n){var r=et(e),o=r.on,a=r.bind,c=r.emit,d=n.classes,f=n.i18n,h=t.Elements,y=t.Controller,b=h.arrows,S=h.track,C=b,L=h.prev,A=h.next,N,M,B={};function O(){w(),o(Bt,l)}function l(){p(),O()}function w(){var $=n.arrows;$&&!(L&&A)&&R(),L&&A&&(Wi(B,{prev:L,next:A}),Ki(C,$?"":"none"),Bn(C,M=td+"--"+n.direction),$&&(v(),E(),Ue([L,A],as,S.id),c(el,L,A)))}function p(){r.destroy(),Zn(C,M),N?(yo(b?[L,A]:C),L=A=null):In([L,A],ed)}function v(){o([Gr,vo,lt,So,ea],E),a(A,"click",Qe(x,">")),a(L,"click",Qe(x,"<"))}function x($){y.go($,!0)}function R(){C=b||Fo("div",d.arrows),L=T(!0),A=T(!1),N=!0,os(C,[L,A]),!b&&Fl(C,S)}function T($){var j='<button class="'+d.arrow+" "+($?d.prev:d.next)+'" type="button"><svg xmlns="'+A3+'" viewBox="0 0 '+Ts+" "+Ts+'" width="'+Ts+'" height="'+Ts+'" focusable="false"><path d="'+(n.arrowPath||S3)+'" />';return Pg(j)}function E(){if(L&&A){var $=e.index,j=y.getPrev(),F=y.getNext(),I=j>-1&&$<j?f.last:f.prev,k=F>-1&&$>F?f.first:f.next;L.disabled=j<0,A.disabled=F<0,Ue(L,an,I),Ue(A,an,k),c(tl,L,A,j,F)}}return{arrows:B,mount:O,destroy:p,update:E}}var x3=Kl+"-interval";function T3(e,t,n){var r=et(e),o=r.on,a=r.bind,c=r.emit,d=La(n.interval,e.go.bind(e,">"),v),f=d.isPaused,h=t.Elements,y=t.Elements,b=y.root,S=y.toggle,C=n.autoplay,L,A,N=C==="pause";function M(){C&&(B(),S&&Ue(S,as,h.track.id),N||O(),p())}function B(){n.pauseOnHover&&a(b,"mouseenter mouseleave",function(R){L=R.type==="mouseenter",w()}),n.pauseOnFocus&&a(b,"focusin focusout",function(R){A=R.type==="focusin",w()}),S&&a(S,"click",function(){N?O():l(!0)}),o([Ln,Ia,lt],d.rewind),o(Ln,x)}function O(){f()&&t.Slides.isEnough()&&(d.start(!n.resetProgress),A=L=N=!1,p(),c(Yl))}function l(R){R===void 0&&(R=!0),N=!!R,p(),f()||(d.pause(),c(Jl))}function w(){N||(L||A?l(!1):O())}function p(){S&&(Gn(S,_o,!N),Ue(S,an,n.i18n[N?"play":"pause"]))}function v(R){var T=h.bar;T&&ln(T,"width",R*100+"%"),c(ol,R)}function x(R){var T=t.Slides.getAt(R);d.set(T&&+fn(T.slide,x3)||n.interval)}return{mount:M,destroy:d.cancel,play:O,pause:l,isPaused:f}}function P3(e,t,n){var r=et(e),o=r.on;function a(){n.cover&&(o(Xs,Qe(d,!0)),o([Gr,Bt,lt],Qe(c,!0)))}function c(f){t.Slides.forEach(function(h){var y=is(h.container||h.slide,"img");y&&y.src&&d(f,y,h)})}function d(f,h,y){y.style("background",f?'center/cover no-repeat url("'+h.src+'")':"",!0),Ki(h,f?"none":"")}return{mount:a,destroy:Qe(c,!1)}}var B3=10,I3=600,L3=.6,C3=1.5,O3=800;function N3(e,t,n){var r=et(e),o=r.on,a=r.emit,c=e.state.set,d=t.Move,f=d.getPosition,h=d.getLimit,y=d.exceededLimit,b=d.translate,S=e.is(si),C,L,A=1;function N(){o(Ln,l),o([Bt,lt],w)}function M(v,x,R,T,E){var $=f();if(l(),R&&(!S||!y())){var j=t.Layout.sliderSize(),F=Gu(v)*j*Ys(jt(v)/j)||0;v=d.toPosition(t.Controller.toDest(v%j))+F}var I=Ig($,v,1);A=1,x=I?0:x||Zs(jt(v-$)/C3,O3),L=T,C=La(x,B,Qe(O,$,v,E),1),c(ts),a(Ia),C.start()}function B(){c(oi),L&&L(),a(So)}function O(v,x,R,T){var E=f(),$=v+(x-v)*p(T),j=($-E)*A;b(E+j),S&&!R&&y()&&(A*=L3,jt(j)<B3&&M(h(y(!0)),I3,!1,L,!0))}function l(){C&&C.cancel()}function w(){C&&!C.isPaused()&&(l(),B())}function p(v){var x=n.easingFunc;return x?x(v):1-Math.pow(1-v,4)}return{mount:N,destroy:l,scroll:M,cancel:w}}var Ho={passive:!1,capture:!0};function R3(e,t,n){var r=et(e),o=r.on,a=r.emit,c=r.bind,d=r.unbind,f=e.state,h=t.Move,y=t.Scroll,b=t.Controller,S=t.Elements.track,C=t.Media.reduce,L=t.Direction,A=L.resolve,N=L.orient,M=h.getPosition,B=h.exceededLimit,O,l,w,p,v,x=!1,R,T,E;function $(){c(S,cu,Wu,Ho),c(S,uu,Wu,Ho),c(S,Yg,F,Ho),c(S,"click",V,{capture:!0}),c(S,"dragstart",Fn),o([Gr,Bt],j)}function j(){var ie=n.drag;Fe(!ie),p=ie==="free"}function F(ie){if(R=!1,!T){var Re=Me(ie);Oe(ie.target)&&(Re||!ie.button)&&(b.isBusy()?Fn(ie,!0):(E=Re?S:window,v=f.is([gi,ts]),w=null,c(E,cu,I,Ho),c(E,uu,k,Ho),h.cancel(),y.cancel(),W(ie)))}}function I(ie){if(f.is(Ns)||(f.set(Ns),a(Cg)),ie.cancelable)if(v){h.translate(O+Ie(me(ie)));var Re=Se(ie)>Ih,Te=x!==(x=B());(Re||Te)&&W(ie),R=!0,a(Og),Fn(ie)}else Z(ie)&&(v=Y(ie),Fn(ie))}function k(ie){f.is(Ns)&&(f.set(oi),a(Ng)),v&&(K(ie),Fn(ie)),d(E,cu,I),d(E,uu,k),v=!1}function V(ie){!T&&R&&Fn(ie,!0)}function W(ie){w=l,l=ie,O=M()}function K(ie){var Re=se(ie),Te=ge(Re),Pe=n.rewind&&n.rewindByDrag;C(!1),p?b.scroll(Te,0,n.snap):e.is(cs)?b.go(N(Gu(Re))<0?Pe?"<":"-":Pe?">":"+"):e.is(si)&&x&&Pe?b.go(B(!0)?">":"<"):b.go(b.toDest(Te),!0),C(!0)}function Y(ie){var Re=n.dragMinThreshold,Te=Vi(Re),Pe=Te&&Re.mouse||0,He=(Te?Re.touch:+Re)||10;return jt(me(ie))>(Me(ie)?He:Pe)}function Z(ie){return jt(me(ie))>jt(me(ie,!0))}function se(ie){if(e.is(wi)||!x){var Re=Se(ie);if(Re&&Re<Ih)return me(ie)/Re}return 0}function ge(ie){return M()+Gu(ie)*Ur(jt(ie)*(n.flickPower||600),p?1/0:t.Layout.listSize()*(n.flickMaxPages||1))}function me(ie,Re){return ye(ie,Re)-ye(re(ie),Re)}function Se(ie){return Ku(ie)-Ku(re(ie))}function re(ie){return l===ie&&w||l}function ye(ie,Re){return(Me(ie)?ie.changedTouches[0]:ie)["page"+A(Re?"Y":"X")]}function Ie(ie){return ie/(x&&e.is(si)?g3:1)}function Oe(ie){var Re=n.noDrag;return!qi(ie,"."+Fg+", ."+Ua)&&(!Re||!qi(ie,Re))}function Me(ie){return typeof TouchEvent<"u"&&ie instanceof TouchEvent}function ft(){return v}function Fe(ie){T=ie}return{mount:$,disable:Fe,isDragging:ft}}var z3={Spacebar:" ",Right:Na,Left:Oa,Up:Ug,Down:Mg};function nd(e){return e=zr(e)?e:e.key,z3[e]||e}var Lh="keydown";function U3(e,t,n){var r=et(e),o=r.on,a=r.bind,c=r.unbind,d=e.root,f=t.Direction.resolve,h,y;function b(){S(),o(Bt,C),o(Bt,S),o(Ln,A)}function S(){var M=n.keyboard;M&&(h=M==="global"?window:d,a(h,Lh,N))}function C(){c(h,Lh)}function L(M){y=M}function A(){var M=y;y=!0,Ag(function(){y=M})}function N(M){if(!y){var B=nd(M);B===f(Oa)?e.go("<"):B===f(Na)&&e.go(">")}}return{mount:b,destroy:C,disable:L}}var zi=Kl+"-lazy",Us=zi+"-srcset",M3="["+zi+"], ["+Us+"]";function j3(e,t,n){var r=et(e),o=r.on,a=r.off,c=r.bind,d=r.emit,f=n.lazyLoad==="sequential",h=[vo,So],y=[];function b(){n.lazyLoad&&(S(),o(lt,S))}function S(){Qn(y),C(),f?M():(a(h),o(h,L),L())}function C(){t.Slides.forEach(function(B){Wl(B.slide,M3).forEach(function(O){var l=fn(O,zi),w=fn(O,Us);if(l!==O.src||w!==O.srcset){var p=n.classes.spinner,v=O.parentElement,x=is(v,"."+p)||Fo("span",p,v);y.push([O,B,x]),O.src||Ki(O,"none")}})})}function L(){y=y.filter(function(B){var O=n.perPage*((n.preloadPages||1)+1)-1;return B[1].isWithin(e.index,O)?A(B):!0}),y.length||a(h)}function A(B){var O=B[0];Bn(B[1].slide,sl),c(O,"load error",Qe(N,B)),Ue(O,"src",fn(O,zi)),Ue(O,"srcset",fn(O,Us)),In(O,zi),In(O,Us)}function N(B,O){var l=B[0],w=B[1];Zn(w.slide,sl),O.type!=="error"&&(yo(B[2]),Ki(l,""),d(Xs,l,w),d(ii)),f&&M()}function M(){y.length&&A(y.shift())}return{mount:b,destroy:Qe(Qn,y),check:L}}function H3(e,t,n){var r=et(e),o=r.on,a=r.emit,c=r.bind,d=t.Slides,f=t.Elements,h=t.Controller,y=h.hasFocus,b=h.getIndex,S=h.go,C=t.Direction.resolve,L=f.pagination,A=[],N,M;function B(){O(),o([Bt,lt,ea],B);var T=n.pagination;L&&Ki(L,T?"":"none"),T&&(o([Ln,Ia,So],R),l(),R(),a(nl,{list:N,items:A},x(e.index)))}function O(){N&&(yo(L?Kr(N.children):N),Zn(N,M),Qn(A),N=null),r.destroy()}function l(){var T=e.length,E=n.classes,$=n.i18n,j=n.perPage,F=y()?h.getEnd()+1:Gi(T/j);N=L||Fo("ul",E.pagination,f.track.parentElement),Bn(N,M=Ma+"--"+v()),Ue(N,Yn,"tablist"),Ue(N,an,$.select),Ue(N,Xl,v()===Ra?"vertical":"");for(var I=0;I<F;I++){var k=Fo("li",null,N),V=Fo("button",{class:E.page,type:"button"},k),W=d.getIn(I).map(function(Y){return Y.slide.id}),K=!y()&&j>1?$.pageX:$.slideX;c(V,"click",Qe(w,I)),n.paginationKeyboard&&c(V,"keydown",Qe(p,I)),Ue(k,Yn,"presentation"),Ue(V,Yn,"tab"),Ue(V,as,W.join(" ")),Ue(V,an,Zu(K,I+1)),Ue(V,Wo,-1),A.push({li:k,button:V,page:I})}}function w(T){S(">"+T,!0)}function p(T,E){var $=A.length,j=nd(E),F=v(),I=-1;j===C(Na,!1,F)?I=++T%$:j===C(Oa,!1,F)?I=(--T+$)%$:j==="Home"?I=0:j==="End"&&(I=$-1);var k=A[I];k&&(Tg(k.button),S(">"+I),Fn(E,!0))}function v(){return n.paginationDirection||n.direction}function x(T){return A[h.toPage(T)]}function R(){var T=x(b(!0)),E=x(b());if(T){var $=T.button;Zn($,_o),In($,$h),Ue($,Wo,-1)}if(E){var j=E.button;Bn(j,_o),Ue(j,$h,!0),Ue(j,Wo,"")}a(rl,{list:N,items:A},T,E)}return{items:A,mount:B,destroy:O,getAt:x,update:R}}var D3=[" ","Enter"];function V3(e,t,n){var r=n.isNavigation,o=n.slideFocus,a=[];function c(){e.splides.forEach(function(L){L.isParent||(h(e,L.splide),h(L.splide,e))}),r&&y()}function d(){a.forEach(function(L){L.destroy()}),Qn(a)}function f(){d(),c()}function h(L,A){var N=et(L);N.on(Ln,function(M,B,O){A.go(A.is(wi)?O:M)}),a.push(N)}function y(){var L=et(e),A=L.on;A(Js,S),A(Rg,C),A([Gr,Bt],b),a.push(L),L.emit(Qs,e.splides)}function b(){Ue(t.Elements.list,Xl,n.direction===Ra?"vertical":"")}function S(L){e.go(L.index)}function C(L,A){ql(D3,nd(A))&&(S(L),Fn(A))}return{setup:Qe(t.Media.set,{slideFocus:ns(o)?r:o},!0),mount:c,destroy:d,remount:f}}function q3(e,t,n){var r=et(e),o=r.bind,a=0;function c(){n.wheel&&o(t.Elements.track,"wheel",d,Ho)}function d(h){if(h.cancelable){var y=h.deltaY,b=y<0,S=Ku(h),C=n.wheelMinThreshold||0,L=n.wheelSleep||0;jt(y)>C&&S-a>L&&(e.go(b?"<":">"),a=S),f(b)&&Fn(h)}}function f(h){return!n.releaseWheel||e.state.is(gi)||t.Controller.getAdjacent(h)!==-1}return{mount:c}}var F3=90;function W3(e,t,n){var r=et(e),o=r.on,a=t.Elements.track,c=n.live&&!n.isNavigation,d=Fo("span",l3),f=La(F3,Qe(y,!1));function h(){c&&(S(!t.Autoplay.isPaused()),Ue(a,Ph,!0),d.textContent="",o(Yl,Qe(S,!0)),o(Jl,Qe(S,!1)),o([vo,So],Qe(y,!0)))}function y(C){Ue(a,Th,C),C?(os(a,d),f.start()):(yo(d),f.cancel())}function b(){In(a,[xh,Ph,Th]),yo(d)}function S(C){c&&Ue(a,xh,C?"off":"polite")}return{mount:h,disable:S,destroy:b}}var K3=Object.freeze({__proto__:null,Media:t3,Direction:n3,Elements:w3,Slides:m3,Layout:y3,Clones:_3,Move:E3,Controller:k3,Arrows:$3,Autoplay:T3,Cover:P3,Scroll:N3,Drag:R3,Keyboard:U3,LazyLoad:j3,Pagination:H3,Sync:V3,Wheel:q3,Live:W3}),G3={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},Z3={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:h3,i18n:G3,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function Y3(e,t,n){var r=t.Slides;function o(){et(e).on([Gr,lt],a)}function a(){r.forEach(function(d){d.style("transform","translateX(-"+100*d.index+"%)")})}function c(d,f){r.style("transition","opacity "+n.speed+"ms "+n.easing),Ag(f)}return{mount:o,start:c,cancel:Wu}}function J3(e,t,n){var r=t.Move,o=t.Controller,a=t.Scroll,c=t.Elements.list,d=Qe(ln,c,"transition"),f;function h(){et(e).bind(c,"transitionend",function(C){C.target===c&&f&&(b(),f())})}function y(C,L){var A=r.toPosition(C,!0),N=r.getPosition(),M=S(C);jt(A-N)>=1&&M>=1?n.useScroll?a.scroll(A,M,!1,L):(d("transform "+M+"ms "+n.easing),r.translate(A,!0),f=L):(r.jump(C),L())}function b(){d(""),a.cancel()}function S(C){var L=n.rewindSpeed;if(e.is(si)&&L){var A=o.getIndex(!0),N=o.getEnd();if(A===0&&C>=N||A>=N&&C===0)return L}return n.speed}return{mount:h,start:y,cancel:b}}var Q3=function(){function e(n,r){this.event=et(),this.Components={},this.state=Xv(Vo),this.splides=[],this._o={},this._E={};var o=zr(n)?Bg(document,n):n;Ri(o,o+" is invalid."),this.root=o,r=Ir({label:fn(o,an)||"",labelledby:fn(o,Ql)||""},Z3,e.defaults,r||{});try{Ir(r,JSON.parse(fn(o,Kl)))}catch{Ri(!1,"Invalid JSON")}this._o=Object.create(Ir({},r))}var t=e.prototype;return t.mount=function(r,o){var a=this,c=this.state,d=this.Components;Ri(c.is([Vo,Gs]),"Already mounted!"),c.set(Vo),this._C=d,this._T=o||this._T||(this.is(cs)?Y3:J3),this._E=r||this._E;var f=Wi({},K3,this._E,{Transition:this._T});return bo(f,function(h,y){var b=h(a,d,a._o);d[y]=b,b.setup&&b.setup()}),bo(d,function(h){h.mount&&h.mount()}),this.emit(Gr),Bn(this.root,d3),c.set(oi),this.emit(Ah),this},t.sync=function(r){return this.splides.push({splide:r}),r.splides.push({splide:this,isParent:!0}),this.state.is(oi)&&(this._C.Sync.remount(),r.Components.Sync.remount()),this},t.go=function(r){return this._C.Controller.go(r),this},t.on=function(r,o){return this.event.on(r,o),this},t.off=function(r){return this.event.off(r),this},t.emit=function(r){var o;return(o=this.event).emit.apply(o,[r].concat(Kr(arguments,1))),this},t.add=function(r,o){return this._C.Slides.add(r,o),this},t.remove=function(r){return this._C.Slides.remove(r),this},t.is=function(r){return this._o.type===r},t.refresh=function(){return this.emit(lt),this},t.destroy=function(r){r===void 0&&(r=!0);var o=this.event,a=this.state;return a.is(Vo)?et(this).on(Ah,this.destroy.bind(this,r)):(bo(this._C,function(c){c.destroy&&c.destroy(r)},!0),o.emit(Zl),o.destroy(),r&&Qn(this.splides),a.set(Gs)),this},Gv(e,[{key:"options",get:function(){return this._o},set:function(r){this._C.Media.set(r,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),e}(),rd=Q3;rd.defaults={};rd.STATES=Yv;const X3=[Gr,lt,ii,Ba,Cg,Og,Ng,Ia,So,Zl,Yl,Jl];function e8(e,t){const n=(r,o={})=>{t(t8(r),{splide:e,...o})};e.on(Js,(r,o)=>{n(Js,{Slide:r,e:o})}),e.on(Ln,(r,o,a)=>{n(Ln,{index:r,prev:o,dest:a})}),e.on(vo,(r,o,a)=>{n(vo,{index:r,prev:o,dest:a})}),e.on(Yu,r=>{n(Yu,{Slide:r})}),e.on(Ju,r=>{n(Ju,{Slide:r})}),e.on(Qu,r=>{n(Qu,{Slide:r})}),e.on(Xu,r=>{n(Xu,{Slide:r})}),e.on(Bt,r=>{n(Bt,r)}),e.on(el,(r,o)=>{n(el,{prev:r,next:o})}),e.on(tl,(r,o)=>{n(tl,{prev:r,next:o})}),e.on(nl,(r,o)=>{n(nl,{data:r,item:o})}),e.on(rl,(r,o,a)=>{n(rl,{data:r,prev:o,curr:a})}),e.on(Qs,r=>{n(Qs,{splides:r})}),e.on(ol,r=>{n(ol,{rate:r})}),e.on(Xs,(r,o)=>{n(Xs,{img:r,Slide:o})}),X3.forEach(r=>{e.on(r,()=>{n(r)})})}function t8(e){return e.split(":").map((t,n)=>n>0?t.charAt(0).toUpperCase()+t.slice(1):t).join("").replace("Lazyload","LazyLoad")}function n8(e){let t;const n=e[11].default,r=ga(n,e,e[13],null);return{c(){r&&r.c()},m(o,a){r&&r.m(o,a),t=!0},p(o,a){r&&r.p&&(!t||a&8192)&&ba(r,n,o,o[13],t?wa(n,o[13],a,null):ma(o[13]),null)},i(o){t||(qe(r,o),t=!0)},o(o){Ge(r,o),t=!1},d(o){r&&r.d(o)}}}function r8(e){let t,n;return t=new l8({props:{$$slots:{default:[o8]},$$scope:{ctx:e}}}),{c(){tr(t.$$.fragment)},m(r,o){On(t,r,o),n=!0},p(r,o){const a={};o&8192&&(a.$$scope={dirty:o,ctx:r}),t.$set(a)},i(r){n||(qe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){Nn(t,r)}}}function o8(e){let t;const n=e[11].default,r=ga(n,e,e[13],null);return{c(){r&&r.c()},m(o,a){r&&r.m(o,a),t=!0},p(o,a){r&&r.p&&(!t||a&8192)&&ba(r,n,o,o[13],t?wa(n,o[13],a,null):ma(o[13]),null)},i(o){t||(qe(r,o),t=!0)},o(o){Ge(r,o),t=!1},d(o){r&&r.d(o)}}}function i8(e){let t,n,r,o,a;const c=[r8,n8],d=[];function f(b,S){return b[1]?0:1}n=f(e),r=d[n]=c[n](e);let h=[{class:o=ri("splide",e[0])},e[3]],y={};for(let b=0;b<h.length;b+=1)y=Pn(y,h[b]);return{c(){t=ke("div"),r.c(),Xo(t,y)},m(b,S){Ne(b,t,S),d[n].m(t,null),e[12](t),a=!0},p(b,[S]){let C=n;n=f(b),n===C?d[n].p(b,S):(Hr(),Ge(d[C],1,1,()=>{d[C]=null}),Dr(),r=d[n],r?r.p(b,S):(r=d[n]=c[n](b),r.c()),qe(r,1),r.m(t,null)),Xo(t,y=Al(h,[(!a||S&1&&o!==(o=ri("splide",b[0])))&&{class:o},S&8&&b[3]]))},i(b){a||(qe(r),a=!0)},o(b){Ge(r),a=!1},d(b){b&&Ce(t),d[n].d(),e[12](null)}}}function s8(e,t,n){const r=["class","options","splide","extensions","transition","hasTrack","go","sync"];let o=Qo(t,r),{$$slots:a={},$$scope:c}=t,{class:d=void 0}=t,{options:f={}}=t,{splide:h=void 0}=t,{extensions:y=void 0}=t,{transition:b=void 0}=t,{hasTrack:S=!0}=t;const C=f1();let L,A,N=Fu({},f);_a(()=>(n(4,h=new rd(L,f)),e8(h,C),h.mount(y,b),A=mh(h),()=>h.destroy())),l1(()=>{if(h){const l=mh(h);Wv(A,l)||(h.refresh(),A=l.slice())}});function M(l){h==null||h.go(l)}function B(l){h==null||h.sync(l)}function O(l){Pu[l?"unshift":"push"](()=>{L=l,n(2,L)})}return e.$$set=l=>{t=Pn(Pn({},t),kl(l)),n(3,o=Qo(t,r)),"class"in l&&n(0,d=l.class),"options"in l&&n(5,f=l.options),"splide"in l&&n(4,h=l.splide),"extensions"in l&&n(6,y=l.extensions),"transition"in l&&n(7,b=l.transition),"hasTrack"in l&&n(1,S=l.hasTrack),"$$scope"in l&&n(13,c=l.$$scope)},e.$$.update=()=>{e.$$.dirty&1072&&h&&!qu(N,f)&&(n(4,h.options=f,h),n(10,N=Fu({},N)))},[d,S,L,o,h,f,y,b,M,B,N,a,O,c]}class a8 extends qr{constructor(t){super(),Vr(this,t,s8,i8,Cn,{class:0,options:5,splide:4,extensions:6,transition:7,hasTrack:1,go:8,sync:9})}get class(){return this.$$.ctx[0]}set class(t){this.$$set({class:t}),Pr()}get options(){return this.$$.ctx[5]}set options(t){this.$$set({options:t}),Pr()}get splide(){return this.$$.ctx[4]}set splide(t){this.$$set({splide:t}),Pr()}get extensions(){return this.$$.ctx[6]}set extensions(t){this.$$set({extensions:t}),Pr()}get transition(){return this.$$.ctx[7]}set transition(t){this.$$set({transition:t}),Pr()}get hasTrack(){return this.$$.ctx[1]}set hasTrack(t){this.$$set({hasTrack:t}),Pr()}get go(){return this.$$.ctx[8]}get sync(){return this.$$.ctx[9]}}function c8(e){let t,n,r,o;const a=e[3].default,c=ga(a,e,e[2],null);let d=[{class:r=ri("splide__track",e[0])},e[1]],f={};for(let h=0;h<d.length;h+=1)f=Pn(f,d[h]);return{c(){t=ke("div"),n=ke("ul"),c&&c.c(),Ee(n,"class","splide__list"),Xo(t,f)},m(h,y){Ne(h,t,y),we(t,n),c&&c.m(n,null),o=!0},p(h,[y]){c&&c.p&&(!o||y&4)&&ba(c,a,h,h[2],o?wa(a,h[2],y,null):ma(h[2]),null),Xo(t,f=Al(d,[(!o||y&1&&r!==(r=ri("splide__track",h[0])))&&{class:r},y&2&&h[1]]))},i(h){o||(qe(c,h),o=!0)},o(h){Ge(c,h),o=!1},d(h){h&&Ce(t),c&&c.d(h)}}}function u8(e,t,n){const r=["class"];let o=Qo(t,r),{$$slots:a={},$$scope:c}=t,{class:d=void 0}=t;return e.$$set=f=>{t=Pn(Pn({},t),kl(f)),n(1,o=Qo(t,r)),"class"in f&&n(0,d=f.class),"$$scope"in f&&n(2,c=f.$$scope)},[d,o,c,a]}class l8 extends qr{constructor(t){super(),Vr(this,t,u8,c8,Cn,{class:0})}}function d8(e){let t,n,r;const o=e[3].default,a=ga(o,e,e[2],null);let c=[{class:n=ri("splide__slide",e[0])},e[1]],d={};for(let f=0;f<c.length;f+=1)d=Pn(d,c[f]);return{c(){t=ke("li"),a&&a.c(),Xo(t,d)},m(f,h){Ne(f,t,h),a&&a.m(t,null),r=!0},p(f,[h]){a&&a.p&&(!r||h&4)&&ba(a,o,f,f[2],r?wa(o,f[2],h,null):ma(f[2]),null),Xo(t,d=Al(c,[(!r||h&1&&n!==(n=ri("splide__slide",f[0])))&&{class:n},h&2&&f[1]]))},i(f){r||(qe(a,f),r=!0)},o(f){Ge(a,f),r=!1},d(f){f&&Ce(t),a&&a.d(f)}}}function f8(e,t,n){const r=["class"];let o=Qo(t,r),{$$slots:a={},$$scope:c}=t,{class:d=void 0}=t;return e.$$set=f=>{t=Pn(Pn({},t),kl(f)),n(1,o=Qo(t,r)),"class"in f&&n(0,d=f.class),"$$scope"in f&&n(2,c=f.$$scope)},[d,o,c,a]}class h8 extends qr{constructor(t){super(),Vr(this,t,f8,d8,Cn,{class:0})}}class p8{generateSecretKey(){return xn.utils.randomPrivateKey()}getPublicKey(t){return Nt(xn.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=Nt(xn.getPublicKey(n)),r.id=lu(r),r.sig=Nt(xn.sign(lu(r),n)),r[Oo]=!0,r}verifyEvent(t){if(typeof t[Oo]=="boolean")return t[Oo];const n=lu(t);if(n!==t.id)return t[Oo]=!1,!1;try{const r=xn.verify(t.sig,n,t.pubkey);return t[Oo]=r,r}catch{return t[Oo]=!1,!1}}}function g8(e){if(!Mv(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function lu(e){let t=pg(bg.encode(g8(e)));return Nt(t)}const ja=new p8;ja.generateSecretKey;ja.getPublicKey;ja.finalizeEvent;ja.verifyEvent;const No=[];function w8(e,t=_t){let n;const r=new Set;function o(d){if(Cn(e,d)&&(e=d,n)){const f=!No.length;for(const h of r)h[1](),No.push(h,e);if(f){for(let h=0;h<No.length;h+=2)No[h][0](No[h+1]);No.length=0}}}function a(d){o(d(e))}function c(d,f=_t){const h=[d,f];return r.add(h),r.size===1&&(n=t(o,a)||_t),d(e),()=>{r.delete(h),r.size===0&&n&&(n(),n=null)}}return{set:o,update:a,subscribe:c}}const ta=w8("");function b8(e){let t;return{c(){t=ke("div"),t.innerHTML='<div class="loader svelte-1gbkpfy"></div>',Ee(t,"class","loader-container svelte-1gbkpfy")},m(n,r){Ne(n,t,r)},p:_t,i:_t,o:_t,d(n){n&&Ce(t)}}}class Jg extends qr{constructor(t){super(),Vr(this,t,null,b8,Cn,{})}}function Ch(e,t,n){const r=e.slice();return r[13]=t[n],r}function Oh(e,t,n){const r=e.slice();return r[13]=t[n],r}function Nh(e,t,n){const r=e.slice();return r[13]=t[n],r}function Rh(e,t,n){const r=e.slice();return r[20]=t[n],r}function zh(e){let t,n,r,o,a,c,d=Or(e[4]),f=[];for(let h=0;h<d.length;h+=1)f[h]=Uh(Rh(e,d,h));return{c(){t=ke("div"),n=ke("div"),r=ke("a"),o=Je("Home"),c=Ke();for(let h=0;h<f.length;h+=1)f[h].c();Ee(r,"href","#"),Ee(r,"class",a=e[0]==""?"selected":""),Ee(t,"class","topic-wrapper")},m(h,y){Ne(h,t,y),we(t,n),we(n,r),we(r,o),we(t,c);for(let b=0;b<f.length;b+=1)f[b]&&f[b].m(t,null)},p(h,y){if(y&1&&a!==(a=h[0]==""?"selected":"")&&Ee(r,"class",a),y&17){d=Or(h[4]);let b;for(b=0;b<d.length;b+=1){const S=Rh(h,d,b);f[b]?f[b].p(S,y):(f[b]=Uh(S),f[b].c(),f[b].m(t,null))}for(;b<f.length;b+=1)f[b].d(1);f.length=d.length}},d(h){h&&Ce(t),ya(f,h)}}}function Uh(e){let t,n,r,o=e[20]+"",a,c,d;return{c(){t=ke("div"),n=ke("a"),r=Je("#"),a=Je(o),Ee(n,"href",c="#tags/"+e[20]),Ee(n,"class",d=e[20]==e[0]?"selected":"")},m(f,h){Ne(f,t,h),we(t,n),we(n,r),we(n,a)},p(f,h){h&16&&o!==(o=f[20]+"")&&Pt(a,o),h&16&&c!==(c="#tags/"+f[20])&&Ee(n,"href",c),h&17&&d!==(d=f[20]==f[0]?"selected":"")&&Ee(n,"class",d)},d(f){f&&Ce(t)}}}function m8(e){let t;return{c(){t=ke("div"),Ee(t,"class","separator")},m(n,r){Ne(n,t,r)},p:_t,d(n){n&&Ce(t)}}}function y8(e){var o,a;let t,n=(((a=(o=e[1])==null?void 0:o.metadata)==null?void 0:a.about)||"")+"",r;return{c(){t=ke("div"),r=Je(n),Ee(t,"class","about")},m(c,d){Ne(c,t,d),we(t,r)},p(c,d){var f,h;d&2&&n!==(n=(((h=(f=c[1])==null?void 0:f.metadata)==null?void 0:h.about)||"")+"")&&Pt(r,n)},d(c){c&&Ce(t)}}}function v8(e){let t,n;return t=new Jg({}),{c(){tr(t.$$.fragment)},m(r,o){On(t,r,o),n=!0},p:_t,i(r){n||(qe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){Nn(t,r)}}}function _8(e){let t,n,r,o,a=e[8].length>0&&Mh(e),c=e[6].length>0&&!e[0]&&Dh(e),d=e[7].length>0&&qh(e);return{c(){a&&a.c(),t=Ke(),c&&c.c(),n=Ke(),d&&d.c(),r=Ao()},m(f,h){a&&a.m(f,h),Ne(f,t,h),c&&c.m(f,h),Ne(f,n,h),d&&d.m(f,h),Ne(f,r,h),o=!0},p(f,h){f[8].length>0?a?a.p(f,h):(a=Mh(f),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),f[6].length>0&&!f[0]?c?(c.p(f,h),h&65&&qe(c,1)):(c=Dh(f),c.c(),qe(c,1),c.m(n.parentNode,n)):c&&(Hr(),Ge(c,1,1,()=>{c=null}),Dr()),f[7].length>0?d?d.p(f,h):(d=qh(f),d.c(),d.m(r.parentNode,r)):d&&(d.d(1),d=null)},i(f){o||(qe(c),o=!0)},o(f){Ge(c),o=!1},d(f){f&&(Ce(t),Ce(n),Ce(r)),a&&a.d(f),c&&c.d(f),d&&d.d(f)}}}function Mh(e){let t,n=Or(e[8]),r=[];for(let o=0;o<n.length;o+=1)r[o]=Hh(Nh(e,n,o));return{c(){t=ke("div");for(let o=0;o<r.length;o+=1)r[o].c();Ee(t,"class","top-notes")},m(o,a){Ne(o,t,a);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(t,null)},p(o,a){if(a&256){n=Or(o[8]);let c;for(c=0;c<n.length;c+=1){const d=Nh(o,n,c);r[c]?r[c].p(d,a):(r[c]=Hh(d),r[c].c(),r[c].m(t,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=n.length}},d(o){o&&Ce(t),ya(r,o)}}}function jh(e){let t,n=e[13].summary+"";return{c(){t=ke("div"),Ee(t,"class","summary")},m(r,o){Ne(r,t,o),t.innerHTML=n},p(r,o){o&256&&n!==(n=r[13].summary+"")&&(t.innerHTML=n)},d(r){r&&Ce(t)}}}function Hh(e){let t,n,r,o,a,c,d=e[13].title+"",f,h,y,b,S,C=Rr(e[13].created_at)+"",L,A,N=e[13].summary&&jh(e);return{c(){t=ke("div"),n=ke("a"),r=ke("img"),a=Ke(),c=ke("div"),f=Je(d),y=Ke(),N&&N.c(),b=Ke(),S=ke("div"),L=Je(C),A=Ke(),Cr(r.src,o=e[13].image)||Ee(r,"src",o),Ee(c,"class","title"),Ee(n,"href",h=`#${e[13].id}`),Ee(S,"class","date"),Ee(t,"class","note")},m(M,B){Ne(M,t,B),we(t,n),we(n,r),we(n,a),we(n,c),we(c,f),we(t,y),N&&N.m(t,null),we(t,b),we(t,S),we(S,L),we(t,A)},p(M,B){B&256&&!Cr(r.src,o=M[13].image)&&Ee(r,"src",o),B&256&&d!==(d=M[13].title+"")&&Pt(f,d),B&256&&h!==(h=`#${M[13].id}`)&&Ee(n,"href",h),M[13].summary?N?N.p(M,B):(N=jh(M),N.c(),N.m(t,b)):N&&(N.d(1),N=null),B&256&&C!==(C=Rr(M[13].created_at)+"")&&Pt(L,C)},d(M){M&&Ce(t),N&&N.d()}}}function Dh(e){let t,n;return t=new a8({props:{class:"short-notes",options:{type:"loop",gap:"1rem",pagination:!1,perPage:3,breakpoints:{640:{perPage:2}},autoplay:!0},$$slots:{default:[k8]},$$scope:{ctx:e}}}),{c(){tr(t.$$.fragment)},m(r,o){On(t,r,o),n=!0},p(r,o){const a={};o&8388672&&(a.$$scope={dirty:o,ctx:r}),t.$set(a)},i(r){n||(qe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){Nn(t,r)}}}function E8(e){let t,n,r=Rr(e[13].created_at,!0)+"",o,a,c=e[13].summary+"",d,f,h;return{c(){t=ke("a"),n=ke("div"),o=Je(r),a=Ke(),d=Je(c),h=Ke(),Ee(n,"class","date"),Ee(t,"href",f=`#${e[13].id}`)},m(y,b){Ne(y,t,b),we(t,n),we(n,o),we(t,a),we(t,d),Ne(y,h,b)},p(y,b){b&64&&r!==(r=Rr(y[13].created_at,!0)+"")&&Pt(o,r),b&64&&c!==(c=y[13].summary+"")&&Pt(d,c),b&64&&f!==(f=`#${y[13].id}`)&&Ee(t,"href",f)},d(y){y&&(Ce(t),Ce(h))}}}function Vh(e){let t,n;return t=new h8({props:{$$slots:{default:[E8]},$$scope:{ctx:e}}}),{c(){tr(t.$$.fragment)},m(r,o){On(t,r,o),n=!0},p(r,o){const a={};o&8388672&&(a.$$scope={dirty:o,ctx:r}),t.$set(a)},i(r){n||(qe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){Nn(t,r)}}}function k8(e){let t,n,r=Or(e[6]),o=[];for(let c=0;c<r.length;c+=1)o[c]=Vh(Oh(e,r,c));const a=c=>Ge(o[c],1,1,()=>{o[c]=null});return{c(){for(let c=0;c<o.length;c+=1)o[c].c();t=Ao()},m(c,d){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(c,d);Ne(c,t,d),n=!0},p(c,d){if(d&64){r=Or(c[6]);let f;for(f=0;f<r.length;f+=1){const h=Oh(c,r,f);o[f]?(o[f].p(h,d),qe(o[f],1)):(o[f]=Vh(h),o[f].c(),qe(o[f],1),o[f].m(t.parentNode,t))}for(Hr(),f=r.length;f<o.length;f+=1)a(f);Dr()}},i(c){if(!n){for(let d=0;d<r.length;d+=1)qe(o[d]);n=!0}},o(c){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)Ge(o[d]);n=!1},d(c){c&&Ce(t),ya(o,c)}}}function qh(e){let t,n,r=Or(e[7]),o=[];for(let a=0;a<r.length;a+=1)o[a]=Wh(Ch(e,r,a));return{c(){t=ke("div"),n=ke("ul");for(let a=0;a<o.length;a+=1)o[a].c();Ee(t,"class","listing-notes"),eh(t,"short-feed-full",e[5])},m(a,c){Ne(a,t,c),we(t,n);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(n,null)},p(a,c){if(c&160){r=Or(a[7]);let d;for(d=0;d<r.length;d+=1){const f=Ch(a,r,d);o[d]?o[d].p(f,c):(o[d]=Wh(f),o[d].c(),o[d].m(n,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=r.length}c&32&&eh(t,"short-feed-full",a[5])},d(a){a&&Ce(t),ya(o,a)}}}function A8(e){let t,n=e[13].summary+"",r;return{c(){t=ke("div"),r=Je(n),Ee(t,"class","summary")},m(o,a){Ne(o,t,a),we(t,r)},p(o,a){a&128&&n!==(n=o[13].summary+"")&&Pt(r,n)},d(o){o&&Ce(t)}}}function S8(e){let t,n=e[13].content+"";return{c(){t=ke("div"),Ee(t,"class","summary full")},m(r,o){Ne(r,t,o),t.innerHTML=n},p(r,o){o&128&&n!==(n=r[13].content+"")&&(t.innerHTML=n)},d(r){r&&Ce(t)}}}function Fh(e){let t,n=Rr(e[13].created_at)+"",r;return{c(){t=ke("div"),r=Je(n),Ee(t,"class","date")},m(o,a){Ne(o,t,a),we(t,r)},p(o,a){a&128&&n!==(n=Rr(o[13].created_at)+"")&&Pt(r,n)},d(o){o&&Ce(t)}}}function Wh(e){let t,n,r,o=e[13].title+"",a,c,d,f,h;function y(L,A){if(L[13].kind==1&&L[5])return S8;if(L[13].summary)return A8}let b=y(e),S=b&&b(e),C=!(e[13].kind==1&&e[5])&&Fh(e);return{c(){t=ke("li"),n=ke("h2"),r=ke("a"),a=Je(o),d=Ke(),S&&S.c(),f=Ke(),C&&C.c(),h=Ke(),Ee(r,"href",c=`#${e[13].id}`)},m(L,A){Ne(L,t,A),we(t,n),we(n,r),we(r,a),we(t,d),S&&S.m(t,null),we(t,f),C&&C.m(t,null),we(t,h)},p(L,A){A&128&&o!==(o=L[13].title+"")&&Pt(a,o),A&128&&c!==(c=`#${L[13].id}`)&&Ee(r,"href",c),b===(b=y(L))&&S?S.p(L,A):(S&&S.d(1),S=b&&b(L),S&&(S.c(),S.m(t,f))),L[13].kind==1&&L[5]?C&&(C.d(1),C=null):C?C.p(L,A):(C=Fh(L),C.c(),C.m(t,h))},d(L){L&&Ce(t),S&&S.d(),C&&C.d()}}}function $8(e){var F;let t,n,r,o,a=e[3].slice(0,9)+"..."+e[3].slice(-5),c,d,f,h,y,b,S,C,L=((F=e[1])==null?void 0:F.shortName)+"",A,N,M,B,O,l,w,p,v=e[4].length>0&&zh(e);function x(I,k){return I[0]==""?y8:m8}let R=x(e),T=R(e);const E=[_8,v8],$=[];function j(I,k){return I[2].length>0?0:1}return O=j(e),l=$[O]=E[O](e),{c(){var I;t=ke("div"),n=ke("div"),r=Je("Profile: "),o=ke("a"),c=Je(a),f=Ke(),h=ke("h1"),y=ke("div"),b=ke("img"),C=Ke(),A=Je(L),N=Ke(),v&&v.c(),M=Ke(),T.c(),B=Ke(),l.c(),w=Ao(),Ee(o,"href",d="https://njump.me/"+e[3]),Ee(n,"class","external-link"),Cr(b.src,S=(I=e[1])==null?void 0:I.image)||Ee(b,"src",S),Ee(y,"class","picture-container"),Ee(t,"class","header home")},m(I,k){Ne(I,t,k),we(t,n),we(n,r),we(n,o),we(o,c),we(t,f),we(t,h),we(h,y),we(y,b),we(h,C),we(h,A),Ne(I,N,k),v&&v.m(I,k),Ne(I,M,k),T.m(I,k),Ne(I,B,k),$[O].m(I,k),Ne(I,w,k),p=!0},p(I,[k]){var W,K;(!p||k&8)&&a!==(a=I[3].slice(0,9)+"..."+I[3].slice(-5))&&Pt(c,a),(!p||k&8&&d!==(d="https://njump.me/"+I[3]))&&Ee(o,"href",d),(!p||k&2&&!Cr(b.src,S=(W=I[1])==null?void 0:W.image))&&Ee(b,"src",S),(!p||k&2)&&L!==(L=((K=I[1])==null?void 0:K.shortName)+"")&&Pt(A,L),I[4].length>0?v?v.p(I,k):(v=zh(I),v.c(),v.m(M.parentNode,M)):v&&(v.d(1),v=null),R===(R=x(I))&&T?T.p(I,k):(T.d(1),T=R(I),T&&(T.c(),T.m(B.parentNode,B)));let V=O;O=j(I),O===V?$[O].p(I,k):(Hr(),Ge($[V],1,1,()=>{$[V]=null}),Dr(),l=$[O],l?l.p(I,k):(l=$[O]=E[O](I),l.c()),qe(l,1),l.m(w.parentNode,w))},i(I){p||(qe(l),p=!0)},o(I){Ge(l),p=!1},d(I){I&&(Ce(t),Ce(N),Ce(M),Ce(B),Ce(w)),v&&v.d(I),T.d(I),$[O].d(I)}}}function x8(e,t,n){let r,o,a,c=[],d=[],f=new Set,h="",y=[],b=!1,S=0,{tag:C}=t,{profile:L}=t;_a(()=>{Hl().then(async({npub:N,writeRelays:M,topNotes:B,shortNotesMinChars:O,shortNotes:l,shortFeedSummaryMaxChars:w,topics:p})=>{if(n(3,h=N),n(1,L=await Ta(h)),!L)throw new Error("invalid npub");n(10,S=B),n(4,y=p),n(5,b=w==0);let v=[30023];l=="main"&&v.push(1),ta.set(L.shortName+" home, powered by Nostr");let x={kinds:v,authors:[L.pubkey],limit:1e3};C&&(n(0,C=C.substring(5)),x={...x,"#t":[C]});let R=Di.subscribeMany(M,[x],{onevent:async T=>{if(!f.has(T.id)){if(T.kind==1&&(T.content.length<O||!bh(T)))return;T.kind==1&&b&&(T.content=await kg(T)),n(2,c=[...c,T]),f.add(T.id),c.sort((E,$)=>$.created_at-E.created_at)}},oneose(){console.log("No subscribers left. Closing subscription."),R.close()}});l=="carousel"&&(R=Di.subscribeMany(M,[{kinds:[1],authors:[L.pubkey],limit:1e3}],{onevent:async T=>{if(!f.has(T.id)&&T.content.length>O&&bh(T)){if(T=await A(T),T.content.length<O)return;n(9,d=[...d,T]),f.add(T.id),d.sort((E,$)=>$.created_at-E.created_at)}},oneose(){console.log("No subscribers left. Closing subscription."),R.close()}}))})});async function A(N){let M;return M=await _g(N.content),M=Eg(M),M=jv(M),N.content=M,N}return e.$$set=N=>{"tag"in N&&n(0,C=N.tag),"profile"in N&&n(1,L=N.profile)},e.$$.update=()=>{e.$$.dirty&1028&&n(8,r=S>0?c.filter(N=>N.kind===30023).slice(0,S).map(Os):[]),e.$$.dirty&1028&&n(7,o=c.slice(S).map(Os)),e.$$.dirty&512&&n(6,a=d.map(Os))},ta.subscribe(N=>{document.title=N}),[C,L,c,h,y,b,a,o,r,d,S]}class Qg extends qr{constructor(t){super(),Vr(this,t,x8,$8,Cn,{tag:0,profile:1})}}var T8=Object.defineProperty,P8=(e,t,n)=>t in e?T8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,he=(e,t,n)=>(P8(e,typeof t!="symbol"?t+"":t,n),n);const B8=(e,t)=>e===t,Dt=Symbol("solid-proxy"),Yi=Symbol("solid-track"),na={equals:B8};let Xg=o0;const ir=1,ra=2,e0={owned:null,cleanups:null,context:null,owner:null},du={};var dt=null;let fu=null,Xe=null,Tt=null,Jn=null,Ha=0;function al(e,t){const n=Xe,r=dt,o=e.length===0,a=t===void 0?r:t,c=o?e0:{owned:null,cleanups:null,context:a?a.context:null,owner:a},d=o?e:()=>e(()=>pn(()=>Va(c)));dt=c,Xe=null;try{return Mr(d,!0)}finally{Xe=n,dt=r}}function ut(e,t){t=t?Object.assign({},na,t):na;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),r0(n,o));return[n0.bind(n),r]}function co(e,t,n){const r=Da(e,t,!0,ir);bi(r)}function on(e,t,n){const r=Da(e,t,!1,ir);bi(r)}function ai(e,t,n){Xg=N8;const r=Da(e,t,!1,ir);r.user=!0,Jn?Jn.push(r):bi(r)}function De(e,t,n){n=n?Object.assign({},na,n):na;const r=Da(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,bi(r),n0.bind(r)}function I8(e){return e&&typeof e=="object"&&"then"in e}function t0(e,t,n){let r,o,a;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,o=e,a=t||{}):(r=e,o=t,a=n||{});let c=null,d=du,f=!1,h="initialValue"in a,y=typeof r=="function"&&De(r);const b=new Set,[S,C]=(a.storage||ut)(a.initialValue),[L,A]=ut(void 0),[N,M]=ut(void 0,{equals:!1}),[B,O]=ut(h?"ready":"unresolved");function l(x,R,T,E){return c===x&&(c=null,E!==void 0&&(h=!0),(x===d||R===d)&&a.onHydrated&&queueMicrotask(()=>a.onHydrated(E,{value:R})),d=du,w(R,T)),R}function w(x,R){Mr(()=>{R===void 0&&C(()=>x),O(R!==void 0?"errored":h?"ready":"unresolved"),A(R);for(const T of b.keys())T.decrement();b.clear()},!1)}function p(){const x=L8,R=S(),T=L();if(T!==void 0&&!c)throw T;return Xe&&Xe.user,R}function v(x=!0){if(x!==!1&&f)return;f=!1;const R=y?y():r;if(R==null||R===!1){l(c,pn(S));return}const T=d!==du?d:pn(()=>o(R,{value:S(),refetching:x}));return I8(T)?(c=T,"value"in T?(T.status==="success"?l(c,T.value,void 0,R):l(c,void 0,void 0,R),T):(f=!0,queueMicrotask(()=>f=!1),Mr(()=>{O(h?"refreshing":"pending"),M()},!1),T.then(E=>l(T,E,void 0,R),E=>l(T,void 0,s0(E),R)))):(l(c,T,void 0,R),T)}return Object.defineProperties(p,{state:{get:()=>B()},error:{get:()=>L()},loading:{get(){const x=B();return x==="pending"||x==="refreshing"}},latest:{get(){if(!h)return p();const x=L();if(x&&!c)throw x;return S()}}}),y?co(()=>v(!1)):v(!1),[p,{refetch:v,mutate:C}]}function Ko(e){return Mr(e,!1)}function pn(e){if(Xe===null)return e();const t=Xe;Xe=null;try{return e()}finally{Xe=t}}function Br(e,t,n){const r=Array.isArray(e);let o,a=n&&n.defer;return c=>{let d;if(r){d=Array(e.length);for(let h=0;h<e.length;h++)d[h]=e[h]()}else d=e();if(a){a=!1;return}const f=pn(()=>t(d,o,c));return o=d,f}}function Go(e){return dt===null||(dt.cleanups===null?dt.cleanups=[e]:dt.cleanups.push(e)),e}function ci(){return Xe}let L8;function n0(){if(this.sources&&this.state)if(this.state===ir)bi(this);else{const e=Tt;Tt=null,Mr(()=>ia(this),!1),Tt=e}if(Xe){const e=this.observers?this.observers.length:0;Xe.sources?(Xe.sources.push(this),Xe.sourceSlots.push(e)):(Xe.sources=[this],Xe.sourceSlots=[e]),this.observers?(this.observers.push(Xe),this.observerSlots.push(Xe.sources.length-1)):(this.observers=[Xe],this.observerSlots=[Xe.sources.length-1])}return this.value}function r0(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Mr(()=>{for(let o=0;o<e.observers.length;o+=1){const a=e.observers[o],c=fu&&fu.running;c&&fu.disposed.has(a),(c?!a.tState:!a.state)&&(a.pure?Tt.push(a):Jn.push(a),a.observers&&i0(a)),c||(a.state=ir)}if(Tt.length>1e6)throw Tt=[],new Error},!1)),t}function bi(e){if(!e.fn)return;Va(e);const t=dt,n=Xe,r=Ha;Xe=dt=e,C8(e,e.value,r),Xe=n,dt=t}function C8(e,t,n){let r;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=ir,e.owned&&e.owned.forEach(Va),e.owned=null),e.updatedAt=n+1,a0(o)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?r0(e,r):e.value=r,e.updatedAt=n)}function Da(e,t,n,r=ir,o){const a={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:dt,context:dt?dt.context:null,pure:n};return dt===null||dt!==e0&&(dt.owned?dt.owned.push(a):dt.owned=[a]),a}function oa(e){if(e.state===0)return;if(e.state===ra)return ia(e);if(e.suspense&&pn(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ha);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===ir)bi(e);else if(e.state===ra){const r=Tt;Tt=null,Mr(()=>ia(e,t[0]),!1),Tt=r}}function Mr(e,t){if(Tt)return e();let n=!1;t||(Tt=[]),Jn?n=!0:Jn=[],Ha++;try{const r=e();return O8(n),r}catch(r){n||(Jn=null),Tt=null,a0(r)}}function O8(e){if(Tt&&(o0(Tt),Tt=null),e)return;const t=Jn;Jn=null,t.length&&Mr(()=>Xg(t),!1)}function o0(e){for(let t=0;t<e.length;t++)oa(e[t])}function N8(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:oa(r)}for(t=0;t<n;t++)oa(e[t])}function ia(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===ir?r!==t&&(!r.updatedAt||r.updatedAt<Ha)&&oa(r):o===ra&&ia(r,t)}}}function i0(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=ra,n.pure?Tt.push(n):Jn.push(n),n.observers&&i0(n))}}function Va(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const a=o.pop(),c=n.observerSlots.pop();r<o.length&&(a.sourceSlots[c]=r,o[r]=a,n.observerSlots[r]=c)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Va(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function s0(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function a0(e,t=dt){throw s0(e)}const Kh=Symbol("fallback");function Gh(e){for(let t=0;t<e.length;t++)e[t]()}function R8(e,t,n={}){let r=[],o=[],a=[],c=[],d=0,f;return Go(()=>Gh(a)),()=>{const h=e()||[];return h[Yi],pn(()=>{if(h.length===0)return d!==0&&(Gh(a),a=[],r=[],o=[],d=0,c=[]),n.fallback&&(r=[Kh],o[0]=al(b=>(a[0]=b,n.fallback())),d=1),o;for(r[0]===Kh&&(a[0](),a=[],r=[],o=[],d=0),f=0;f<h.length;f++)f<r.length&&r[f]!==h[f]?c[f](()=>h[f]):f>=r.length&&(o[f]=al(y));for(;f<r.length;f++)a[f]();return d=c.length=a.length=h.length,r=h.slice(0),o=o.slice(0,d)});function y(b){a[f]=b;const[S,C]=ut(h[f]);return c[f]=C,t(S,f)}}}function hn(e,t){return pn(()=>e(t||{}))}const z8=e=>`Stale read from <${e}>.`;function U8(e){const t="fallback"in e&&{fallback:()=>e.fallback};return De(R8(()=>e.each,e.children,t||void 0))}function sa(e){const t=e.keyed,n=De(()=>e.when,void 0,{equals:(r,o)=>t?r===o:!r==!o});return De(()=>{const r=n();if(r){const o=e.children;return typeof o=="function"&&o.length>0?pn(()=>o(t?r:()=>{if(!pn(n))throw z8("Show");return e.when})):o}return e.fallback},void 0,void 0)}function M8(e,t,n){let r=n.length,o=t.length,a=r,c=0,d=0,f=t[o-1].nextSibling,h=null;for(;c<o||d<a;){if(t[c]===n[d]){c++,d++;continue}for(;t[o-1]===n[a-1];)o--,a--;if(o===c){const y=a<r?d?n[d-1].nextSibling:n[a-d]:f;for(;d<a;)e.insertBefore(n[d++],y)}else if(a===d)for(;c<o;)(!h||!h.has(t[c]))&&t[c].remove(),c++;else if(t[c]===n[a-1]&&n[d]===t[o-1]){const y=t[--o].nextSibling;e.insertBefore(n[d++],t[c++].nextSibling),e.insertBefore(n[--a],y),t[o]=n[a]}else{if(!h){h=new Map;let b=d;for(;b<a;)h.set(n[b],b++)}const y=h.get(t[c]);if(y!=null)if(d<y&&y<a){let b=c,S=1,C;for(;++b<o&&b<a&&!((C=h.get(t[b]))==null||C!==y+S);)S++;if(S>y-d){const L=t[c];for(;d<y;)e.insertBefore(n[d++],L)}else e.replaceChild(n[d++],t[c++])}else c++;else t[c++].remove()}}}const Zh="_$DX_DELEGATE";function je(e,t,n){let r;const o=()=>{const c=document.createElement("template");return c.innerHTML=e,c.content.firstChild},a=()=>(r||(r=o())).cloneNode(!0);return a.cloneNode=a,a}function od(e,t=window.document){const n=t[Zh]||(t[Zh]=new Set);for(let r=0,o=e.length;r<o;r++){const a=e[r];n.has(a)||(n.add(a),t.addEventListener(a,D8))}}function xt(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function j8(e,t,n,r){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function H8(e,t,n){if(!t)return n?xt(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,a;for(a in n)t[a]==null&&r.removeProperty(a),delete n[a];for(a in t)o=t[a],o!==n[a]&&(r.setProperty(a,o),n[a]=o);return n}function c0(e,t,n){return pn(()=>e(t,n))}function xe(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return aa(e,t,r,n);on(o=>aa(e,t(),o,n),r)}function D8(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[t];if(r&&!n.disabled){const o=n[`${t}Data`];if(o!==void 0?r.call(n,o,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function aa(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const a=typeof t,c=r!==void 0;if(e=c&&n[0]&&n[0].parentNode||e,a==="string"||a==="number")if(a==="number"&&(t=t.toString()),c){let d=n[0];d&&d.nodeType===3?d.data=t:d=document.createTextNode(t),n=Ro(e,n,r,d)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||a==="boolean")n=Ro(e,n,r);else{if(a==="function")return on(()=>{let d=t();for(;typeof d=="function";)d=d();n=aa(e,d,n,r)}),()=>n;if(Array.isArray(t)){const d=[],f=n&&Array.isArray(n);if(cl(d,t,n,o))return on(()=>n=aa(e,d,n,r,!0)),()=>n;if(d.length===0){if(n=Ro(e,n,r),c)return n}else f?n.length===0?Yh(e,d,r):M8(e,n,d):(n&&Ro(e),Yh(e,d));n=d}else if(t.nodeType){if(Array.isArray(n)){if(c)return n=Ro(e,n,r,t);Ro(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function cl(e,t,n,r){let o=!1;for(let a=0,c=t.length;a<c;a++){let d=t[a],f=n&&n[a],h;if(!(d==null||d===!0||d===!1))if((h=typeof d)=="object"&&d.nodeType)e.push(d);else if(Array.isArray(d))o=cl(e,d,f)||o;else if(h==="function")if(r){for(;typeof d=="function";)d=d();o=cl(e,Array.isArray(d)?d:[d],Array.isArray(f)?f:[f])||o}else e.push(d),o=!0;else{const y=String(d);f&&f.nodeType===3&&f.data===y?e.push(f):e.push(document.createTextNode(y))}}return o}function Yh(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function Ro(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let a=!1;for(let c=t.length-1;c>=0;c--){const d=t[c];if(o!==d){const f=d.parentNode===e;!a&&!c?f?e.replaceChild(o,d):e.insertBefore(o,n):f&&d.remove()}else a=!0}}else e.insertBefore(o,n);return[o]}function V8(e){return Object.keys(e).reduce((n,r)=>{const o=e[r];return n[r]=Object.assign({},o),l0(o.value)&&!G8(o.value)&&!Array.isArray(o.value)&&(n[r].value=Object.assign({},o.value)),Array.isArray(o.value)&&(n[r].value=o.value.slice(0)),n},{})}function q8(e){return e?Object.keys(e).reduce((n,r)=>{const o=e[r];return n[r]=l0(o)&&"value"in o?o:{value:o},n[r].attribute||(n[r].attribute=K8(r)),n[r].parse="parse"in n[r]?n[r].parse:typeof n[r].value!="string",n},{}):{}}function F8(e){return Object.keys(e).reduce((n,r)=>(n[r]=e[r].value,n),{})}function W8(e,t){const n=V8(t);return Object.keys(t).forEach(o=>{const a=n[o],c=e.getAttribute(a.attribute),d=e[o];c&&(a.value=a.parse?u0(c):c),d!=null&&(a.value=Array.isArray(d)?d.slice(0):d),a.reflect&&Jh(e,a.attribute,a.value),Object.defineProperty(e,o,{get(){return a.value},set(f){const h=a.value;a.value=f,a.reflect&&Jh(this,a.attribute,a.value);for(let y=0,b=this.__propertyChangedCallbacks.length;y<b;y++)this.__propertyChangedCallbacks[y](o,f,h)},enumerable:!0,configurable:!0})}),n}function u0(e){if(e)try{return JSON.parse(e)}catch{return e}}function Jh(e,t,n){if(n==null||n===!1)return e.removeAttribute(t);let r=JSON.stringify(n);e.__updating[t]=!0,r==="true"&&(r=""),e.setAttribute(t,r),Promise.resolve().then(()=>delete e.__updating[t])}function K8(e){return e.replace(/\.?([A-Z]+)/g,(t,n)=>"-"+n.toLowerCase()).replace("_","-").replace(/^-/,"")}function l0(e){return e!=null&&(typeof e=="object"||typeof e=="function")}function G8(e){return Object.prototype.toString.call(e)==="[object Function]"}function Z8(e){return typeof e=="function"&&e.toString().indexOf("class")===0}let hu;function Y8(e,t){const n=Object.keys(t);return class extends e{static get observedAttributes(){return n.map(o=>t[o].attribute)}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(this.__initialized)return;this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=W8(this,t);const o=F8(this.props),a=this.Component,c=hu;try{hu=this,this.__initialized=!0,Z8(a)?new a(o,{element:this}):a(o,{element:this})}finally{hu=c}}async disconnectedCallback(){if(await Promise.resolve(),this.isConnected)return;this.__propertyChangedCallbacks.length=0;let o=null;for(;o=this.__releaseCallbacks.pop();)o(this);delete this.__initialized,this.__released=!0}attributeChangedCallback(o,a,c){if(this.__initialized&&!this.__updating[o]&&(o=this.lookupProp(o),o in t)){if(c==null&&!this[o])return;this[o]=t[o].parse?u0(c):c}}lookupProp(o){if(t)return n.find(a=>o===a||o===t[a].attribute)}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(o){this.__releaseCallbacks.push(o)}addPropertyChangedCallback(o){this.__propertyChangedCallbacks.push(o)}}}function J8(e,t={},n={}){const{BaseElement:r=HTMLElement,extension:o}=n;return a=>{let c=customElements.get(e);return c?(c.prototype.Component=a,c):(c=Y8(r,q8(t)),c.prototype.Component=a,c.prototype.registeredTag=e,customElements.define(e,c,o),c)}}function Q8(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const[o,a]=ut(e[t[r]]);Object.defineProperty(n,t[r],{get:o,set(c){a(()=>c)}})}return n}function X8(e){if(e.assignedSlot&&e.assignedSlot._$owner)return e.assignedSlot._$owner;let t=e.parentNode;for(;t&&!t._$owner&&!(t.assignedSlot&&t.assignedSlot._$owner);)t=t.parentNode;return t&&t.assignedSlot?t.assignedSlot._$owner:e._$owner}function e_(e){return(t,n)=>{const{element:r}=n;return al(o=>{const a=Q8(t);r.addPropertyChangedCallback((d,f)=>a[d]=f),r.addReleaseCallback(()=>{r.renderRoot.textContent="",o()});const c=e(a,n);return xe(r.renderRoot,c)},X8(r))}}function t_(e,t,n){return arguments.length===2&&(n=t,t={}),J8(e,t)(e_(n))}const n_=`#ztr-content,
#ztr-content img {
  max-width: 100%;
}

#ztr-root {
  display: flex;
  flex-direction: column;
  font-family: var(--ztr-font);
  font-size: var(--ztr-font-size);
  color: var(--ztr-text-color);
  border: 1px solid transparent;
  word-wrap: break-word;
  /* removes margin collapse */
  margin-top: 4em;
  line-height: 1.2em;
}

#ztr-subtitle {
  font-size: 1.2em;
  color: #666;
}

a {
  color: var(--ztr-link-color);
  text-decoration: none;
}

/* Comment */

.ztr-comment {
  position: relative;
  margin: 0;
  padding: 0;
}

.ztr-comment,
.ztr-reply-button {
  background-color: var(--ztr-background-color, rgba(0, 0, 0, 0.03));
}

.ztr-comment-body {
  padding: 1em;
}

.ztr-comment:first-child {
  border-top-left-radius: 0.3em;
  border-top-right-radius: 0.3em;
}

.ztr-comment:last-child {
  border-bottom-left-radius: 0.3em;
  border-bottom-right-radius: 0.3em;
}

.ztr-comment-info-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.ztr-comment-info {
  display: flex;
  align-items: center;
}

.ztr-comment-info-picture {
  width: 3.5em;
}

ul.ztr-comment-info-items {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0;
  font-size: 0.9em;
}

ul.ztr-comment-info-items li {
  display: inline-block;
  cursor: default;
  padding-right: 0.5em;
}

ul.ztr-comment-info-items li a {
  font-weight: 600;
}

.ztr-comment-info-author a {
  font-size: 1.2em;
  padding-right: 0.2em;
}

.ztr-comment-info-dots {
  cursor: pointer;
}

.ztr-comment-info-separator {
  width: 0.5em;
}

.ztr-comment-info-picture img {
  width: 2em;
  height: 2em;
  border-radius: 50%;
  padding: 0.5em;
  position: relative;
  display: block;
  object-fit: cover;
}

.ztr-comment-text,
#ztr-content {
  margin-bottom: 0.75em;
  padding: 0 0.8em 0 3.5em;
  line-height: 1.5em;
  line-break: loose;
  word-break: break-word;
  overflow: hidden;
  max-width: 750px;
}

.ztr-comment-text p {
  margin: 0 0 0.5em 0;
}

.ztr-comment-text code {
  font-size: 1.1em;
  margin: 0 0.2em;
}

.ztr-comment-text pre,
.ztr-info-pane pre {
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  word-wrap: break-word;
}

.ztr-comment-text a:hover {
  text-decoration: underline;
}

.ztr-comment-text img {
  max-width: 100%;
}

.ztr-comment-text .warning {
  margin-top: 0em;
  font-size: 0.8em;
  display: flex;
  align-items: center;
}

.ztr-comment-text .warning svg {
  height: 1.2em;
  fill: #e4984d;
  padding-right: 0.7em;
}

.ztr-comment-replies {
  margin-left: 2em;
}

.highlight p {
  background: #F6AD55;
  color: #2B2B2B;
  display: inline;
  padding: 0.2em;
}

/* Styling the reply to comment form */

.ztr-comment-expand {
  display: flex;
  justify-content: center;
}

.ztr-comment-expand span {
  margin: 1em 0 1em 0.35em;
  cursor: pointer;
}

ul.ztr-comment-actions,
.ztr-comment-expand {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0 0 0 3.5em;
  font-weight: 600;
  user-select: none;
}

ul.ztr-comment-actions li {
  display: inline-flex;
  align-items: center;
  text-align: center;
  padding: 0 2em 0 0;
  cursor: pointer;
}

ul.ztr-comment-actions li span {
  padding: 0.25em 0.25em 0 0.25em;
  color: var(--ztr-icon-color, #3B3B3B);
}

svg {
  fill: var(--ztr-icon-color, #3B3B3B);
  width: 1.1em;
  height: 1.1em;
}

.ztr-comment-action-reply:hover svg {
  fill: #92379c;
}

.ztr-comment-action-reply:hover span {
  color: #92379c;
}

.ztr-comment-action-zap:hover svg {
  fill: #e4984d;
}

.ztr-comment-action-zap:hover span {
  color: #e4984d;
}

.ztr-comment-action-like:hover svg {
  fill: #e35428;
}

.ztr-comment-action-like:hover span {
  color: #e35428;
}

.ztr-reply-form {
  padding: 0 0.5em 0 3.5em;
}

.ztr-reply-form textarea {
  font-family: var(--ztr-font);
  font-size: 1.1em;
  line-height: 1.4;
  color: #2B2B2B;
  background-color: #FDFDFD;
  border: 1px solid #BBB;
  outline: none;
  width: calc(100% - 1.5em);
  padding: 0.7em;
  margin: 0.5em 0;
  height: 4em;
  border-radius: 0.2em;
  min-height: 4em;
  resize: vertical;
}

.ztr-reply-form:disabled {
  opacity: 65%;
  user-select: none;
}

.ztr-reply-controls {
  display: flex;
  align-items: center;
  justify-content: flex-end;
}

.ztr-reply-controls span {
  font-weight: bold;
  font-size: 0.85em;
  margin-right: 1em;
  user-select: none;
  cursor: default;
}

.ztr-reply-error {
  color: rgb(202, 23, 23);
}

.ztr-reply-controls button {
  font-family: var(--ztr-font);
  appearance: none;
  border: none;
  padding: 0.5em 1em;
  border-radius: 0.2em;
  font-size: 0.85em;
  font-weight: 600;
  cursor: pointer;
}

.ztr-reply-login-button {
  color: white;
  background-color: var(--ztr-login-button-color, #2B2B2B);
  margin-left: 1em;
}

.ztr-reply-button {
  color: var(--ztr-text-color);
  display: flex;
  align-items: center;
}

.ztr-info-pane {
  padding: 0 0.5em 1em 3.5em;
}

.ztr-info-pane pre {
  font-size: 0.8em;
}

.ztr-spinner {
  width: 1.2em;
  height: 1.2em;
  padding: 0.9em;
  animation: rotate 4s linear infinite;
}

.ztr-reply-button:disabled {
  opacity: 65%;
  pointer-events: none;
  cursor: pointer;
  user-select: none;
}

.ztr-spinner .path {
  stroke: var(--ztr-text-color, #2B2B2B);
  stroke-linecap: round;
  animation: dash 1.5s ease-in-out infinite;
}

@keyframes rotate {
  100% {
    transform: rotate(360deg);
  }
}

@keyframes dash {
  0% {
    stroke-dasharray: 1, 150;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -35;
  }

  100% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -124;
  }
}

/* new */

.ztr-comment-new .ztr-reply-form {
  margin: 0.5em 0;
  padding: 0;
}

.ztr-comment-new .ztr-comment-body {
  padding: 0;
}

.ztr-comment-new .ztr-comment-actions {
  font-size: 1.1em;
  padding: 0;
}

/* Dark mode defaults */

@media (prefers-color-scheme: dark) {
  .ztr-spinner .path {
    stroke: var(--ztr-text-color, #DEDEDE);
  }

  .ztr-comment,
  .ztr-reply-button {
    background-color: var(--ztr-background-color, rgba(255, 255, 255, 0.06));
  }

  .ztr-reply-login-button {
    color: #2B2B2B;
    background-color: var(--ztr-login-button-color, #DEDEDE);
  }

  svg {
    fill: var(--ztr-icon-color, #DEDEDE);
  }

  ul.ztr-comment-actions li span {
    color: var(--ztr-icon-color);
  }

  .ztr-comment-action-reply:hover svg {
    fill: #96609c;
  }

  .ztr-comment-action-reply:hover span {
    color: #96609c;
  }
}`;function Qh(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function d0(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function r_(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Qh(e.outputLen),Qh(e.blockLen)}function ca(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function o_(e,t){d0(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const pu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const f0=e=>e instanceof Uint8Array,gu=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),An=(e,t)=>e<<32-t|e>>>t,i_=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!i_)throw new Error("Non little-endian hardware is not supported");function s_(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function id(e){if(typeof e=="string"&&(e=s_(e)),!f0(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function a_(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!f0(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let h0=class{clone(){return this._cloneInto()}};function c_(e){const t=r=>e().update(id(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function p0(e=32){if(pu&&typeof pu.getRandomValues=="function")return pu.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function u_(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),a=BigInt(4294967295),c=Number(n>>o&a),d=Number(n&a),f=r?4:0,h=r?0:4;e.setUint32(t+f,c,r),e.setUint32(t+h,d,r)}let l_=class extends h0{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=gu(this.buffer)}update(t){ca(this);const{view:n,buffer:r,blockLen:o}=this;t=id(t);const a=t.length;for(let c=0;c<a;){const d=Math.min(o-this.pos,a-c);if(d===o){const f=gu(t);for(;o<=a-c;c+=o)this.process(f,c);continue}r.set(t.subarray(c,c+d),this.pos),this.pos+=d,c+=d,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ca(this),o_(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:a}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>o-c&&(this.process(r,0),c=0);for(let b=c;b<o;b++)n[b]=0;u_(r,o-8,BigInt(this.length*8),a),this.process(r,0);const d=gu(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,y=this.get();if(h>y.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<h;b++)d.setUint32(4*b,y[b],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:a,destroyed:c,pos:d}=this;return t.length=o,t.pos=d,t.finished=a,t.destroyed=c,o%n&&t.buffer.set(r),t}};const d_=(e,t,n)=>e&t^~e&n,f_=(e,t,n)=>e&t^e&n^t&n,h_=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Sr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$r=new Uint32Array(64);let p_=class extends l_{constructor(){super(64,32,8,!1),this.A=Sr[0]|0,this.B=Sr[1]|0,this.C=Sr[2]|0,this.D=Sr[3]|0,this.E=Sr[4]|0,this.F=Sr[5]|0,this.G=Sr[6]|0,this.H=Sr[7]|0}get(){const{A:t,B:n,C:r,D:o,E:a,F:c,G:d,H:f}=this;return[t,n,r,o,a,c,d,f]}set(t,n,r,o,a,c,d,f){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=a|0,this.F=c|0,this.G=d|0,this.H=f|0}process(t,n){for(let b=0;b<16;b++,n+=4)$r[b]=t.getUint32(n,!1);for(let b=16;b<64;b++){const S=$r[b-15],C=$r[b-2],L=An(S,7)^An(S,18)^S>>>3,A=An(C,17)^An(C,19)^C>>>10;$r[b]=A+$r[b-7]+L+$r[b-16]|0}let{A:r,B:o,C:a,D:c,E:d,F:f,G:h,H:y}=this;for(let b=0;b<64;b++){const S=An(d,6)^An(d,11)^An(d,25),C=y+S+d_(d,f,h)+h_[b]+$r[b]|0,A=(An(r,2)^An(r,13)^An(r,22))+f_(r,o,a)|0;y=h,h=f,f=d,d=c+C|0,c=a,a=o,o=r,r=C+A|0}r=r+this.A|0,o=o+this.B|0,a=a+this.C|0,c=c+this.D|0,d=d+this.E|0,f=f+this.F|0,h=h+this.G|0,y=y+this.H|0,this.set(r,o,a,c,d,f,h,y)}roundClean(){$r.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const ul=c_(()=>new p_);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const g0=BigInt(0),qa=BigInt(1),g_=BigInt(2),Fa=e=>e instanceof Uint8Array,w_=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ui(e){if(!Fa(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=w_[e[n]];return t}function w0(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function sd(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function li(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,a=e.slice(o,o+2),c=Number.parseInt(a,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");n[r]=c}return n}function Vt(e){return sd(ui(e))}function ad(e){if(!Fa(e))throw new Error("Uint8Array expected");return sd(ui(Uint8Array.from(e).reverse()))}function jr(e,t){return li(e.toString(16).padStart(t*2,"0"))}function cd(e,t){return jr(e,t).reverse()}function b_(e){return li(w0(e))}function $t(e,t,n){let r;if(typeof t=="string")try{r=li(t)}catch(a){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${a}`)}else if(Fa(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function Eo(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Fa(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function m_(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function y_(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function v_(e){let t;for(t=0;e>g0;e>>=qa,t+=1);return t}function __(e,t){return e>>BigInt(t)&qa}const E_=(e,t,n)=>e|(n?qa:g0)<<BigInt(t),ud=e=>(g_<<BigInt(e-1))-qa,wu=e=>new Uint8Array(e),Xh=e=>Uint8Array.from(e);function b0(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=wu(e),o=wu(e),a=0;const c=()=>{r.fill(1),o.fill(0),a=0},d=(...b)=>n(o,r,...b),f=(b=wu())=>{o=d(Xh([0]),b),r=d(),b.length!==0&&(o=d(Xh([1]),b),r=d())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const S=[];for(;b<t;){r=d();const C=r.slice();S.push(C),b+=r.length}return Eo(...S)};return(b,S)=>{c(),f(b);let C;for(;!(C=S(h()));)f();return c(),C}}const k_={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function us(e,t,n={}){const r=(o,a,c)=>{const d=k_[a];if(typeof d!="function")throw new Error(`Invalid validator "${a}", expected function`);const f=e[o];if(!(c&&f===void 0)&&!d(f,e))throw new Error(`Invalid param ${String(o)}=${f} (${typeof f}), expected ${a}`)};for(const[o,a]of Object.entries(t))r(o,a,!1);for(const[o,a]of Object.entries(n))r(o,a,!0);return e}const A_=Object.freeze(Object.defineProperty({__proto__:null,bitGet:__,bitLen:v_,bitMask:ud,bitSet:E_,bytesToHex:ui,bytesToNumberBE:Vt,bytesToNumberLE:ad,concatBytes:Eo,createHmacDrbg:b0,ensureBytes:$t,equalBytes:m_,hexToBytes:li,hexToNumber:sd,numberToBytesBE:jr,numberToBytesLE:cd,numberToHexUnpadded:w0,numberToVarBytesBE:b_,utf8ToBytes:y_,validateObject:us},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gt=BigInt(0),ot=BigInt(1),fo=BigInt(2),S_=BigInt(3),ll=BigInt(4),ep=BigInt(5),tp=BigInt(8);BigInt(9);BigInt(16);function vt(e,t){const n=e%t;return n>=gt?n:t+n}function $_(e,t,n){if(n<=gt||t<gt)throw new Error("Expected power/modulo > 0");if(n===ot)return gt;let r=ot;for(;t>gt;)t&ot&&(r=r*e%n),e=e*e%n,t>>=ot;return r}function Xt(e,t,n){let r=e;for(;t-- >gt;)r*=r,r%=n;return r}function dl(e,t){if(e===gt||t<=gt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=vt(e,t),r=t,o=gt,a=ot;for(;n!==gt;){const d=r/n,f=r%n,h=o-a*d;r=n,n=f,o=a,a=h}if(r!==ot)throw new Error("invert: does not exist");return vt(o,t)}function x_(e){const t=(e-ot)/fo;let n,r,o;for(n=e-ot,r=0;n%fo===gt;n/=fo,r++);for(o=fo;o<e&&$_(o,t,e)!==e-ot;o++);if(r===1){const c=(e+ot)/ll;return function(f,h){const y=f.pow(h,c);if(!f.eql(f.sqr(y),h))throw new Error("Cannot find square root");return y}}const a=(n+ot)/fo;return function(d,f){if(d.pow(f,t)===d.neg(d.ONE))throw new Error("Cannot find square root");let h=r,y=d.pow(d.mul(d.ONE,o),n),b=d.pow(f,a),S=d.pow(f,n);for(;!d.eql(S,d.ONE);){if(d.eql(S,d.ZERO))return d.ZERO;let C=1;for(let A=d.sqr(S);C<h&&!d.eql(A,d.ONE);C++)A=d.sqr(A);const L=d.pow(y,ot<<BigInt(h-C-1));y=d.sqr(L),b=d.mul(b,L),S=d.mul(S,y),h=C}return b}}function T_(e){if(e%ll===S_){const t=(e+ot)/ll;return function(r,o){const a=r.pow(o,t);if(!r.eql(r.sqr(a),o))throw new Error("Cannot find square root");return a}}if(e%tp===ep){const t=(e-ep)/tp;return function(r,o){const a=r.mul(o,fo),c=r.pow(a,t),d=r.mul(o,c),f=r.mul(r.mul(d,fo),c),h=r.mul(d,r.sub(f,r.ONE));if(!r.eql(r.sqr(h),o))throw new Error("Cannot find square root");return h}}return x_(e)}const P_=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function B_(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=P_.reduce((r,o)=>(r[o]="function",r),t);return us(e,n)}function I_(e,t,n){if(n<gt)throw new Error("Expected power > 0");if(n===gt)return e.ONE;if(n===ot)return t;let r=e.ONE,o=t;for(;n>gt;)n&ot&&(r=e.mul(r,o)),o=e.sqr(o),n>>=ot;return r}function L_(e,t){const n=new Array(t.length),r=t.reduce((a,c,d)=>e.is0(c)?a:(n[d]=a,e.mul(a,c)),e.ONE),o=e.inv(r);return t.reduceRight((a,c,d)=>e.is0(c)?a:(n[d]=e.mul(a,n[d]),e.mul(a,c)),o),n}function m0(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function C_(e,t,n=!1,r={}){if(e<=gt)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:a}=m0(e,t);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=T_(e),d=Object.freeze({ORDER:e,BITS:o,BYTES:a,MASK:ud(o),ZERO:gt,ONE:ot,create:f=>vt(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return gt<=f&&f<e},is0:f=>f===gt,isOdd:f=>(f&ot)===ot,neg:f=>vt(-f,e),eql:(f,h)=>f===h,sqr:f=>vt(f*f,e),add:(f,h)=>vt(f+h,e),sub:(f,h)=>vt(f-h,e),mul:(f,h)=>vt(f*h,e),pow:(f,h)=>I_(d,f,h),div:(f,h)=>vt(f*dl(h,e),e),sqrN:f=>f*f,addN:(f,h)=>f+h,subN:(f,h)=>f-h,mulN:(f,h)=>f*h,inv:f=>dl(f,e),sqrt:r.sqrt||(f=>c(d,f)),invertBatch:f=>L_(d,f),cmov:(f,h,y)=>y?h:f,toBytes:f=>n?cd(f,a):jr(f,a),fromBytes:f=>{if(f.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${f.length}`);return n?ad(f):Vt(f)}});return Object.freeze(d)}function y0(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function v0(e){const t=y0(e);return t+Math.ceil(t/2)}function O_(e,t,n=!1){const r=e.length,o=y0(t),a=v0(t);if(r<16||r<a||r>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${r}`);const c=n?Vt(e):ad(e),d=vt(c,t-ot)+ot;return n?cd(d,o):jr(d,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const N_=BigInt(0),bu=BigInt(1);function R_(e,t){const n=(o,a)=>{const c=a.negate();return o?c:a},r=o=>{const a=Math.ceil(t/o)+1,c=2**(o-1);return{windows:a,windowSize:c}};return{constTimeNegate:n,unsafeLadder(o,a){let c=e.ZERO,d=o;for(;a>N_;)a&bu&&(c=c.add(d)),d=d.double(),a>>=bu;return c},precomputeWindow(o,a){const{windows:c,windowSize:d}=r(a),f=[];let h=o,y=h;for(let b=0;b<c;b++){y=h,f.push(y);for(let S=1;S<d;S++)y=y.add(h),f.push(y);h=y.double()}return f},wNAF(o,a,c){const{windows:d,windowSize:f}=r(o);let h=e.ZERO,y=e.BASE;const b=BigInt(2**o-1),S=2**o,C=BigInt(o);for(let L=0;L<d;L++){const A=L*f;let N=Number(c&b);c>>=C,N>f&&(N-=S,c+=bu);const M=A,B=A+Math.abs(N)-1,O=L%2!==0,l=N<0;N===0?y=y.add(n(O,a[M])):h=h.add(n(l,a[B]))}return{p:h,f:y}},wNAFCached(o,a,c,d){const f=o._WINDOW_SIZE||1;let h=a.get(o);return h||(h=this.precomputeWindow(o,f),f!==1&&a.set(o,d(h))),this.wNAF(f,h,c)}}}function _0(e){return B_(e.Fp),us(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...m0(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function z_(e){const t=_0(e);us(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:U_,hexToBytes:M_}=A_,wo={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=wo;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:U_(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=wo,n=typeof e=="string"?M_(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:a}=wo._parseInt(n.subarray(2)),{d:c,l:d}=wo._parseInt(a);if(d.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:c}},hexFromSig(e){const t=h=>Number.parseInt(h[0],16)&8?"00"+h:h,n=h=>{const y=h.toString(16);return y.length&1?`0${y}`:y},r=t(n(e.s)),o=t(n(e.r)),a=r.length/2,c=o.length/2,d=n(a),f=n(c);return`30${n(c+a+4)}02${f}${o}02${d}${r}`}},Kn=BigInt(0),tn=BigInt(1);BigInt(2);const np=BigInt(3);BigInt(4);function j_(e){const t=z_(e),{Fp:n}=t,r=t.toBytes||((L,A,N)=>{const M=A.toAffine();return Eo(Uint8Array.from([4]),n.toBytes(M.x),n.toBytes(M.y))}),o=t.fromBytes||(L=>{const A=L.subarray(1),N=n.fromBytes(A.subarray(0,n.BYTES)),M=n.fromBytes(A.subarray(n.BYTES,2*n.BYTES));return{x:N,y:M}});function a(L){const{a:A,b:N}=t,M=n.sqr(L),B=n.mul(M,L);return n.add(n.add(B,n.mul(L,A)),N)}if(!n.eql(n.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function c(L){return typeof L=="bigint"&&Kn<L&&L<t.n}function d(L){if(!c(L))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(L){const{allowedPrivateKeyLengths:A,nByteLength:N,wrapPrivateKey:M,n:B}=t;if(A&&typeof L!="bigint"){if(L instanceof Uint8Array&&(L=ui(L)),typeof L!="string"||!A.includes(L.length))throw new Error("Invalid key");L=L.padStart(N*2,"0")}let O;try{O=typeof L=="bigint"?L:Vt($t("private key",L,N))}catch{throw new Error(`private key must be ${N} bytes, hex or bigint, not ${typeof L}`)}return M&&(O=vt(O,B)),d(O),O}const h=new Map;function y(L){if(!(L instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(A,N,M){if(this.px=A,this.py=N,this.pz=M,A==null||!n.isValid(A))throw new Error("x required");if(N==null||!n.isValid(N))throw new Error("y required");if(M==null||!n.isValid(M))throw new Error("z required")}static fromAffine(A){const{x:N,y:M}=A||{};if(!A||!n.isValid(N)||!n.isValid(M))throw new Error("invalid affine point");if(A instanceof b)throw new Error("projective point not allowed");const B=O=>n.eql(O,n.ZERO);return B(N)&&B(M)?b.ZERO:new b(N,M,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const N=n.invertBatch(A.map(M=>M.pz));return A.map((M,B)=>M.toAffine(N[B])).map(b.fromAffine)}static fromHex(A){const N=b.fromAffine(o($t("pointHex",A)));return N.assertValidity(),N}static fromPrivateKey(A){return b.BASE.multiply(f(A))}_setWindowSize(A){this._WINDOW_SIZE=A,h.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:A,y:N}=this.toAffine();if(!n.isValid(A)||!n.isValid(N))throw new Error("bad point: x or y not FE");const M=n.sqr(N),B=a(A);if(!n.eql(M,B))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:A}=this.toAffine();if(n.isOdd)return!n.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){y(A);const{px:N,py:M,pz:B}=this,{px:O,py:l,pz:w}=A,p=n.eql(n.mul(N,w),n.mul(O,B)),v=n.eql(n.mul(M,w),n.mul(l,B));return p&&v}negate(){return new b(this.px,n.neg(this.py),this.pz)}double(){const{a:A,b:N}=t,M=n.mul(N,np),{px:B,py:O,pz:l}=this;let w=n.ZERO,p=n.ZERO,v=n.ZERO,x=n.mul(B,B),R=n.mul(O,O),T=n.mul(l,l),E=n.mul(B,O);return E=n.add(E,E),v=n.mul(B,l),v=n.add(v,v),w=n.mul(A,v),p=n.mul(M,T),p=n.add(w,p),w=n.sub(R,p),p=n.add(R,p),p=n.mul(w,p),w=n.mul(E,w),v=n.mul(M,v),T=n.mul(A,T),E=n.sub(x,T),E=n.mul(A,E),E=n.add(E,v),v=n.add(x,x),x=n.add(v,x),x=n.add(x,T),x=n.mul(x,E),p=n.add(p,x),T=n.mul(O,l),T=n.add(T,T),x=n.mul(T,E),w=n.sub(w,x),v=n.mul(T,R),v=n.add(v,v),v=n.add(v,v),new b(w,p,v)}add(A){y(A);const{px:N,py:M,pz:B}=this,{px:O,py:l,pz:w}=A;let p=n.ZERO,v=n.ZERO,x=n.ZERO;const R=t.a,T=n.mul(t.b,np);let E=n.mul(N,O),$=n.mul(M,l),j=n.mul(B,w),F=n.add(N,M),I=n.add(O,l);F=n.mul(F,I),I=n.add(E,$),F=n.sub(F,I),I=n.add(N,B);let k=n.add(O,w);return I=n.mul(I,k),k=n.add(E,j),I=n.sub(I,k),k=n.add(M,B),p=n.add(l,w),k=n.mul(k,p),p=n.add($,j),k=n.sub(k,p),x=n.mul(R,I),p=n.mul(T,j),x=n.add(p,x),p=n.sub($,x),x=n.add($,x),v=n.mul(p,x),$=n.add(E,E),$=n.add($,E),j=n.mul(R,j),I=n.mul(T,I),$=n.add($,j),j=n.sub(E,j),j=n.mul(R,j),I=n.add(I,j),E=n.mul($,I),v=n.add(v,E),E=n.mul(k,I),p=n.mul(F,p),p=n.sub(p,E),E=n.mul(F,$),x=n.mul(k,x),x=n.add(x,E),new b(p,v,x)}subtract(A){return this.add(A.negate())}is0(){return this.equals(b.ZERO)}wNAF(A){return C.wNAFCached(this,h,A,N=>{const M=n.invertBatch(N.map(B=>B.pz));return N.map((B,O)=>B.toAffine(M[O])).map(b.fromAffine)})}multiplyUnsafe(A){const N=b.ZERO;if(A===Kn)return N;if(d(A),A===tn)return this;const{endo:M}=t;if(!M)return C.unsafeLadder(this,A);let{k1neg:B,k1:O,k2neg:l,k2:w}=M.splitScalar(A),p=N,v=N,x=this;for(;O>Kn||w>Kn;)O&tn&&(p=p.add(x)),w&tn&&(v=v.add(x)),x=x.double(),O>>=tn,w>>=tn;return B&&(p=p.negate()),l&&(v=v.negate()),v=new b(n.mul(v.px,M.beta),v.py,v.pz),p.add(v)}multiply(A){d(A);let N=A,M,B;const{endo:O}=t;if(O){const{k1neg:l,k1:w,k2neg:p,k2:v}=O.splitScalar(N);let{p:x,f:R}=this.wNAF(w),{p:T,f:E}=this.wNAF(v);x=C.constTimeNegate(l,x),T=C.constTimeNegate(p,T),T=new b(n.mul(T.px,O.beta),T.py,T.pz),M=x.add(T),B=R.add(E)}else{const{p:l,f:w}=this.wNAF(N);M=l,B=w}return b.normalizeZ([M,B])[0]}multiplyAndAddUnsafe(A,N,M){const B=b.BASE,O=(w,p)=>p===Kn||p===tn||!w.equals(B)?w.multiplyUnsafe(p):w.multiply(p),l=O(this,N).add(O(A,M));return l.is0()?void 0:l}toAffine(A){const{px:N,py:M,pz:B}=this,O=this.is0();A==null&&(A=O?n.ONE:n.inv(B));const l=n.mul(N,A),w=n.mul(M,A),p=n.mul(B,A);if(O)return{x:n.ZERO,y:n.ZERO};if(!n.eql(p,n.ONE))throw new Error("invZ was invalid");return{x:l,y:w}}isTorsionFree(){const{h:A,isTorsionFree:N}=t;if(A===tn)return!0;if(N)return N(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:N}=t;return A===tn?this:N?N(b,this):this.multiplyUnsafe(t.h)}toRawBytes(A=!0){return this.assertValidity(),r(b,this,A)}toHex(A=!0){return ui(this.toRawBytes(A))}}b.BASE=new b(t.Gx,t.Gy,n.ONE),b.ZERO=new b(n.ZERO,n.ONE,n.ZERO);const S=t.nBitLength,C=R_(b,t.endo?Math.ceil(S/2):S);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:f,weierstrassEquation:a,isWithinCurveOrder:c}}function H_(e){const t=_0(e);return us(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function D_(e){const t=H_(e),{Fp:n,n:r}=t,o=n.BYTES+1,a=2*n.BYTES+1;function c(I){return Kn<I&&I<n.ORDER}function d(I){return vt(I,r)}function f(I){return dl(I,r)}const{ProjectivePoint:h,normPrivateKeyToScalar:y,weierstrassEquation:b,isWithinCurveOrder:S}=j_({...t,toBytes(I,k,V){const W=k.toAffine(),K=n.toBytes(W.x),Y=Eo;return V?Y(Uint8Array.from([k.hasEvenY()?2:3]),K):Y(Uint8Array.from([4]),K,n.toBytes(W.y))},fromBytes(I){const k=I.length,V=I[0],W=I.subarray(1);if(k===o&&(V===2||V===3)){const K=Vt(W);if(!c(K))throw new Error("Point is not on curve");const Y=b(K);let Z=n.sqrt(Y);const se=(Z&tn)===tn;return(V&1)===1!==se&&(Z=n.neg(Z)),{x:K,y:Z}}else if(k===a&&V===4){const K=n.fromBytes(W.subarray(0,n.BYTES)),Y=n.fromBytes(W.subarray(n.BYTES,2*n.BYTES));return{x:K,y:Y}}else throw new Error(`Point of length ${k} was invalid. Expected ${o} compressed bytes or ${a} uncompressed bytes`)}}),C=I=>ui(jr(I,t.nByteLength));function L(I){const k=r>>tn;return I>k}function A(I){return L(I)?d(-I):I}const N=(I,k,V)=>Vt(I.slice(k,V));class M{constructor(k,V,W){this.r=k,this.s=V,this.recovery=W,this.assertValidity()}static fromCompact(k){const V=t.nByteLength;return k=$t("compactSignature",k,V*2),new M(N(k,0,V),N(k,V,2*V))}static fromDER(k){const{r:V,s:W}=wo.toSig($t("DER",k));return new M(V,W)}assertValidity(){if(!S(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!S(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(k){return new M(this.r,this.s,k)}recoverPublicKey(k){const{r:V,s:W,recovery:K}=this,Y=v($t("msgHash",k));if(K==null||![0,1,2,3].includes(K))throw new Error("recovery id invalid");const Z=K===2||K===3?V+t.n:V;if(Z>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const se=K&1?"03":"02",ge=h.fromHex(se+C(Z)),me=f(Z),Se=d(-Y*me),re=d(W*me),ye=h.BASE.multiplyAndAddUnsafe(ge,Se,re);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return L(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,d(-this.s),this.recovery):this}toDERRawBytes(){return li(this.toDERHex())}toDERHex(){return wo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return li(this.toCompactHex())}toCompactHex(){return C(this.r)+C(this.s)}}const B={isValidPrivateKey(I){try{return y(I),!0}catch{return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const I=v0(t.n);return O_(t.randomBytes(I),t.n)},precompute(I=8,k=h.BASE){return k._setWindowSize(I),k.multiply(BigInt(3)),k}};function O(I,k=!0){return h.fromPrivateKey(I).toRawBytes(k)}function l(I){const k=I instanceof Uint8Array,V=typeof I=="string",W=(k||V)&&I.length;return k?W===o||W===a:V?W===2*o||W===2*a:I instanceof h}function w(I,k,V=!0){if(l(I))throw new Error("first arg must be private key");if(!l(k))throw new Error("second arg must be public key");return h.fromHex(k).multiply(y(I)).toRawBytes(V)}const p=t.bits2int||function(I){const k=Vt(I),V=I.length*8-t.nBitLength;return V>0?k>>BigInt(V):k},v=t.bits2int_modN||function(I){return d(p(I))},x=ud(t.nBitLength);function R(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Kn<=I&&I<x))throw new Error(`bigint expected < 2^${t.nBitLength}`);return jr(I,t.nByteLength)}function T(I,k,V=E){if(["recovered","canonical"].some(Oe=>Oe in V))throw new Error("sign() legacy options not supported");const{hash:W,randomBytes:K}=t;let{lowS:Y,prehash:Z,extraEntropy:se}=V;Y==null&&(Y=!0),I=$t("msgHash",I),Z&&(I=$t("prehashed msgHash",W(I)));const ge=v(I),me=y(k),Se=[R(me),R(ge)];if(se!=null){const Oe=se===!0?K(n.BYTES):se;Se.push($t("extraEntropy",Oe))}const re=Eo(...Se),ye=ge;function Ie(Oe){const Me=p(Oe);if(!S(Me))return;const ft=f(Me),Fe=h.BASE.multiply(Me).toAffine(),ie=d(Fe.x);if(ie===Kn)return;const Re=d(ft*d(ye+ie*me));if(Re===Kn)return;let Te=(Fe.x===ie?0:2)|Number(Fe.y&tn),Pe=Re;return Y&&L(Re)&&(Pe=A(Re),Te^=1),new M(ie,Pe,Te)}return{seed:re,k2sig:Ie}}const E={lowS:t.lowS,prehash:!1},$={lowS:t.lowS,prehash:!1};function j(I,k,V=E){const{seed:W,k2sig:K}=T(I,k,V),Y=t;return b0(Y.hash.outputLen,Y.nByteLength,Y.hmac)(W,K)}h.BASE._setWindowSize(8);function F(I,k,V,W=$){var K;const Y=I;if(k=$t("msgHash",k),V=$t("publicKey",V),"strict"in W)throw new Error("options.strict was renamed to lowS");const{lowS:Z,prehash:se}=W;let ge,me;try{if(typeof Y=="string"||Y instanceof Uint8Array)try{ge=M.fromDER(Y)}catch(ie){if(!(ie instanceof wo.Err))throw ie;ge=M.fromCompact(Y)}else if(typeof Y=="object"&&typeof Y.r=="bigint"&&typeof Y.s=="bigint"){const{r:ie,s:Re}=Y;ge=new M(ie,Re)}else throw new Error("PARSE");me=h.fromHex(V)}catch(ie){if(ie.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Z&&ge.hasHighS())return!1;se&&(k=t.hash(k));const{r:Se,s:re}=ge,ye=v(k),Ie=f(re),Oe=d(ye*Ie),Me=d(Se*Ie),ft=(K=h.BASE.multiplyAndAddUnsafe(me,Oe,Me))==null?void 0:K.toAffine();return ft?d(ft.x)===Se:!1}return{CURVE:t,getPublicKey:O,getSharedSecret:w,sign:j,verify:F,ProjectivePoint:h,Signature:M,utils:B}}class E0 extends h0{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,r_(t);const r=id(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,a=new Uint8Array(o);a.set(r.length>o?t.create().update(r).digest():r);for(let c=0;c<a.length;c++)a[c]^=54;this.iHash.update(a),this.oHash=t.create();for(let c=0;c<a.length;c++)a[c]^=106;this.oHash.update(a),a.fill(0)}update(t){return ca(this),this.iHash.update(t),this}digestInto(t){ca(this),d0(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:a,blockLen:c,outputLen:d}=this;return t=t,t.finished=o,t.destroyed=a,t.blockLen=c,t.outputLen=d,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const k0=(e,t,n)=>new E0(e,t).update(n).digest();k0.create=(e,t)=>new E0(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function V_(e){return{hash:e,hmac:(t,...n)=>k0(e,t,a_(...n)),randomBytes:p0}}function q_(e,t){const n=r=>D_({...e,...V_(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wa=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ua=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),A0=BigInt(1),la=BigInt(2),rp=(e,t)=>(e+t/la)/t;function S0(e){const t=Wa,n=BigInt(3),r=BigInt(6),o=BigInt(11),a=BigInt(22),c=BigInt(23),d=BigInt(44),f=BigInt(88),h=e*e*e%t,y=h*h*e%t,b=Xt(y,n,t)*y%t,S=Xt(b,n,t)*y%t,C=Xt(S,la,t)*h%t,L=Xt(C,o,t)*C%t,A=Xt(L,a,t)*L%t,N=Xt(A,d,t)*A%t,M=Xt(N,f,t)*N%t,B=Xt(M,d,t)*A%t,O=Xt(B,n,t)*y%t,l=Xt(O,c,t)*L%t,w=Xt(l,r,t)*h%t,p=Xt(w,la,t);if(!fl.eql(fl.sqr(p),e))throw new Error("Cannot find square root");return p}const fl=C_(Wa,void 0,void 0,{sqrt:S0}),ld=q_({a:BigInt(0),b:BigInt(7),Fp:fl,n:ua,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=ua,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-A0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=n,c=BigInt("0x100000000000000000000000000000000"),d=rp(a*e,t),f=rp(-r*e,t);let h=vt(e-d*n-f*o,t),y=vt(-d*r-f*a,t);const b=h>c,S=y>c;if(b&&(h=t-h),S&&(y=t-y),h>c||y>c)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:b,k1:h,k2neg:S,k2:y}}}},ul),Ka=BigInt(0),$0=e=>typeof e=="bigint"&&Ka<e&&e<Wa,F_=e=>typeof e=="bigint"&&Ka<e&&e<ua,op={};function da(e,...t){let n=op[e];if(n===void 0){const r=ul(Uint8Array.from(e,o=>o.charCodeAt(0)));n=Eo(r,r),op[e]=n}return ul(Eo(n,...t))}const dd=e=>e.toRawBytes(!0).slice(1),hl=e=>jr(e,32),mu=e=>vt(e,Wa),Ji=e=>vt(e,ua),fd=ld.ProjectivePoint,W_=(e,t,n)=>fd.BASE.multiplyAndAddUnsafe(e,t,n);function pl(e){let t=ld.utils.normPrivateKeyToScalar(e),n=fd.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Ji(-t),bytes:dd(n)}}function x0(e){if(!$0(e))throw new Error("bad x: need 0 < x < p");const t=mu(e*e),n=mu(t*e+BigInt(7));let r=S0(n);r%la!==Ka&&(r=mu(-r));const o=new fd(e,r,A0);return o.assertValidity(),o}function T0(...e){return Ji(Vt(da("BIP0340/challenge",...e)))}function K_(e){return pl(e).bytes}function G_(e,t,n=p0(32)){const r=$t("message",e),{bytes:o,scalar:a}=pl(t),c=$t("auxRand",n,32),d=hl(a^Vt(da("BIP0340/aux",c))),f=da("BIP0340/nonce",d,o,r),h=Ji(Vt(f));if(h===Ka)throw new Error("sign failed: k is zero");const{bytes:y,scalar:b}=pl(h),S=T0(y,o,r),C=new Uint8Array(64);if(C.set(y,0),C.set(hl(Ji(b+S*a)),32),!P0(C,r,o))throw new Error("sign: Invalid signature produced");return C}function P0(e,t,n){const r=$t("signature",e,64),o=$t("message",t),a=$t("publicKey",n,32);try{const c=x0(Vt(a)),d=Vt(r.subarray(0,32));if(!$0(d))return!1;const f=Vt(r.subarray(32,64));if(!F_(f))return!1;const h=T0(hl(d),dd(c),o),y=W_(c,f,Ji(-h));return!(!y||!y.hasEvenY()||y.toAffine().x!==d)}catch{return!1}}const Rt={getPublicKey:K_,sign:G_,verify:P0,utils:{randomPrivateKey:ld.utils.randomPrivateKey,lift_x:x0,pointToBytes:dd,numberToBytesBE:jr,bytesToNumberBE:Vt,taggedHash:da,mod:vt}};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const B0=e=>e instanceof Uint8Array,yu=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Sn=(e,t)=>e<<32-t|e>>>t,Z_=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Z_)throw new Error("Non little-endian hardware is not supported");const Y_=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ye(e){if(!B0(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Y_[e[n]];return t}function I0(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,a=e.slice(o,o+2),c=Number.parseInt(a,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");n[r]=c}return n}function J_(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function L0(e){if(typeof e=="string"&&(e=J_(e)),!B0(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}class Q_{clone(){return this._cloneInto()}}function C0(e){const t=r=>e().update(L0(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function gl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function X_(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function O0(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function eE(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");gl(e.outputLen),gl(e.blockLen)}function tE(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function nE(e,t){O0(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const vu={number:gl,bool:X_,bytes:O0,hash:eE,exists:tE,output:nE};function rE(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),a=BigInt(4294967295),c=Number(n>>o&a),d=Number(n&a),f=r?4:0,h=r?0:4;e.setUint32(t+f,c,r),e.setUint32(t+h,d,r)}class oE extends Q_{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=yu(this.buffer)}update(t){vu.exists(this);const{view:n,buffer:r,blockLen:o}=this;t=L0(t);const a=t.length;for(let c=0;c<a;){const d=Math.min(o-this.pos,a-c);if(d===o){const f=yu(t);for(;o<=a-c;c+=o)this.process(f,c);continue}r.set(t.subarray(c,c+d),this.pos),this.pos+=d,c+=d,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){vu.exists(this),vu.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:a}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>o-c&&(this.process(r,0),c=0);for(let b=c;b<o;b++)n[b]=0;rE(r,o-8,BigInt(this.length*8),a),this.process(r,0);const d=yu(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=f/4,y=this.get();if(h>y.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<h;b++)d.setUint32(4*b,y[b],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:a,destroyed:c,pos:d}=this;return t.length=o,t.pos=d,t.finished=a,t.destroyed=c,o%n&&t.buffer.set(r),t}}const iE=(e,t,n)=>e&t^~e&n,sE=(e,t,n)=>e&t^e&n^t&n,aE=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Tr=new Uint32Array(64);class N0 extends oE{constructor(){super(64,32,8,!1),this.A=xr[0]|0,this.B=xr[1]|0,this.C=xr[2]|0,this.D=xr[3]|0,this.E=xr[4]|0,this.F=xr[5]|0,this.G=xr[6]|0,this.H=xr[7]|0}get(){const{A:t,B:n,C:r,D:o,E:a,F:c,G:d,H:f}=this;return[t,n,r,o,a,c,d,f]}set(t,n,r,o,a,c,d,f){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=a|0,this.F=c|0,this.G=d|0,this.H=f|0}process(t,n){for(let b=0;b<16;b++,n+=4)Tr[b]=t.getUint32(n,!1);for(let b=16;b<64;b++){const S=Tr[b-15],C=Tr[b-2],L=Sn(S,7)^Sn(S,18)^S>>>3,A=Sn(C,17)^Sn(C,19)^C>>>10;Tr[b]=A+Tr[b-7]+L+Tr[b-16]|0}let{A:r,B:o,C:a,D:c,E:d,F:f,G:h,H:y}=this;for(let b=0;b<64;b++){const S=Sn(d,6)^Sn(d,11)^Sn(d,25),C=y+S+iE(d,f,h)+aE[b]+Tr[b]|0,A=(Sn(r,2)^Sn(r,13)^Sn(r,22))+sE(r,o,a)|0;y=h,h=f,f=d,d=c+C|0,c=a,a=o,o=r,r=C+A|0}r=r+this.A|0,o=o+this.B|0,a=a+this.C|0,c=c+this.D|0,d=d+this.E|0,f=f+this.F|0,h=h+this.G|0,y=y+this.H|0,this.set(r,o,a,c,d,f,h,y)}roundClean(){Tr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class cE extends N0{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const hd=C0(()=>new N0);C0(()=>new cE);var uo=Symbol("verified"),uE=e=>e instanceof Object;function lE(e){if(!uE(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var dE=new TextEncoder;function Li(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var fE=class{constructor(t){he(this,"value"),he(this,"next",null),he(this,"prev",null),this.value=t}},hE=class{constructor(){he(this,"first"),he(this,"last"),this.first=null,this.last=null}enqueue(t){const n=new fE(t);return this.last?this.last===this.first?(this.last=n,this.last.prev=this.first,this.first.next=n):(n.prev=this.last,this.last.next=n,this.last=n):(this.first=n,this.last=n),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const n=this.first;return this.first=null,this.last=null,n.value}const t=this.first;return this.first=t.next,t.value}},pE=class{generateSecretKey(){return Rt.utils.randomPrivateKey()}getPublicKey(t){return Ye(Rt.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=Ye(Rt.getPublicKey(n)),r.id=_u(r),r.sig=Ye(Rt.sign(_u(r),n)),r[uo]=!0,r}verifyEvent(t){if(typeof t[uo]=="boolean")return t[uo];const n=_u(t);if(n!==t.id)return t[uo]=!1,!1;try{const r=Rt.verify(t.sig,n,t.pubkey);return t[uo]=r,r}catch{return t[uo]=!1,!1}}};function gE(e){if(!lE(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function _u(e){let t=hd(dE.encode(gE(e)));return Ye(t)}var Ga=new pE;Ga.generateSecretKey;Ga.getPublicKey;Ga.finalizeEvent;var wE=Ga.verifyEvent,bE=22242;function mE(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(n=>t.id.startsWith(n))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(n=>t.pubkey.startsWith(n)))return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([a,c])=>a===n.slice(1)&&o.indexOf(c)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function yE(e,t){for(let n=0;n<e.length;n++)if(mE(e[n],t))return!0;return!1}function vE(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function _E(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let a=r+1+o;return e.slice(r+1,a)}function EE(e,t){return{kind:bE,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function kE(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var AE=e=>(e[uo]=!0,!0),R0;try{R0=WebSocket}catch{}var z0=class{constructor(t,n){he(this,"url"),he(this,"_connected",!1),he(this,"onclose",null),he(this,"onnotice",r=>console.debug(`NOTICE from ${this.url}: ${r}`)),he(this,"_onauth",null),he(this,"baseEoseTimeout",4400),he(this,"connectionTimeout",4400),he(this,"openSubs",new Map),he(this,"connectionTimeoutHandle"),he(this,"connectionPromise"),he(this,"openCountRequests",new Map),he(this,"openEventPublishes",new Map),he(this,"ws"),he(this,"incomingMessageQueue",new hE),he(this,"queueRunning",!1),he(this,"challenge"),he(this,"serial",0),he(this,"verifyEvent"),this.url=Li(t),this.verifyEvent=n.verifyEvent}static async connect(t,n){const r=new z0(t,n);return await r.connect(),r}closeAllSubscriptions(t){for(let[n,r]of this.openSubs)r.close(t);this.openSubs.clear();for(let[n,r]of this.openEventPublishes)r.reject(new Error(t));this.openEventPublishes.clear();for(let[n,r]of this.openCountRequests)r.reject(new Error(t));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((t,n)=>{this.connectionTimeoutHandle=setTimeout(()=>{var r;n("connection timed out"),this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new R0(this.url)}catch(r){n(r);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,t()},this.ws.onerror=r=>{var o;n(r.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(o=this.onclose)==null||o.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var r;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await kE();this.queueRunning=!1}handleNext(){var t,n,r;const o=this.incomingMessageQueue.dequeue();if(!o)return!1;const a=_E(o);if(a){const c=this.openSubs.get(a);if(!c)return;const d=vE(o,"id"),f=(t=c.alreadyHaveEvent)==null?void 0:t.call(c,d);if((n=c.receivedEvent)==null||n.call(c,this,d),f)return}try{let c=JSON.parse(o);switch(c[0]){case"EVENT":{const d=this.openSubs.get(c[1]),f=c[2];this.verifyEvent(f)&&yE(d.filters,f)&&d.onevent(f);return}case"COUNT":{const d=c[1],f=c[2],h=this.openCountRequests.get(d);h&&(h.resolve(f.count),this.openCountRequests.delete(d));return}case"EOSE":{const d=this.openSubs.get(c[1]);if(!d)return;d.receivedEose();return}case"OK":{const d=c[1],f=c[2],h=c[3],y=this.openEventPublishes.get(d);f?y.resolve(h):y.reject(new Error(h)),this.openEventPublishes.delete(d);return}case"CLOSED":{const d=c[1],f=this.openSubs.get(d);if(!f)return;f.closed=!0,f.close(c[2]);return}case"NOTICE":this.onnotice(c[1]);return;case"AUTH":{this.challenge=c[1],(r=this._onauth)==null||r.call(this,c[1]);return}}}catch{return}}async send(t){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var n;(n=this.ws)==null||n.send(t)})}async auth(t){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const n=await t(EE(this.url,this.challenge)),r=new Promise((o,a)=>{this.openEventPublishes.set(n.id,{resolve:o,reject:a})});return this.send('["AUTH",'+JSON.stringify(n)+"]"),r}async publish(t){const n=new Promise((r,o)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:o})});return this.send('["EVENT",'+JSON.stringify(t)+"]"),n}async count(t,n){this.serial++;const r=(n==null?void 0:n.id)||"count:"+this.serial,o=new Promise((a,c)=>{this.openCountRequests.set(r,{resolve:a,reject:c})});return this.send('["COUNT","'+r+'",'+JSON.stringify(t)+"]"),o}subscribe(t,n){const r=this.prepareSubscription(t,n);return r.fire(),r}prepareSubscription(t,n){this.serial++;const r=n.id||"sub:"+this.serial,o=new SE(this,r,t,n);return this.openSubs.set(r,o),o}close(){var t;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(t=this.ws)==null||t.close()}_onmessage(t){this.incomingMessageQueue.enqueue(t.data),this.queueRunning||this.runQueue()}},SE=class{constructor(t,n,r,o){he(this,"relay"),he(this,"id"),he(this,"closed",!1),he(this,"eosed",!1),he(this,"filters"),he(this,"alreadyHaveEvent"),he(this,"receivedEvent"),he(this,"onevent"),he(this,"oneose"),he(this,"onclose"),he(this,"eoseTimeout"),he(this,"eoseTimeoutHandle"),this.relay=t,this.filters=r,this.id=n,this.alreadyHaveEvent=o.alreadyHaveEvent,this.receivedEvent=o.receivedEvent,this.eoseTimeout=o.eoseTimeout||t.baseEoseTimeout,this.oneose=o.oneose,this.onclose=o.onclose,this.onevent=o.onevent||(a=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,a)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var t;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(t=this.oneose)==null||t.call(this))}close(t="closed by caller"){var n;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(n=this.onclose)==null||n.call(this,t)}},$E=class{constructor(e){he(this,"relays",new Map),he(this,"seenOn",new Map),he(this,"trackRelays",!1),he(this,"verifyEvent"),he(this,"trustedRelayURLs",new Set),this.verifyEvent=e.verifyEvent}async ensureRelay(e,t){e=Li(e);let n=this.relays.get(e);return n||(n=new z0(e,{verifyEvent:this.trustedRelayURLs.has(e)?AE:this.verifyEvent}),t!=null&&t.connectionTimeout&&(n.connectionTimeout=t.connectionTimeout),this.relays.set(e,n)),await n.connect(),n}close(e){e.map(Li).forEach(t=>{var n;(n=this.relays.get(t))==null||n.close()})}subscribeMany(e,t,n){this.trackRelays&&(n.receivedEvent=(b,S)=>{let C=this.seenOn.get(S);C||(C=new Set,this.seenOn.set(S,C)),C.add(b)});const r=new Set,o=[],a=[];let c=b=>{var S;a[b]=!0,a.filter(C=>C).length===e.length&&((S=n.oneose)==null||S.call(n),c=()=>{})};const d=[];let f=(b,S)=>{var C;c(b),d[b]=S,d.filter(L=>L).length===e.length&&((C=n.onclose)==null||C.call(n,d),f=()=>{})};const h=b=>{var S;if((S=n.alreadyHaveEvent)!=null&&S.call(n,b))return!0;const C=r.has(b);return r.add(b),C},y=Promise.all(e.map(Li).map(async(b,S,C)=>{if(C.indexOf(b)!==S){f(S,"duplicate url");return}let L;try{L=await this.ensureRelay(b,{connectionTimeout:n.maxWait?Math.max(n.maxWait*.8,n.maxWait-1e3):void 0})}catch(N){f(S,(N==null?void 0:N.message)||String(N));return}let A=L.subscribe(t,{...n,oneose:()=>c(S),onclose:N=>f(S,N),alreadyHaveEvent:h,eoseTimeout:n.maxWait});o.push(A)}));return{async close(){await y,o.forEach(b=>{b.close()})}}}subscribeManyEose(e,t,n){const r=this.subscribeMany(e,t,{...n,oneose(){r.close()}});return r}async querySync(e,t,n){return new Promise(async r=>{const o=[];this.subscribeManyEose(e,[t],{...n,onevent(a){o.push(a)},onclose(a){r(o)}})})}async get(e,t,n){t.limit=1;const r=await this.querySync(e,t,n);return r.sort((o,a)=>a.created_at-o.created_at),r[0]||null}publish(e,t){return e.map(Li).map(async(n,r,o)=>o.indexOf(n)!==r?Promise.reject("duplicate url"):(await this.ensureRelay(n)).publish(t))}},xE=class extends $E{constructor(){super({verifyEvent:wE})}};const Qi=Symbol("store-raw"),Tn=Symbol("store-node"),rn=Symbol("store-has"),U0=Symbol("store-self");function M0(e){let t=e[Dt];if(!t&&(Object.defineProperty(e,Dt,{value:t=new Proxy(e,PE)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,a=n.length;o<a;o++){const c=n[o];r[c].get&&Object.defineProperty(e,c,{enumerable:r[c].enumerable,get:r[c].get.bind(t)})}}return t}function Xn(e){let t;return e!=null&&typeof e=="object"&&(e[Dt]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function er(e,t=new Set){let n,r,o,a;if(n=e!=null&&e[Qi])return n;if(!Xn(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let c=0,d=e.length;c<d;c++)o=e[c],(r=er(o,t))!==o&&(e[c]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const c=Object.keys(e),d=Object.getOwnPropertyDescriptors(e);for(let f=0,h=c.length;f<h;f++)a=c[f],!d[a].get&&(o=e[a],(r=er(o,t))!==o&&(e[a]=r))}return e}function di(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function ko(e,t,n){if(e[t])return e[t];const[r,o]=ut(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function TE(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Dt||t===Tn||(delete n.value,delete n.writable,n.get=()=>e[Dt][t]),n}function pd(e){ci()&&ko(di(e,Tn),U0)()}function j0(e){return pd(e),Reflect.ownKeys(e)}const PE={get(e,t,n){if(t===Qi)return e;if(t===Dt)return n;if(t===Yi)return pd(e),n;const r=di(e,Tn),o=r[t];let a=o?o():e[t];if(t===Tn||t===rn||t==="__proto__")return a;if(!o){const c=Object.getOwnPropertyDescriptor(e,t);ci()&&(typeof a!="function"||e.hasOwnProperty(t))&&!(c&&c.get)&&(a=ko(r,t,a)())}return Xn(a)?M0(a):a},has(e,t){return t===Qi||t===Dt||t===Yi||t===Tn||t===rn||t==="__proto__"?!0:(ci()&&ko(di(e,rn),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:j0,getOwnPropertyDescriptor:TE};function Mt(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],a=e.length;n===void 0?(delete e[t],e[rn]&&e[rn][t]&&o!==void 0&&e[rn][t].$()):(e[t]=n,e[rn]&&e[rn][t]&&o===void 0&&e[rn][t].$());let c=di(e,Tn),d;if((d=ko(c,t,o))&&d.$(()=>n),Array.isArray(e)&&e.length!==a){for(let f=e.length;f<a;f++)(d=c[f])&&d.$();(d=ko(c,"length",a))&&d.$(e.length)}(d=c[U0])&&d.$()}function H0(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];Mt(e,o,t[o])}}function BE(e,t){if(typeof t=="function"&&(t=t(e)),t=er(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const o=t[n];e[n]!==o&&Mt(e,n,o)}Mt(e,"length",r)}else H0(e,t)}function Ci(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const c=typeof r,d=Array.isArray(e);if(Array.isArray(r)){for(let f=0;f<r.length;f++)Ci(e,[r[f]].concat(t),n);return}else if(d&&c==="function"){for(let f=0;f<e.length;f++)r(e[f],f)&&Ci(e,[f].concat(t),n);return}else if(d&&c==="object"){const{from:f=0,to:h=e.length-1,by:y=1}=r;for(let b=f;b<=h;b+=y)Ci(e,[b].concat(t),n);return}else if(t.length>1){Ci(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let a=t[0];typeof a=="function"&&(a=a(o,n),a===o)||r===void 0&&a==null||(a=er(a),r===void 0||Xn(o)&&Xn(a)&&!Array.isArray(a)?H0(o,a):Mt(e,r,a))}function IE(...[e,t]){const n=er(e||{}),r=Array.isArray(n),o=M0(n);function a(...c){Ko(()=>{r&&c.length===1?BE(n,c[0]):Ci(n,c)})}return[o,a]}function LE(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||n.set||!n.configurable||t===Dt||t===Tn||(delete n.value,delete n.writable,n.get=()=>e[Dt][t],n.set=r=>e[Dt][t]=r),n}const CE={get(e,t,n){if(t===Qi)return e;if(t===Dt)return n;if(t===Yi)return pd(e),n;const r=di(e,Tn),o=r[t];let a=o?o():e[t];if(t===Tn||t===rn||t==="__proto__")return a;if(!o){const c=Object.getOwnPropertyDescriptor(e,t),d=typeof a=="function";if(ci()&&(!d||e.hasOwnProperty(t))&&!(c&&c.get))a=ko(r,t,a)();else if(a!=null&&d&&a===Array.prototype[t])return(...f)=>Ko(()=>Array.prototype[t].apply(n,f))}return Xn(a)?D0(a):a},has(e,t){return t===Qi||t===Dt||t===Yi||t===Tn||t===rn||t==="__proto__"?!0:(ci()&&ko(di(e,rn),t)(),t in e)},set(e,t,n){return Ko(()=>Mt(e,t,er(n))),!0},deleteProperty(e,t){return Ko(()=>Mt(e,t,void 0,!0)),!0},ownKeys:j0,getOwnPropertyDescriptor:LE};function D0(e){let t=e[Dt];if(!t){Object.defineProperty(e,Dt,{value:t=new Proxy(e,CE)});const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,a=n.length;o<a;o++){const c=n[o];if(r[c].get){const d=r[c].get.bind(t);Object.defineProperty(e,c,{get:d})}if(r[c].set){const d=r[c].set;Object.defineProperty(e,c,{set:h=>Ko(()=>d.call(t,h))})}}}return t}function gd(e,t){const n=er(e||{});return D0(n)}const wl=Symbol("store-root");function Do(e,t,n,r,o){const a=t[n];if(e===a)return;if(n!==wl&&(!Xn(e)||!Xn(a)||o&&e[o]!==a[o])){Mt(t,n,e);return}if(Array.isArray(e)){if(e.length&&a.length&&(!r||o&&e[0]&&e[0][o]!=null)){let f,h,y,b,S,C,L,A;for(y=0,b=Math.min(a.length,e.length);y<b&&(a[y]===e[y]||o&&a[y]&&e[y]&&a[y][o]===e[y][o]);y++)Do(e[y],a,y,r,o);const N=new Array(e.length),M=new Map;for(b=a.length-1,S=e.length-1;b>=y&&S>=y&&(a[b]===e[S]||o&&a[y]&&e[y]&&a[b][o]===e[S][o]);b--,S--)N[S]=a[b];if(y>S||y>b){for(h=y;h<=S;h++)Mt(a,h,e[h]);for(;h<e.length;h++)Mt(a,h,N[h]),Do(e[h],a,h,r,o);a.length>e.length&&Mt(a,"length",e.length);return}for(L=new Array(S+1),h=S;h>=y;h--)C=e[h],A=o&&C?C[o]:C,f=M.get(A),L[h]=f===void 0?-1:f,M.set(A,h);for(f=y;f<=b;f++)C=a[f],A=o&&C?C[o]:C,h=M.get(A),h!==void 0&&h!==-1&&(N[h]=a[f],h=L[h],M.set(A,h));for(h=y;h<e.length;h++)h in N?(Mt(a,h,N[h]),Do(e[h],a,h,r,o)):Mt(a,h,e[h])}else for(let f=0,h=e.length;f<h;f++)Do(e[f],a,f,r,o);a.length>e.length&&Mt(a,"length",e.length);return}const c=Object.keys(e);for(let f=0,h=c.length;f<h;f++)Do(e[c[f]],a,c[f],r,o);const d=Object.keys(a);for(let f=0,h=d.length;f<h;f++)e[d[f]]===void 0&&Mt(a,d[f],void 0)}function OE(e,t={}){const{merge:n,key:r="id"}=t,o=er(e);return a=>{if(!Xn(a)||!Xn(o))return o;const c=Do(o,{[wl]:a},wl,n,r);return c===void 0?a:c}}const Zo=new xE,be=gd({rootEventIds:[],filter:{},profiles:()=>[]}),Ot=gd({}),NE=["reply","likes","zaps","publish","watch","replyAnonymously","hideContent"],RE=e=>NE.includes(e);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mi(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function sr(...e){const t=(o,a)=>c=>o(a(c)),n=Array.from(e).reverse().reduce((o,a)=>o?t(o,a.encode):a.encode,void 0),r=e.reduce((o,a)=>o?t(o,a.decode):a.decode,void 0);return{encode:n,decode:r}}function ar(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(mi(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function cr(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Za(e,t="="){if(mi(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of n)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function V0(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function ip(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],a=Array.from(e);for(a.forEach(c=>{if(mi(c),c<0||c>=t)throw new Error(`Wrong integer: ${c}`)});;){let c=0,d=!0;for(let f=r;f<a.length;f++){const h=a[f],y=t*c+h;if(!Number.isSafeInteger(y)||t*c/t!==c||y-h!==t*c)throw new Error("convertRadix: carry overflow");if(c=y%n,a[f]=Math.floor(y/n),!Number.isSafeInteger(a[f])||a[f]*n+c!==y)throw new Error("convertRadix: carry overflow");if(d)a[f]?d=!1:r=f;else continue}if(o.push(c),d)break}for(let c=0;c<e.length-1&&e[c]===0;c++)o.push(0);return o.reverse()}const q0=(e,t)=>t?q0(t,e%t):e,fa=(e,t)=>e+(t-q0(e,t));function bl(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(fa(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${fa(t,n)}`);let o=0,a=0;const c=2**n-1,d=[];for(const f of e){if(mi(f),f>=2**t)throw new Error(`convertRadix2: invalid data word=${f} from=${t}`);if(o=o<<t|f,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=n;a-=n)d.push((o>>a-n&c)>>>0);o&=2**a-1}if(o=o<<n-a&c,!r&&a>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&a>0&&d.push(o>>>0),d}function zE(e){return mi(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return ip(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(ip(t,e,2**8))}}}function Yr(e,t=!1){if(mi(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(fa(8,e)>32||fa(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return bl(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(bl(n,e,8,t))}}}function sp(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}const UE=sr(Yr(4),ar("0123456789ABCDEF"),cr("")),ME=sr(Yr(5),ar("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Za(5),cr(""));sr(Yr(5),ar("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Za(5),cr(""));sr(Yr(5),ar("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),cr(""),V0(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const jE=sr(Yr(6),ar("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Za(6),cr("")),HE=sr(Yr(6),ar("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Za(6),cr("")),wd=e=>sr(zE(58),ar(e),cr("")),ml=wd("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");wd("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");wd("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const ap=[0,2,3,5,6,7,9,10,11],DE={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=ml.encode(r).padStart(ap[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=ap.indexOf(r.length),a=ml.decode(r);for(let c=0;c<a.length-o;c++)if(a[c]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(a.slice(a.length-o)))}return Uint8Array.from(t)}},yl=sr(ar("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),cr("")),cp=[996825010,642813549,513874426,1027748829,705979059];function Ti(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<cp.length;r++)(t>>r&1)===1&&(n^=cp[r]);return n}function up(e,t,n=1){const r=e.length;let o=1;for(let a=0;a<r;a++){const c=e.charCodeAt(a);if(c<33||c>126)throw new Error(`Invalid prefix (${e})`);o=Ti(o)^c>>5}o=Ti(o);for(let a=0;a<r;a++)o=Ti(o)^e.charCodeAt(a)&31;for(let a of t)o=Ti(o)^a;for(let a=0;a<6;a++)o=Ti(o);return o^=n,yl.encode(bl([o%2**30],30,5,!1))}function F0(e){const t=e==="bech32"?1:734539939,n=Yr(5),r=n.decode,o=n.encode,a=sp(r);function c(y,b,S=90){if(typeof y!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof y}`);if(!Array.isArray(b)||b.length&&typeof b[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof b}`);const C=y.length+7+b.length;if(S!==!1&&C>S)throw new TypeError(`Length ${C} exceeds limit ${S}`);return y=y.toLowerCase(),`${y}1${yl.encode(b)}${up(y,b,t)}`}function d(y,b=90){if(typeof y!="string")throw new Error(`bech32.decode input should be string, not ${typeof y}`);if(y.length<8||b!==!1&&y.length>b)throw new TypeError(`Wrong string length: ${y.length} (${y}). Expected (8..${b})`);const S=y.toLowerCase();if(y!==S&&y!==y.toUpperCase())throw new Error("String must be lowercase or uppercase");y=S;const C=y.lastIndexOf("1");if(C===0||C===-1)throw new Error('Letter "1" must be present between prefix and data only');const L=y.slice(0,C),A=y.slice(C+1);if(A.length<6)throw new Error("Data must be at least 6 characters long");const N=yl.decode(A).slice(0,-6),M=up(L,N,t);if(!A.endsWith(M))throw new Error(`Invalid checksum in ${y}: expected "${M}"`);return{prefix:L,words:N}}const f=sp(d);function h(y){const{prefix:b,words:S}=d(y,!1);return{prefix:b,words:S,bytes:r(S)}}return{encode:c,decode:d,decodeToBytes:h,decodeUnsafe:f,fromWords:r,fromWordsUnsafe:a,toWords:o}}const fi=F0("bech32");F0("bech32m");const VE={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},qE=sr(Yr(4),ar("0123456789abcdef"),cr(""),V0(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),FE={utf8:VE,hex:qE,base16:UE,base32:ME,base64:jE,base64url:HE,base58:ml,base58xmr:DE};`${Object.keys(FE).join(", ")}`;var Pi=new TextDecoder("utf-8");new TextEncoder;var W0=5e3;function Ms(e){var t,n,r,o,a,c,d,f;let{prefix:h,words:y}=fi.decode(e,W0),b=new Uint8Array(fi.fromWords(y));switch(h){case"nprofile":{let S=Ps(b);if(!((t=S[0])!=null&&t[0]))throw new Error("missing TLV 0 for nprofile");if(S[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Ye(S[0][0]),relays:S[1]?S[1].map(C=>Pi.decode(C)):[]}}}case"nevent":{let S=Ps(b);if(!((n=S[0])!=null&&n[0]))throw new Error("missing TLV 0 for nevent");if(S[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(S[2]&&S[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(S[3]&&S[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Ye(S[0][0]),relays:S[1]?S[1].map(C=>Pi.decode(C)):[],author:(r=S[2])!=null&&r[0]?Ye(S[2][0]):void 0,kind:(o=S[3])!=null&&o[0]?parseInt(Ye(S[3][0]),16):void 0}}}case"naddr":{let S=Ps(b);if(!((a=S[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((c=S[2])!=null&&c[0]))throw new Error("missing TLV 2 for naddr");if(S[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((d=S[3])!=null&&d[0]))throw new Error("missing TLV 3 for naddr");if(S[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Pi.decode(S[0][0]),pubkey:Ye(S[2][0]),kind:parseInt(Ye(S[3][0]),16),relays:S[1]?S[1].map(C=>Pi.decode(C)):[]}}}case"nrelay":{let S=Ps(b);if(!((f=S[0])!=null&&f[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Pi.decode(S[0][0])}}case"nsec":return{type:h,data:b};case"npub":case"note":return{type:h,data:Ye(b)};default:throw new Error(`unknown prefix ${h}`)}}function Ps(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],a=n.slice(2,2+o);if(n=n.slice(2+o),a.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(a)}return t}function K0(e){return G0("npub",I0(e))}function lp(e){return G0("note",I0(e))}function WE(e,t){let n=fi.toWords(t);return fi.encode(e,n,W0)}function G0(e,t){return WE(e,t)}var Bi=new TextDecoder("utf-8");new TextEncoder;var KE=5e3,GE=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Z0(e){var t,n,r,o,a,c,d,f;let{prefix:h,words:y}=fi.decode(e,KE),b=new Uint8Array(fi.fromWords(y));switch(h){case"nprofile":{let S=Bs(b);if(!((t=S[0])!=null&&t[0]))throw new Error("missing TLV 0 for nprofile");if(S[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Ye(S[0][0]),relays:S[1]?S[1].map(C=>Bi.decode(C)):[]}}}case"nevent":{let S=Bs(b);if(!((n=S[0])!=null&&n[0]))throw new Error("missing TLV 0 for nevent");if(S[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(S[2]&&S[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(S[3]&&S[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Ye(S[0][0]),relays:S[1]?S[1].map(C=>Bi.decode(C)):[],author:(r=S[2])!=null&&r[0]?Ye(S[2][0]):void 0,kind:(o=S[3])!=null&&o[0]?parseInt(Ye(S[3][0]),16):void 0}}}case"naddr":{let S=Bs(b);if(!((a=S[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((c=S[2])!=null&&c[0]))throw new Error("missing TLV 2 for naddr");if(S[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((d=S[3])!=null&&d[0]))throw new Error("missing TLV 3 for naddr");if(S[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Bi.decode(S[0][0]),pubkey:Ye(S[2][0]),kind:parseInt(Ye(S[3][0]),16),relays:S[1]?S[1].map(C=>Bi.decode(C)):[]}}}case"nrelay":{let S=Bs(b);if(!((f=S[0])!=null&&f[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Bi.decode(S[0][0])}}case"nsec":return{type:h,data:b};case"npub":case"note":return{type:h,data:Ye(b)};default:throw new Error(`unknown prefix ${h}`)}}function Bs(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],a=n.slice(2,2+o);if(n=n.slice(2+o),a.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(a)}return t}var ZE=new RegExp(`nostr:(${GE.source})`),Y0=()=>new RegExp(`\\b${ZE.source}\\b`,"g");function*YE(e){const t=e.matchAll(Y0());for(const n of t)try{const[r,o]=n;yield{uri:r,value:o,decoded:Z0(o),start:n.index,end:n.index+r.length}}catch{}}function JE(e,t){return e.replaceAll(Y0(),(n,r)=>t({uri:n,value:r,decoded:Z0(r)}))}var QE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function XE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var J0={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(QE,function(){function n(d){return d.replace(/\\([(){}[\]#*+\-.!_\\])/g,function(f,h){return String.fromCharCode(1,o.indexOf(h)+a)}).replace(/(\*\*|__|~~)(\S(?:[\s\S]*?\S)?)\1/g,function(f,h,y){return h==="~~"?"<del>"+y+"</del>":"<b>"+y+"</b>"}).replace(/(\n|^|\W)([_\*])(\S(?:[\s\S]*?\S)?)\2(\W|$|\n)/g,function(f,h,y,b,S){return h+"<i>"+b+"</i>"+S}).replace(/(!?)\[([^\]<>]+)\]\((\+?)([^ \)<>]+)(?: "([^\(\)\"]+)")?\)/g,function(f,h,y,b,S,C){var L=C?' title="'+C+'"':"";return h?'<img src="'+c.href(S)+'" alt="'+y+'"'+L+"/>":(b&&(L+=' target="_blank"'),'<a href="'+c.href(S)+'"'+L+">"+y+"</a>")})}function r(d){return d.replace(/\x01([\x0f-\x1c])/g,function(f,h){return o.charAt(h.charCodeAt(0)-a)})}var o="\\[!]#{()}*+-._",a=16,c=function(d){return d.replace(/.+(?:\n.+)*/g,function(f){var h=/^\s{4}([^]*)$/.exec(f);if(h)return"<pre><code>"+h[1].replace(/\n    /g,`
`)+"</code></pre>";for(var y,b=[],S=n(f).split(`
`),C=0,L=S.length;L>C;++C){var A=S[C],N=/^\s{0,3}(\#{1,6})\s+(.*?)\s*#*\s*$/.exec(A);if(N)b.push(y=[N[2],"h",N[1].length]);else{var M=/^(\s*)(?:[-*]|(\d[.)])) (.+)$/.exec(A);M?b.push(y=[M[3],M[2]?"ol":"ul",M[1].length]):/^\s{0,3}([-])(\s*\1){2,}\s*$/.test(A)?b.push(y=["","hr"]):y&&y[1]!=="hr"&&y[1]!=="h"?y[0]+=`
`+A:b.push(y=[A,"p",""])}}var B="",O=[];for(C=0,L=b.length;L>C;++C){y=b[C];var l=y[0],w=y[1],p=y[2];if(w==="ul"||w==="ol")!O.length||p>O[0][1]?(O.unshift([w,p]),B+="<"+O[0][0]+"><li>"+l):O.length>1&&p<=O[1][1]?(B+="</li></"+O.shift()[0]+">",--C):B+="</li><li>"+l;else{for(;O.length;)B+="</li></"+O.shift()[0]+">";B+=w==="hr"?"<hr/>":"<"+w+p+c.headAttrs(p,l)+">"+l+"</"+w+p+">"}}for(;O.length;)B+="</li></"+O.shift()[0]+">";return r(B)})};return c.href=function(d){return d},c.headAttrs=function(d,f){return""},c})})(J0);var e4=J0.exports;const t4=XE(e4);function n4(e){return async()=>new Promise(t=>{setTimeout(t,e)})}function r4(e,{delay:t=void 0}={}){if(typeof t!="number"&&t!==void 0)throw new TypeError(`Expected \`interval\` to be of type \`number\` but received type \`${typeof t}\``);const n=t===void 0?async()=>{}:n4(t);let r=[];return o=>{r.push(o),r.length===1&&(async()=>(await n(),e(r),r=[]))()}}const o4=(e,t)=>t.some(n=>e instanceof n);let dp,fp;function i4(){return dp||(dp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function s4(){return fp||(fp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Q0=new WeakMap,vl=new WeakMap,X0=new WeakMap,Eu=new WeakMap,bd=new WeakMap;function a4(e){const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("success",a),e.removeEventListener("error",c)},a=()=>{n(Lr(e.result)),o()},c=()=>{r(e.error),o()};e.addEventListener("success",a),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&Q0.set(n,e)}).catch(()=>{}),bd.set(t,e),t}function c4(e){if(vl.has(e))return;const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",c),e.removeEventListener("abort",c)},a=()=>{n(),o()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",a),e.addEventListener("error",c),e.addEventListener("abort",c)});vl.set(e,t)}let _l={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return vl.get(e);if(t==="objectStoreNames")return e.objectStoreNames||X0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lr(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function u4(e){_l=e(_l)}function l4(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(ku(this),t,...n);return X0.set(r,t.sort?t.sort():[t]),Lr(r)}:s4().includes(e)?function(...t){return e.apply(ku(this),t),Lr(Q0.get(this))}:function(...t){return Lr(e.apply(ku(this),t))}}function d4(e){return typeof e=="function"?l4(e):(e instanceof IDBTransaction&&c4(e),o4(e,i4())?new Proxy(e,_l):e)}function Lr(e){if(e instanceof IDBRequest)return a4(e);if(Eu.has(e))return Eu.get(e);const t=d4(e);return t!==e&&(Eu.set(e,t),bd.set(t,e)),t}const ku=e=>bd.get(e);function f4(e,t,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const c=indexedDB.open(e,t),d=Lr(c);return r&&c.addEventListener("upgradeneeded",f=>{r(Lr(c.result),f.oldVersion,f.newVersion,Lr(c.transaction),f)}),n&&c.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const h4=["get","getKey","getAll","getAllKeys","count"],p4=["put","add","delete","clear"],Au=new Map;function hp(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Au.get(t))return Au.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=p4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||h4.includes(n)))return;const a=async function(c,...d){const f=this.transaction(c,o?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(d.shift())),(await Promise.all([h[n](...d),o&&f.done]))[0]};return Au.set(t,a),a}u4(e=>({...e,get:(t,n,r)=>hp(t,n)||e.get(t,n,r),has:(t,n)=>!!hp(t,n)||e.has(t,n)}));function g4(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)r[0]==="e"&&r[1]&&n.push(r),r[0]==="p"&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const o=n[r],[a,c,d,f]=o,h={id:c,relays:d?[d]:[]},y=r===0,b=r===n.length-1;if(f==="root"){t.root=h;continue}if(f==="reply"){t.reply=h;continue}if(f==="mention"){t.mentions.push(h);continue}if(y){t.root=h;continue}if(b){t.reply=h;continue}t.mentions.push(h)}return t}const Oi={events:"id",aggregates:["eid","k"],profiles:["pk"],relays:["n","a"]},w4=async(e,t)=>{if(t<=1){const a=[...e.objectStoreNames];await Promise.all(a.map(c=>e.deleteObjectStore(c)))}const n=e.createObjectStore("events",{keyPath:Oi.events});n.createIndex("a","a"),n.createIndex("ro","ro"),n.createIndex("r","r"),n.createIndex("d","d"),n.createIndex("k","k"),e.createObjectStore("aggregates",{keyPath:Oi.aggregates}),e.createObjectStore("profiles",{keyPath:Oi.profiles}).createIndex("l","l"),e.createObjectStore("relays",{keyPath:Oi.relays}).createIndex("a","a")},ha=e=>{var t,n;const r=g4(e),o=e.tags.find(A=>A[0]==="a"),a=o&&o[1],c=o&&o[3]==="mention",d=e.tags.find(A=>A[0]==="r"),f=d&&d[1],h=e.tags.filter(A=>A[0]==="t"),y=[...new Set(h.map(A=>A[1]))],b=e.tags.find(A=>A[0]==="d"),S=b&&b[1],C=e.tags.find(A=>A[0]==="title"),L=C&&C[1];return{id:e.id??"",k:e.kind,c:e.content,ts:e.created_at,pk:e.pubkey,ro:(t=r.root)==null?void 0:t.id,re:(n=r.reply)==null?void 0:n.id,me:r.mentions.map(A=>A.id),p:r.profiles.map(A=>A.pubkey),a,am:c,r:f,t:y,d:S,tl:L}},b4=()=>({});let Yo=b4(),pp=!0,gp;const Ya=async()=>{if(pp!==!1)try{return gp||(gp=await f4("zapthreads",2,{upgrade:w4}))}catch{pp=!1}},Is=e=>{const t=De(Br(e,()=>{const[n,r,o]=e(),a=()=>hi(n,r,o),[c,{mutate:d}]=t0(()=>Ui[n],a,{initialValue:[],storage:ew});return hi(n,r,o).then(d),c}));return()=>t()()},wp=e=>{const t=De(Br(e,()=>{const[n,r,o]=e(),a=()=>Jo(n,r,o),[c,{mutate:d}]=t0(()=>Ui[n],a,{initialValue:void 0,storage:ew});return Jo(n,r,o).then(d),c}));return()=>t()()},hi=async(e,t,n)=>{const r=await Ya();if(!r){const o=Yo[e];if(o){if(n){const a=Array.isArray(t)?t:[t];return Object.values(o).filter(c=>a.includes(c[n.index]))}return Object.values(o)}return[]}if(t&&n){if(Array.isArray(t)){const o=t.map(c=>r.getAllFromIndex(e,n.index,c));return(await Promise.all(o)).flat()}return r.getAllFromIndex(e,n.index,t)}return r.getAll(e)},Jo=async(e,t,n)=>{const r=await Ya();if(!r){const o=Yo[e];if(o){if(n)return Object.values(o).find(c=>c[n.index]===t);const a=(t.lower?t.lower:t).toString();return o[a]}return}return n?r.getFromIndex(e,n.index,t):r.get(e,t)},Su={},bp=(e,t)=>{Yo[e]??(Yo[e]={});for(const n of t){let r=Oi[e];r=Array.isArray(r)?r:[r];const o=r.map(a=>n[a]).join(",");Yo[e][o]=n}},sn=async(e,t,n={immediate:!1})=>{const r=await Ya();if(n.immediate){r?r.put(e,t):bp(e,[t]),Ui[e]=+new Date;return}Su[e]||(Su[e]=r4(async o=>{if(!r){bp(e,o),Ui[e]=+new Date;return}const a=r.transaction(e,"readwrite");await Promise.all([...o.map(d=>a.store.put(d)),a.done])&&(Ui[e]=+new Date)},{delay:96})),Su[e](t)},m4=async()=>{const e=await Ya();if(!e){Yo={};return}const t=[...e.objectStoreNames];await Promise.all(t.map(n=>e.clear(n)))},Ui=gd({});function ew(e){const[t,n]=IE({value:e});return[()=>t.value,r=>{const o=er(t.value);return typeof r=="function"&&(r=r(o)),n("value",OE(r)),t.value}]}const tw=async(e,t,n)=>{const r=+new Date,o=216e5,a=[...new Set(e)].filter(d=>{const f=n.find(h=>h.pk===d);return!(f!=null&&f.l&&f.l>r-o)}).filter(d=>!!d);if(a.length===0)return;const c=await Zo.querySync(t,{kinds:[0],authors:a});for(const d of a){const f=c.find(h=>h.pubkey===d);if(f){const h=JSON.parse(f.content),y=f.pubkey,b={pk:y,ts:f.created_at,i:h.image||h.picture,n:h.displayName||h.display_name||h.name},S=n.find(C=>C.pk===y);!S||!(S!=null&&S.n)||S.ts<b.ts?sn("profiles",{...b,l:r}):sn("profiles",{...S,l:r})}}},y4=async(e,t)=>{const r=(await hi("relays",e.value,{index:"a"})).filter(o=>t.includes(o.n)).map(o=>o.l);return r.length>0?Math.min(...r)+1:0},v4=async(e,t)=>{const n={};for(const o of t){const a=Zo.seenOn.get(o.id);if(a)for(const c of a)o.ts>(n[c.url]||0)&&(n[c.url]=o.ts)}const r=await hi("relays",e.value,{index:"a"});for(const o in n){const a=r.find(c=>c.n===o);a?n[o]>a.l&&(a.l=n[o],sn("relays",a)):sn("relays",{n:o,a:e.value,l:n[o]})}},_4=new RegExp("(?<=^|\\s)https?:\\/\\/[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&\\/\\/=]*)","gi"),E4=/(\S*(?:png|jpg|jpeg|gif|webp))/gi,k4=new RegExp("(?<=^|\\s)@?((naddr|npub|nevent|note)[a-z0-9]{20,})","g"),A4=/\`(.*?)\`/g,S4=/\B\#([a-zA-Z0-9]+\b)(?!;)/g,nw=(e,t,n=[])=>{let r=e.c;const o=t.urlPrefixes,a=t.profiles;r=r.replace(_4,d=>d.match(E4)?`![image](${d})`:`[${d}](${d})`);const c=[...new Set(e.t)];if(c.length>0){const d=new RegExp(`(^|\\s)\\#(${c.join("|")})`,"gi");r=r.replaceAll(d,`$1[#$2](${o.tag}$2)`)}return r=r.replaceAll(k4,"nostr:$1"),r=JE(r,({decoded:d,value:f})=>{switch(d.type){case"nprofile":let h=a().find(A=>A.pk===d.data.pubkey);return`[@${(h==null?void 0:h.n)||ho(f)}](${o.nprofile}${f})`;case"npub":let b=a().find(A=>A.pk===d.data);return`[@${(b==null?void 0:b.n)||ho(f)}](${o.npub}${f})`;case"note":return`[@${ho(f)}](${o.note}${f})`;case"naddr":const C=d.data,L=n.find(A=>A.pk===C.pubkey&&A.d===C.identifier);return L&&L.tl?`[${L.tl}](${o.naddr}${f})`:`[@${ho(f)}](${o.naddr}${f})`;case"nevent":return`[@${ho(f)}](${o.nevent}${f})`;default:return f}}),r=r.replaceAll(A4,"<code>$1</code>"),t4(r.trim())},$4=e=>{const t=[],n=YE(e);for(const a of n){if(a.decoded.type==="npub"&&t.push(["p",a.decoded.data]),a.decoded.type==="naddr"){const c=a.decoded.data;t.push(["a",`${c.kind}:${c.pubkey}:${c.identifier}`,"","mention"])}a.decoded.type==="nevent"&&t.push(["e",a.decoded.data.id]),a.decoded.type==="note"&&t.push(["e",a.decoded.data])}const r=e.matchAll(S4),o=new Set([...r].map(a=>a[1].toLowerCase()));for(const a of o)t.push(["t",a]);return t},x4=(e="")=>{const t={naddr:"https://nostr.com/",npub:"https://nostr.com/",nprofile:"https://nostr.com/",nevent:"https://nostr.com/",note:"https://nostr.com/",tag:"https://snort.social/t/"};for(const n of e.split(",")){const[r,o]=n.split(":");o&&(t[r]=`https://${o}`)}return t},ho=e=>e.substring(0,8)+"..."+e.substring(e.length-4),js=e=>e.sort((t,n)=>(t.ts||0)>=(n.ts||0)?-1:1),gn=20,Hs='data:image/svg+xml;utf-8,<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><circle cx="512" cy="512" r="512" fill="%23333" fill-rule="evenodd" /></svg>',T4=e=>{const t=new Date,n=Math.floor((t.getTime()-e)/1e3);if(n<60)return"now";if(n<3600){const r=Math.floor(n/60);return`${r} minute${r===1?"":"s"} ago`}if(n<=86400){const r=Math.floor(n/3600);return`${r} hour${r===1?"":"s"} ago`}if(n<=604800){const r=Math.floor(n/86400);return`${r} day${r===1?"":"s"} ago`}if(n>604800){const r=new Date(e),o=r.toLocaleDateString("en-us",{day:"numeric",month:"long"}),a=r.getFullYear()===t.getFullYear()?"":" "+r.getFullYear();return"on "+o+a}return""},P4=e=>e<1e4?e.toString():e<1e6?Math.round(e/1e3)+"k":Math.round(e/1e6)+"M",md=e=>e.children.reduce((t,n)=>t+md(n),e.children.length),B4=/\/+$/,I4=(e,t=!0)=>{const n=new URL(e);return n.hash="",t&&(n.pathname=n.pathname.replace(B4,"")),n.toString()},rw=(e,t)=>{let n=e.map(o=>({...o,children:[]}));const r=new Set(n.filter(o=>{if(t){const a=t.id===(o.re||o.ro);return a&&(o.parent=t),a}return!n.find(a=>a.id===(o.re||o.ro))}));n=n.filter(o=>!r.has(o));for(let o of r)o.children.push(...rw(n,o));return[...r]};var zo=Symbol("verified"),L4=e=>e instanceof Object;function C4(e){if(!L4(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var O4=new TextEncoder,N4=class{generateSecretKey(){return Rt.utils.randomPrivateKey()}getPublicKey(t){return Ye(Rt.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=Ye(Rt.getPublicKey(n)),r.id=Mi(r),r.sig=Ye(Rt.sign(Mi(r),n)),r[zo]=!0,r}verifyEvent(t){if(typeof t[zo]=="boolean")return t[zo];const n=Mi(t);if(n!==t.id)return t[zo]=!1,!1;try{const r=Rt.verify(t.sig,n,t.pubkey);return t[zo]=r,r}catch{return t[zo]=!1,!1}}};function R4(e){if(!C4(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Mi(e){let t=hd(O4.encode(R4(e)));return Ye(t)}var Ja=new N4,z4=Ja.generateSecretKey,ow=Ja.getPublicKey,iw=Ja.finalizeEvent;Ja.verifyEvent;var U4=e=>{ai(()=>{const t=e();t&&setTimeout(()=>t.focus())})},Uo=Symbol("verified"),M4=e=>e instanceof Object;function j4(e){if(!M4(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var H4=new TextEncoder;function D4(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var V4=class{constructor(e){he(this,"value"),he(this,"next",null),he(this,"prev",null),this.value=e}},q4=class{constructor(){he(this,"first"),he(this,"last"),this.first=null,this.last=null}enqueue(e){const t=new V4(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const t=this.first;return this.first=null,this.last=null,t.value}const e=this.first;return this.first=e.next,e.value}},F4=class{generateSecretKey(){return Rt.utils.randomPrivateKey()}getPublicKey(e){return Ye(Rt.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=Ye(Rt.getPublicKey(t)),n.id=$u(n),n.sig=Ye(Rt.sign($u(n),t)),n[Uo]=!0,n}verifyEvent(e){if(typeof e[Uo]=="boolean")return e[Uo];const t=$u(e);if(t!==e.id)return e[Uo]=!1,!1;try{const n=Rt.verify(e.sig,t,e.pubkey);return e[Uo]=n,n}catch{return e[Uo]=!1,!1}}};function W4(e){if(!j4(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function $u(e){let t=hd(H4.encode(W4(e)));return Ye(t)}var Qa=new F4;Qa.generateSecretKey;Qa.getPublicKey;Qa.finalizeEvent;var K4=Qa.verifyEvent,G4=22242;function Z4(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(n=>t.id.startsWith(n))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(n=>t.pubkey.startsWith(n)))return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([a,c])=>a===n.slice(1)&&o.indexOf(c)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function Y4(e,t){for(let n=0;n<e.length;n++)if(Z4(e[n],t))return!0;return!1}function J4(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function Q4(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let a=r+1+o;return e.slice(r+1,a)}function X4(e,t){return{kind:G4,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function e6(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var sw;try{sw=WebSocket}catch{}var aw=class{constructor(e,t){he(this,"url"),he(this,"_connected",!1),he(this,"onclose",null),he(this,"onnotice",n=>console.debug(`NOTICE from ${this.url}: ${n}`)),he(this,"_onauth",null),he(this,"baseEoseTimeout",4400),he(this,"connectionTimeout",4400),he(this,"openSubs",new Map),he(this,"connectionTimeoutHandle"),he(this,"connectionPromise"),he(this,"openCountRequests",new Map),he(this,"openEventPublishes",new Map),he(this,"ws"),he(this,"incomingMessageQueue",new q4),he(this,"queueRunning",!1),he(this,"challenge"),he(this,"serial",0),he(this,"verifyEvent"),this.url=D4(e),this.verifyEvent=t.verifyEvent}static async connect(e,t){const n=new aw(e,t);return await n.connect(),n}closeAllSubscriptions(e){for(let[t,n]of this.openSubs)n.close(e);this.openSubs.clear();for(let[t,n]of this.openEventPublishes)n.reject(new Error(e));this.openEventPublishes.clear();for(let[t,n]of this.openCountRequests)n.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;t("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new sw(this.url)}catch(n){t(n);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=n=>{var r;t(n.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var n;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await e6();this.queueRunning=!1}handleNext(){var e,t,n;const r=this.incomingMessageQueue.dequeue();if(!r)return!1;const o=Q4(r);if(o){const a=this.openSubs.get(o);if(!a)return;const c=J4(r,"id"),d=(e=a.alreadyHaveEvent)==null?void 0:e.call(a,c);if((t=a.receivedEvent)==null||t.call(a,this,c),d)return}try{let a=JSON.parse(r);switch(a[0]){case"EVENT":{const c=this.openSubs.get(a[1]),d=a[2];this.verifyEvent(d)&&Y4(c.filters,d)&&c.onevent(d);return}case"COUNT":{const c=a[1],d=a[2],f=this.openCountRequests.get(c);f&&(f.resolve(d.count),this.openCountRequests.delete(c));return}case"EOSE":{const c=this.openSubs.get(a[1]);if(!c)return;c.receivedEose();return}case"OK":{const c=a[1],d=a[2],f=a[3],h=this.openEventPublishes.get(c);d?h.resolve(f):h.reject(new Error(f)),this.openEventPublishes.delete(c);return}case"CLOSED":{const c=a[1],d=this.openSubs.get(c);if(!d)return;d.closed=!0,d.close(a[2]);return}case"NOTICE":this.onnotice(a[1]);return;case"AUTH":{this.challenge=a[1],(n=this._onauth)==null||n.call(this,a[1]);return}}}catch{return}}async send(e){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var t;(t=this.ws)==null||t.send(e)})}async auth(e){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const t=await e(X4(this.url,this.challenge)),n=new Promise((r,o)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:o})});return this.send('["AUTH",'+JSON.stringify(t)+"]"),n}async publish(e){const t=new Promise((n,r)=>{this.openEventPublishes.set(e.id,{resolve:n,reject:r})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;const n=(t==null?void 0:t.id)||"count:"+this.serial,r=new Promise((o,a)=>{this.openCountRequests.set(n,{resolve:o,reject:a})});return this.send('["COUNT","'+n+'",'+JSON.stringify(e)+"]"),r}subscribe(e,t){const n=this.prepareSubscription(e,t);return n.fire(),n}prepareSubscription(e,t){this.serial++;const n=t.id||"sub:"+this.serial,r=new t6(this,n,e,t);return this.openSubs.set(n,r),r}close(){var e;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(e=this.ws)==null||e.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},t6=class{constructor(e,t,n,r){he(this,"relay"),he(this,"id"),he(this,"closed",!1),he(this,"eosed",!1),he(this,"filters"),he(this,"alreadyHaveEvent"),he(this,"receivedEvent"),he(this,"onevent"),he(this,"oneose"),he(this,"onclose"),he(this,"eoseTimeout"),he(this,"eoseTimeoutHandle"),this.relay=e,this.filters=n,this.id=t,this.alreadyHaveEvent=r.alreadyHaveEvent,this.receivedEvent=r.receivedEvent,this.eoseTimeout=r.eoseTimeout||e.baseEoseTimeout,this.oneose=r.oneose,this.onclose=r.onclose,this.onevent=r.onevent||(o=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,o)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var e;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(e=this.oneose)==null||e.call(this))}close(e="closed by caller"){var t;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(t=this.onclose)==null||t.call(this,e)}},cw=class extends aw{constructor(e){super(e,{verifyEvent:K4})}static async connect(e){const t=new cw(e);return await t.connect(),t}};new TextDecoder("utf-8");new TextEncoder;function n6(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}const r6=je("<div class=ztr-comment-info-picture><img>"),o6=je("<div class=ztr-reply-form><textarea></textarea><div class=ztr-reply-controls>"),i6=je("<span>Publishing is disabled"),s6=je("<span class=ztr-reply-error>Error: "),a6=je('<svg class=ztr-spinner viewBox="0 0 50 50"><circle class=path cx=25 cy=25 r=20 fill=none stroke-width=5>'),c6=je("<button class=ztr-reply-button>Reply as "),u6=je("<button class=ztr-reply-button>Reply anonymously"),l6=je("<button class=ztr-reply-login-button>Log in"),d6=je("<li class=ztr-comment-action-like><span> likes"),f6=je("<li class=ztr-comment-action-zap><span> sats"),h6=je("<div class=ztr-comment-new><div class=ztr-comment-body><ul class=ztr-comment-actions>"),uw=e=>{const[t,n]=ut(""),[r,o]=ut(!1),[a,c]=ut(),[d,f]=ut(""),h=()=>be.anchor,y=be.profiles,b=()=>be.relays,S=async()=>{if(!window.nostr){L("Error: No NIP-07 extension!");return}const B=await window.nostr.getPublicKey();Ot.internal={pk:B,signEvent:async O=>window.nostr.signEvent(O)},f(""),Ot.active=Ot.internal};ai(async()=>{if(Ot.active){const B=Ot.active.pk;let O=y().find(l=>l.pk===B);O||(O={pk:B,l:0,ts:0},await sn("profiles",O)),c(O),tw([B],b(),y())}else c()});const C=async(B,O)=>{var l;o(!1),n(""),f(O??""),await sn("events",ha(B),{immediate:!0}),(l=e.onDone)==null||l.call(globalThis)},L=B=>{o(!1),f(`Error: ${B}`)},A=async B=>{let O;if(B)O=Ot.active;else{if(!Ot.anonymous){const R=z4();Ot.anonymous={pk:ow(R),signEvent:async T=>({sig:iw(T,R).sig})}}O=Ot.anonymous}if(!(O!=null&&O.signEvent)){L("Error: User has no signer!");return}const l=t().trim();if(!l)return;const w={kind:1,created_at:Math.round(Date.now()/1e3),content:l,pubkey:O.pk,tags:$4(l)};if(be.anchorAuthor!==w.pubkey&&w.tags.push(["p",be.anchorAuthor]),be.externalAuthor)try{const R=Ms(be.externalAuthor).data;w.tags.push(["p",R])}catch{}if(e.replyTo){const R=await Jo("events",IDBKeyRange.only(e.replyTo));R&&(w.tags.push(["e",R.ro,"","root"]),R.pk!==w.pubkey&&w.tags.push(["p",R.pk])),w.tags.push(["e",e.replyTo,"","reply"])}else{const R=be.version||be.rootEventIds[0];if(R)w.tags.push(["e",R,"","root"]);else if(h().type==="http"){const T=n6(h().value),E={pubkey:O.pk,created_at:Math.round(Date.now()/1e3),kind:8812,tags:[["r",T]],content:`Comments on ${T} `},$={id:Mi(E),...E,...await O.signEvent(E)};sn("events",ha($)),be.disableFeatures.includes("publish")?console.log("Publishing root event disabled",$):Zo.publish(b(),$),be.filter={"#e":[$.id]},w.tags.push(["e",$.id,"","root"])}}h().type==="naddr"&&w.tags.push(["a",h().value,"","root"]);const p=Mi(w),v=await O.signEvent(w),x={id:p,...w,...v};if(o(!0),console.log(JSON.stringify(x,null,2)),be.disableFeatures.includes("publish"))setTimeout(()=>C(x),1e3);else{const R=[];for(const T of b())try{await(await cw.connect(T)).publish(x)}catch(E){console.error(E),R.push(T)}if(R.length===b().length)L("Error: Your comment was not published to any relay");else{const T=`Published to ${R.length}/${b().length} relays (see console for more info)`,E=R.length>0?T:void 0;C(x,E)}R.length=0}},N=e.replyTo!==void 0;let M;return U4(()=>N&&M),(()=>{const B=o6(),O=B.firstChild,l=O.nextSibling;O.addEventListener("change",p=>n(p.target.value));const w=M;return typeof w=="function"?c0(w,O):M=O,O.autofocus=N,xe(l,(()=>{const p=De(()=>!!be.disableFeatures.includes("publish"));return()=>p()&&i6()})(),null),xe(l,(()=>{const p=De(()=>!!d());return()=>p()&&(()=>{const v=s6();return v.firstChild,xe(v,d,null),v})()})(),null),xe(l,hn(sa,{get when(){return!r()},get fallback(){return a6()},get children(){const p=r6(),v=p.firstChild;return on(()=>{var x;return xt(v,"src",((x=a())==null?void 0:x.i)||Hs)}),p}}),null),xe(l,(()=>{const p=De(()=>!!a());return()=>p()&&(()=>{const v=c6();return v.firstChild,v.$$click=()=>A(a()),xe(v,()=>a().n||ho(K0(a().pk)),null),on(()=>v.disabled=r()),v})()})(),null),xe(l,(()=>{const p=De(()=>!a()&&!be.disableFeatures.includes("replyAnonymously"));return()=>p()&&(()=>{const v=u6();return v.$$click=()=>A(),on(()=>v.disabled=r()),v})()})(),null),xe(l,(()=>{const p=De(()=>!a());return()=>p()&&(()=>{const v=l6();return v.$$click=()=>S(),v})()})(),null),on(p=>{const v=r(),x=be.replyPlaceholder||"Add your comment...";return v!==p._v$&&(O.disabled=p._v$=v),x!==p._v$2&&xt(O,"placeholder",p._v$2=x),p},{_v$:void 0,_v$2:void 0}),on(()=>O.value=t()),B})()},p6=()=>{const e=()=>be.anchor,t=wp(()=>["aggregates",IDBKeyRange.only([e().value,9735])]),n=wp(()=>["aggregates",IDBKeyRange.only([e().value,7])]),r=()=>{var a;return((a=t())==null?void 0:a.sum)??0},o=()=>{var a;return((a=n())==null?void 0:a.ids.length)??0};return(()=>{const a=h6(),c=a.firstChild,d=c.firstChild;return xe(d,hn(sa,{get when(){return!be.disableFeatures.includes("likes")},get children(){const f=d6(),h=f.firstChild,y=h.firstChild;return xe(f,j6,h),xe(h,o,y),f}}),null),xe(d,hn(sa,{get when(){return!be.disableFeatures.includes("zaps")},get children(){const f=f6(),h=f.firstChild,y=h.firstChild;return xe(f,M6,h),xe(h,()=>P4(r()),y),f}}),null),xe(c,hn(uw,{}),null),a})()};od(["click"]);function g6(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function mp(e,...t){return typeof e=="function"?e(...t):e}function w6(e){const t={...e},n={...e},r={},o=c=>{let d=r[c];if(!d){if(!ci())return t[c];r[c]=d=ut(t[c],{internal:!0}),delete t[c]}return d[0]()};for(const c in e)Object.defineProperty(n,c,{get:()=>o(c),enumerable:!0});const a=(c,d)=>{const f=r[c];if(f)return f[1](d);c in t&&(t[c]=mp(d,[t[c]]))};return[n,(c,d)=>{if(g6(c)){const f=pn(()=>Object.entries(mp(c,n)));Ko(()=>{for(const[h,y]of f)a(h,()=>y)})}else a(c,d);return n}]}var lw={width:null,height:null};function xu(e){if(!e)return{...lw};const{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function b6(e){const t=typeof e=="function",[n,r]=w6(t?lw:xu(e)),o=new ResizeObserver(([a])=>r(xu(a.target)));return Go(()=>o.disconnect()),t?ai(()=>{const a=e();a&&(r(xu(a)),o.observe(a),Go(()=>o.unobserve(a)))}):(o.observe(e),Go(()=>o.unobserve(e))),n}const m6=je("<div class=ztr-thread>"),y6=je("<li class=ztr-comment-action-reply><span>"),v6=je("<div class=ztr-comment><div class=ztr-comment-body><div class=ztr-comment-info-wrapper><div class=ztr-comment-info><div class=ztr-comment-info-picture><img></div><ul class=ztr-comment-info-items><li class=ztr-comment-info-author><a target=_blank></a><span style=white-space:nowrap;><strong> <!>ed</strong> </span></li><li><a class=ztr-comment-info-dots></a></li></ul></div><ul class=ztr-comment-info-items></ul></div><div class=ztr-comment-text></div><div class=ztr-comment-text></div><ul class=ztr-comment-actions>"),_6=je("<li>"),E6=je("<li> repl"),k6=je("<li><span>"),A6=je("<div class=ztr-info-pane><a target=_blank><small>Event data"),S6=je("<p class=warning><span>This is a <!> that referenced this article in <a>another thread"),$6=je("<p class=warning><span>Article contents may have changed since this <!> was made"),x6=je("<p class=warning><span>Article contents changed since this <!> was made"),T6=je("<div class=ztr-comment-expand><a></a><span>Show full comment"),P6=je("<div class=ztr-comment-replies>"),B6=je('<svg viewBox="0 -6 60 60"xmlns=http://www.w3.org/2000/svg><path d="M 12.6030 50.4905 C 13.3758 50.4905 13.9307 50.1140 14.8621 49.2421 L 20.6483 43.8720 C 19.5188 42.9803 18.6073 41.5733 18.6073 38.3433 L 18.6073 25.2052 C 18.6073 19.1217 22.3129 15.5152 28.3766 15.5152 L 42.2479 15.5152 L 42.2281 14.7622 C 41.9306 10.6999 39.2557 8.0643 34.7177 8.0643 L 7.5301 8.0643 C 2.9922 8.0643 0 10.7791 0 15.4954 L 0 34.9548 C 0 39.6710 2.9922 42.7028 7.5301 42.7028 L 10.8195 42.7028 L 10.8195 48.4693 C 10.8195 49.6979 11.4735 50.4905 12.6030 50.4905 Z M 44.6058 53.2450 C 45.7353 53.2450 46.3895 52.4325 46.3895 51.2237 L 46.3895 45.4374 L 48.4702 45.4374 C 53.0078 45.4374 56 42.4056 56 37.7092 L 56 25.6610 C 56 20.9250 53.0078 18.2300 48.4702 18.2300 L 28.8522 18.2300 C 24.1161 18.2300 21.3221 20.9250 21.3221 25.6610 L 21.3221 37.7092 C 21.3221 42.4056 24.1161 45.4374 28.8522 45.4374 L 35.1735 45.4374 L 42.3470 51.9767 C 43.2784 52.8487 43.8331 53.2450 44.6058 53.2450 Z">'),I6=je('<svg xmlns=http://www.w3.org/2000/svg viewBox="-120 -80 528 588"><path d="M349.4 44.6c5.9-13.7 1.5-29.7-10.6-38.5s-28.6-8-39.9 1.8l-256 224c-10 8.8-13.6 22.9-8.9 35.3S50.7 288 64 288H175.5L98.6 467.4c-5.9 13.7-1.5 29.7 10.6 38.5s28.6 8 39.9-1.8l256-224c10-8.8 13.6-22.9 8.9-35.3s-16.6-20.7-30-20.7H272.5L349.4 44.6z">'),L6=je('<svg viewBox="0 -16 180 180"xmlns=http://www.w3.org/2000/svg><path d="M60.732 29.7C41.107 29.7 22 39.7 22 67.41c0 27.29 45.274 67.29 74 94.89 28.744-27.6 74-67.6 74-94.89 0-27.71-19.092-37.71-38.695-37.71C116 29.7 104.325 41.575 96 54.066 87.638 41.516 76 29.7 60.732 29.7z">'),C6=je('<svg viewBox="0 0 576 512"><path d="M168 80c-13.3 0-24 10.7-24 24V408c0 8.4-1.4 16.5-4.1 24H440c13.3 0 24-10.7 24-24V104c0-13.3-10.7-24-24-24H168zM72 480c-39.8 0-72-32.2-72-72V112C0 98.7 10.7 88 24 88s24 10.7 24 24V408c0 13.3 10.7 24 24 24s24-10.7 24-24V104c0-39.8 32.2-72 72-72H440c39.8 0 72 32.2 72 72V408c0 39.8-32.2 72-72 72H72zM176 136c0-13.3 10.7-24 24-24h96c13.3 0 24 10.7 24 24v80c0 13.3-10.7 24-24 24H200c-13.3 0-24-10.7-24-24V136zm200-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24H376c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80h32c13.3 0 24 10.7 24 24s-10.7 24-24 24H376c-13.3 0-24-10.7-24-24s10.7-24 24-24zM200 272H408c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80H408c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24z">'),O6=je('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -200 560 640"><path d="M8 256a56 56 0 1 1 112 0A56 56 0 1 1 8 256zm160 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z">'),N6=je('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -50 256 512"><path d="M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z">'),R6=je('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -50 320 512"><path d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z">'),z6=je('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 512 512"><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z">'),dw=e=>{const t=()=>be.anchor,n=be.profiles;return(()=>{const r=m6();return xe(r,hn(U8,{get each(){return js(e.nestedEvents())},children:o=>{const[a,c]=ut(!1),[d,f]=ut(!1),[h,y]=ut(!1),[b,S]=ut(!1),C=500,[L,A]=ut(),N=b6(L),[M,B]=ut(Hs),O=()=>o().pk,l=()=>K0(O()),w=()=>n().find(k=>k.pk===O());ai(async()=>{var k;B(((k=w())==null?void 0:k.i)||Hs)});let p;const v=()=>T4(o().ts*1e3),[x,R]=ut();ai(()=>{R(v()),p=setInterval(()=>{R(v())},60*1e3)});const T=()=>o().a===t().value&&o().am,E=()=>o().k===9802?"highlight":T()?"mention":"comment",$=De(()=>md(o())),j=()=>!o().parent&&!o().ro,F=()=>!o().parent&&o().ro&&!be.rootEventIds.includes(o().ro),I=()=>!o().parent&&o().ro&&be.rootEventIds.includes(o().ro)&&be.version&&be.version!==o().ro;return Go(()=>clearInterval(p)),(()=>{const k=v6(),V=k.firstChild,W=V.firstChild,K=W.firstChild,Y=K.firstChild,Z=Y.firstChild,se=Y.nextSibling,ge=se.firstChild,me=ge.firstChild,Se=me.nextSibling,re=Se.firstChild,ye=re.firstChild,Ie=ye.nextSibling;Ie.nextSibling,re.nextSibling;const Oe=ge.nextSibling,Me=Oe.firstChild,ft=K.nextSibling,Fe=W.nextSibling,ie=Fe.nextSibling,Re=ie.nextSibling;return Z.addEventListener("error",()=>B(Hs)),xe(me,()=>{var Te;return((Te=w())==null?void 0:Te.n)||ho(l())}),xe(re,E,Ie),xe(Se,x,null),xe(se,(()=>{const Te=De(()=>$()>0&&N.width>600);return()=>Te()&&[_6(),(()=>{const Pe=E6(),He=Pe.firstChild;return xe(Pe,$,He),xe(Pe,()=>$()>1?"ies":"y",null),xe(Pe,()=>h()?" (hidden)":"",null),Pe})()]})(),Oe),Me.$$click=()=>S(!b()),xe(Me,fw),xe(ft,(()=>{const Te=De(()=>$()>0);return()=>Te()&&(()=>{const Pe=k6(),He=Pe.firstChild;return He.$$click=()=>y(!h()),xe(He,(()=>{const wt=De(()=>!!h());return()=>wt()?D6():V6()})()),Pe})()})()),xe(V,(()=>{const Te=De(()=>!!b());return()=>Te()&&(()=>{const Pe=A6(),He=Pe.firstChild;return on(()=>xt(He,"href",be.urlPrefixes.note+lp(o().id))),Pe})()})(),Fe),xe(Fe,(()=>{const Te=De(()=>!!F());return()=>Te()&&(()=>{const Pe=S6(),He=Pe.firstChild,wt=He.firstChild,It=wt.nextSibling,Et=It.nextSibling,Kt=Et.nextSibling;return xe(Pe,Tu,He),xe(He,E,It),on(()=>xt(Kt,"href",be.urlPrefixes.note+lp(o().ro))),Pe})()})(),null),xe(Fe,(()=>{const Te=De(()=>!!j());return()=>Te()&&(()=>{const Pe=$6(),He=Pe.firstChild,wt=He.firstChild,It=wt.nextSibling;return It.nextSibling,xe(Pe,Tu,He),xe(He,E,It),Pe})()})(),null),xe(Fe,(()=>{const Te=De(()=>!!I());return()=>Te()&&(()=>{const Pe=x6(),He=Pe.firstChild,wt=He.firstChild,It=wt.nextSibling;return It.nextSibling,xe(Pe,Tu,He),xe(He,E,It),Pe})()})(),null),c0(A,ie),xe(V,(()=>{const Te=De(()=>!!(N.height&&N.height>=C&&!d()));return()=>Te()&&(()=>{const Pe=T6(),He=Pe.firstChild,wt=He.nextSibling;return`${gn}px`!=null?He.style.setProperty("height",`${gn}px`):He.style.removeProperty("height"),xe(He,H6),wt.$$click=()=>f(!0),Pe})()})(),Re),xe(Re,hn(sa,{get when(){return!be.disableFeatures.includes("reply")},get children(){const Te=y6(),Pe=Te.firstChild;return Te.$$click=()=>c(!a())&&S(!1),xe(Te,U6,Pe),xe(Pe,()=>a()?"Cancel":"Reply"),Te}})),xe(V,(()=>{const Te=De(()=>!!a());return()=>Te()&&hn(uw,{get replyTo(){return o().id},onDone:()=>c(!1)})})(),null),xe(k,(()=>{const Te=De(()=>!h());return()=>Te()&&(()=>{const Pe=P6();return xe(Pe,hn(dw,{nestedEvents:()=>o().children,get articles(){return e.articles}})),Pe})()})(),null),on(Te=>{const Pe=M(),He=be.urlPrefixes.npub+l(),wt=o().k==9802,It=d()?{}:{"max-height":`${C}px`},Et=nw(o(),be,e.articles());return Pe!==Te._v$&&xt(Z,"src",Te._v$=Pe),He!==Te._v$2&&xt(me,"href",Te._v$2=He),wt!==Te._v$3&&ie.classList.toggle("highlight",Te._v$3=wt),Te._v$4=H8(ie,It,Te._v$4),Et!==Te._v$5&&(ie.innerHTML=Te._v$5=Et),Te},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),k})()}})),r})()},U6=()=>(()=>{const e=B6();return xt(e,"width",gn),xt(e,"height",gn),e})(),M6=()=>(()=>{const e=I6();return xt(e,"width",gn),xt(e,"height",gn),e})(),j6=()=>(()=>{const e=L6();return xt(e,"width",gn),xt(e,"height",gn),e})(),H6=()=>(()=>{const e=C6();return xt(e,"width",gn),xt(e,"height",gn),e})(),fw=()=>O6(),D6=()=>N6(),V6=()=>R6(),Tu=()=>(()=>{const e=z6();return xt(e,"height",gn),e})();od(["click"]);var hw={};(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0;function t(E){if(!Number.isSafeInteger(E))throw new Error(`Wrong integer: ${E}`)}e.assertNumber=t;function n(...E){const $=(I,k)=>V=>I(k(V)),j=Array.from(E).reverse().reduce((I,k)=>I?$(I,k.encode):k.encode,void 0),F=E.reduce((I,k)=>I?$(I,k.decode):k.decode,void 0);return{encode:j,decode:F}}function r(E){return{encode:$=>{if(!Array.isArray($)||$.length&&typeof $[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return $.map(j=>{if(t(j),j<0||j>=E.length)throw new Error(`Digit index outside alphabet: ${j} (alphabet: ${E.length})`);return E[j]})},decode:$=>{if(!Array.isArray($)||$.length&&typeof $[0]!="string")throw new Error("alphabet.decode input should be array of strings");return $.map(j=>{if(typeof j!="string")throw new Error(`alphabet.decode: not string element=${j}`);const F=E.indexOf(j);if(F===-1)throw new Error(`Unknown letter: "${j}". Allowed: ${E}`);return F})}}}function o(E=""){if(typeof E!="string")throw new Error("join separator should be string");return{encode:$=>{if(!Array.isArray($)||$.length&&typeof $[0]!="string")throw new Error("join.encode input should be array of strings");for(let j of $)if(typeof j!="string")throw new Error(`join.encode: non-string input=${j}`);return $.join(E)},decode:$=>{if(typeof $!="string")throw new Error("join.decode input should be string");return $.split(E)}}}function a(E,$="="){if(t(E),typeof $!="string")throw new Error("padding chr should be string");return{encode(j){if(!Array.isArray(j)||j.length&&typeof j[0]!="string")throw new Error("padding.encode input should be array of strings");for(let F of j)if(typeof F!="string")throw new Error(`padding.encode: non-string input=${F}`);for(;j.length*E%8;)j.push($);return j},decode(j){if(!Array.isArray(j)||j.length&&typeof j[0]!="string")throw new Error("padding.encode input should be array of strings");for(let I of j)if(typeof I!="string")throw new Error(`padding.decode: non-string input=${I}`);let F=j.length;if(F*E%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;F>0&&j[F-1]===$;F--)if(!((F-1)*E%8))throw new Error("Invalid padding: string has too much padding");return j.slice(0,F)}}}function c(E){if(typeof E!="function")throw new Error("normalize fn should be function");return{encode:$=>$,decode:$=>E($)}}function d(E,$,j){if($<2)throw new Error(`convertRadix: wrong from=${$}, base cannot be less than 2`);if(j<2)throw new Error(`convertRadix: wrong to=${j}, base cannot be less than 2`);if(!Array.isArray(E))throw new Error("convertRadix: data should be array");if(!E.length)return[];let F=0;const I=[],k=Array.from(E);for(k.forEach(V=>{if(t(V),V<0||V>=$)throw new Error(`Wrong integer: ${V}`)});;){let V=0,W=!0;for(let K=F;K<k.length;K++){const Y=k[K],Z=$*V+Y;if(!Number.isSafeInteger(Z)||$*V/$!==V||Z-Y!==$*V)throw new Error("convertRadix: carry overflow");if(V=Z%j,k[K]=Math.floor(Z/j),!Number.isSafeInteger(k[K])||k[K]*j+V!==Z)throw new Error("convertRadix: carry overflow");if(W)k[K]?W=!1:F=K;else continue}if(I.push(V),W)break}for(let V=0;V<E.length-1&&E[V]===0;V++)I.push(0);return I.reverse()}const f=(E,$)=>$?f($,E%$):E,h=(E,$)=>E+($-f(E,$));function y(E,$,j,F){if(!Array.isArray(E))throw new Error("convertRadix2: data should be array");if($<=0||$>32)throw new Error(`convertRadix2: wrong from=${$}`);if(j<=0||j>32)throw new Error(`convertRadix2: wrong to=${j}`);if(h($,j)>32)throw new Error(`convertRadix2: carry overflow from=${$} to=${j} carryBits=${h($,j)}`);let I=0,k=0;const V=2**j-1,W=[];for(const K of E){if(t(K),K>=2**$)throw new Error(`convertRadix2: invalid data word=${K} from=${$}`);if(I=I<<$|K,k+$>32)throw new Error(`convertRadix2: carry overflow pos=${k} from=${$}`);for(k+=$;k>=j;k-=j)W.push((I>>k-j&V)>>>0);I&=2**k-1}if(I=I<<j-k&V,!F&&k>=$)throw new Error("Excess padding");if(!F&&I)throw new Error(`Non-zero padding: ${I}`);return F&&k>0&&W.push(I>>>0),W}function b(E){return t(E),{encode:$=>{if(!($ instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return d(Array.from($),2**8,E)},decode:$=>{if(!Array.isArray($)||$.length&&typeof $[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(d($,E,2**8))}}}function S(E,$=!1){if(t(E),E<=0||E>32)throw new Error("radix2: bits should be in (0..32]");if(h(8,E)>32||h(E,8)>32)throw new Error("radix2: carry overflow");return{encode:j=>{if(!(j instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return y(Array.from(j),8,E,!$)},decode:j=>{if(!Array.isArray(j)||j.length&&typeof j[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(y(j,E,8,$))}}}function C(E){if(typeof E!="function")throw new Error("unsafeWrapper fn should be function");return function(...$){try{return E.apply(null,$)}catch{}}}function L(E,$){if(t(E),typeof $!="function")throw new Error("checksum fn should be function");return{encode(j){if(!(j instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const F=$(j).slice(0,E),I=new Uint8Array(j.length+E);return I.set(j),I.set(F,j.length),I},decode(j){if(!(j instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const F=j.slice(0,-E),I=$(F).slice(0,E),k=j.slice(-E);for(let V=0;V<E;V++)if(I[V]!==k[V])throw new Error("Invalid checksum");return F}}}e.utils={alphabet:r,chain:n,checksum:L,radix:b,radix2:S,join:o,padding:a},e.base16=n(S(4),r("0123456789ABCDEF"),o("")),e.base32=n(S(5),r("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),a(5),o("")),e.base32hex=n(S(5),r("0123456789ABCDEFGHIJKLMNOPQRSTUV"),a(5),o("")),e.base32crockford=n(S(5),r("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),c(E=>E.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=n(S(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a(6),o("")),e.base64url=n(S(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),a(6),o(""));const A=E=>n(b(58),r(E),o(""));e.base58=A("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=A("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=A("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const N=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(E){let $="";for(let j=0;j<E.length;j+=8){const F=E.subarray(j,j+8);$+=e.base58.encode(F).padStart(N[F.length],"1")}return $},decode(E){let $=[];for(let j=0;j<E.length;j+=11){const F=E.slice(j,j+11),I=N.indexOf(F.length),k=e.base58.decode(F);for(let V=0;V<k.length-I;V++)if(k[V]!==0)throw new Error("base58xmr: wrong padding");$=$.concat(Array.from(k.slice(k.length-I)))}return Uint8Array.from($)}};const M=E=>n(L(4,$=>E(E($))),e.base58);e.base58check=M;const B=n(r("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),O=[996825010,642813549,513874426,1027748829,705979059];function l(E){const $=E>>25;let j=(E&33554431)<<5;for(let F=0;F<O.length;F++)($>>F&1)===1&&(j^=O[F]);return j}function w(E,$,j=1){const F=E.length;let I=1;for(let k=0;k<F;k++){const V=E.charCodeAt(k);if(V<33||V>126)throw new Error(`Invalid prefix (${E})`);I=l(I)^V>>5}I=l(I);for(let k=0;k<F;k++)I=l(I)^E.charCodeAt(k)&31;for(let k of $)I=l(I)^k;for(let k=0;k<6;k++)I=l(I);return I^=j,B.encode(y([I%2**30],30,5,!1))}function p(E){const $=E==="bech32"?1:734539939,j=S(5),F=j.decode,I=j.encode,k=C(F);function V(Z,se,ge=90){if(typeof Z!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof Z}`);if(!Array.isArray(se)||se.length&&typeof se[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof se}`);const me=Z.length+7+se.length;if(ge!==!1&&me>ge)throw new TypeError(`Length ${me} exceeds limit ${ge}`);return Z=Z.toLowerCase(),`${Z}1${B.encode(se)}${w(Z,se,$)}`}function W(Z,se=90){if(typeof Z!="string")throw new Error(`bech32.decode input should be string, not ${typeof Z}`);if(Z.length<8||se!==!1&&Z.length>se)throw new TypeError(`Wrong string length: ${Z.length} (${Z}). Expected (8..${se})`);const ge=Z.toLowerCase();if(Z!==ge&&Z!==Z.toUpperCase())throw new Error("String must be lowercase or uppercase");Z=ge;const me=Z.lastIndexOf("1");if(me===0||me===-1)throw new Error('Letter "1" must be present between prefix and data only');const Se=Z.slice(0,me),re=Z.slice(me+1);if(re.length<6)throw new Error("Data must be at least 6 characters long");const ye=B.decode(re).slice(0,-6),Ie=w(Se,ye,$);if(!re.endsWith(Ie))throw new Error(`Invalid checksum in ${Z}: expected "${Ie}"`);return{prefix:Se,words:ye}}const K=C(W);function Y(Z){const{prefix:se,words:ge}=W(Z,!1);return{prefix:se,words:ge,bytes:F(ge)}}return{encode:V,decode:W,decodeToBytes:Y,decodeUnsafe:K,fromWords:F,fromWordsUnsafe:k,toWords:I}}e.bech32=p("bech32"),e.bech32m=p("bech32m"),e.utf8={encode:E=>new TextDecoder().decode(E),decode:E=>new TextEncoder().encode(E)},e.hex=n(S(4),r("0123456789abcdef"),o(""),c(E=>{if(typeof E!="string"||E.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof E} with length ${E.length}`);return E.toLowerCase()}));const v={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},x=`Invalid encoding type. Available types: ${Object.keys(v).join(", ")}`,R=(E,$)=>{if(typeof E!="string"||!v.hasOwnProperty(E))throw new TypeError(x);if(!($ instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return v[E].encode($)};e.bytesToString=R,e.str=e.bytesToString;const T=(E,$)=>{if(!v.hasOwnProperty(E))throw new TypeError(x);if(typeof $!="string")throw new TypeError("stringToBytes() expects string");return v[E].decode($)};e.stringToBytes=T,e.bytes=e.stringToBytes})(hw);const{bech32:$n,hex:dn,utf8:q6}=hw,yp={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},vp={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},_p={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},Ep={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},Ls=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],F6={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},W6=BigInt("2100000000000000000"),kp=BigInt(1e11),El={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},pw={};for(let e=0,t=Object.keys(El);e<t.length;e++){const n=t[e],r=El[t[e]].toString();pw[r]=n}const K6={1:e=>dn.encode($n.fromWordsUnsafe(e)),16:e=>dn.encode($n.fromWordsUnsafe(e)),13:e=>q6.encode($n.fromWordsUnsafe(e)),19:e=>dn.encode($n.fromWordsUnsafe(e)),23:e=>dn.encode($n.fromWordsUnsafe(e)),27:e=>dn.encode($n.fromWordsUnsafe(e)),6:pa,24:pa,3:Z6,5:Y6};function G6(e){return t=>({tagCode:parseInt(e),words:$n.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function pa(e){return e.reverse().reduce((t,n,r)=>t+n*Math.pow(32,r),0)}function Z6(e){const t=[];let n,r,o,a,c,d=$n.fromWordsUnsafe(e);for(;d.length>0;)n=dn.encode(d.slice(0,33)),r=dn.encode(d.slice(33,41)),o=parseInt(dn.encode(d.slice(41,45)),16),a=parseInt(dn.encode(d.slice(45,49)),16),c=parseInt(dn.encode(d.slice(49,51)),16),d=d.slice(51),t.push({pubkey:n,short_channel_id:r,fee_base_msat:o,fee_proportional_millionths:a,cltv_expiry_delta:c});return t}function Y6(e){const t=e.slice().reverse().map(o=>[!!(o&1),!!(o&2),!!(o&4),!!(o&8),!!(o&16)]).reduce((o,a)=>o.concat(a),[]);for(;t.length<Ls.length*2;)t.push(!1);const n={};Ls.forEach((o,a)=>{let c;t[a*2]?c="required":t[a*2+1]?c="supported":c="unsupported",n[o]=c});const r=t.slice(Ls.length*2);return n.extra_bits={start_bit:Ls.length*2,bits:r,has_required:r.reduce((o,a,c)=>c%2!==0?o||!1:o||a,!1)},n}function gw(e,t){let n,r;if(e.slice(-1).match(/^[munp]$/))n=e.slice(-1),r=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=e}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");const o=BigInt(r),a=n?o*kp/F6[n]:o*kp;if(n==="p"&&o%BigInt(10)!==BigInt(0)||a>W6)throw new Error("Amount is outside of valid range");return t?a.toString():a}function J6(e,t){if(typeof e!="string")throw new Error("Lightning Payment Request must be string");if(e.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const n=[],r=$n.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const o=r.prefix;let a=r.words,c=e.slice(o.length+1),d=a.slice(-104);a=a.slice(0,-104);let f=o.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(f&&!f[2]&&(f=o.match(/^ln(\S+)$/)),!f)throw new Error("Not a proper lightning payment request");n.push({name:"lightning_network",letters:"ln"});const h=f[1];let y;if(t){if(t.bech32===void 0||t.pubKeyHash===void 0||t.scriptHash===void 0||!Array.isArray(t.validWitnessVersions))throw new Error("Invalid network");y=t}else switch(h){case yp.bech32:y=yp;break;case vp.bech32:y=vp;break;case _p.bech32:y=_p;break;case Ep.bech32:y=Ep;break}if(!y||y.bech32!==h)throw new Error("Unknown coin bech32 prefix");n.push({name:"coin_network",letters:h,value:y});const b=f[2];let S;if(b){const l=f[3];S=gw(b+l,!0),n.push({name:"amount",letters:f[2]+f[3],value:S})}else S=null;n.push({name:"separator",letters:"1"});const C=pa(a.slice(0,7));a=a.slice(7),n.push({name:"timestamp",letters:c.slice(0,7),value:C}),c=c.slice(7);let L,A,N,M;for(;a.length>0;){const l=a[0].toString();L=pw[l]||"unknown_tag",A=K6[l]||G6(l),a=a.slice(1),N=pa(a.slice(0,2)),a=a.slice(2),M=a.slice(0,N),a=a.slice(N),n.push({name:L,tag:c[0],letters:c.slice(0,3+N),value:A(M)}),c=c.slice(3+N)}n.push({name:"signature",letters:c.slice(0,104),value:dn.encode($n.fromWordsUnsafe(d))}),c=c.slice(104),n.push({name:"checksum",letters:c});let B={paymentRequest:e,sections:n,get expiry(){let l=n.find(w=>w.name==="expiry");if(l)return O("timestamp")+l.value},get route_hints(){return n.filter(l=>l.name==="route_hint").map(l=>l.value)}};for(let l in El)l!=="route_hint"&&Object.defineProperty(B,l,{get(){return O(l)}});return B;function O(l){let w=n.find(p=>p.name===l);return w?w.value:void 0}}var Q6={decode:J6,hrpToMillisat:gw};const X6=je("<div id=ztr-root><style></style><div style=float:right;opacity:0.2;>"),ek=je("<div id=ztr-content>"),tk=je("<h1>Error!"),nk=je("<div class=ztr-comment-text><pre></pre><p>Only properly formed NIP-19 naddr, note and nevent encoded entities and URLs are supported."),rk=je("<h2 id=ztr-title>"),ok=je("<p>Powered by <a href=https://github.com/fr4nzap/zapthreads>zapthreads"),ik=je("<button>Clear cache"),sk=je("<p>Anchor version: "),ak=e=>{co(()=>{be.anchor=(()=>{const O=e.anchor.trim();try{if(O.startsWith("http")){const w=!e.legacyUrl;return{type:"http",value:I4(O,w)}}const l=Ms(O);switch(l.type){case"nevent":return{type:"note",value:l.data.id};case"note":return{type:"note",value:l.data};case"naddr":const w=l.data;return{type:"naddr",value:`${w.kind}:${w.pubkey}:${w.identifier}`}}}catch(l){return console.error(l),{type:"error",value:`Malformed anchor: ${O}`}}})();const B="wss://relay.damus.io,wss://nos.lol";be.relays=(e.relays||B).split(",").map(O=>new URL(O).toString()),(e.author||"").startsWith("npub")&&(be.externalAuthor=e.author),be.disableFeatures=e.disable.split(",").map(O=>O.trim()).filter(RE),be.urlPrefixes=x4(e.urls),be.replyPlaceholder=e.replyPlaceholder});const t=()=>be.anchor,n=()=>be.relays,r=()=>be.disableFeatures,o=()=>e.version;be.profiles=Is(()=>["profiles"]);const a=()=>r().includes("watch");co(Br([t],()=>{be.version=o()})),co(Br([t,n],async()=>{if(t().type==="error")return;let B,O;switch(t().type){case"http":O=await hi("events",t().value,{index:"r"}),be.rootEventIds=js(O).map(E=>E.id),B={"#r":e.legacyUrl?[t().value]:[t().value,`${t().value}/`],kinds:[1,8812]};break;case"note":const v=await Jo("events",IDBKeyRange.only(t().value));if(v){O=[v],be.rootEventIds=[v.id],be.anchorAuthor=v.pk;return}else{O=[],B={ids:[t().value]};break}case"naddr":const[x,R,T]=t().value.split(":");O=(await hi("events",T,{index:"d"})).filter(E=>E.pk===R),O.length>0&&(be.rootEventIds=js(O).map(E=>E.id),be.anchorAuthor=O[0].pk),B={authors:[R],kinds:[parseInt(x)],"#d":[T]};break;default:throw"error"}const w=(await Zo.querySync(n(),{...B})).map(ha);for(const p of w)t().type=="http"?(p.k==1&&p.c.includes("")||p.k==8812)&&sn("events",p):sn("events",p);switch(t().type){case"http":case"naddr":const p=[...O,...w],v=js([...p]).map(x=>x.id);(v.length>0&&v[0])!==be.rootEventIds[0]&&(be.rootEventIds=v);break;case"note":be.rootEventIds=w.map(x=>x.id);break}w.length>0&&(be.anchorAuthor=w[0].pk)}));const c=()=>be.rootEventIds;co(Br([c,o],()=>{switch(t().type){case"http":case"note":(be.filter["#e"]??[]).toString()!==c().toString()&&(be.filter={"#e":c()});return;case"naddr":const B=be.filter["#a"]&&be.filter["#a"][0];t().value!==B&&(be.filter={"#a":[t().value]}),be.version=o()||c()[0];return}},{defer:!0}));const d=De(()=>be.filter,{defer:!0});let f;ai(Br([d],async()=>{const B=d(),O=n(),l=t(),w=C(),p=be.profiles();if(Object.entries(B).length===0)return;f==null||f.close(),f=null,Go(()=>{console.log("[zapthreads] unsubscribing and cleaning up",l.value),f==null||f.close(),f=null});const v=[1,9802,7,9735];console.log("[zapthreads] subscribing to",l.value);const x=await y4(l,O),R=new Set,T={};f=Zo.subscribeMany(O,[{...B,kinds:v,since:x}],{onevent(E){if(E.kind===1||E.kind===9802)E.content.trim()&&sn("events",ha(E));else if(E.kind===7)R.add(E.id);else if(E.kind===9735){const $=E.tags.find(j=>j[0]==="bolt11");$&&$[1]&&(T[E.id]=$[1])}},oneose(){(async()=>{const E=await Jo("aggregates",IDBKeyRange.only([l.value,7]))??{eid:l.value,ids:[],k:7};E.ids=[...new Set([...E.ids,...R])],sn("aggregates",E);const $=await Jo("aggregates",IDBKeyRange.only([l.value,9735]))??{eid:l.value,ids:[],k:9735,sum:0};$.sum=Object.entries(T).reduce((j,F)=>{if($.ids.includes(F[0]))return j;const k=Q6.decode(F[1]).sections.find(W=>W.name==="amount"),V=Number(k.value)/1e3;return j+V},$.sum??0),$.ids=[...new Set([...$.ids,...Object.keys(T)])],sn("aggregates",$)})(),setTimeout(async()=>{await tw([...w.map(E=>E.pk)],O,p),v4(l,w),a()&&(f==null||f.close(),Zo.close(O))},96)}})},{defer:!0}));const h=()=>e.user;co(Br(h,B=>{if(B){let O,l;B.startsWith("nsec")?(l=Ms(B).data,O=ow(l)):O=Ms(B).data,Ot.external={pk:O,signEvent:async w=>{if(l)return{sig:iw(w,l).sig};if(!window.nostr)throw alert("Please log in with a NIP-07 extension such as Alby or nos2x"),Ot.active=void 0,"No extension available";const p=await window.nostr.getPublicKey(),v=O;if(v!==p){const x=`ERROR: Event not signed. Supplied pubkey does not match extension pubkey. ${v} !== ${p}`;throw Ot.active=void 0,alert(x),x}else return window.nostr.signEvent(w)}},Ot.active=Ot.external}})),co(Br(h,B=>{B||(Ot.active=void 0)},{defer:!0}));const y=Is(()=>["events",30023,{index:"k"}]),b=De(()=>{if(be.disableFeatures.includes("hideContent")&&t().type==="naddr"){const[B,O,l]=t().value.split(":"),w=y().find(p=>p.d===l&&p.pk===O);if(w){const p=`# ${w.tl}
 ${w.c}`;return nw({...w,c:p},be,[])}}}),S=De(()=>{switch(t().type){case"http":case"note":return Is(()=>["events",be.rootEventIds,{index:"ro"}]);case"naddr":return Is(()=>["events",t().value,{index:"a"}]);default:return()=>[]}}),C=()=>S()(),L=De(()=>be.rootEventIds&&be.rootEventIds.length?rw(C()).filter(O=>!(O.k===9802&&O.children.length===0)):[]),A=()=>L().reduce((B,O)=>B+md(O),L().length),[N,M]=ut(!1);return(()=>{const B=X6(),O=B.firstChild,l=O.nextSibling;return xe(O,n_),xe(B,(()=>{const w=De(()=>!!b());return()=>w()&&(()=>{const p=ek();return on(()=>p.innerHTML=b()),p})()})(),l),xe(B,(()=>{const w=De(()=>t().type==="error");return()=>w()&&[tk(),(()=>{const p=nk(),v=p.firstChild;return xe(v,()=>t().value),p})()]})(),l),xe(B,(()=>{const w=De(()=>t().type!=="error");return()=>w()&&[De((()=>{const p=De(()=>!be.disableFeatures.includes("reply"));return()=>p()&&hn(p6,{})})()),(()=>{const p=rk();return xe(p,(()=>{const v=De(()=>A()>0);return()=>v()&&`${A()} comment${A()==1?"":"s"}`})()),p})(),hn(dw,{nestedEvents:L,articles:y})]})(),l),l.$$click=()=>M(!N()),xe(l,fw),xe(B,(()=>{const w=De(()=>!!N());return()=>w()&&[ok(),De((()=>{const p=De(()=>!!be.version);return()=>p()&&(()=>{const v=sk();return v.firstChild,xe(v,()=>be.version,null),v})()})()),(()=>{const p=ik();return j8(p,"click",m4),p})()]})(),null),B})()};t_("zap-threads",{anchor:"",version:"",relays:"",user:"",author:"",disable:"",urls:"","reply-placeholder":"","legacy-url":""},e=>hn(ak,{get anchor(){return e.anchor??""},get version(){return e.version??""},get relays(){return e.relays??""},get user(){return e.user??""},get author(){return e.author??""},get disable(){return e.disable??""},get urls(){return e.urls??""},get replyPlaceholder(){return e["reply-placeholder"]??""},get legacyUrl(){return e["legacy-url"]??""}}));od(["click"]);function ck(e){let t,n;return t=new Jg({}),{c(){tr(t.$$.fragment)},m(r,o){On(t,r,o),n=!0},p:_t,i(r){n||(qe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){Nn(t,r)}}}function uk(e){let t,n,r=Rr(e[1].created_at,!0)+"",o,a,c,d=e[1].title+"",f,h,y,b,S,C,L=e[1].image&&Ap(e),A=e[3]&&Sp(e);return{c(){t=ke("div"),n=ke("div"),o=Je(r),a=Ke(),c=ke("h1"),f=Je(d),h=Ke(),L&&L.c(),y=Ke(),b=ke("div"),S=Ke(),A&&A.c(),C=Ao(),Ee(n,"class","date"),Ee(b,"class","content"),Ee(t,"class","note-wrapper")},m(N,M){Ne(N,t,M),we(t,n),we(n,o),we(t,a),we(t,c),we(c,f),we(t,h),L&&L.m(t,null),we(t,y),we(t,b),b.innerHTML=e[4],Ne(N,S,M),A&&A.m(N,M),Ne(N,C,M)},p(N,M){M&2&&r!==(r=Rr(N[1].created_at,!0)+"")&&Pt(o,r),M&2&&d!==(d=N[1].title+"")&&Pt(f,d),N[1].image?L?L.p(N,M):(L=Ap(N),L.c(),L.m(t,y)):L&&(L.d(1),L=null),M&16&&(b.innerHTML=N[4]),N[3]?A?A.p(N,M):(A=Sp(N),A.c(),A.m(C.parentNode,C)):A&&(A.d(1),A=null)},i:_t,o:_t,d(N){N&&(Ce(t),Ce(S),Ce(C)),L&&L.d(),A&&A.d(N)}}}function Ap(e){let t,n;return{c(){t=ke("img"),Ee(t,"class","note-banner"),Cr(t.src,n=e[1].image)||Ee(t,"src",n)},m(r,o){Ne(r,t,o)},p(r,o){o&2&&!Cr(t.src,n=r[1].image)&&Ee(t,"src",n)},d(r){r&&Ce(t)}}}function Sp(e){let t;return{c(){t=ke("zap-threads"),Wc(t,"anchor",e[2]),Wc(t,"relays","replyRelays")},m(n,r){Ne(n,t,r)},p(n,r){r&4&&Wc(t,"anchor",n[2])},d(n){n&&Ce(t)}}}function lk(e){var E;let t,n,r,o,a=e[2].substring(0,12)+"..."+e[2].slice(-5),c,d,f,h,y,b,S,C,L,A=((E=e[0])==null?void 0:E.shortName)+"",N,M,B,O,l,w,p,v;const x=[uk,ck],R=[];function T($,j){return j&2&&(O=null),O==null&&(O=Object.keys($[1]).length>0),O?0:1}return l=T(e,-1),w=R[l]=x[l](e),{c(){var $;t=ke("div"),n=ke("div"),r=Je("Note: "),o=ke("a"),c=Je(a),f=Ke(),h=ke("a"),y=ke("div"),b=ke("img"),C=Ke(),L=ke("span"),N=Je(A),M=Je(" homepage"),B=Ke(),w.c(),p=Ao(),Ee(o,"href",d="https://njump.me/"+e[2]),Ee(n,"class","external-link"),Cr(b.src,S=($=e[0])==null?void 0:$.image)||Ee(b,"src",S),Ee(y,"class","picture-container"),Ee(h,"href","#"),Ee(t,"class","header note")},m($,j){Ne($,t,j),we(t,n),we(n,r),we(n,o),we(o,c),we(t,f),we(t,h),we(h,y),we(y,b),we(h,C),we(h,L),we(L,N),we(L,M),Ne($,B,j),R[l].m($,j),Ne($,p,j),v=!0},p($,[j]){var I,k;(!v||j&4)&&a!==(a=$[2].substring(0,12)+"..."+$[2].slice(-5))&&Pt(c,a),(!v||j&4&&d!==(d="https://njump.me/"+$[2]))&&Ee(o,"href",d),(!v||j&1&&!Cr(b.src,S=(I=$[0])==null?void 0:I.image))&&Ee(b,"src",S),(!v||j&1)&&A!==(A=((k=$[0])==null?void 0:k.shortName)+"")&&Pt(N,A);let F=l;l=T($,j),l===F?R[l].p($,j):(Hr(),Ge(R[F],1,1,()=>{R[F]=null}),Dr(),w=R[l],w?w.p($,j):(w=R[l]=x[l]($),w.c()),qe(w,1),w.m(p.parentNode,p))},i($){v||(qe(w),v=!0)},o($){Ge(w),v=!1},d($){$&&(Ce(t),Ce(B),Ce(p)),R[l].d($)}}}function dk(e,t,n){let r,o,a="",c="",d=!1,{id:f}=t,{profile:h}=t;return _a(()=>{Hl().then(async({npub:y,writeRelays:b,readRelays:S,comments:C})=>{if(n(0,h=await Ta(y)),!h)throw new Error("npub is invalid");n(2,c=Ov({id:f})),n(3,d=C);let L=Di.subscribeMany(b,[{ids:[f]}],{onevent:async A=>{console.log("Received event:",A),n(1,o=Os(A)),ta.set(o.title),n(6,a=await kg(o))},oneose(){console.log("No subscribers left. Closing subscription."),L.close()}})})}),e.$$set=y=>{"id"in y&&n(5,f=y.id),"profile"in y&&n(0,h=y.profile)},e.$$.update=()=>{e.$$.dirty&64&&n(4,r=a)},ta.subscribe(y=>{document.title=y}),[h,o,c,d,r,f,a]}class fk extends qr{constructor(t){super(),Vr(this,t,dk,lk,Cn,{id:5,profile:0})}}function hk(e){let t,n,r,o,a,c;return{c(){t=ke("div"),n=ke("input"),r=Ke(),o=ke("label"),n.checked=e[0],Ee(n,"type","checkbox"),Ee(n,"id","theme-toggle"),Ee(n,"class","svelte-aypc0d"),Ee(o,"for","theme-toggle"),Ee(o,"class","svelte-aypc0d")},m(d,f){Ne(d,t,f),we(t,n),we(t,r),we(t,o),a||(c=s1(n,"click",e[1]),a=!0)},p(d,[f]){f&1&&(n.checked=d[0])},i:_t,o:_t,d(d){d&&Ce(t),a=!1,c()}}}function pk(e,t,n){let r=!0;function o(){n(0,r=!r),localStorage.setItem("theme",r?"dark":"light"),r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}return typeof window<"u"&&(localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),r=!0):(document.documentElement.classList.remove("dark"),r=!1)),[r,o]}class gk extends qr{constructor(t){super(),Vr(this,t,pk,hk,Cn,{})}}function $p(e){let t;return{c(){t=ke("div"),t.innerHTML=`<h1>Oracolo</h1> <h2>Missing config!</h2>
		You need to set (at least) the<strong>author meta tag</strong> by updating this html file! Open it
		with an editor, look at the first lines and personalize them.`,Ee(t,"class","unfinished-setup")},m(n,r){Ne(n,t,r)},d(n){n&&Ce(t)}}}function xp(e){let t=e[0],n,r,o=Tp(e);return{c(){o.c(),n=Ao()},m(a,c){o.m(a,c),Ne(a,n,c),r=!0},p(a,c){c&1&&Cn(t,t=a[0])?(Hr(),Ge(o,1,1,_t),Dr(),o=Tp(a),o.c(),qe(o,1),o.m(n.parentNode,n)):o.p(a,c)},i(a){r||(qe(o),r=!0)},o(a){Ge(o),r=!1},d(a){a&&Ce(n),o.d(a)}}}function wk(e){let t,n;return t=new fk({props:{id:e[0],profile:e[1]}}),{c(){tr(t.$$.fragment)},m(r,o){On(t,r,o),n=!0},p(r,o){const a={};o&1&&(a.id=r[0]),o&2&&(a.profile=r[1]),t.$set(a)},i(r){n||(qe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){Nn(t,r)}}}function bk(e){let t,n;return t=new Qg({props:{tag:e[0],profile:e[1]}}),{c(){tr(t.$$.fragment)},m(r,o){On(t,r,o),n=!0},p(r,o){const a={};o&1&&(a.tag=r[0]),o&2&&(a.profile=r[1]),t.$set(a)},i(r){n||(qe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){Nn(t,r)}}}function mk(e){let t,n;return t=new Qg({props:{tag:"",profile:e[1]}}),{c(){tr(t.$$.fragment)},m(r,o){On(t,r,o),n=!0},p(r,o){const a={};o&2&&(a.profile=r[1]),t.$set(a)},i(r){n||(qe(t.$$.fragment,r),n=!0)},o(r){Ge(t.$$.fragment,r),n=!1},d(r){Nn(t,r)}}}function Tp(e){let t,n,r,o,a;const c=[mk,bk,wk],d=[];function f(h,y){return y&1&&(t=null),h[0]===""?0:(t==null&&(t=!!h[0].startsWith("tags/")),t?1:2)}return n=f(e,-1),r=d[n]=c[n](e),{c(){r.c(),o=Ao()},m(h,y){d[n].m(h,y),Ne(h,o,y),a=!0},p(h,y){let b=n;n=f(h,y),n===b?d[n].p(h,y):(Hr(),Ge(d[b],1,1,()=>{d[b]=null}),Dr(),r=d[n],r?r.p(h,y):(r=d[n]=c[n](h),r.c()),qe(r,1),r.m(o.parentNode,o))},i(h){a||(qe(r),a=!0)},o(h){Ge(r),a=!1},d(h){h&&Ce(o),d[n].d(h)}}}function Pp(e){let t,n=e[3].join(", ")+"",r;return{c(){t=Je("This page connects to some servers (Nostr relays) to retrieve data: "),r=Je(n)},m(o,a){Ne(o,t,a),Ne(o,r,a)},p(o,a){a&8&&n!==(n=o[3].join(", ")+"")&&Pt(r,n)},d(o){o&&(Ce(t),Ce(r))}}}function yk(e){let t,n=e[1]&&Object.keys(e[1]).length>0,r,o,a,c,d,f,h,y,b,S,C,L,A=e[2]&&$p(),N=n&&xp(e),M=e[3]&&Pp(e);return C=new gk({}),{c(){A&&A.c(),t=Ke(),N&&N.c(),r=Ke(),o=ke("div"),a=Je("This blog is powered by "),c=ke("a"),c.textContent="Oracolo",d=Je(` and Nostr,
	`),f=ke("a"),f.textContent="read more",h=ke("br"),y=ke("br"),b=Ke(),M&&M.c(),S=Ke(),tr(C.$$.fragment),Ee(c,"href","https://github.com/dtonon/oracolo"),Ee(f,"href","https://njump.me"),Ee(o,"class","footer")},m(B,O){A&&A.m(B,O),Ne(B,t,O),N&&N.m(B,O),Ne(B,r,O),Ne(B,o,O),we(o,a),we(o,c),we(o,d),we(o,f),we(o,h),we(o,y),we(o,b),M&&M.m(o,null),Ne(B,S,O),On(C,B,O),L=!0},p(B,[O]){B[2]?A||(A=$p(),A.c(),A.m(t.parentNode,t)):A&&(A.d(1),A=null),O&2&&(n=B[1]&&Object.keys(B[1]).length>0),n?N?(N.p(B,O),O&2&&qe(N,1)):(N=xp(B),N.c(),qe(N,1),N.m(r.parentNode,r)):N&&(Hr(),Ge(N,1,1,()=>{N=null}),Dr()),B[3]?M?M.p(B,O):(M=Pp(B),M.c(),M.m(o,null)):M&&(M.d(1),M=null)},i(B){L||(qe(N),qe(C.$$.fragment,B),L=!0)},o(B){Ge(N),Ge(C.$$.fragment,B),L=!1},d(B){B&&(Ce(t),Ce(r),Ce(o),Ce(S)),A&&A.d(B),N&&N.d(B),M&&M.d(),Nn(C,B)}}}function vk(e,t,n){let r="",o,a=!1,c,d=!1;const f=()=>{const h=window.location.hash.substring(1);h!==r&&n(0,r=h)};return _a(()=>{Hl().then(async({npub:h,readRelays:y,writeRelays:b,comments:S})=>{if(n(3,c=Array.from(new Set(y.concat(b)))),d=S,d)try{await o1(()=>Promise.resolve().then(()=>Ak),void 0,import.meta.url),console.log("window.nostr.js has been successfully loaded")}catch(C){console.error("Failed to load window.nostr.js:",C)}f(),window.addEventListener("hashchange",f),n(1,o=await Ta(h)),o?(o.metadata.name||o.shortName,o.image):n(2,a=!0)})}),d1(()=>{window.removeEventListener("hashchange",f)}),[r,o,a,c]}class _k extends qr{constructor(t){super(),Vr(this,t,vk,yk,Cn,{})}}new _k({target:document.getElementById("app")});var Bp={},Ek=Object.defineProperty,kk=(e,t,n)=>t in e?Ek(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ae=(e,t,n)=>(kk(e,typeof t!="symbol"?t+"":t,n),n);(function(){var e,t,n,r,o;const a='*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.fixed{position:fixed}.absolute{position:absolute}.bottom-1{bottom:.25rem}.right-2{right:.5rem}.right-3{right:.75rem}.top-0{top:0}.m-auto{margin:auto}.mx-2{margin-left:.5rem;margin-right:.5rem}.my-2{margin-top:.5rem;margin-bottom:.5rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.ml-2{margin-left:.5rem}.mr-2{margin-right:.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.box-border{box-sizing:border-box}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.h-10{height:2.5rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.w-10{width:2.5rem}.w-40{width:10rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-full{width:100%}.max-w-56{max-width:14rem}@keyframes moveIn{0%{transform:translateY(-10px)}to{transform:translateY(0)}}.animate-fadein{animation:fadeIn 1s ease-in-out,moveIn 1s ease-in-out}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.animate-show{animation:fadeIn .2s ease-in-out}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-grabbing{cursor:grabbing}.cursor-pointer{cursor:pointer}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.gap-2{gap:.5rem}.overflow-hidden{overflow:hidden}.overflow-ellipsis{text-overflow:ellipsis}.whitespace-nowrap{white-space:nowrap}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-md{border-radius:.375rem}.border-0{border-width:0px}.border-2{border-width:2px}.border-solid{border-style:solid}.border-transparent{border-color:transparent}.bg-cyan-700{--tw-bg-opacity: 1;background-color:rgb(14 116 144 / var(--tw-bg-opacity))}.bg-cyan-800{--tw-bg-opacity: 1;background-color:rgb(21 94 117 / var(--tw-bg-opacity))}.bg-cyan-900{--tw-bg-opacity: 1;background-color:rgb(22 78 99 / var(--tw-bg-opacity))}.bg-cyan-950{--tw-bg-opacity: 1;background-color:rgb(8 51 68 / var(--tw-bg-opacity))}.bg-green-700{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity))}.bg-green-800{--tw-bg-opacity: 1;background-color:rgb(22 101 52 / var(--tw-bg-opacity))}.bg-green-900{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity))}.bg-green-950{--tw-bg-opacity: 1;background-color:rgb(5 46 22 / var(--tw-bg-opacity))}.bg-neutral-700{--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity))}.bg-neutral-800{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity))}.bg-neutral-900{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity))}.bg-neutral-950{--tw-bg-opacity: 1;background-color:rgb(10 10 10 / var(--tw-bg-opacity))}.bg-orange-700{--tw-bg-opacity: 1;background-color:rgb(194 65 12 / var(--tw-bg-opacity))}.bg-orange-800{--tw-bg-opacity: 1;background-color:rgb(154 52 18 / var(--tw-bg-opacity))}.bg-orange-900{--tw-bg-opacity: 1;background-color:rgb(124 45 18 / var(--tw-bg-opacity))}.bg-orange-950{--tw-bg-opacity: 1;background-color:rgb(67 20 7 / var(--tw-bg-opacity))}.bg-purple-700{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity))}.bg-purple-800{--tw-bg-opacity: 1;background-color:rgb(107 33 168 / var(--tw-bg-opacity))}.bg-purple-900{--tw-bg-opacity: 1;background-color:rgb(88 28 135 / var(--tw-bg-opacity))}.bg-purple-950{--tw-bg-opacity: 1;background-color:rgb(59 7 100 / var(--tw-bg-opacity))}.bg-red-700{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity))}.bg-red-800{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity))}.bg-red-900{--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity))}.bg-red-950{--tw-bg-opacity: 1;background-color:rgb(69 10 10 / var(--tw-bg-opacity))}.bg-stone-700{--tw-bg-opacity: 1;background-color:rgb(68 64 60 / var(--tw-bg-opacity))}.bg-stone-800{--tw-bg-opacity: 1;background-color:rgb(41 37 36 / var(--tw-bg-opacity))}.bg-stone-900{--tw-bg-opacity: 1;background-color:rgb(28 25 23 / var(--tw-bg-opacity))}.bg-stone-950{--tw-bg-opacity: 1;background-color:rgb(12 10 9 / var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity))}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.from-cyan-900{--tw-gradient-from: #164e63 var(--tw-gradient-from-position);--tw-gradient-to: rgb(22 78 99 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-900{--tw-gradient-from: #14532d var(--tw-gradient-from-position);--tw-gradient-to: rgb(20 83 45 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-neutral-900{--tw-gradient-from: #171717 var(--tw-gradient-from-position);--tw-gradient-to: rgb(23 23 23 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-900{--tw-gradient-from: #7c2d12 var(--tw-gradient-from-position);--tw-gradient-to: rgb(124 45 18 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-900{--tw-gradient-from: #581c87 var(--tw-gradient-from-position);--tw-gradient-to: rgb(88 28 135 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-red-900{--tw-gradient-from: #7f1d1d var(--tw-gradient-from-position);--tw-gradient-to: rgb(127 29 29 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-stone-900{--tw-gradient-from: #1c1917 var(--tw-gradient-from-position);--tw-gradient-to: rgb(28 25 23 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.to-cyan-700{--tw-gradient-to: #0e7490 var(--tw-gradient-to-position)}.to-green-700{--tw-gradient-to: #15803d var(--tw-gradient-to-position)}.to-neutral-700{--tw-gradient-to: #404040 var(--tw-gradient-to-position)}.to-orange-700{--tw-gradient-to: #c2410c var(--tw-gradient-to-position)}.to-purple-700{--tw-gradient-to: #7e22ce var(--tw-gradient-to-position)}.to-red-700{--tw-gradient-to: #b91c1c var(--tw-gradient-to-position)}.to-stone-700{--tw-gradient-to: #44403c var(--tw-gradient-to-position)}.p-2{padding:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.text-center{text-align:center}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.leading-3{line-height:.75rem}.leading-4{line-height:1rem}.leading-5{line-height:1.25rem}.text-cyan-600{--tw-text-opacity: 1;color:rgb(8 145 178 / var(--tw-text-opacity))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity))}.text-neutral-600{--tw-text-opacity: 1;color:rgb(82 82 82 / var(--tw-text-opacity))}.text-neutral-800{--tw-text-opacity: 1;color:rgb(38 38 38 / var(--tw-text-opacity))}.text-orange-600{--tw-text-opacity: 1;color:rgb(234 88 12 / var(--tw-text-opacity))}.text-purple-600{--tw-text-opacity: 1;color:rgb(147 51 234 / var(--tw-text-opacity))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity))}.text-stone-600{--tw-text-opacity: 1;color:rgb(87 83 78 / var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.underline{text-decoration-line:underline}.no-underline{text-decoration-line:none}.decoration-2{text-decoration-thickness:2px}.underline-offset-4{text-underline-offset:4px}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow-\\[0_0px_10px_0px_rgba\\(0\\,0\\,0\\,0\\.3\\)\\]{--tw-shadow: 0 0px 10px 0px rgba(0,0,0,.3);--tw-shadow-colored: 0 0px 10px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_0px_30px_0px_rgba\\(0\\,0\\,0\\,0\\.6\\)\\]{--tw-shadow: 0 0px 30px 0px rgba(0,0,0,.6);--tw-shadow-colored: 0 0px 30px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline-dashed{outline-style:dashed}.outline-1{outline-width:1px}.outline-offset-4{outline-offset:4px}.outline-cyan-500{outline-color:#06b6d4}.outline-green-500{outline-color:#22c55e}.outline-neutral-500{outline-color:#737373}.outline-orange-500{outline-color:#f97316}.outline-purple-500{outline-color:#a855f7}.outline-red-500{outline-color:#ef4444}.outline-stone-500{outline-color:#78716c}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.hover\\:bg-cyan-700:hover{--tw-bg-opacity: 1;background-color:rgb(14 116 144 / var(--tw-bg-opacity))}.hover\\:bg-cyan-800:hover{--tw-bg-opacity: 1;background-color:rgb(21 94 117 / var(--tw-bg-opacity))}.hover\\:bg-cyan-900:hover{--tw-bg-opacity: 1;background-color:rgb(22 78 99 / var(--tw-bg-opacity))}.hover\\:bg-cyan-950:hover{--tw-bg-opacity: 1;background-color:rgb(8 51 68 / var(--tw-bg-opacity))}.hover\\:bg-green-700:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity))}.hover\\:bg-green-800:hover{--tw-bg-opacity: 1;background-color:rgb(22 101 52 / var(--tw-bg-opacity))}.hover\\:bg-green-900:hover{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity))}.hover\\:bg-green-950:hover{--tw-bg-opacity: 1;background-color:rgb(5 46 22 / var(--tw-bg-opacity))}.hover\\:bg-neutral-700:hover{--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity))}.hover\\:bg-neutral-800:hover{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity))}.hover\\:bg-neutral-900:hover{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity))}.hover\\:bg-neutral-950:hover{--tw-bg-opacity: 1;background-color:rgb(10 10 10 / var(--tw-bg-opacity))}.hover\\:bg-orange-700:hover{--tw-bg-opacity: 1;background-color:rgb(194 65 12 / var(--tw-bg-opacity))}.hover\\:bg-orange-800:hover{--tw-bg-opacity: 1;background-color:rgb(154 52 18 / var(--tw-bg-opacity))}.hover\\:bg-orange-900:hover{--tw-bg-opacity: 1;background-color:rgb(124 45 18 / var(--tw-bg-opacity))}.hover\\:bg-orange-950:hover{--tw-bg-opacity: 1;background-color:rgb(67 20 7 / var(--tw-bg-opacity))}.hover\\:bg-purple-700:hover{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity))}.hover\\:bg-purple-800:hover{--tw-bg-opacity: 1;background-color:rgb(107 33 168 / var(--tw-bg-opacity))}.hover\\:bg-purple-900:hover{--tw-bg-opacity: 1;background-color:rgb(88 28 135 / var(--tw-bg-opacity))}.hover\\:bg-purple-950:hover{--tw-bg-opacity: 1;background-color:rgb(59 7 100 / var(--tw-bg-opacity))}.hover\\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity))}.hover\\:bg-red-800:hover{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity))}.hover\\:bg-red-900:hover{--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity))}.hover\\:bg-red-950:hover{--tw-bg-opacity: 1;background-color:rgb(69 10 10 / var(--tw-bg-opacity))}.hover\\:bg-stone-700:hover{--tw-bg-opacity: 1;background-color:rgb(68 64 60 / var(--tw-bg-opacity))}.hover\\:bg-stone-800:hover{--tw-bg-opacity: 1;background-color:rgb(41 37 36 / var(--tw-bg-opacity))}.hover\\:bg-stone-900:hover{--tw-bg-opacity: 1;background-color:rgb(28 25 23 / var(--tw-bg-opacity))}.hover\\:bg-stone-950:hover{--tw-bg-opacity: 1;background-color:rgb(12 10 9 / var(--tw-bg-opacity))}.disabled\\:cursor-default:disabled{cursor:default}.disabled\\:bg-neutral-400:disabled{--tw-bg-opacity: 1;background-color:rgb(163 163 163 / var(--tw-bg-opacity))}.disabled\\:text-neutral-200:disabled{--tw-text-opacity: 1;color:rgb(229 229 229 / var(--tw-text-opacity))}.group:hover .group-hover\\:underline{text-decoration-line:underline}@media (min-width: 640px){.sm\\:w-96{width:24rem}}';function c(){}function d(i){return i()}function f(){return Object.create(null)}function h(i){i.forEach(d)}function y(i){return typeof i=="function"}function b(i,s){return i!=i?s==s:i!==s||i&&typeof i=="object"||typeof i=="function"}let S;function C(i,s){return i===s?!0:(S||(S=document.createElement("a")),S.href=s,i===S.href)}function L(i){return Object.keys(i).length===0}function A(i,...s){if(i==null){for(const g of s)g(void 0);return c}const u=i.subscribe(...s);return u.unsubscribe?()=>u.unsubscribe():u}function N(i,s,u){i.$$.on_destroy.push(A(s,u))}const M=typeof window<"u"?window:typeof globalThis<"u"?globalThis:Op;function B(i,s){i.appendChild(s)}function O(i,s,u){i.insertBefore(s,u||null)}function l(i){i.parentNode&&i.parentNode.removeChild(i)}function w(i,s){for(let u=0;u<i.length;u+=1)i[u]&&i[u].d(s)}function p(i){return document.createElement(i)}function v(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function x(i){return document.createTextNode(i)}function R(){return x(" ")}function T(){return x("")}function E(i,s,u,g){return i.addEventListener(s,u,g),()=>i.removeEventListener(s,u,g)}function $(i,s,u){u==null?i.removeAttribute(s):i.getAttribute(s)!==u&&i.setAttribute(s,u)}function j(i){return Array.from(i.childNodes)}function F(i,s){s=""+s,i.data!==s&&(i.data=s)}function I(i,s){i.value=s??""}function k(i,s,u){for(let g=0;g<i.options.length;g+=1){const m=i.options[g];if(m.__value===s){m.selected=!0;return}}(!u||s!==void 0)&&(i.selectedIndex=-1)}function V(i){const s=i.querySelector(":checked");return s&&s.__value}function W(i,s,u){i.classList.toggle(s,!!u)}let K;function Y(i){K=i}function Z(){if(!K)throw new Error("Function called outside component initialization");return K}function se(i){Z().$$.on_mount.push(i)}const ge=[],me=[];let Se=[];const re=[],ye=Promise.resolve();let Ie=!1;function Oe(){Ie||(Ie=!0,ye.then(ie))}function Me(i){Se.push(i)}const ft=new Set;let Fe=0;function ie(){if(Fe!==0)return;const i=K;do{try{for(;Fe<ge.length;){const s=ge[Fe];Fe++,Y(s),Re(s.$$)}}catch(s){throw ge.length=0,Fe=0,s}for(Y(null),ge.length=0,Fe=0;me.length;)me.pop()();for(let s=0;s<Se.length;s+=1){const u=Se[s];ft.has(u)||(ft.add(u),u())}Se.length=0}while(ge.length);for(;re.length;)re.pop()();Ie=!1,ft.clear(),Y(i)}function Re(i){if(i.fragment!==null){i.update(),h(i.before_update);const s=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,s),i.after_update.forEach(Me)}}function Te(i){const s=[],u=[];Se.forEach(g=>i.indexOf(g)===-1?s.push(g):u.push(g)),u.forEach(g=>g()),Se=s}const Pe=new Set;let He;function wt(){He={r:0,c:[],p:He}}function It(){He.r||h(He.c),He=He.p}function Et(i,s){i&&i.i&&(Pe.delete(i),i.i(s))}function Kt(i,s,u,g){if(i&&i.o){if(Pe.has(i))return;Pe.add(i),He.c.push(()=>{Pe.delete(i),g&&(u&&i.d(1),g())}),i.o(s)}else g&&g()}function yd(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function vd(i){i&&i.c()}function Xa(i,s,u){const{fragment:g,after_update:m}=i.$$;g&&g.m(s,u),Me(()=>{const _=i.$$.on_mount.map(d).filter(y);i.$$.on_destroy?i.$$.on_destroy.push(..._):h(_),i.$$.on_mount=[]}),m.forEach(Me)}function ec(i,s){const u=i.$$;u.fragment!==null&&(Te(u.after_update),h(u.on_destroy),u.fragment&&u.fragment.d(s),u.on_destroy=u.fragment=null,u.ctx=[])}function ww(i,s){i.$$.dirty[0]===-1&&(ge.push(i),Oe(),i.$$.dirty.fill(0)),i.$$.dirty[s/31|0]|=1<<s%31}function _d(i,s,u,g,m,_,P=null,U=[-1]){const z=K;Y(i);const H=i.$$={fragment:null,ctx:[],props:_,update:c,not_equal:m,bound:f(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(z?z.$$.context:[])),callbacks:f(),dirty:U,skip_bound:!1,root:s.target||z.$$.root};P&&P(H.root);let q=!1;if(H.ctx=u?u(i,s.props||{},(D,Q,...J)=>{const ee=J.length?J[0]:Q;return H.ctx&&m(H.ctx[D],H.ctx[D]=ee)&&(!H.skip_bound&&H.bound[D]&&H.bound[D](ee),q&&ww(i,D)),Q}):[],H.update(),q=!0,h(H.before_update),H.fragment=g?g(H.ctx):!1,s.target){if(s.hydrate){const D=j(s.target);H.fragment&&H.fragment.l(D),D.forEach(l)}else H.fragment&&H.fragment.c();s.intro&&Et(i.$$.fragment),Xa(i,s.target,s.anchor),ie()}Y(z)}class Ed{constructor(){ae(this,"$$"),ae(this,"$$set")}$destroy(){ec(this,1),this.$destroy=c}$on(s,u){if(!y(u))return c;const g=this.$$.callbacks[s]||(this.$$.callbacks[s]=[]);return g.push(u),()=>{const m=g.indexOf(u);m!==-1&&g.splice(m,1)}}$set(s){this.$$set&&!L(s)&&(this.$$.skip_bound=!0,this.$$set(s),this.$$.skip_bound=!1)}}const bw="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bw);function mw(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var tc={exports:{}};function kd(i,s=100,u={}){if(typeof i!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof i}\`.`);if(s<0)throw new RangeError("`wait` must not be negative.");const{immediate:g}=typeof u=="boolean"?{immediate:u}:u;let m,_,P,U,z;function H(){const D=Date.now()-U;if(D<s&&D>=0)P=setTimeout(H,s-D);else if(P=void 0,!g){const Q=m,J=_;m=void 0,_=void 0,z=i.apply(Q,J)}}const q=function(...D){if(m&&this!==m)throw new Error("Debounced method called with different contexts.");m=this,_=D,U=Date.now();const Q=g&&!P;if(P||(P=setTimeout(H,s)),Q){const J=m,ee=_;m=void 0,_=void 0,z=i.apply(J,ee)}return z};return q.clear=()=>{P&&(clearTimeout(P),P=void 0)},q.flush=()=>{if(!P)return;const D=m,Q=_;m=void 0,_=void 0,z=i.apply(D,Q),clearTimeout(P),P=void 0},q}tc.exports.debounce=kd,tc.exports=kd;var yw=tc.exports;const Ad=mw(yw),nc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sd=i=>i instanceof Uint8Array,rc=i=>new DataView(i.buffer,i.byteOffset,i.byteLength),bn=(i,s)=>i<<32-s|i>>>s;if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");const vw=Array.from({length:256},(i,s)=>s.toString(16).padStart(2,"0"));function Lt(i){if(!Sd(i))throw new Error("Uint8Array expected");let s="";for(let u=0;u<i.length;u++)s+=vw[i[u]];return s}function oc(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);const s=i.length;if(s%2)throw new Error("padded hex string expected, got unpadded hex of length "+s);const u=new Uint8Array(s/2);for(let g=0;g<u.length;g++){const m=g*2,_=i.slice(m,m+2),P=Number.parseInt(_,16);if(Number.isNaN(P)||P<0)throw new Error("Invalid byte sequence");u[g]=P}return u}function _w(i){if(typeof i!="string")throw new Error(`utf8ToBytes expected string, got ${typeof i}`);return new Uint8Array(new TextEncoder().encode(i))}function $d(i){if(typeof i=="string"&&(i=_w(i)),!Sd(i))throw new Error(`expected Uint8Array, got ${typeof i}`);return i}let Ew=class{clone(){return this._cloneInto()}};function xd(i){const s=g=>i().update($d(g)).digest(),u=i();return s.outputLen=u.outputLen,s.blockLen=u.blockLen,s.create=()=>i(),s}function kw(i=32){if(nc&&typeof nc.getRandomValues=="function")return nc.getRandomValues(new Uint8Array(i));throw new Error("crypto.getRandomValues must be defined")}function Td(i){if(!Number.isSafeInteger(i)||i<0)throw new Error(`Wrong positive integer: ${i}`)}function Pd(i,...s){if(!(i instanceof Uint8Array))throw new Error("Expected Uint8Array");if(s.length>0&&!s.includes(i.length))throw new Error(`Expected Uint8Array of length ${s}, not of length=${i.length}`)}function Aw(i){if(typeof i!="function"||typeof i.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Td(i.outputLen),Td(i.blockLen)}function ls(i,s=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(s&&i.finished)throw new Error("Hash#digest() has already been called")}function Sw(i,s){Pd(i);const u=s.outputLen;if(i.length<u)throw new Error(`digestInto() expects output buffer of length at least ${u}`)}const ic=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bd=i=>i instanceof Uint8Array,sc=i=>new DataView(i.buffer,i.byteOffset,i.byteLength),mn=(i,s)=>i<<32-s|i>>>s;if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");function $w(i){if(typeof i!="string")throw new Error(`utf8ToBytes expected string, got ${typeof i}`);return new Uint8Array(new TextEncoder().encode(i))}function ac(i){if(typeof i=="string"&&(i=$w(i)),!Bd(i))throw new Error(`expected Uint8Array, got ${typeof i}`);return i}function xw(...i){const s=new Uint8Array(i.reduce((g,m)=>g+m.length,0));let u=0;return i.forEach(g=>{if(!Bd(g))throw new Error("Uint8Array expected");s.set(g,u),u+=g.length}),s}class Id{clone(){return this._cloneInto()}}function Tw(i){const s=g=>i().update(ac(g)).digest(),u=i();return s.outputLen=u.outputLen,s.blockLen=u.blockLen,s.create=()=>i(),s}function Ld(i=32){if(ic&&typeof ic.getRandomValues=="function")return ic.getRandomValues(new Uint8Array(i));throw new Error("crypto.getRandomValues must be defined")}function Pw(i,s,u,g){if(typeof i.setBigUint64=="function")return i.setBigUint64(s,u,g);const m=BigInt(32),_=BigInt(4294967295),P=Number(u>>m&_),U=Number(u&_),z=g?4:0,H=g?0:4;i.setUint32(s+z,P,g),i.setUint32(s+H,U,g)}let Bw=class extends Id{constructor(i,s,u,g){super(),this.blockLen=i,this.outputLen=s,this.padOffset=u,this.isLE=g,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(i),this.view=sc(this.buffer)}update(i){ls(this);const{view:s,buffer:u,blockLen:g}=this;i=ac(i);const m=i.length;for(let _=0;_<m;){const P=Math.min(g-this.pos,m-_);if(P===g){const U=sc(i);for(;g<=m-_;_+=g)this.process(U,_);continue}u.set(i.subarray(_,_+P),this.pos),this.pos+=P,_+=P,this.pos===g&&(this.process(s,0),this.pos=0)}return this.length+=i.length,this.roundClean(),this}digestInto(i){ls(this),Sw(i,this),this.finished=!0;const{buffer:s,view:u,blockLen:g,isLE:m}=this;let{pos:_}=this;s[_++]=128,this.buffer.subarray(_).fill(0),this.padOffset>g-_&&(this.process(u,0),_=0);for(let q=_;q<g;q++)s[q]=0;Pw(u,g-8,BigInt(this.length*8),m),this.process(u,0);const P=sc(i),U=this.outputLen;if(U%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const z=U/4,H=this.get();if(z>H.length)throw new Error("_sha2: outputLen bigger than state");for(let q=0;q<z;q++)P.setUint32(4*q,H[q],m)}digest(){const{buffer:i,outputLen:s}=this;this.digestInto(i);const u=i.slice(0,s);return this.destroy(),u}_cloneInto(i){i||(i=new this.constructor),i.set(...this.get());const{blockLen:s,buffer:u,length:g,finished:m,destroyed:_,pos:P}=this;return i.length=g,i.pos=P,i.finished=m,i.destroyed=_,g%s&&i.buffer.set(u),i}};const Iw=(i,s,u)=>i&s^~i&u,Lw=(i,s,u)=>i&s^i&u^s&u,Cw=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ur=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lr=new Uint32Array(64);let Ow=class extends Bw{constructor(){super(64,32,8,!1),this.A=ur[0]|0,this.B=ur[1]|0,this.C=ur[2]|0,this.D=ur[3]|0,this.E=ur[4]|0,this.F=ur[5]|0,this.G=ur[6]|0,this.H=ur[7]|0}get(){const{A:i,B:s,C:u,D:g,E:m,F:_,G:P,H:U}=this;return[i,s,u,g,m,_,P,U]}set(i,s,u,g,m,_,P,U){this.A=i|0,this.B=s|0,this.C=u|0,this.D=g|0,this.E=m|0,this.F=_|0,this.G=P|0,this.H=U|0}process(i,s){for(let q=0;q<16;q++,s+=4)lr[q]=i.getUint32(s,!1);for(let q=16;q<64;q++){const D=lr[q-15],Q=lr[q-2],J=mn(D,7)^mn(D,18)^D>>>3,ee=mn(Q,17)^mn(Q,19)^Q>>>10;lr[q]=ee+lr[q-7]+J+lr[q-16]|0}let{A:u,B:g,C:m,D:_,E:P,F:U,G:z,H}=this;for(let q=0;q<64;q++){const D=mn(P,6)^mn(P,11)^mn(P,25),Q=H+D+Iw(P,U,z)+Cw[q]+lr[q]|0,J=(mn(u,2)^mn(u,13)^mn(u,22))+Lw(u,g,m)|0;H=z,z=U,U=P,P=_+Q|0,_=m,m=g,g=u,u=Q+J|0}u=u+this.A|0,g=g+this.B|0,m=m+this.C|0,_=_+this.D|0,P=P+this.E|0,U=U+this.F|0,z=z+this.G|0,H=H+this.H|0,this.set(u,g,m,_,P,U,z,H)}roundClean(){lr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const cc=Tw(()=>new Ow);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Cd=BigInt(0),ds=BigInt(1),Nw=BigInt(2),fs=i=>i instanceof Uint8Array,Rw=Array.from({length:256},(i,s)=>s.toString(16).padStart(2,"0"));function $o(i){if(!fs(i))throw new Error("Uint8Array expected");let s="";for(let u=0;u<i.length;u++)s+=Rw[i[u]];return s}function Od(i){const s=i.toString(16);return s.length&1?`0${s}`:s}function uc(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);return BigInt(i===""?"0":`0x${i}`)}function xo(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);const s=i.length;if(s%2)throw new Error("padded hex string expected, got unpadded hex of length "+s);const u=new Uint8Array(s/2);for(let g=0;g<u.length;g++){const m=g*2,_=i.slice(m,m+2),P=Number.parseInt(_,16);if(Number.isNaN(P)||P<0)throw new Error("Invalid byte sequence");u[g]=P}return u}function zt(i){return uc($o(i))}function lc(i){if(!fs(i))throw new Error("Uint8Array expected");return uc($o(Uint8Array.from(i).reverse()))}function dr(i,s){return xo(i.toString(16).padStart(s*2,"0"))}function dc(i,s){return dr(i,s).reverse()}function zw(i){return xo(Od(i))}function kt(i,s,u){let g;if(typeof s=="string")try{g=xo(s)}catch(_){throw new Error(`${i} must be valid hex string, got "${s}". Cause: ${_}`)}else if(fs(s))g=Uint8Array.from(s);else throw new Error(`${i} must be hex string or Uint8Array`);const m=g.length;if(typeof u=="number"&&m!==u)throw new Error(`${i} expected ${u} bytes, got ${m}`);return g}function Jr(...i){const s=new Uint8Array(i.reduce((g,m)=>g+m.length,0));let u=0;return i.forEach(g=>{if(!fs(g))throw new Error("Uint8Array expected");s.set(g,u),u+=g.length}),s}function Uw(i,s){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++)if(i[u]!==s[u])return!1;return!0}function Mw(i){if(typeof i!="string")throw new Error(`utf8ToBytes expected string, got ${typeof i}`);return new Uint8Array(new TextEncoder().encode(i))}function jw(i){let s;for(s=0;i>Cd;i>>=ds,s+=1);return s}function Hw(i,s){return i>>BigInt(s)&ds}const Dw=(i,s,u)=>i|(u?ds:Cd)<<BigInt(s),fc=i=>(Nw<<BigInt(i-1))-ds,hc=i=>new Uint8Array(i),Nd=i=>Uint8Array.from(i);function Rd(i,s,u){if(typeof i!="number"||i<2)throw new Error("hashLen must be a number");if(typeof s!="number"||s<2)throw new Error("qByteLen must be a number");if(typeof u!="function")throw new Error("hmacFn must be a function");let g=hc(i),m=hc(i),_=0;const P=()=>{g.fill(1),m.fill(0),_=0},U=(...q)=>u(m,g,...q),z=(q=hc())=>{m=U(Nd([0]),q),g=U(),q.length!==0&&(m=U(Nd([1]),q),g=U())},H=()=>{if(_++>=1e3)throw new Error("drbg: tried 1000 values");let q=0;const D=[];for(;q<s;){g=U();const Q=g.slice();D.push(Q),q+=g.length}return Jr(...D)};return(q,D)=>{P(),z(q);let Q;for(;!(Q=D(H()));)z();return P(),Q}}const Vw={bigint:i=>typeof i=="bigint",function:i=>typeof i=="function",boolean:i=>typeof i=="boolean",string:i=>typeof i=="string",stringOrUint8Array:i=>typeof i=="string"||i instanceof Uint8Array,isSafeInteger:i=>Number.isSafeInteger(i),array:i=>Array.isArray(i),field:(i,s)=>s.Fp.isValid(i),hash:i=>typeof i=="function"&&Number.isSafeInteger(i.outputLen)};function yi(i,s,u={}){const g=(m,_,P)=>{const U=Vw[_];if(typeof U!="function")throw new Error(`Invalid validator "${_}", expected function`);const z=i[m];if(!(P&&z===void 0)&&!U(z,i))throw new Error(`Invalid param ${String(m)}=${z} (${typeof z}), expected ${_}`)};for(const[m,_]of Object.entries(s))g(m,_,!1);for(const[m,_]of Object.entries(u))g(m,_,!0);return i}const qw=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Hw,bitLen:jw,bitMask:fc,bitSet:Dw,bytesToHex:$o,bytesToNumberBE:zt,bytesToNumberLE:lc,concatBytes:Jr,createHmacDrbg:Rd,ensureBytes:kt,equalBytes:Uw,hexToBytes:xo,hexToNumber:uc,numberToBytesBE:dr,numberToBytesLE:dc,numberToHexUnpadded:Od,numberToVarBytesBE:zw,utf8ToBytes:Mw,validateObject:yi},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ht=BigInt(0),tt=BigInt(1),Qr=BigInt(2),Fw=BigInt(3),pc=BigInt(4),zd=BigInt(5),Ud=BigInt(8);BigInt(9),BigInt(16);function bt(i,s){const u=i%s;return u>=ht?u:s+u}function Ww(i,s,u){if(u<=ht||s<ht)throw new Error("Expected power/modulo > 0");if(u===tt)return ht;let g=tt;for(;s>ht;)s&tt&&(g=g*i%u),i=i*i%u,s>>=tt;return g}function Gt(i,s,u){let g=i;for(;s-- >ht;)g*=g,g%=u;return g}function gc(i,s){if(i===ht||s<=ht)throw new Error(`invert: expected positive integers, got n=${i} mod=${s}`);let u=bt(i,s),g=s,m=ht,_=tt;for(;u!==ht;){const P=g/u,U=g%u,z=m-_*P;g=u,u=U,m=_,_=z}if(g!==tt)throw new Error("invert: does not exist");return bt(m,s)}function Kw(i){const s=(i-tt)/Qr;let u,g,m;for(u=i-tt,g=0;u%Qr===ht;u/=Qr,g++);for(m=Qr;m<i&&Ww(m,s,i)!==i-tt;m++);if(g===1){const P=(i+tt)/pc;return function(U,z){const H=U.pow(z,P);if(!U.eql(U.sqr(H),z))throw new Error("Cannot find square root");return H}}const _=(u+tt)/Qr;return function(P,U){if(P.pow(U,s)===P.neg(P.ONE))throw new Error("Cannot find square root");let z=g,H=P.pow(P.mul(P.ONE,m),u),q=P.pow(U,_),D=P.pow(U,u);for(;!P.eql(D,P.ONE);){if(P.eql(D,P.ZERO))return P.ZERO;let Q=1;for(let ee=P.sqr(D);Q<z&&!P.eql(ee,P.ONE);Q++)ee=P.sqr(ee);const J=P.pow(H,tt<<BigInt(z-Q-1));H=P.sqr(J),q=P.mul(q,J),D=P.mul(D,H),z=Q}return q}}function Gw(i){if(i%pc===Fw){const s=(i+tt)/pc;return function(u,g){const m=u.pow(g,s);if(!u.eql(u.sqr(m),g))throw new Error("Cannot find square root");return m}}if(i%Ud===zd){const s=(i-zd)/Ud;return function(u,g){const m=u.mul(g,Qr),_=u.pow(m,s),P=u.mul(g,_),U=u.mul(u.mul(P,Qr),_),z=u.mul(P,u.sub(U,u.ONE));if(!u.eql(u.sqr(z),g))throw new Error("Cannot find square root");return z}}return Kw(i)}const Zw=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Yw(i){const s={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},u=Zw.reduce((g,m)=>(g[m]="function",g),s);return yi(i,u)}function Jw(i,s,u){if(u<ht)throw new Error("Expected power > 0");if(u===ht)return i.ONE;if(u===tt)return s;let g=i.ONE,m=s;for(;u>ht;)u&tt&&(g=i.mul(g,m)),m=i.sqr(m),u>>=tt;return g}function Qw(i,s){const u=new Array(s.length),g=s.reduce((_,P,U)=>i.is0(P)?_:(u[U]=_,i.mul(_,P)),i.ONE),m=i.inv(g);return s.reduceRight((_,P,U)=>i.is0(P)?_:(u[U]=i.mul(_,u[U]),i.mul(_,P)),m),u}function Md(i,s){const u=s!==void 0?s:i.toString(2).length,g=Math.ceil(u/8);return{nBitLength:u,nByteLength:g}}function Xw(i,s,u=!1,g={}){if(i<=ht)throw new Error(`Expected Field ORDER > 0, got ${i}`);const{nBitLength:m,nByteLength:_}=Md(i,s);if(_>2048)throw new Error("Field lengths over 2048 bytes are not supported");const P=Gw(i),U=Object.freeze({ORDER:i,BITS:m,BYTES:_,MASK:fc(m),ZERO:ht,ONE:tt,create:z=>bt(z,i),isValid:z=>{if(typeof z!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof z}`);return ht<=z&&z<i},is0:z=>z===ht,isOdd:z=>(z&tt)===tt,neg:z=>bt(-z,i),eql:(z,H)=>z===H,sqr:z=>bt(z*z,i),add:(z,H)=>bt(z+H,i),sub:(z,H)=>bt(z-H,i),mul:(z,H)=>bt(z*H,i),pow:(z,H)=>Jw(U,z,H),div:(z,H)=>bt(z*gc(H,i),i),sqrN:z=>z*z,addN:(z,H)=>z+H,subN:(z,H)=>z-H,mulN:(z,H)=>z*H,inv:z=>gc(z,i),sqrt:g.sqrt||(z=>P(U,z)),invertBatch:z=>Qw(U,z),cmov:(z,H,q)=>q?H:z,toBytes:z=>u?dc(z,_):dr(z,_),fromBytes:z=>{if(z.length!==_)throw new Error(`Fp.fromBytes: expected ${_}, got ${z.length}`);return u?lc(z):zt(z)}});return Object.freeze(U)}function jd(i){if(typeof i!="bigint")throw new Error("field order must be bigint");const s=i.toString(2).length;return Math.ceil(s/8)}function Hd(i){const s=jd(i);return s+Math.ceil(s/2)}function eb(i,s,u=!1){const g=i.length,m=jd(s),_=Hd(s);if(g<16||g<_||g>1024)throw new Error(`expected ${_}-1024 bytes of input, got ${g}`);const P=u?zt(i):lc(i),U=bt(P,s-tt)+tt;return u?dc(U,m):dr(U,m)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tb=BigInt(0),wc=BigInt(1);function nb(i,s){const u=(m,_)=>{const P=_.negate();return m?P:_},g=m=>{const _=Math.ceil(s/m)+1,P=2**(m-1);return{windows:_,windowSize:P}};return{constTimeNegate:u,unsafeLadder(m,_){let P=i.ZERO,U=m;for(;_>tb;)_&wc&&(P=P.add(U)),U=U.double(),_>>=wc;return P},precomputeWindow(m,_){const{windows:P,windowSize:U}=g(_),z=[];let H=m,q=H;for(let D=0;D<P;D++){q=H,z.push(q);for(let Q=1;Q<U;Q++)q=q.add(H),z.push(q);H=q.double()}return z},wNAF(m,_,P){const{windows:U,windowSize:z}=g(m);let H=i.ZERO,q=i.BASE;const D=BigInt(2**m-1),Q=2**m,J=BigInt(m);for(let ee=0;ee<U;ee++){const G=ee*z;let te=Number(P&D);P>>=J,te>z&&(te-=Q,P+=wc);const ne=G,X=G+Math.abs(te)-1,ue=ee%2!==0,_e=te<0;te===0?q=q.add(u(ue,_[ne])):H=H.add(u(_e,_[X]))}return{p:H,f:q}},wNAFCached(m,_,P,U){const z=m._WINDOW_SIZE||1;let H=_.get(m);return H||(H=this.precomputeWindow(m,z),z!==1&&_.set(m,U(H))),this.wNAF(z,H,P)}}}function Dd(i){return Yw(i.Fp),yi(i,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Md(i.n,i.nBitLength),...i,p:i.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function rb(i){const s=Dd(i);yi(s,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:u,Fp:g,a:m}=s;if(u){if(!g.eql(m,g.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof u!="object"||typeof u.beta!="bigint"||typeof u.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...s})}const{bytesToNumberBE:ob,hexToBytes:ib}=qw,Xr={Err:class extends Error{constructor(i=""){super(i)}},_parseInt(i){const{Err:s}=Xr;if(i.length<2||i[0]!==2)throw new s("Invalid signature integer tag");const u=i[1],g=i.subarray(2,u+2);if(!u||g.length!==u)throw new s("Invalid signature integer: wrong length");if(g[0]&128)throw new s("Invalid signature integer: negative");if(g[0]===0&&!(g[1]&128))throw new s("Invalid signature integer: unnecessary leading zero");return{d:ob(g),l:i.subarray(u+2)}},toSig(i){const{Err:s}=Xr,u=typeof i=="string"?ib(i):i;if(!(u instanceof Uint8Array))throw new Error("ui8a expected");let g=u.length;if(g<2||u[0]!=48)throw new s("Invalid signature tag");if(u[1]!==g-2)throw new s("Invalid signature: incorrect length");const{d:m,l:_}=Xr._parseInt(u.subarray(2)),{d:P,l:U}=Xr._parseInt(_);if(U.length)throw new s("Invalid signature: left bytes after parsing");return{r:m,s:P}},hexFromSig(i){const s=H=>Number.parseInt(H[0],16)&8?"00"+H:H,u=H=>{const q=H.toString(16);return q.length&1?`0${q}`:q},g=s(u(i.s)),m=s(u(i.r)),_=g.length/2,P=m.length/2,U=u(_),z=u(P);return`30${u(P+_+4)}02${z}${m}02${U}${g}`}},zn=BigInt(0),Zt=BigInt(1);BigInt(2);const Vd=BigInt(3);BigInt(4);function sb(i){const s=rb(i),{Fp:u}=s,g=s.toBytes||((ee,G,te)=>{const ne=G.toAffine();return Jr(Uint8Array.from([4]),u.toBytes(ne.x),u.toBytes(ne.y))}),m=s.fromBytes||(ee=>{const G=ee.subarray(1),te=u.fromBytes(G.subarray(0,u.BYTES)),ne=u.fromBytes(G.subarray(u.BYTES,2*u.BYTES));return{x:te,y:ne}});function _(ee){const{a:G,b:te}=s,ne=u.sqr(ee),X=u.mul(ne,ee);return u.add(u.add(X,u.mul(ee,G)),te)}if(!u.eql(u.sqr(s.Gy),_(s.Gx)))throw new Error("bad generator point: equation left != right");function P(ee){return typeof ee=="bigint"&&zn<ee&&ee<s.n}function U(ee){if(!P(ee))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function z(ee){const{allowedPrivateKeyLengths:G,nByteLength:te,wrapPrivateKey:ne,n:X}=s;if(G&&typeof ee!="bigint"){if(ee instanceof Uint8Array&&(ee=$o(ee)),typeof ee!="string"||!G.includes(ee.length))throw new Error("Invalid key");ee=ee.padStart(te*2,"0")}let ue;try{ue=typeof ee=="bigint"?ee:zt(kt("private key",ee,te))}catch{throw new Error(`private key must be ${te} bytes, hex or bigint, not ${typeof ee}`)}return ne&&(ue=bt(ue,X)),U(ue),ue}const H=new Map;function q(ee){if(!(ee instanceof D))throw new Error("ProjectivePoint expected")}class D{constructor(G,te,ne){if(this.px=G,this.py=te,this.pz=ne,G==null||!u.isValid(G))throw new Error("x required");if(te==null||!u.isValid(te))throw new Error("y required");if(ne==null||!u.isValid(ne))throw new Error("z required")}static fromAffine(G){const{x:te,y:ne}=G||{};if(!G||!u.isValid(te)||!u.isValid(ne))throw new Error("invalid affine point");if(G instanceof D)throw new Error("projective point not allowed");const X=ue=>u.eql(ue,u.ZERO);return X(te)&&X(ne)?D.ZERO:new D(te,ne,u.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(G){const te=u.invertBatch(G.map(ne=>ne.pz));return G.map((ne,X)=>ne.toAffine(te[X])).map(D.fromAffine)}static fromHex(G){const te=D.fromAffine(m(kt("pointHex",G)));return te.assertValidity(),te}static fromPrivateKey(G){return D.BASE.multiply(z(G))}_setWindowSize(G){this._WINDOW_SIZE=G,H.delete(this)}assertValidity(){if(this.is0()){if(s.allowInfinityPoint&&!u.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:G,y:te}=this.toAffine();if(!u.isValid(G)||!u.isValid(te))throw new Error("bad point: x or y not FE");const ne=u.sqr(te),X=_(G);if(!u.eql(ne,X))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:G}=this.toAffine();if(u.isOdd)return!u.isOdd(G);throw new Error("Field doesn't support isOdd")}equals(G){q(G);const{px:te,py:ne,pz:X}=this,{px:ue,py:_e,pz:Ae}=G,le=u.eql(u.mul(te,Ae),u.mul(ue,X)),ce=u.eql(u.mul(ne,Ae),u.mul(_e,X));return le&&ce}negate(){return new D(this.px,u.neg(this.py),this.pz)}double(){const{a:G,b:te}=s,ne=u.mul(te,Vd),{px:X,py:ue,pz:_e}=this;let Ae=u.ZERO,le=u.ZERO,ce=u.ZERO,oe=u.mul(X,X),fe=u.mul(ue,ue),$e=u.mul(_e,_e),Be=u.mul(X,ue);return Be=u.add(Be,Be),ce=u.mul(X,_e),ce=u.add(ce,ce),Ae=u.mul(G,ce),le=u.mul(ne,$e),le=u.add(Ae,le),Ae=u.sub(fe,le),le=u.add(fe,le),le=u.mul(Ae,le),Ae=u.mul(Be,Ae),ce=u.mul(ne,ce),$e=u.mul(G,$e),Be=u.sub(oe,$e),Be=u.mul(G,Be),Be=u.add(Be,ce),ce=u.add(oe,oe),oe=u.add(ce,oe),oe=u.add(oe,$e),oe=u.mul(oe,Be),le=u.add(le,oe),$e=u.mul(ue,_e),$e=u.add($e,$e),oe=u.mul($e,Be),Ae=u.sub(Ae,oe),ce=u.mul($e,fe),ce=u.add(ce,ce),ce=u.add(ce,ce),new D(Ae,le,ce)}add(G){q(G);const{px:te,py:ne,pz:X}=this,{px:ue,py:_e,pz:Ae}=G;let le=u.ZERO,ce=u.ZERO,oe=u.ZERO;const fe=s.a,$e=u.mul(s.b,Vd);let Be=u.mul(te,ue),it=u.mul(ne,_e),st=u.mul(X,Ae),at=u.add(te,ne),de=u.add(ue,_e);at=u.mul(at,de),de=u.add(Be,it),at=u.sub(at,de),de=u.add(te,X);let ve=u.add(ue,Ae);return de=u.mul(de,ve),ve=u.add(Be,st),de=u.sub(de,ve),ve=u.add(ne,X),le=u.add(_e,Ae),ve=u.mul(ve,le),le=u.add(it,st),ve=u.sub(ve,le),oe=u.mul(fe,de),le=u.mul($e,st),oe=u.add(le,oe),le=u.sub(it,oe),oe=u.add(it,oe),ce=u.mul(le,oe),it=u.add(Be,Be),it=u.add(it,Be),st=u.mul(fe,st),de=u.mul($e,de),it=u.add(it,st),st=u.sub(Be,st),st=u.mul(fe,st),de=u.add(de,st),Be=u.mul(it,de),ce=u.add(ce,Be),Be=u.mul(ve,de),le=u.mul(at,le),le=u.sub(le,Be),Be=u.mul(at,it),oe=u.mul(ve,oe),oe=u.add(oe,Be),new D(le,ce,oe)}subtract(G){return this.add(G.negate())}is0(){return this.equals(D.ZERO)}wNAF(G){return J.wNAFCached(this,H,G,te=>{const ne=u.invertBatch(te.map(X=>X.pz));return te.map((X,ue)=>X.toAffine(ne[ue])).map(D.fromAffine)})}multiplyUnsafe(G){const te=D.ZERO;if(G===zn)return te;if(U(G),G===Zt)return this;const{endo:ne}=s;if(!ne)return J.unsafeLadder(this,G);let{k1neg:X,k1:ue,k2neg:_e,k2:Ae}=ne.splitScalar(G),le=te,ce=te,oe=this;for(;ue>zn||Ae>zn;)ue&Zt&&(le=le.add(oe)),Ae&Zt&&(ce=ce.add(oe)),oe=oe.double(),ue>>=Zt,Ae>>=Zt;return X&&(le=le.negate()),_e&&(ce=ce.negate()),ce=new D(u.mul(ce.px,ne.beta),ce.py,ce.pz),le.add(ce)}multiply(G){U(G);let te=G,ne,X;const{endo:ue}=s;if(ue){const{k1neg:_e,k1:Ae,k2neg:le,k2:ce}=ue.splitScalar(te);let{p:oe,f:fe}=this.wNAF(Ae),{p:$e,f:Be}=this.wNAF(ce);oe=J.constTimeNegate(_e,oe),$e=J.constTimeNegate(le,$e),$e=new D(u.mul($e.px,ue.beta),$e.py,$e.pz),ne=oe.add($e),X=fe.add(Be)}else{const{p:_e,f:Ae}=this.wNAF(te);ne=_e,X=Ae}return D.normalizeZ([ne,X])[0]}multiplyAndAddUnsafe(G,te,ne){const X=D.BASE,ue=(Ae,le)=>le===zn||le===Zt||!Ae.equals(X)?Ae.multiplyUnsafe(le):Ae.multiply(le),_e=ue(this,te).add(ue(G,ne));return _e.is0()?void 0:_e}toAffine(G){const{px:te,py:ne,pz:X}=this,ue=this.is0();G==null&&(G=ue?u.ONE:u.inv(X));const _e=u.mul(te,G),Ae=u.mul(ne,G),le=u.mul(X,G);if(ue)return{x:u.ZERO,y:u.ZERO};if(!u.eql(le,u.ONE))throw new Error("invZ was invalid");return{x:_e,y:Ae}}isTorsionFree(){const{h:G,isTorsionFree:te}=s;if(G===Zt)return!0;if(te)return te(D,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:G,clearCofactor:te}=s;return G===Zt?this:te?te(D,this):this.multiplyUnsafe(s.h)}toRawBytes(G=!0){return this.assertValidity(),g(D,this,G)}toHex(G=!0){return $o(this.toRawBytes(G))}}D.BASE=new D(s.Gx,s.Gy,u.ONE),D.ZERO=new D(u.ZERO,u.ONE,u.ZERO);const Q=s.nBitLength,J=nb(D,s.endo?Math.ceil(Q/2):Q);return{CURVE:s,ProjectivePoint:D,normPrivateKeyToScalar:z,weierstrassEquation:_,isWithinCurveOrder:P}}function ab(i){const s=Dd(i);return yi(s,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...s})}function cb(i){const s=ab(i),{Fp:u,n:g}=s,m=u.BYTES+1,_=2*u.BYTES+1;function P(de){return zn<de&&de<u.ORDER}function U(de){return bt(de,g)}function z(de){return gc(de,g)}const{ProjectivePoint:H,normPrivateKeyToScalar:q,weierstrassEquation:D,isWithinCurveOrder:Q}=sb({...s,toBytes(de,ve,ze){const We=ve.toAffine(),Ze=u.toBytes(We.x),Ve=Jr;return ze?Ve(Uint8Array.from([ve.hasEvenY()?2:3]),Ze):Ve(Uint8Array.from([4]),Ze,u.toBytes(We.y))},fromBytes(de){const ve=de.length,ze=de[0],We=de.subarray(1);if(ve===m&&(ze===2||ze===3)){const Ze=zt(We);if(!P(Ze))throw new Error("Point is not on curve");const Ve=D(Ze);let At=u.sqrt(Ve);const mt=(At&Zt)===Zt;return(ze&1)===1!==mt&&(At=u.neg(At)),{x:Ze,y:At}}else if(ve===_&&ze===4){const Ze=u.fromBytes(We.subarray(0,u.BYTES)),Ve=u.fromBytes(We.subarray(u.BYTES,2*u.BYTES));return{x:Ze,y:Ve}}else throw new Error(`Point of length ${ve} was invalid. Expected ${m} compressed bytes or ${_} uncompressed bytes`)}}),J=de=>$o(dr(de,s.nByteLength));function ee(de){const ve=g>>Zt;return de>ve}function G(de){return ee(de)?U(-de):de}const te=(de,ve,ze)=>zt(de.slice(ve,ze));class ne{constructor(ve,ze,We){this.r=ve,this.s=ze,this.recovery=We,this.assertValidity()}static fromCompact(ve){const ze=s.nByteLength;return ve=kt("compactSignature",ve,ze*2),new ne(te(ve,0,ze),te(ve,ze,2*ze))}static fromDER(ve){const{r:ze,s:We}=Xr.toSig(kt("DER",ve));return new ne(ze,We)}assertValidity(){if(!Q(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!Q(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(ve){return new ne(this.r,this.s,ve)}recoverPublicKey(ve){const{r:ze,s:We,recovery:Ze}=this,Ve=ce(kt("msgHash",ve));if(Ze==null||![0,1,2,3].includes(Ze))throw new Error("recovery id invalid");const At=Ze===2||Ze===3?ze+s.n:ze;if(At>=u.ORDER)throw new Error("recovery id 2 or 3 invalid");const mt=Ze&1?"03":"02",Ut=H.fromHex(mt+J(At)),ct=z(At),Jt=U(-Ve*ct),un=U(We*ct),_n=H.BASE.multiplyAndAddUnsafe(Ut,Jt,un);if(!_n)throw new Error("point at infinify");return _n.assertValidity(),_n}hasHighS(){return ee(this.s)}normalizeS(){return this.hasHighS()?new ne(this.r,U(-this.s),this.recovery):this}toDERRawBytes(){return xo(this.toDERHex())}toDERHex(){return Xr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return xo(this.toCompactHex())}toCompactHex(){return J(this.r)+J(this.s)}}const X={isValidPrivateKey(de){try{return q(de),!0}catch{return!1}},normPrivateKeyToScalar:q,randomPrivateKey:()=>{const de=Hd(s.n);return eb(s.randomBytes(de),s.n)},precompute(de=8,ve=H.BASE){return ve._setWindowSize(de),ve.multiply(BigInt(3)),ve}};function ue(de,ve=!0){return H.fromPrivateKey(de).toRawBytes(ve)}function _e(de){const ve=de instanceof Uint8Array,ze=typeof de=="string",We=(ve||ze)&&de.length;return ve?We===m||We===_:ze?We===2*m||We===2*_:de instanceof H}function Ae(de,ve,ze=!0){if(_e(de))throw new Error("first arg must be private key");if(!_e(ve))throw new Error("second arg must be public key");return H.fromHex(ve).multiply(q(de)).toRawBytes(ze)}const le=s.bits2int||function(de){const ve=zt(de),ze=de.length*8-s.nBitLength;return ze>0?ve>>BigInt(ze):ve},ce=s.bits2int_modN||function(de){return U(le(de))},oe=fc(s.nBitLength);function fe(de){if(typeof de!="bigint")throw new Error("bigint expected");if(!(zn<=de&&de<oe))throw new Error(`bigint expected < 2^${s.nBitLength}`);return dr(de,s.nByteLength)}function $e(de,ve,ze=Be){if(["recovered","canonical"].some(Ft=>Ft in ze))throw new Error("sign() legacy options not supported");const{hash:We,randomBytes:Ze}=s;let{lowS:Ve,prehash:At,extraEntropy:mt}=ze;Ve==null&&(Ve=!0),de=kt("msgHash",de),At&&(de=kt("prehashed msgHash",We(de)));const Ut=ce(de),ct=q(ve),Jt=[fe(ct),fe(Ut)];if(mt!=null){const Ft=mt===!0?Ze(u.BYTES):mt;Jt.push(kt("extraEntropy",Ft))}const un=Jr(...Jt),_n=Ut;function mr(Ft){const yr=le(Ft);if(!Q(yr))return;const ro=z(yr),Wt=H.BASE.multiply(yr).toAffine(),Dn=U(Wt.x);if(Dn===zn)return;const oo=U(ro*U(_n+Dn*ct));if(oo===zn)return;let io=(Wt.x===Dn?0:2)|Number(Wt.y&Zt),vr=oo;return Ve&&ee(oo)&&(vr=G(oo),io^=1),new ne(Dn,vr,io)}return{seed:un,k2sig:mr}}const Be={lowS:s.lowS,prehash:!1},it={lowS:s.lowS,prehash:!1};function st(de,ve,ze=Be){const{seed:We,k2sig:Ze}=$e(de,ve,ze),Ve=s;return Rd(Ve.hash.outputLen,Ve.nByteLength,Ve.hmac)(We,Ze)}H.BASE._setWindowSize(8);function at(de,ve,ze,We=it){var Ze;const Ve=de;if(ve=kt("msgHash",ve),ze=kt("publicKey",ze),"strict"in We)throw new Error("options.strict was renamed to lowS");const{lowS:At,prehash:mt}=We;let Ut,ct;try{if(typeof Ve=="string"||Ve instanceof Uint8Array)try{Ut=ne.fromDER(Ve)}catch(Wt){if(!(Wt instanceof Xr.Err))throw Wt;Ut=ne.fromCompact(Ve)}else if(typeof Ve=="object"&&typeof Ve.r=="bigint"&&typeof Ve.s=="bigint"){const{r:Wt,s:Dn}=Ve;Ut=new ne(Wt,Dn)}else throw new Error("PARSE");ct=H.fromHex(ze)}catch(Wt){if(Wt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(At&&Ut.hasHighS())return!1;mt&&(ve=s.hash(ve));const{r:Jt,s:un}=Ut,_n=ce(ve),mr=z(un),Ft=U(_n*mr),yr=U(Jt*mr),ro=(Ze=H.BASE.multiplyAndAddUnsafe(ct,Ft,yr))==null?void 0:Ze.toAffine();return ro?U(ro.x)===Jt:!1}return{CURVE:s,getPublicKey:ue,getSharedSecret:Ae,sign:st,verify:at,ProjectivePoint:H,Signature:ne,utils:X}}class qd extends Id{constructor(s,u){super(),this.finished=!1,this.destroyed=!1,Aw(s);const g=ac(u);if(this.iHash=s.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const m=this.blockLen,_=new Uint8Array(m);_.set(g.length>m?s.create().update(g).digest():g);for(let P=0;P<_.length;P++)_[P]^=54;this.iHash.update(_),this.oHash=s.create();for(let P=0;P<_.length;P++)_[P]^=106;this.oHash.update(_),_.fill(0)}update(s){return ls(this),this.iHash.update(s),this}digestInto(s){ls(this),Pd(s,this.outputLen),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){const s=new Uint8Array(this.oHash.outputLen);return this.digestInto(s),s}_cloneInto(s){s||(s=Object.create(Object.getPrototypeOf(this),{}));const{oHash:u,iHash:g,finished:m,destroyed:_,blockLen:P,outputLen:U}=this;return s=s,s.finished=m,s.destroyed=_,s.blockLen=P,s.outputLen=U,s.oHash=u._cloneInto(s.oHash),s.iHash=g._cloneInto(s.iHash),s}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Fd=(i,s,u)=>new qd(i,s).update(u).digest();Fd.create=(i,s)=>new qd(i,s);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ub(i){return{hash:i,hmac:(s,...u)=>Fd(i,s,xw(...u)),randomBytes:Ld}}function lb(i,s){const u=g=>cb({...i,...ub(g)});return Object.freeze({...u(s),create:u})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hs=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ps=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Wd=BigInt(1),gs=BigInt(2),Kd=(i,s)=>(i+s/gs)/s;function Gd(i){const s=hs,u=BigInt(3),g=BigInt(6),m=BigInt(11),_=BigInt(22),P=BigInt(23),U=BigInt(44),z=BigInt(88),H=i*i*i%s,q=H*H*i%s,D=Gt(q,u,s)*q%s,Q=Gt(D,u,s)*q%s,J=Gt(Q,gs,s)*H%s,ee=Gt(J,m,s)*J%s,G=Gt(ee,_,s)*ee%s,te=Gt(G,U,s)*G%s,ne=Gt(te,z,s)*te%s,X=Gt(ne,U,s)*G%s,ue=Gt(X,u,s)*q%s,_e=Gt(ue,P,s)*ee%s,Ae=Gt(_e,g,s)*H%s,le=Gt(Ae,gs,s);if(!bc.eql(bc.sqr(le),i))throw new Error("Cannot find square root");return le}const bc=Xw(hs,void 0,void 0,{sqrt:Gd}),vi=lb({a:BigInt(0),b:BigInt(7),Fp:bc,n:ps,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:i=>{const s=ps,u=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),g=-Wd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),m=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),_=u,P=BigInt("0x100000000000000000000000000000000"),U=Kd(_*i,s),z=Kd(-g*i,s);let H=bt(i-U*u-z*m,s),q=bt(-U*g-z*_,s);const D=H>P,Q=q>P;if(D&&(H=s-H),Q&&(q=s-q),H>P||q>P)throw new Error("splitScalar: Endomorphism failed, k="+i);return{k1neg:D,k1:H,k2neg:Q,k2:q}}}},cc),ws=BigInt(0),Zd=i=>typeof i=="bigint"&&ws<i&&i<hs,db=i=>typeof i=="bigint"&&ws<i&&i<ps,Yd={};function bs(i,...s){let u=Yd[i];if(u===void 0){const g=cc(Uint8Array.from(i,m=>m.charCodeAt(0)));u=Jr(g,g),Yd[i]=u}return cc(Jr(u,...s))}const mc=i=>i.toRawBytes(!0).slice(1),yc=i=>dr(i,32),vc=i=>bt(i,hs),_i=i=>bt(i,ps),_c=vi.ProjectivePoint,fb=(i,s,u)=>_c.BASE.multiplyAndAddUnsafe(i,s,u);function Ec(i){let s=vi.utils.normPrivateKeyToScalar(i),u=_c.fromPrivateKey(s);return{scalar:u.hasEvenY()?s:_i(-s),bytes:mc(u)}}function Jd(i){if(!Zd(i))throw new Error("bad x: need 0 < x < p");const s=vc(i*i),u=vc(s*i+BigInt(7));let g=Gd(u);g%gs!==ws&&(g=vc(-g));const m=new _c(i,g,Wd);return m.assertValidity(),m}function Qd(...i){return _i(zt(bs("BIP0340/challenge",...i)))}function hb(i){return Ec(i).bytes}function pb(i,s,u=Ld(32)){const g=kt("message",i),{bytes:m,scalar:_}=Ec(s),P=kt("auxRand",u,32),U=yc(_^zt(bs("BIP0340/aux",P))),z=bs("BIP0340/nonce",U,m,g),H=_i(zt(z));if(H===ws)throw new Error("sign failed: k is zero");const{bytes:q,scalar:D}=Ec(H),Q=Qd(q,m,g),J=new Uint8Array(64);if(J.set(q,0),J.set(yc(_i(D+Q*_)),32),!Xd(J,g,m))throw new Error("sign: Invalid signature produced");return J}function Xd(i,s,u){const g=kt("signature",i,64),m=kt("message",s),_=kt("publicKey",u,32);try{const P=Jd(zt(_)),U=zt(g.subarray(0,32));if(!Zd(U))return!1;const z=zt(g.subarray(32,64));if(!db(z))return!1;const H=Qd(yc(U),mc(P),m),q=fb(P,z,_i(-H));return!(!q||!q.hasEvenY()||q.toAffine().x!==U)}catch{return!1}}const Ct={getPublicKey:hb,sign:pb,verify:Xd,utils:{randomPrivateKey:vi.utils.randomPrivateKey,lift_x:Jd,pointToBytes:mc,numberToBytesBE:dr,bytesToNumberBE:zt,taggedHash:bs,mod:bt}};function kc(i){if(!Number.isSafeInteger(i)||i<0)throw new Error(`Wrong positive integer: ${i}`)}function gb(i){if(typeof i!="boolean")throw new Error(`Expected boolean, not ${i}`)}function ef(i,...s){if(!(i instanceof Uint8Array))throw new Error("Expected Uint8Array");if(s.length>0&&!s.includes(i.length))throw new Error(`Expected Uint8Array of length ${s}, not of length=${i.length}`)}function wb(i){if(typeof i!="function"||typeof i.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");kc(i.outputLen),kc(i.blockLen)}function bb(i,s=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(s&&i.finished)throw new Error("Hash#digest() has already been called")}function mb(i,s){ef(i);const u=s.outputLen;if(i.length<u)throw new Error(`digestInto() expects output buffer of length at least ${u}`)}const Ac={number:kc,bool:gb,bytes:ef,hash:wb,exists:bb,output:mb};function yb(i,s,u,g){if(typeof i.setBigUint64=="function")return i.setBigUint64(s,u,g);const m=BigInt(32),_=BigInt(4294967295),P=Number(u>>m&_),U=Number(u&_),z=g?4:0,H=g?0:4;i.setUint32(s+z,P,g),i.setUint32(s+H,U,g)}class vb extends Ew{constructor(s,u,g,m){super(),this.blockLen=s,this.outputLen=u,this.padOffset=g,this.isLE=m,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(s),this.view=rc(this.buffer)}update(s){Ac.exists(this);const{view:u,buffer:g,blockLen:m}=this;s=$d(s);const _=s.length;for(let P=0;P<_;){const U=Math.min(m-this.pos,_-P);if(U===m){const z=rc(s);for(;m<=_-P;P+=m)this.process(z,P);continue}g.set(s.subarray(P,P+U),this.pos),this.pos+=U,P+=U,this.pos===m&&(this.process(u,0),this.pos=0)}return this.length+=s.length,this.roundClean(),this}digestInto(s){Ac.exists(this),Ac.output(s,this),this.finished=!0;const{buffer:u,view:g,blockLen:m,isLE:_}=this;let{pos:P}=this;u[P++]=128,this.buffer.subarray(P).fill(0),this.padOffset>m-P&&(this.process(g,0),P=0);for(let D=P;D<m;D++)u[D]=0;yb(g,m-8,BigInt(this.length*8),_),this.process(g,0);const U=rc(s),z=this.outputLen;if(z%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const H=z/4,q=this.get();if(H>q.length)throw new Error("_sha2: outputLen bigger than state");for(let D=0;D<H;D++)U.setUint32(4*D,q[D],_)}digest(){const{buffer:s,outputLen:u}=this;this.digestInto(s);const g=s.slice(0,u);return this.destroy(),g}_cloneInto(s){s||(s=new this.constructor),s.set(...this.get());const{blockLen:u,buffer:g,length:m,finished:_,destroyed:P,pos:U}=this;return s.length=m,s.pos=U,s.finished=_,s.destroyed=P,m%u&&s.buffer.set(g),s}}const _b=(i,s,u)=>i&s^~i&u,Eb=(i,s,u)=>i&s^i&u^s&u,kb=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),fr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),hr=new Uint32Array(64);class tf extends vb{constructor(){super(64,32,8,!1),this.A=fr[0]|0,this.B=fr[1]|0,this.C=fr[2]|0,this.D=fr[3]|0,this.E=fr[4]|0,this.F=fr[5]|0,this.G=fr[6]|0,this.H=fr[7]|0}get(){const{A:s,B:u,C:g,D:m,E:_,F:P,G:U,H:z}=this;return[s,u,g,m,_,P,U,z]}set(s,u,g,m,_,P,U,z){this.A=s|0,this.B=u|0,this.C=g|0,this.D=m|0,this.E=_|0,this.F=P|0,this.G=U|0,this.H=z|0}process(s,u){for(let D=0;D<16;D++,u+=4)hr[D]=s.getUint32(u,!1);for(let D=16;D<64;D++){const Q=hr[D-15],J=hr[D-2],ee=bn(Q,7)^bn(Q,18)^Q>>>3,G=bn(J,17)^bn(J,19)^J>>>10;hr[D]=G+hr[D-7]+ee+hr[D-16]|0}let{A:g,B:m,C:_,D:P,E:U,F:z,G:H,H:q}=this;for(let D=0;D<64;D++){const Q=bn(U,6)^bn(U,11)^bn(U,25),J=q+Q+_b(U,z,H)+kb[D]+hr[D]|0,ee=(bn(g,2)^bn(g,13)^bn(g,22))+Eb(g,m,_)|0;q=H,H=z,z=U,U=P+J|0,P=_,_=m,m=g,g=J+ee|0}g=g+this.A|0,m=m+this.B|0,_=_+this.C|0,P=P+this.D|0,U=U+this.E|0,z=z+this.F|0,H=H+this.G|0,q=q+this.H|0,this.set(g,m,_,P,U,z,H,q)}roundClean(){hr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Ab extends tf{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Sc=xd(()=>new tf);xd(()=>new Ab);var To=Symbol("verified"),Sb=i=>i instanceof Object;function $b(i){if(!Sb(i)||typeof i.kind!="number"||typeof i.content!="string"||typeof i.created_at!="number"||typeof i.pubkey!="string"||!i.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(i.tags))return!1;for(let s=0;s<i.tags.length;s++){let u=i.tags[s];if(!Array.isArray(u))return!1;for(let g=0;g<u.length;g++)if(typeof u[g]=="object")return!1}return!0}new TextDecoder("utf-8");var xb=new TextEncoder,Tb=class{generateSecretKey(){return Ct.utils.randomPrivateKey()}getPublicKey(i){return Lt(Ct.getPublicKey(i))}finalizeEvent(i,s){const u=i;return u.pubkey=Lt(Ct.getPublicKey(s)),u.id=$c(u),u.sig=Lt(Ct.sign($c(u),s)),u[To]=!0,u}verifyEvent(i){if(typeof i[To]=="boolean")return i[To];const s=$c(i);if(s!==i.id)return i[To]=!1,!1;try{const u=Ct.verify(i.sig,s,i.pubkey);return i[To]=u,u}catch{return i[To]=!1,!1}}};function Pb(i){if(!$b(i))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,i.pubkey,i.created_at,i.kind,i.tags,i.content])}function $c(i){let s=Sc(xb.encode(Pb(i)));return Lt(s)}var ms=new Tb,Bb=ms.generateSecretKey,nf=ms.getPublicKey;ms.finalizeEvent,ms.verifyEvent;var eo=Symbol("verified"),Ib=i=>i instanceof Object;function Lb(i){if(!Ib(i)||typeof i.kind!="number"||typeof i.content!="string"||typeof i.created_at!="number"||typeof i.pubkey!="string"||!i.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(i.tags))return!1;for(let s=0;s<i.tags.length;s++){let u=i.tags[s];if(!Array.isArray(u))return!1;for(let g=0;g<u.length;g++)if(typeof u[g]=="object")return!1}return!0}new TextDecoder("utf-8");var Cb=new TextEncoder;function Ei(i){i.indexOf("://")===-1&&(i="wss://"+i);let s=new URL(i);return s.pathname=s.pathname.replace(/\/+/g,"/"),s.pathname.endsWith("/")&&(s.pathname=s.pathname.slice(0,-1)),(s.port==="80"&&s.protocol==="ws:"||s.port==="443"&&s.protocol==="wss:")&&(s.port=""),s.searchParams.sort(),s.hash="",s.toString()}var Ob=class{constructor(i){ae(this,"value"),ae(this,"next",null),ae(this,"prev",null),this.value=i}},Nb=class{constructor(){ae(this,"first"),ae(this,"last"),this.first=null,this.last=null}enqueue(i){const s=new Ob(i);return this.last?this.last===this.first?(this.last=s,this.last.prev=this.first,this.first.next=s):(s.prev=this.last,this.last.next=s,this.last=s):(this.first=s,this.last=s),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const s=this.first;return this.first=null,this.last=null,s.value}const i=this.first;return this.first=i.next,i.value}},Rb=class{generateSecretKey(){return Ct.utils.randomPrivateKey()}getPublicKey(i){return Lt(Ct.getPublicKey(i))}finalizeEvent(i,s){const u=i;return u.pubkey=Lt(Ct.getPublicKey(s)),u.id=xc(u),u.sig=Lt(Ct.sign(xc(u),s)),u[eo]=!0,u}verifyEvent(i){if(typeof i[eo]=="boolean")return i[eo];const s=xc(i);if(s!==i.id)return i[eo]=!1,!1;try{const u=Ct.verify(i.sig,s,i.pubkey);return i[eo]=u,u}catch{return i[eo]=!1,!1}}};function zb(i){if(!Lb(i))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,i.pubkey,i.created_at,i.kind,i.tags,i.content])}function xc(i){let s=Sc(Cb.encode(zb(i)));return Lt(s)}var ys=new Rb;ys.generateSecretKey,ys.getPublicKey,ys.finalizeEvent;var Ub=ys.verifyEvent,Mb=22242;function jb(i,s){if(i.ids&&i.ids.indexOf(s.id)===-1&&!i.ids.some(u=>s.id.startsWith(u))||i.kinds&&i.kinds.indexOf(s.kind)===-1||i.authors&&i.authors.indexOf(s.pubkey)===-1&&!i.authors.some(u=>s.pubkey.startsWith(u)))return!1;for(let u in i)if(u[0]==="#"){let g=u.slice(1),m=i[`#${g}`];if(m&&!s.tags.find(([_,P])=>_===u.slice(1)&&m.indexOf(P)!==-1))return!1}return!(i.since&&s.created_at<i.since||i.until&&s.created_at>i.until)}function Hb(i,s){for(let u=0;u<i.length;u++)if(jb(i[u],s))return!0;return!1}function Db(i,s){let u=s.length+3,g=i.indexOf(`"${s}":`)+u,m=i.slice(g).indexOf('"')+g+1;return i.slice(m,m+64)}function Vb(i){let s=i.slice(0,22).indexOf('"EVENT"');if(s===-1)return null;let u=i.slice(s+7+1).indexOf('"');if(u===-1)return null;let g=s+7+1+u,m=i.slice(g+1,80).indexOf('"');if(m===-1)return null;let _=g+1+m;return i.slice(g+1,_)}function qb(i,s){return{kind:Mb,created_at:Math.floor(Date.now()/1e3),tags:[["relay",i],["challenge",s]],content:""}}async function Fb(){return new Promise(i=>{const s=new MessageChannel,u=()=>{s.port1.removeEventListener("message",u),i()};s.port1.addEventListener("message",u),s.port2.postMessage(0),s.port1.start()})}var Wb=i=>(i[eo]=!0,!0),rf;try{rf=WebSocket}catch{}var of=class{constructor(i,s){ae(this,"url"),ae(this,"_connected",!1),ae(this,"onclose",null),ae(this,"onnotice",u=>console.debug(`NOTICE from ${this.url}: ${u}`)),ae(this,"_onauth",null),ae(this,"baseEoseTimeout",4400),ae(this,"connectionTimeout",4400),ae(this,"openSubs",new Map),ae(this,"connectionTimeoutHandle"),ae(this,"connectionPromise"),ae(this,"openCountRequests",new Map),ae(this,"openEventPublishes",new Map),ae(this,"ws"),ae(this,"incomingMessageQueue",new Nb),ae(this,"queueRunning",!1),ae(this,"challenge"),ae(this,"serial",0),ae(this,"verifyEvent"),this.url=Ei(i),this.verifyEvent=s.verifyEvent}static async connect(i,s){const u=new of(i,s);return await u.connect(),u}closeAllSubscriptions(i){for(let[s,u]of this.openSubs)u.close(i);this.openSubs.clear();for(let[s,u]of this.openEventPublishes)u.reject(new Error(i));this.openEventPublishes.clear();for(let[s,u]of this.openCountRequests)u.reject(new Error(i));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((i,s)=>{this.connectionTimeoutHandle=setTimeout(()=>{var u;s("connection timed out"),this.connectionPromise=void 0,(u=this.onclose)==null||u.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new rf(this.url)}catch(u){s(u);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,i()},this.ws.onerror=u=>{var g;s(u.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(g=this.onclose)==null||g.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var u;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(u=this.onclose)==null||u.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await Fb();this.queueRunning=!1}handleNext(){var i,s,u;const g=this.incomingMessageQueue.dequeue();if(!g)return!1;const m=Vb(g);if(m){const _=this.openSubs.get(m);if(!_)return;const P=Db(g,"id"),U=(i=_.alreadyHaveEvent)==null?void 0:i.call(_,P);if((s=_.receivedEvent)==null||s.call(_,this,P),U)return}try{let _=JSON.parse(g);switch(_[0]){case"EVENT":{const P=this.openSubs.get(_[1]),U=_[2];this.verifyEvent(U)&&Hb(P.filters,U)&&P.onevent(U);return}case"COUNT":{const P=_[1],U=_[2],z=this.openCountRequests.get(P);z&&(z.resolve(U.count),this.openCountRequests.delete(P));return}case"EOSE":{const P=this.openSubs.get(_[1]);if(!P)return;P.receivedEose();return}case"OK":{const P=_[1],U=_[2],z=_[3],H=this.openEventPublishes.get(P);U?H.resolve(z):H.reject(new Error(z)),this.openEventPublishes.delete(P);return}case"CLOSED":{const P=_[1],U=this.openSubs.get(P);if(!U)return;U.closed=!0,U.close(_[2]);return}case"NOTICE":this.onnotice(_[1]);return;case"AUTH":{this.challenge=_[1],(u=this._onauth)==null||u.call(this,_[1]);return}}}catch{return}}async send(i){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var s;(s=this.ws)==null||s.send(i)})}async auth(i){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const s=await i(qb(this.url,this.challenge)),u=new Promise((g,m)=>{this.openEventPublishes.set(s.id,{resolve:g,reject:m})});return this.send('["AUTH",'+JSON.stringify(s)+"]"),u}async publish(i){const s=new Promise((u,g)=>{this.openEventPublishes.set(i.id,{resolve:u,reject:g})});return this.send('["EVENT",'+JSON.stringify(i)+"]"),s}async count(i,s){this.serial++;const u=(s==null?void 0:s.id)||"count:"+this.serial,g=new Promise((m,_)=>{this.openCountRequests.set(u,{resolve:m,reject:_})});return this.send('["COUNT","'+u+'",'+JSON.stringify(i)+"]"),g}subscribe(i,s){const u=this.prepareSubscription(i,s);return u.fire(),u}prepareSubscription(i,s){this.serial++;const u=s.id||"sub:"+this.serial,g=new Kb(this,u,i,s);return this.openSubs.set(u,g),g}close(){var i;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(i=this.ws)==null||i.close()}_onmessage(i){this.incomingMessageQueue.enqueue(i.data),this.queueRunning||this.runQueue()}},Kb=class{constructor(i,s,u,g){ae(this,"relay"),ae(this,"id"),ae(this,"closed",!1),ae(this,"eosed",!1),ae(this,"filters"),ae(this,"alreadyHaveEvent"),ae(this,"receivedEvent"),ae(this,"onevent"),ae(this,"oneose"),ae(this,"onclose"),ae(this,"eoseTimeout"),ae(this,"eoseTimeoutHandle"),this.relay=i,this.filters=u,this.id=s,this.alreadyHaveEvent=g.alreadyHaveEvent,this.receivedEvent=g.receivedEvent,this.eoseTimeout=g.eoseTimeout||i.baseEoseTimeout,this.oneose=g.oneose,this.onclose=g.onclose,this.onevent=g.onevent||(m=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,m)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var i;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(i=this.oneose)==null||i.call(this))}close(i="closed by caller"){var s;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(s=this.onclose)==null||s.call(this,i)}},Gb=class{constructor(i){ae(this,"relays",new Map),ae(this,"seenOn",new Map),ae(this,"trackRelays",!1),ae(this,"verifyEvent"),ae(this,"trustedRelayURLs",new Set),this.verifyEvent=i.verifyEvent}async ensureRelay(i,s){i=Ei(i);let u=this.relays.get(i);return u||(u=new of(i,{verifyEvent:this.trustedRelayURLs.has(i)?Wb:this.verifyEvent}),s!=null&&s.connectionTimeout&&(u.connectionTimeout=s.connectionTimeout),this.relays.set(i,u)),await u.connect(),u}close(i){i.map(Ei).forEach(s=>{var u;(u=this.relays.get(s))==null||u.close()})}subscribeMany(i,s,u){return this.subscribeManyMap(Object.fromEntries(i.map(g=>[g,s])),u)}subscribeManyMap(i,s){this.trackRelays&&(s.receivedEvent=(D,Q)=>{let J=this.seenOn.get(Q);J||(J=new Set,this.seenOn.set(Q,J)),J.add(D)});const u=new Set,g=[],m=Object.keys(i).length,_=[];let P=D=>{var Q;_[D]=!0,_.filter(J=>J).length===m&&((Q=s.oneose)==null||Q.call(s),P=()=>{})};const U=[];let z=(D,Q)=>{var J;P(D),U[D]=Q,U.filter(ee=>ee).length===m&&((J=s.onclose)==null||J.call(s,U),z=()=>{})};const H=D=>{var Q;if((Q=s.alreadyHaveEvent)!=null&&Q.call(s,D))return!0;const J=u.has(D);return u.add(D),J},q=Promise.all(Object.entries(i).map(async(D,Q,J)=>{if(J.indexOf(D)!==Q){z(Q,"duplicate url");return}let[ee,G]=D;ee=Ei(ee);let te;try{te=await this.ensureRelay(ee,{connectionTimeout:s.maxWait?Math.max(s.maxWait*.8,s.maxWait-1e3):void 0})}catch(X){z(Q,(X==null?void 0:X.message)||String(X));return}let ne=te.subscribe(G,{...s,oneose:()=>P(Q),onclose:X=>z(Q,X),alreadyHaveEvent:H,eoseTimeout:s.maxWait});g.push(ne)}));return{async close(){await q,g.forEach(D=>{D.close()})}}}subscribeManyEose(i,s,u){const g=this.subscribeMany(i,s,{...u,oneose(){g.close()}});return g}async querySync(i,s,u){return new Promise(async g=>{const m=[];this.subscribeManyEose(i,[s],{...u,onevent(_){m.push(_)},onclose(_){g(m)}})})}async get(i,s,u){s.limit=1;const g=await this.querySync(i,s,u);return g.sort((m,_)=>_.created_at-m.created_at),g[0]||null}publish(i,s){return i.map(Ei).map(async(u,g,m)=>m.indexOf(u)!==g?Promise.reject("duplicate url"):(await this.ensureRelay(u)).publish(s))}},Zb=class extends Gb{constructor(){super({verifyEvent:Ub})}};function sf(i){return i instanceof Uint8Array||i!=null&&typeof i=="object"&&i.constructor.name==="Uint8Array"}function to(i,...s){if(!sf(i))throw new Error("Uint8Array expected");if(s.length>0&&!s.includes(i.length))throw new Error(`Uint8Array expected of length ${s}, not of length=${i.length}`)}function vs(i,s=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(s&&i.finished)throw new Error("Hash#digest() has already been called")}function af(i,s){to(i);const u=s.outputLen;if(i.length<u)throw new Error(`digestInto() expects output buffer of length at least ${u}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const qt=i=>new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)),Yb=i=>new DataView(i.buffer,i.byteOffset,i.byteLength);if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");function Jb(i){if(typeof i!="string")throw new Error(`string expected, got ${typeof i}`);return new Uint8Array(new TextEncoder().encode(i))}function ki(i){if(typeof i=="string")i=Jb(i);else if(sf(i))i=i.slice();else throw new Error(`Uint8Array expected, got ${typeof i}`);return i}const Qb=(i,s)=>(Object.assign(s,i),s),Un=16,Tc=new Uint8Array(16),yn=qt(Tc),Xb=225,em=(i,s,u,g)=>{const m=g&1;return{s3:u<<31|g>>>1,s2:s<<31|u>>>1,s1:i<<31|s>>>1,s0:i>>>1^Xb<<24&-(m&1)}},Yt=i=>(i>>>0&255)<<24|(i>>>8&255)<<16|(i>>>16&255)<<8|i>>>24&255|0;function tm(i){i.reverse();const s=i[15]&1;let u=0;for(let g=0;g<i.length;g++){const m=i[g];i[g]=m>>>1|u,u=(m&1)<<7}return i[0]^=-s&225,i}const nm=i=>i>64*1024?8:i>1024?4:2;class cf{constructor(s,u){this.blockLen=Un,this.outputLen=Un,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,s=ki(s),to(s,16);const g=Yb(s);let m=g.getUint32(0,!1),_=g.getUint32(4,!1),P=g.getUint32(8,!1),U=g.getUint32(12,!1);const z=[];for(let J=0;J<128;J++)z.push({s0:Yt(m),s1:Yt(_),s2:Yt(P),s3:Yt(U)}),{s0:m,s1:_,s2:P,s3:U}=em(m,_,P,U);const H=nm(u||1024);if(![1,2,4,8].includes(H))throw new Error(`ghash: wrong window size=${H}, should be 2, 4 or 8`);this.W=H;const q=128/H,D=this.windowSize=2**H,Q=[];for(let J=0;J<q;J++)for(let ee=0;ee<D;ee++){let G=0,te=0,ne=0,X=0;for(let ue=0;ue<H;ue++){if(!(ee>>>H-ue-1&1))continue;const{s0:_e,s1:Ae,s2:le,s3:ce}=z[H*J+ue];G^=_e,te^=Ae,ne^=le,X^=ce}Q.push({s0:G,s1:te,s2:ne,s3:X})}this.t=Q}_updateBlock(s,u,g,m){s^=this.s0,u^=this.s1,g^=this.s2,m^=this.s3;const{W:_,t:P,windowSize:U}=this;let z=0,H=0,q=0,D=0;const Q=(1<<_)-1;let J=0;for(const ee of[s,u,g,m])for(let G=0;G<4;G++){const te=ee>>>8*G&255;for(let ne=8/_-1;ne>=0;ne--){const X=te>>>_*ne&Q,{s0:ue,s1:_e,s2:Ae,s3:le}=P[J*U+X];z^=ue,H^=_e,q^=Ae,D^=le,J+=1}}this.s0=z,this.s1=H,this.s2=q,this.s3=D}update(s){s=ki(s),vs(this);const u=qt(s),g=Math.floor(s.length/Un),m=s.length%Un;for(let _=0;_<g;_++)this._updateBlock(u[_*4+0],u[_*4+1],u[_*4+2],u[_*4+3]);return m&&(Tc.set(s.subarray(g*Un)),this._updateBlock(yn[0],yn[1],yn[2],yn[3]),yn.fill(0)),this}destroy(){const{t:s}=this;for(const u of s)u.s0=0,u.s1=0,u.s2=0,u.s3=0}digestInto(s){vs(this),af(s,this),this.finished=!0;const{s0:u,s1:g,s2:m,s3:_}=this,P=qt(s);return P[0]=u,P[1]=g,P[2]=m,P[3]=_,s}digest(){const s=new Uint8Array(Un);return this.digestInto(s),this.destroy(),s}}class rm extends cf{constructor(s,u){s=ki(s);const g=tm(s.slice());super(g,u),g.fill(0)}update(s){s=ki(s),vs(this);const u=qt(s),g=s.length%Un,m=Math.floor(s.length/Un);for(let _=0;_<m;_++)this._updateBlock(Yt(u[_*4+3]),Yt(u[_*4+2]),Yt(u[_*4+1]),Yt(u[_*4+0]));return g&&(Tc.set(s.subarray(m*Un)),this._updateBlock(Yt(yn[3]),Yt(yn[2]),Yt(yn[1]),Yt(yn[0])),yn.fill(0)),this}digestInto(s){vs(this),af(s,this),this.finished=!0;const{s0:u,s1:g,s2:m,s3:_}=this,P=qt(s);return P[0]=u,P[1]=g,P[2]=m,P[3]=_,s.reverse()}}function uf(i){const s=(g,m)=>i(m,g.length).update(ki(g)).digest(),u=i(new Uint8Array(16),0);return s.outputLen=u.outputLen,s.blockLen=u.blockLen,s.create=(g,m)=>i(g,m),s}uf((i,s)=>new cf(i,s)),uf((i,s)=>new rm(i,s));const pr=16,om=283;function Pc(i){return i<<1^om&-(i>>7)}function Po(i,s){let u=0;for(;s>0;s>>=1)u^=i&-(s&1),i=Pc(i);return u}const Bc=(()=>{let i=new Uint8Array(256);for(let u=0,g=1;u<256;u++,g^=Pc(g))i[u]=g;const s=new Uint8Array(256);s[0]=99;for(let u=0;u<255;u++){let g=i[255-u];g|=g<<8,s[i[u]]=(g^g>>4^g>>5^g>>6^g>>7^99)&255}return s})(),im=Bc.map((i,s)=>Bc.indexOf(s)),sm=i=>i<<24|i>>>8,Ic=i=>i<<8|i>>>24;function lf(i,s){if(i.length!==256)throw new Error("Wrong sbox length");const u=new Uint32Array(256).map((H,q)=>s(i[q])),g=u.map(Ic),m=g.map(Ic),_=m.map(Ic),P=new Uint32Array(256*256),U=new Uint32Array(256*256),z=new Uint16Array(256*256);for(let H=0;H<256;H++)for(let q=0;q<256;q++){const D=H*256+q;P[D]=u[H]^g[q],U[D]=m[H]^_[q],z[D]=i[H]<<8|i[q]}return{sbox:i,sbox2:z,T0:u,T1:g,T2:m,T3:_,T01:P,T23:U}}const Lc=lf(Bc,i=>Po(i,3)<<24|i<<16|i<<8|Po(i,2)),df=lf(im,i=>Po(i,11)<<24|Po(i,13)<<16|Po(i,9)<<8|Po(i,14)),am=(()=>{const i=new Uint8Array(16);for(let s=0,u=1;s<16;s++,u=Pc(u))i[s]=u;return i})();function ff(i){to(i);const s=i.length;if(![16,24,32].includes(s))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${s}`);const{sbox2:u}=Lc,g=qt(i),m=g.length,_=U=>vn(u,U,U,U,U),P=new Uint32Array(s+28);P.set(g);for(let U=m;U<P.length;U++){let z=P[U-1];U%m===0?z=_(sm(z))^am[U/m-1]:m>6&&U%m===4&&(z=_(z)),P[U]=P[U-m]^z}return P}function cm(i){const s=ff(i),u=s.slice(),g=s.length,{sbox2:m}=Lc,{T0:_,T1:P,T2:U,T3:z}=df;for(let H=0;H<g;H+=4)for(let q=0;q<4;q++)u[H+q]=s[g-H-4+q];s.fill(0);for(let H=4;H<g-4;H++){const q=u[H],D=vn(m,q,q,q,q);u[H]=_[D&255]^P[D>>>8&255]^U[D>>>16&255]^z[D>>>24]}return u}function gr(i,s,u,g,m,_){return i[u<<8&65280|g>>>8&255]^s[m>>>8&65280|_>>>24&255]}function vn(i,s,u,g,m){return i[s&255|u&65280]|i[g>>>16&255|m>>>16&65280]<<16}function hf(i,s,u,g,m){const{sbox2:_,T01:P,T23:U}=Lc;let z=0;s^=i[z++],u^=i[z++],g^=i[z++],m^=i[z++];const H=i.length/4-2;for(let ee=0;ee<H;ee++){const G=i[z++]^gr(P,U,s,u,g,m),te=i[z++]^gr(P,U,u,g,m,s),ne=i[z++]^gr(P,U,g,m,s,u),X=i[z++]^gr(P,U,m,s,u,g);s=G,u=te,g=ne,m=X}const q=i[z++]^vn(_,s,u,g,m),D=i[z++]^vn(_,u,g,m,s),Q=i[z++]^vn(_,g,m,s,u),J=i[z++]^vn(_,m,s,u,g);return{s0:q,s1:D,s2:Q,s3:J}}function um(i,s,u,g,m){const{sbox2:_,T01:P,T23:U}=df;let z=0;s^=i[z++],u^=i[z++],g^=i[z++],m^=i[z++];const H=i.length/4-2;for(let ee=0;ee<H;ee++){const G=i[z++]^gr(P,U,s,m,g,u),te=i[z++]^gr(P,U,u,s,m,g),ne=i[z++]^gr(P,U,g,u,s,m),X=i[z++]^gr(P,U,m,g,u,s);s=G,u=te,g=ne,m=X}const q=i[z++]^vn(_,s,m,g,u),D=i[z++]^vn(_,u,s,m,g),Q=i[z++]^vn(_,g,u,s,m),J=i[z++]^vn(_,m,g,u,s);return{s0:q,s1:D,s2:Q,s3:J}}function pf(i,s){if(!s)return new Uint8Array(i);if(to(s),s.length<i)throw new Error(`aes: wrong destination length, expected at least ${i}, got: ${s.length}`);return s}function lm(i){if(to(i),i.length%pr!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${pr}`)}function dm(i,s,u){let g=i.length;const m=g%pr;if(!s&&m!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const _=qt(i);if(s){let z=pr-m;z||(z=pr),g=g+z}const P=pf(g,u),U=qt(P);return{b:_,o:U,out:P}}function fm(i,s){if(!s)return i;const u=i.length;if(!u)throw new Error("aes/pcks5: empty ciphertext not allowed");const g=i[u-1];if(g<=0||g>16)throw new Error(`aes/pcks5: wrong padding byte: ${g}`);const m=i.subarray(0,-g);for(let _=0;_<g;_++)if(i[u-_-1]!==g)throw new Error("aes/pcks5: wrong padding");return m}function hm(i){const s=new Uint8Array(16),u=qt(s);s.set(i);const g=pr-i.length;for(let m=pr-g;m<pr;m++)s[m]=g;return u}const gf=Qb({blockSize:16,nonceLength:16},function(i,s,u={}){to(i),to(s,16);const g=!u.disablePadding;return{encrypt:(m,_)=>{const P=ff(i),{b:U,o:z,out:H}=dm(m,g,_),q=qt(s);let D=q[0],Q=q[1],J=q[2],ee=q[3],G=0;for(;G+4<=U.length;)D^=U[G+0],Q^=U[G+1],J^=U[G+2],ee^=U[G+3],{s0:D,s1:Q,s2:J,s3:ee}=hf(P,D,Q,J,ee),z[G++]=D,z[G++]=Q,z[G++]=J,z[G++]=ee;if(g){const te=hm(m.subarray(G*4));D^=te[0],Q^=te[1],J^=te[2],ee^=te[3],{s0:D,s1:Q,s2:J,s3:ee}=hf(P,D,Q,J,ee),z[G++]=D,z[G++]=Q,z[G++]=J,z[G++]=ee}return P.fill(0),H},decrypt:(m,_)=>{lm(m);const P=cm(i),U=qt(s),z=pf(m.length,_),H=qt(m),q=qt(z);let D=U[0],Q=U[1],J=U[2],ee=U[3];for(let G=0;G+4<=H.length;){const te=D,ne=Q,X=J,ue=ee;D=H[G+0],Q=H[G+1],J=H[G+2],ee=H[G+3];const{s0:_e,s1:Ae,s2:le,s3:ce}=um(P,D,Q,J,ee);q[G++]=_e^te,q[G++]=Ae^ne,q[G++]=le^X,q[G++]=ce^ue}return P.fill(0),fm(z,g)}}});/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Bo(i){if(!Number.isSafeInteger(i))throw new Error(`Wrong integer: ${i}`)}function Mn(...i){const s=(m,_)=>P=>m(_(P)),u=Array.from(i).reverse().reduce((m,_)=>m?s(m,_.encode):_.encode,void 0),g=i.reduce((m,_)=>m?s(m,_.decode):_.decode,void 0);return{encode:u,decode:g}}function jn(i){return{encode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return s.map(u=>{if(Bo(u),u<0||u>=i.length)throw new Error(`Digit index outside alphabet: ${u} (alphabet: ${i.length})`);return i[u]})},decode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="string")throw new Error("alphabet.decode input should be array of strings");return s.map(u=>{if(typeof u!="string")throw new Error(`alphabet.decode: not string element=${u}`);const g=i.indexOf(u);if(g===-1)throw new Error(`Unknown letter: "${u}". Allowed: ${i}`);return g})}}}function Hn(i=""){if(typeof i!="string")throw new Error("join separator should be string");return{encode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="string")throw new Error("join.encode input should be array of strings");for(let u of s)if(typeof u!="string")throw new Error(`join.encode: non-string input=${u}`);return s.join(i)},decode:s=>{if(typeof s!="string")throw new Error("join.decode input should be string");return s.split(i)}}}function _s(i,s="="){if(Bo(i),typeof s!="string")throw new Error("padding chr should be string");return{encode(u){if(!Array.isArray(u)||u.length&&typeof u[0]!="string")throw new Error("padding.encode input should be array of strings");for(let g of u)if(typeof g!="string")throw new Error(`padding.encode: non-string input=${g}`);for(;u.length*i%8;)u.push(s);return u},decode(u){if(!Array.isArray(u)||u.length&&typeof u[0]!="string")throw new Error("padding.encode input should be array of strings");for(let m of u)if(typeof m!="string")throw new Error(`padding.decode: non-string input=${m}`);let g=u.length;if(g*i%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;g>0&&u[g-1]===s;g--)if(!((g-1)*i%8))throw new Error("Invalid padding: string has too much padding");return u.slice(0,g)}}}function wf(i){if(typeof i!="function")throw new Error("normalize fn should be function");return{encode:s=>s,decode:s=>i(s)}}function bf(i,s,u){if(s<2)throw new Error(`convertRadix: wrong from=${s}, base cannot be less than 2`);if(u<2)throw new Error(`convertRadix: wrong to=${u}, base cannot be less than 2`);if(!Array.isArray(i))throw new Error("convertRadix: data should be array");if(!i.length)return[];let g=0;const m=[],_=Array.from(i);for(_.forEach(P=>{if(Bo(P),P<0||P>=s)throw new Error(`Wrong integer: ${P}`)});;){let P=0,U=!0;for(let z=g;z<_.length;z++){const H=_[z],q=s*P+H;if(!Number.isSafeInteger(q)||s*P/s!==P||q-H!==s*P)throw new Error("convertRadix: carry overflow");if(P=q%u,_[z]=Math.floor(q/u),!Number.isSafeInteger(_[z])||_[z]*u+P!==q)throw new Error("convertRadix: carry overflow");if(U)_[z]?U=!1:g=z;else continue}if(m.push(P),U)break}for(let P=0;P<i.length-1&&i[P]===0;P++)m.push(0);return m.reverse()}const mf=(i,s)=>s?mf(s,i%s):i,Es=(i,s)=>i+(s-mf(i,s));function Cc(i,s,u,g){if(!Array.isArray(i))throw new Error("convertRadix2: data should be array");if(s<=0||s>32)throw new Error(`convertRadix2: wrong from=${s}`);if(u<=0||u>32)throw new Error(`convertRadix2: wrong to=${u}`);if(Es(s,u)>32)throw new Error(`convertRadix2: carry overflow from=${s} to=${u} carryBits=${Es(s,u)}`);let m=0,_=0;const P=2**u-1,U=[];for(const z of i){if(Bo(z),z>=2**s)throw new Error(`convertRadix2: invalid data word=${z} from=${s}`);if(m=m<<s|z,_+s>32)throw new Error(`convertRadix2: carry overflow pos=${_} from=${s}`);for(_+=s;_>=u;_-=u)U.push((m>>_-u&P)>>>0);m&=2**_-1}if(m=m<<u-_&P,!g&&_>=s)throw new Error("Excess padding");if(!g&&m)throw new Error(`Non-zero padding: ${m}`);return g&&_>0&&U.push(m>>>0),U}function pm(i){return Bo(i),{encode:s=>{if(!(s instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return bf(Array.from(s),2**8,i)},decode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(bf(s,i,2**8))}}}function wr(i,s=!1){if(Bo(i),i<=0||i>32)throw new Error("radix2: bits should be in (0..32]");if(Es(8,i)>32||Es(i,8)>32)throw new Error("radix2: carry overflow");return{encode:u=>{if(!(u instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Cc(Array.from(u),8,i,!s)},decode:u=>{if(!Array.isArray(u)||u.length&&typeof u[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Cc(u,i,8,s))}}}function yf(i){if(typeof i!="function")throw new Error("unsafeWrapper fn should be function");return function(...s){try{return i.apply(null,s)}catch{}}}const gm=Mn(wr(4),jn("0123456789ABCDEF"),Hn("")),wm=Mn(wr(5),jn("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),_s(5),Hn(""));Mn(wr(5),jn("0123456789ABCDEFGHIJKLMNOPQRSTUV"),_s(5),Hn("")),Mn(wr(5),jn("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Hn(""),wf(i=>i.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const Ai=Mn(wr(6),jn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),_s(6),Hn("")),bm=Mn(wr(6),jn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),_s(6),Hn("")),Oc=i=>Mn(pm(58),jn(i),Hn("")),Nc=Oc("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");Oc("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),Oc("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const vf=[0,2,3,5,6,7,9,10,11],mm={encode(i){let s="";for(let u=0;u<i.length;u+=8){const g=i.subarray(u,u+8);s+=Nc.encode(g).padStart(vf[g.length],"1")}return s},decode(i){let s=[];for(let u=0;u<i.length;u+=11){const g=i.slice(u,u+11),m=vf.indexOf(g.length),_=Nc.decode(g);for(let P=0;P<_.length-m;P++)if(_[P]!==0)throw new Error("base58xmr: wrong padding");s=s.concat(Array.from(_.slice(_.length-m)))}return Uint8Array.from(s)}},Rc=Mn(jn("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Hn("")),_f=[996825010,642813549,513874426,1027748829,705979059];function Si(i){const s=i>>25;let u=(i&33554431)<<5;for(let g=0;g<_f.length;g++)(s>>g&1)===1&&(u^=_f[g]);return u}function Ef(i,s,u=1){const g=i.length;let m=1;for(let _=0;_<g;_++){const P=i.charCodeAt(_);if(P<33||P>126)throw new Error(`Invalid prefix (${i})`);m=Si(m)^P>>5}m=Si(m);for(let _=0;_<g;_++)m=Si(m)^i.charCodeAt(_)&31;for(let _ of s)m=Si(m)^_;for(let _=0;_<6;_++)m=Si(m);return m^=u,Rc.encode(Cc([m%2**30],30,5,!1))}function kf(i){const s=i==="bech32"?1:734539939,u=wr(5),g=u.decode,m=u.encode,_=yf(g);function P(q,D,Q=90){if(typeof q!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof q}`);if(!Array.isArray(D)||D.length&&typeof D[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof D}`);const J=q.length+7+D.length;if(Q!==!1&&J>Q)throw new TypeError(`Length ${J} exceeds limit ${Q}`);return q=q.toLowerCase(),`${q}1${Rc.encode(D)}${Ef(q,D,s)}`}function U(q,D=90){if(typeof q!="string")throw new Error(`bech32.decode input should be string, not ${typeof q}`);if(q.length<8||D!==!1&&q.length>D)throw new TypeError(`Wrong string length: ${q.length} (${q}). Expected (8..${D})`);const Q=q.toLowerCase();if(q!==Q&&q!==q.toUpperCase())throw new Error("String must be lowercase or uppercase");q=Q;const J=q.lastIndexOf("1");if(J===0||J===-1)throw new Error('Letter "1" must be present between prefix and data only');const ee=q.slice(0,J),G=q.slice(J+1);if(G.length<6)throw new Error("Data must be at least 6 characters long");const te=Rc.decode(G).slice(0,-6),ne=Ef(ee,te,s);if(!G.endsWith(ne))throw new Error(`Invalid checksum in ${q}: expected "${ne}"`);return{prefix:ee,words:te}}const z=yf(U);function H(q){const{prefix:D,words:Q}=U(q,!1);return{prefix:D,words:Q,bytes:g(Q)}}return{encode:P,decode:U,decodeToBytes:H,decodeUnsafe:z,fromWords:g,fromWordsUnsafe:_,toWords:m}}const Af=kf("bech32");kf("bech32m");const ym={encode:i=>new TextDecoder().decode(i),decode:i=>new TextEncoder().encode(i)},vm=Mn(wr(4),jn("0123456789abcdef"),Hn(""),wf(i=>{if(typeof i!="string"||i.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof i} with length ${i.length}`);return i.toLowerCase()}));`${Object.keys({utf8:ym,hex:vm,base16:gm,base32:wm,base64:Ai,base64url:bm,base58:Nc,base58xmr:mm}).join(", ")}`;var no=Symbol("verified"),_m=i=>i instanceof Object;function Em(i){if(!_m(i)||typeof i.kind!="number"||typeof i.content!="string"||typeof i.created_at!="number"||typeof i.pubkey!="string"||!i.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(i.tags))return!1;for(let s=0;s<i.tags.length;s++){let u=i.tags[s];if(!Array.isArray(u))return!1;for(let g=0;g<u.length;g++)if(typeof u[g]=="object")return!1}return!0}var km=new TextDecoder("utf-8"),Sf=new TextEncoder;function $i(i){i.indexOf("://")===-1&&(i="wss://"+i);let s=new URL(i);return s.pathname=s.pathname.replace(/\/+/g,"/"),s.pathname.endsWith("/")&&(s.pathname=s.pathname.slice(0,-1)),(s.port==="80"&&s.protocol==="ws:"||s.port==="443"&&s.protocol==="wss:")&&(s.port=""),s.searchParams.sort(),s.hash="",s.toString()}var Am=class{constructor(i){ae(this,"value"),ae(this,"next",null),ae(this,"prev",null),this.value=i}},Sm=class{constructor(){ae(this,"first"),ae(this,"last"),this.first=null,this.last=null}enqueue(i){const s=new Am(i);return this.last?this.last===this.first?(this.last=s,this.last.prev=this.first,this.first.next=s):(s.prev=this.last,this.last.next=s,this.last=s):(this.first=s,this.last=s),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const s=this.first;return this.first=null,this.last=null,s.value}const i=this.first;return this.first=i.next,i.value}},$m=class{generateSecretKey(){return Ct.utils.randomPrivateKey()}getPublicKey(i){return Lt(Ct.getPublicKey(i))}finalizeEvent(i,s){const u=i;return u.pubkey=Lt(Ct.getPublicKey(s)),u.id=zc(u),u.sig=Lt(Ct.sign(zc(u),s)),u[no]=!0,u}verifyEvent(i){if(typeof i[no]=="boolean")return i[no];const s=zc(i);if(s!==i.id)return i[no]=!1,!1;try{const u=Ct.verify(i.sig,s,i.pubkey);return i[no]=u,u}catch{return i[no]=!1,!1}}};function xm(i){if(!Em(i))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,i.pubkey,i.created_at,i.kind,i.tags,i.content])}function zc(i){let s=Sc(Sf.encode(xm(i)));return Lt(s)}var ks=new $m,Tm=ks.generateSecretKey,Pm=ks.getPublicKey,Bm=ks.finalizeEvent,$f=ks.verifyEvent;async function Im(i,s,u){const g=i instanceof Uint8Array?Lt(i):i,m=vi.getSharedSecret(g,"02"+s),_=xf(m);let P=Uint8Array.from(kw(16)),U=Sf.encode(u),z=gf(_,P).encrypt(U),H=Ai.encode(new Uint8Array(z)),q=Ai.encode(new Uint8Array(P.buffer));return`${H}?iv=${q}`}async function Lm(i,s,u){const g=i instanceof Uint8Array?Lt(i):i;let[m,_]=u.split("?iv="),P=vi.getSharedSecret(g,"02"+s),U=xf(P),z=Ai.decode(_),H=Ai.decode(m),q=gf(U,z).decrypt(H);return km.decode(q)}function xf(i){return i.slice(1,33)}var Cm=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,Om;try{Om=fetch}catch{}var Nm=22242,Uc=24133,Rm=31990;function zm(i,s){if(i.ids&&i.ids.indexOf(s.id)===-1&&!i.ids.some(u=>s.id.startsWith(u))||i.kinds&&i.kinds.indexOf(s.kind)===-1||i.authors&&i.authors.indexOf(s.pubkey)===-1&&!i.authors.some(u=>s.pubkey.startsWith(u)))return!1;for(let u in i)if(u[0]==="#"){let g=u.slice(1),m=i[`#${g}`];if(m&&!s.tags.find(([_,P])=>_===u.slice(1)&&m.indexOf(P)!==-1))return!1}return!(i.since&&s.created_at<i.since||i.until&&s.created_at>i.until)}function Um(i,s){for(let u=0;u<i.length;u++)if(zm(i[u],s))return!0;return!1}function Mm(i,s){let u=s.length+3,g=i.indexOf(`"${s}":`)+u,m=i.slice(g).indexOf('"')+g+1;return i.slice(m,m+64)}function jm(i){let s=i.slice(0,22).indexOf('"EVENT"');if(s===-1)return null;let u=i.slice(s+7+1).indexOf('"');if(u===-1)return null;let g=s+7+1+u,m=i.slice(g+1,80).indexOf('"');if(m===-1)return null;let _=g+1+m;return i.slice(g+1,_)}function Hm(i,s){return{kind:Nm,created_at:Math.floor(Date.now()/1e3),tags:[["relay",i],["challenge",s]],content:""}}async function Dm(){return new Promise(i=>{const s=new MessageChannel,u=()=>{s.port1.removeEventListener("message",u),i()};s.port1.addEventListener("message",u),s.port2.postMessage(0),s.port1.start()})}var Vm=i=>(i[no]=!0,!0),Tf;try{Tf=WebSocket}catch{}var Pf=class{constructor(i,s){ae(this,"url"),ae(this,"_connected",!1),ae(this,"onclose",null),ae(this,"onnotice",u=>console.debug(`NOTICE from ${this.url}: ${u}`)),ae(this,"_onauth",null),ae(this,"baseEoseTimeout",4400),ae(this,"connectionTimeout",4400),ae(this,"openSubs",new Map),ae(this,"connectionTimeoutHandle"),ae(this,"connectionPromise"),ae(this,"openCountRequests",new Map),ae(this,"openEventPublishes",new Map),ae(this,"ws"),ae(this,"incomingMessageQueue",new Sm),ae(this,"queueRunning",!1),ae(this,"challenge"),ae(this,"serial",0),ae(this,"verifyEvent"),this.url=$i(i),this.verifyEvent=s.verifyEvent}static async connect(i,s){const u=new Pf(i,s);return await u.connect(),u}closeAllSubscriptions(i){for(let[s,u]of this.openSubs)u.close(i);this.openSubs.clear();for(let[s,u]of this.openEventPublishes)u.reject(new Error(i));this.openEventPublishes.clear();for(let[s,u]of this.openCountRequests)u.reject(new Error(i));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((i,s)=>{this.connectionTimeoutHandle=setTimeout(()=>{var u;s("connection timed out"),this.connectionPromise=void 0,(u=this.onclose)==null||u.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new Tf(this.url)}catch(u){s(u);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,i()},this.ws.onerror=u=>{var g;s(u.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(g=this.onclose)==null||g.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var u;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(u=this.onclose)==null||u.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await Dm();this.queueRunning=!1}handleNext(){var i,s,u;const g=this.incomingMessageQueue.dequeue();if(!g)return!1;const m=jm(g);if(m){const _=this.openSubs.get(m);if(!_)return;const P=Mm(g,"id"),U=(i=_.alreadyHaveEvent)==null?void 0:i.call(_,P);if((s=_.receivedEvent)==null||s.call(_,this,P),U)return}try{let _=JSON.parse(g);switch(_[0]){case"EVENT":{const P=this.openSubs.get(_[1]),U=_[2];this.verifyEvent(U)&&Um(P.filters,U)&&P.onevent(U);return}case"COUNT":{const P=_[1],U=_[2],z=this.openCountRequests.get(P);z&&(z.resolve(U.count),this.openCountRequests.delete(P));return}case"EOSE":{const P=this.openSubs.get(_[1]);if(!P)return;P.receivedEose();return}case"OK":{const P=_[1],U=_[2],z=_[3],H=this.openEventPublishes.get(P);U?H.resolve(z):H.reject(new Error(z)),this.openEventPublishes.delete(P);return}case"CLOSED":{const P=_[1],U=this.openSubs.get(P);if(!U)return;U.closed=!0,U.close(_[2]);return}case"NOTICE":this.onnotice(_[1]);return;case"AUTH":{this.challenge=_[1],(u=this._onauth)==null||u.call(this,_[1]);return}}}catch{return}}async send(i){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var s;(s=this.ws)==null||s.send(i)})}async auth(i){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const s=await i(Hm(this.url,this.challenge)),u=new Promise((g,m)=>{this.openEventPublishes.set(s.id,{resolve:g,reject:m})});return this.send('["AUTH",'+JSON.stringify(s)+"]"),u}async publish(i){const s=new Promise((u,g)=>{this.openEventPublishes.set(i.id,{resolve:u,reject:g})});return this.send('["EVENT",'+JSON.stringify(i)+"]"),s}async count(i,s){this.serial++;const u=(s==null?void 0:s.id)||"count:"+this.serial,g=new Promise((m,_)=>{this.openCountRequests.set(u,{resolve:m,reject:_})});return this.send('["COUNT","'+u+'",'+JSON.stringify(i)+"]"),g}subscribe(i,s){const u=this.prepareSubscription(i,s);return u.fire(),u}prepareSubscription(i,s){this.serial++;const u=s.id||"sub:"+this.serial,g=new qm(this,u,i,s);return this.openSubs.set(u,g),g}close(){var i;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(i=this.ws)==null||i.close()}_onmessage(i){this.incomingMessageQueue.enqueue(i.data),this.queueRunning||this.runQueue()}},qm=class{constructor(i,s,u,g){ae(this,"relay"),ae(this,"id"),ae(this,"closed",!1),ae(this,"eosed",!1),ae(this,"filters"),ae(this,"alreadyHaveEvent"),ae(this,"receivedEvent"),ae(this,"onevent"),ae(this,"oneose"),ae(this,"onclose"),ae(this,"eoseTimeout"),ae(this,"eoseTimeoutHandle"),this.relay=i,this.filters=u,this.id=s,this.alreadyHaveEvent=g.alreadyHaveEvent,this.receivedEvent=g.receivedEvent,this.eoseTimeout=g.eoseTimeout||i.baseEoseTimeout,this.oneose=g.oneose,this.onclose=g.onclose,this.onevent=g.onevent||(m=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,m)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var i;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(i=this.oneose)==null||i.call(this))}close(i="closed by caller"){var s;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(s=this.onclose)==null||s.call(this,i)}},Fm=class{constructor(i){ae(this,"relays",new Map),ae(this,"seenOn",new Map),ae(this,"trackRelays",!1),ae(this,"verifyEvent"),ae(this,"trustedRelayURLs",new Set),this.verifyEvent=i.verifyEvent}async ensureRelay(i,s){i=$i(i);let u=this.relays.get(i);return u||(u=new Pf(i,{verifyEvent:this.trustedRelayURLs.has(i)?Vm:this.verifyEvent}),s!=null&&s.connectionTimeout&&(u.connectionTimeout=s.connectionTimeout),this.relays.set(i,u)),await u.connect(),u}close(i){i.map($i).forEach(s=>{var u;(u=this.relays.get(s))==null||u.close()})}subscribeMany(i,s,u){return this.subscribeManyMap(Object.fromEntries(i.map(g=>[g,s])),u)}subscribeManyMap(i,s){this.trackRelays&&(s.receivedEvent=(D,Q)=>{let J=this.seenOn.get(Q);J||(J=new Set,this.seenOn.set(Q,J)),J.add(D)});const u=new Set,g=[],m=Object.keys(i).length,_=[];let P=D=>{var Q;_[D]=!0,_.filter(J=>J).length===m&&((Q=s.oneose)==null||Q.call(s),P=()=>{})};const U=[];let z=(D,Q)=>{var J;P(D),U[D]=Q,U.filter(ee=>ee).length===m&&((J=s.onclose)==null||J.call(s,U),z=()=>{})};const H=D=>{var Q;if((Q=s.alreadyHaveEvent)!=null&&Q.call(s,D))return!0;const J=u.has(D);return u.add(D),J},q=Promise.all(Object.entries(i).map(async(D,Q,J)=>{if(J.indexOf(D)!==Q){z(Q,"duplicate url");return}let[ee,G]=D;ee=$i(ee);let te;try{te=await this.ensureRelay(ee,{connectionTimeout:s.maxWait?Math.max(s.maxWait*.8,s.maxWait-1e3):void 0})}catch(X){z(Q,(X==null?void 0:X.message)||String(X));return}let ne=te.subscribe(G,{...s,oneose:()=>P(Q),onclose:X=>z(Q,X),alreadyHaveEvent:H,eoseTimeout:s.maxWait});g.push(ne)}));return{async close(){await q,g.forEach(D=>{D.close()})}}}subscribeManyEose(i,s,u){const g=this.subscribeMany(i,s,{...u,oneose(){g.close()}});return g}async querySync(i,s,u){return new Promise(async g=>{const m=[];this.subscribeManyEose(i,[s],{...u,onevent(_){m.push(_)},onclose(_){g(m)}})})}async get(i,s,u){s.limit=1;const g=await this.querySync(i,s,u);return g.sort((m,_)=>_.created_at-m.created_at),g[0]||null}publish(i,s){return i.map($i).map(async(u,g,m)=>m.indexOf(u)!==g?Promise.reject("duplicate url"):(await this.ensureRelay(u)).publish(s))}},Wm=class extends Fm{constructor(){super({verifyEvent:$f})}},Bf;try{Bf=fetch}catch{}var As=/^bunker:\/\/([0-9a-f]{64})\??([?\/\w:.=&%]*)$/;async function Km(i){let s=i.match(As);if(s)try{const u=s[1],g=new URLSearchParams(s[2]);return{pubkey:u,relays:g.getAll("relay"),secret:g.get("secret")}}catch{}return If(i)}async function If(i){const s=i.match(Cm);if(!s)return null;const[u,g="_",m]=s;try{const _=`https://${m}/.well-known/nostr.json?name=${g}`,P=await(await Bf(_,{redirect:"error"})).json();let U=P.names[g],z=P.nip46[U]||[];return{pubkey:U,relays:z,secret:null}}catch{return null}}var Lf=class{constructor(i,s,u={}){if(ae(this,"pool"),ae(this,"subCloser"),ae(this,"isOpen"),ae(this,"serial"),ae(this,"idPrefix"),ae(this,"listeners"),ae(this,"waitingForAuth"),ae(this,"secretKey"),ae(this,"bp"),s.relays.length===0)throw new Error("no relays are specified for this bunker");this.pool=u.pool||new Wm,this.secretKey=i,this.bp=s,this.isOpen=!1,this.idPrefix=Math.random().toString(36).substring(7),this.serial=0,this.listeners={},this.waitingForAuth={};const g=this.listeners,m=this.waitingForAuth;this.subCloser=this.pool.subscribeMany(this.bp.relays,[{kinds:[Uc],"#p":[Pm(this.secretKey)]}],{async onevent(_){const{id:P,result:U,error:z}=JSON.parse(await Lm(i,_.pubkey,_.content));if(U==="auth_url"&&m[P]){delete m[P],u.onauth?u.onauth(z):console.warn(`nostr-tools/nip46: remote signer ${s.pubkey} tried to send an "auth_url"='${z}' but there was no onauth() callback configured.`);return}let H=g[P];H&&(z?H.reject(z):U&&H.resolve(U),delete g[P])}}),this.isOpen=!0}async close(){this.isOpen=!1,this.subCloser.close()}async sendRequest(i,s){return new Promise(async(u,g)=>{try{if(!this.isOpen)throw new Error("this signer is not open anymore, create a new one");this.serial++;const m=`${this.idPrefix}-${this.serial}`,_=await Im(this.secretKey,this.bp.pubkey,JSON.stringify({id:m,method:i,params:s})),P=Bm({kind:Uc,tags:[["p",this.bp.pubkey]],content:_,created_at:Math.floor(Date.now()/1e3)},this.secretKey);this.listeners[m]={resolve:u,reject:g},this.waitingForAuth[m]=!0,await Promise.any(this.pool.publish(this.bp.relays,P))}catch(m){g(m)}})}async ping(){let i=await this.sendRequest("ping",[]);if(i!=="pong")throw new Error(`result is not pong: ${i}`)}async connect(){await this.sendRequest("connect",[this.bp.pubkey,this.bp.secret||""])}async getPublicKey(){return this.bp.pubkey}async getRelays(){return JSON.parse(await this.sendRequest("get_relays",[]))}async signEvent(i){let s=await this.sendRequest("sign_event",[JSON.stringify(i)]),u=JSON.parse(s);if(u.pubkey===this.bp.pubkey&&$f(u))return u;throw new Error(`event returned from bunker is improperly signed: ${JSON.stringify(u)}`)}async nip04Encrypt(i,s){return await this.sendRequest("nip04_encrypt",[i,s])}async nip04Decrypt(i,s){return await this.sendRequest("nip04_decrypt",[i,s])}async nip44GetKey(i){let s=await this.sendRequest("nip44_get_key",[i]);return oc(s)}async nip44Encrypt(i,s){return await this.sendRequest("nip44_encrypt",[i,s])}async nip44Decrypt(i,s){return await this.sendRequest("nip44_encrypt",[i,s])}};async function Gm(i,s,u,g,m){let _=Tm(),P=new Lf(_,i.bunkerPointer,s),U=await P.sendRequest("create_account",[u,g,""]);return P.bp.pubkey=U,await P.connect(),P}async function Zm(i,s){const u=await i.querySync(s,{kinds:[Rm],"#k":[Uc.toString()]});return u.sort((g,m)=>m.created_at-g.created_at),(await Promise.all(u.map(async(g,m)=>{try{const _=JSON.parse(g.content);try{if(u.findIndex(U=>JSON.parse(U.content).nip05===_.nip05)!==m)return}catch{}const P=await If(_.nip05);if(P&&P.pubkey===g.pubkey&&P.relays.length)return{bunkerPointer:P,nip05:_.nip05,domain:_.nip05.split("@")[1],name:_.name||_.display_name,picture:_.picture,about:_.about,website:_.website,local:!1}}catch{return}}))).filter(g=>g!==void 0)}var Cf=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,Of;try{Of=fetch}catch{}async function Ym(i){var s;const u=i.match(Cf);if(!u)return null;const[g,m="_",_]=u;try{const P=`https://${_}/.well-known/nostr.json?name=${m}`,U=await(await Of(P,{redirect:"error"})).json();let z=U.names[m];return z?{pubkey:z,relays:(s=U.relays)==null?void 0:s[z]}:null}catch{return null}}new TextDecoder("utf-8"),new TextEncoder;var Jm=5e3;function Qm(i){return ey("npub",oc(i))}function Xm(i,s){let u=Af.toWords(s);return Af.encode(i,u,Jm)}function ey(i,s){return Xm(i,s)}const Io=[];function ty(i,s=c){let u;const g=new Set;function m(U){if(b(i,U)&&(i=U,u)){const z=!Io.length;for(const H of g)H[1](),Io.push(H,i);if(z){for(let H=0;H<Io.length;H+=2)Io[H][0](Io[H+1]);Io.length=0}}}function _(U){m(U(i))}function P(U,z=c){const H=[U,z];return g.add(H),g.size===1&&(u=s(m,_)||c),U(i),()=>{g.delete(H),g.size===0&&u&&(u(),u=null)}}return{set:m,update:_,subscribe:P}}const ny=i=>{const{subscribe:s,set:u}=ty(void 0,()=>{let g=window.matchMedia(i);u(g.matches);const m=()=>u(g.matches);return"addEventListener"in g?g.addEventListener("change",m):g.addListener(m),()=>{"removeEventListener"in g?g.removeEventListener("change",m):g.removeListener(m)}});return{subscribe:s}};function ry(i){let s,u,g;return{c(){s=v("svg"),u=v("circle"),g=v("path"),$(u,"class","opacity-25"),$(u,"cx","12"),$(u,"cy","12"),$(u,"r","10"),$(u,"stroke","currentColor"),$(u,"stroke-width","4"),$(g,"class","opacity-75"),$(g,"fill","currentColor"),$(g,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),$(s,"class","ml-2 h-5 w-5 animate-spin text-white"),$(s,"xmlns","http://www.w3.org/2000/svg"),$(s,"fill","none"),$(s,"viewBox","0 0 24 24")},m(m,_){O(m,s,_),B(s,u),B(s,g)},p:c,i:c,o:c,d(m){m&&l(s)}}}class Nf extends Ed{constructor(s){super(),_d(this,s,null,ry,b,{})}}const{window:Mc}=M;function Rf(i,s,u){const g=i.slice();return g[78]=s[u],g}function oy(i){let s,u,g,m,_,P,U,z,H,q,D,Q,J=!i[20]&&!i[13]&&!i[14]&&!i[15]&&zf(i);const ee=[hy,fy,dy,ly,uy,cy,ay],G=[];function te(ne,X){return ne[13]?0:ne[14]?1:ne[15]?2:ne[20]?3:ne[17]?4:ne[21]?6:5}return U=te(i),z=G[U]=ee[U](i),{c(){s=p("div"),u=p("button"),g=x(""),_=R(),J&&J.c(),P=R(),z.c(),$(u,"class",m="absolute right-2 top-0 cursor-pointer bg-transparent text-3xl text-"+i[0]+"-600"),$(s,"class",H="animate-show rounded-md bg-gradient-to-b px-8 py-8 shadow-[0_0px_30px_0px_rgba(0,0,0,0.6)] transition-all sm:w-96 from-"+i[0]+"-900 to-"+i[0]+"-700 "+i[27])},m(ne,X){O(ne,s,X),B(s,u),B(u,g),B(s,_),J&&J.m(s,null),B(s,P),G[U].m(s,null),q=!0,D||(Q=E(u,"click",function(){y(i[20]?i[32]:i[30])&&(i[20]?i[32]:i[30]).apply(this,arguments)}),D=!0)},p(ne,X){i=ne,(!q||X[0]&1&&m!==(m="absolute right-2 top-0 cursor-pointer bg-transparent text-3xl text-"+i[0]+"-600"))&&$(u,"class",m),!i[20]&&!i[13]&&!i[14]&&!i[15]?J?J.p(i,X):(J=zf(i),J.c(),J.m(s,P)):J&&(J.d(1),J=null);let ue=U;U=te(i),U===ue?G[U].p(i,X):(wt(),Kt(G[ue],1,1,()=>{G[ue]=null}),It(),z=G[U],z?z.p(i,X):(z=G[U]=ee[U](i),z.c()),Et(z,1),z.m(s,null)),(!q||X[0]&134217729&&H!==(H="animate-show rounded-md bg-gradient-to-b px-8 py-8 shadow-[0_0px_30px_0px_rgba(0,0,0,0.6)] transition-all sm:w-96 from-"+i[0]+"-900 to-"+i[0]+"-700 "+i[27]))&&$(s,"class",H)},i(ne){q||(Et(z),q=!0)},o(ne){Kt(z),q=!1},d(ne){ne&&l(s),J&&J.d(),G[U].d(),D=!1,Q()}}}function iy(i){let s,u,g,m,_;const P=[vy,yy,my,by,wy],U=[];function z(H,q){return H[12]?0:!H[21]&&!H[2]?1:!H[21]&&H[2]?2:H[2]?4:3}return u=z(i),g=U[u]=P[u](i),{c(){s=p("div"),g.c(),$(s,"class",m="rounded px-2 py-2 shadow-[0_0px_10px_0px_rgba(0,0,0,0.3)] transition-all duration-200 bg-"+i[0]+"-700 hover:bg-"+i[0]+"-800 "+i[27])},m(H,q){O(H,s,q),U[u].m(s,null),_=!0},p(H,q){let D=u;u=z(H),u===D?U[u].p(H,q):(wt(),Kt(U[D],1,1,()=>{U[D]=null}),It(),g=U[u],g?g.p(H,q):(g=U[u]=P[u](H),g.c()),Et(g,1),g.m(s,null)),(!_||q[0]&134217729&&m!==(m="rounded px-2 py-2 shadow-[0_0px_10px_0px_rgba(0,0,0,0.3)] transition-all duration-200 bg-"+H[0]+"-700 hover:bg-"+H[0]+"-800 "+H[27]))&&$(s,"class",m)},i(H){_||(Et(g),_=!0)},o(H){Kt(g),_=!1},d(H){H&&l(s),U[u].d()}}}function sy(i){return{c,m:c,p:c,i:c,o:c,d:c}}function zf(i){let s,u,g,m,_;return{c(){s=p("button"),u=x("?"),$(s,"class",g="absolute bottom-1 right-3 cursor-pointer bg-transparent text-xl text-"+i[0]+"-600")},m(P,U){O(P,s,U),B(s,u),m||(_=E(s,"click",i[31]),m=!0)},p(P,U){U[0]&1&&g!==(g="absolute bottom-1 right-3 cursor-pointer bg-transparent text-xl text-"+P[0]+"-600")&&$(s,"class",g)},d(P){P&&l(s),m=!1,_()}}}function ay(i){let s,u,g,m,_,P,U=i[21].npub+"",z,H,q,D,Q,J,ee,G,te,ne,X,ue=nf(i[11])+"",_e,Ae,le,ce=(i[21].picture||i[21].name)&&Uf(i);return{c(){s=p("div"),u=p("div"),u.textContent="You are connected to Nostr as",g=R(),m=p("a"),ce&&ce.c(),_=R(),P=p("div"),z=x(U),q=R(),D=p("button"),Q=x("Disconnect"),ee=R(),G=p("div"),te=x("This webpage is using the public key:"),ne=p("br"),X=R(),_e=x(ue),$(u,"class","mb-4 text-sm"),$(P,"class","block break-all"),$(m,"target","_blank"),$(m,"href",H="https://nosta.me/"+i[21].npub),$(m,"class","group text-white no-underline"),$(s,"class","text-center"),$(D,"class",J="my-2 mt-6 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),$(G,"class","mt-6 block break-all text-center text-sm")},m(oe,fe){O(oe,s,fe),B(s,u),B(s,g),B(s,m),ce&&ce.m(m,null),B(m,_),B(m,P),B(P,z),O(oe,q,fe),O(oe,D,fe),B(D,Q),O(oe,ee,fe),O(oe,G,fe),B(G,te),B(G,ne),B(G,X),B(G,_e),Ae||(le=E(D,"click",i[34]),Ae=!0)},p(oe,fe){oe[21].picture||oe[21].name?ce?ce.p(oe,fe):(ce=Uf(oe),ce.c(),ce.m(m,_)):ce&&(ce.d(1),ce=null),fe[0]&2097152&&U!==(U=oe[21].npub+"")&&F(z,U),fe[0]&2097152&&H!==(H="https://nosta.me/"+oe[21].npub)&&$(m,"href",H),fe[0]&1&&J!==(J="my-2 mt-6 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white bg-"+oe[0]+"-900 hover:bg-"+oe[0]+"-950")&&$(D,"class",J),fe[0]&2048&&ue!==(ue=nf(oe[11])+"")&&F(_e,ue)},i:c,o:c,d(oe){oe&&(l(s),l(q),l(D),l(ee),l(G)),ce&&ce.d(),Ae=!1,le()}}}function cy(i){let s,u,g,m,_,P,U,z,H,q,D,Q,J,ee,G,te,ne,X=i[19]&&Hf(i);const ue=[gy,py],_e=[];function Ae(oe,fe){return oe[12]?0:1}z=Ae(i),H=_e[z]=ue[z](i);let le=i[12]&&i[16]&&Df(i),ce=!i[12]&&Vf(i);return{c(){s=p("div"),s.textContent="How do you want to connect to Nostr?",u=R(),g=p("form"),m=p("input"),_=R(),X&&X.c(),P=R(),U=p("button"),H.c(),Q=R(),le&&le.c(),J=R(),ce&&ce.c(),ee=T(),$(s,"class","text-center text-lg"),$(m,"class","box-border w-full rounded px-2 py-1 text-lg text-neutral-800 outline-none"),$(m,"placeholder","user@provider or bunker://..."),m.autofocus=!0,m.disabled=i[12],$(m,"autocapitalize","none"),$(U,"class",q="mt-4 flex w-full cursor-pointer items-center justify-center rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),U.disabled=D=!i[26]||i[12],$(g,"class","mb-1 mt-4 flex flex-col")},m(oe,fe){O(oe,s,fe),O(oe,u,fe),O(oe,g,fe),B(g,m),i[52](m),I(m,i[4]),B(g,_),X&&X.m(g,null),B(g,P),B(g,U),_e[z].m(U,null),B(g,Q),le&&le.m(g,null),O(oe,J,fe),ce&&ce.m(oe,fe),O(oe,ee,fe),G=!0,m.focus(),te||(ne=[E(m,"input",i[53]),E(g,"submit",i[33])],te=!0)},p(oe,fe){(!G||fe[0]&4096)&&(m.disabled=oe[12]),fe[0]&16&&m.value!==oe[4]&&I(m,oe[4]),oe[19]?X?X.p(oe,fe):(X=Hf(oe),X.c(),X.m(g,P)):X&&(X.d(1),X=null);let $e=z;z=Ae(oe),z!==$e&&(wt(),Kt(_e[$e],1,1,()=>{_e[$e]=null}),It(),H=_e[z],H||(H=_e[z]=ue[z](oe),H.c()),Et(H,1),H.m(U,null)),(!G||fe[0]&1&&q!==(q="mt-4 flex w-full cursor-pointer items-center justify-center rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+oe[0]+"-900 hover:bg-"+oe[0]+"-950"))&&$(U,"class",q),(!G||fe[0]&67112960&&D!==(D=!oe[26]||oe[12]))&&(U.disabled=D),oe[12]&&oe[16]?le?le.p(oe,fe):(le=Df(oe),le.c(),le.m(g,null)):le&&(le.d(1),le=null),oe[12]?ce&&(ce.d(1),ce=null):ce?ce.p(oe,fe):(ce=Vf(oe),ce.c(),ce.m(ee.parentNode,ee))},i(oe){G||(Et(H),G=!0)},o(oe){Kt(H),G=!1},d(oe){oe&&(l(s),l(u),l(g),l(J),l(ee)),i[52](null),X&&X.d(),_e[z].d(),le&&le.d(),ce&&ce.d(oe),te=!1,h(ne)}}}function uy(i){let s,u,g,m,_,P,U,z,H,q,D,Q,J,ee,G,te,ne,X,ue,_e,Ae,le,ce=yd(i[22]),oe=[];for(let fe=0;fe<ce.length;fe+=1)oe[fe]=qf(Rf(i,ce,fe));return{c(){s=p("div"),s.textContent="Create a Nostr account",u=R(),g=p("form"),m=p("div"),_=p("input"),P=R(),U=p("div"),U.textContent="@",z=R(),H=p("select");for(let fe=0;fe<oe.length;fe+=1)oe[fe].c();q=R(),D=p("button"),Q=x("Continue "),G=R(),te=p("div"),ne=x("Do you already have a Nostr address?"),X=p("br"),ue=R(),_e=p("button"),_e.textContent="Login now",$(s,"class","text-center text-lg"),$(_,"class","box-border w-40 rounded px-2 py-1 text-lg text-neutral-800 outline-none"),$(_,"placeholder","bob"),_.autofocus=!0,$(_,"autocapitalize","none"),$(U,"class","mx-2 text-2xl"),$(H,"class","box-border w-full rounded px-2 py-1 text-lg text-neutral-800 outline-none"),i[10]===void 0&&Me(()=>i[51].call(H)),$(m,"class","flex flex-row"),$(D,"class",J="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),D.disabled=ee=!i[10]||!i[9]||i[18],$(g,"class","mb-1 mt-4"),$(_e,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),$(te,"class","mt-6 text-center text-sm leading-3")},m(fe,$e){O(fe,s,$e),O(fe,u,$e),O(fe,g,$e),B(g,m),B(m,_),i[49](_),I(_,i[9]),B(m,P),B(m,U),B(m,z),B(m,H);for(let Be=0;Be<oe.length;Be+=1)oe[Be]&&oe[Be].m(H,null);k(H,i[10],!0),B(g,q),B(g,D),B(D,Q),O(fe,G,$e),O(fe,te,$e),B(te,ne),B(te,X),B(te,ue),B(te,_e),_.focus(),Ae||(le=[E(_,"input",i[50]),E(_,"input",i[38]),E(H,"change",i[51]),E(g,"submit",i[37]),E(_e,"click",i[36])],Ae=!0)},p(fe,$e){if($e[0]&512&&_.value!==fe[9]&&I(_,fe[9]),$e[0]&4194304){ce=yd(fe[22]);let Be;for(Be=0;Be<ce.length;Be+=1){const it=Rf(fe,ce,Be);oe[Be]?oe[Be].p(it,$e):(oe[Be]=qf(it),oe[Be].c(),oe[Be].m(H,null))}for(;Be<oe.length;Be+=1)oe[Be].d(1);oe.length=ce.length}$e[0]&4195328&&k(H,fe[10]),$e[0]&1&&J!==(J="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+fe[0]+"-900 hover:bg-"+fe[0]+"-950")&&$(D,"class",J),$e[0]&4457984&&ee!==(ee=!fe[10]||!fe[9]||fe[18])&&(D.disabled=ee)},i:c,o:c,d(fe){fe&&(l(s),l(u),l(g),l(G),l(te)),i[49](null),w(oe,fe),Ae=!1,h(le)}}}function ly(i){let s,u,g;return{c(){s=p("div"),s.textContent="What is that?",u=R(),g=p("div"),g.innerHTML=`<p class="mb mt-4">This widget is created with <i>window.nostr.js</i>, a small script
            you can drop in any page that already uses NIP-07 and make it also
            work with NIP-46 automatically when the user doesn&#39;t have an
            extension installed.
            <br/>
            It adds a small floating button on the side of the window that users
            can use to create Nostr accuonts or connect to their NIP-46 bunkers.</p> <p class="mt-4">This tool is opensource, get the code from the <a target="_blank" class="underline" href="https://github.com/fiatjaf/window.nostr.js">project&#39;s page</a>.</p> <p class="mt-4">You don&#39;t know what Nostr is?
            <a target="_blank" class="underline" href="https://www.nostr.com">Learn more</a>.</p>`,$(s,"class","text-center text-lg"),$(g,"class","text-base leading-5")},m(m,_){O(m,s,_),O(m,u,_),O(m,g,_)},p:c,i:c,o:c,d(m){m&&(l(s),l(u),l(g))}}}function dy(i){let s,u,g,m,_,P,U=new URL(i[15]).host+"",z,H,q,D,Q,J,ee,G,te,ne;return{c(){s=p("div"),u=p("div"),u.textContent="An action requires your confirmation",g=R(),m=p("div"),_=x("Now you a new window will bring you to "),P=p("strong"),z=x(U),H=x(" where you can approve the current action. If nothing happens check that if your browser is blocking popups, pleaase."),q=p("br"),D=x(`
            After that you will be returned to this page.`),Q=R(),J=p("button"),ee=x("Confirm action "),$(u,"class","text-center text-lg"),$(m,"class","mt-4 text-center text-sm leading-4"),$(J,"class",G="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),$(s,"class","m-auto w-full")},m(X,ue){O(X,s,ue),B(s,u),B(s,g),B(s,m),B(m,_),B(m,P),B(P,z),B(m,H),B(m,q),B(m,D),B(s,Q),B(s,J),B(J,ee),te||(ne=E(J,"click",i[48]),te=!0)},p(X,ue){ue[0]&32768&&U!==(U=new URL(X[15]).host+"")&&F(z,U),ue[0]&1&&G!==(G="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+X[0]+"-900 hover:bg-"+X[0]+"-950")&&$(J,"class",G)},i:c,o:c,d(X){X&&l(s),te=!1,ne()}}}function fy(i){let s,u,g,m,_,P,U=new URL(i[14]).host+"",z,H,q,D,Q,J,ee,G,te,ne;return{c(){s=p("div"),u=p("div"),u.textContent="Login into a Nostr account",g=R(),m=p("div"),_=x("Now you a new window will bring you to "),P=p("strong"),z=x(U),H=x(" where you can login and approve the permissions. If nothing happens check that if your browser is blocking popups, pleaase."),q=p("br"),D=x(`
            After that you will be returned to this page.`),Q=R(),J=p("button"),ee=x("Login now "),$(u,"class","text-center text-lg"),$(m,"class","mt-4 text-center text-sm leading-4"),$(J,"class",G="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),$(s,"class","m-auto w-full")},m(X,ue){O(X,s,ue),B(s,u),B(s,g),B(s,m),B(m,_),B(m,P),B(P,z),B(m,H),B(m,q),B(m,D),B(s,Q),B(s,J),B(J,ee),te||(ne=E(J,"click",i[47]),te=!0)},p(X,ue){ue[0]&16384&&U!==(U=new URL(X[14]).host+"")&&F(z,U),ue[0]&1&&G!==(G="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+X[0]+"-900 hover:bg-"+X[0]+"-950")&&$(J,"class",G)},i:c,o:c,d(X){X&&l(s),te=!1,ne()}}}function hy(i){let s,u,g,m,_,P,U=new URL(i[13]).host+"",z,H,q,D,Q,J,ee,G,te,ne;return{c(){s=p("div"),u=p("div"),u.textContent="Create a Nostr account",g=R(),m=p("div"),_=x("Now you a new window will bring you to "),P=p("strong"),z=x(U),H=x(" where the account creation will take place. If nothing happens check that if your browser is blocking popups, pleaase."),q=p("br"),D=x(`
            After that you will be returned to this page.`),Q=R(),J=p("button"),ee=x("Start account creation "),$(u,"class","text-center text-lg"),$(m,"class","mt-4 text-center text-sm leading-4"),$(J,"class",G="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+i[0]+"-900 hover:bg-"+i[0]+"-950"),$(s,"class","m-auto w-full")},m(X,ue){O(X,s,ue),B(s,u),B(s,g),B(s,m),B(m,_),B(m,P),B(P,z),B(m,H),B(m,q),B(m,D),B(s,Q),B(s,J),B(J,ee),te||(ne=E(J,"click",i[46]),te=!0)},p(X,ue){ue[0]&8192&&U!==(U=new URL(X[13]).host+"")&&F(z,U),ue[0]&1&&G!==(G="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+X[0]+"-900 hover:bg-"+X[0]+"-950")&&$(J,"class",G)},i:c,o:c,d(X){X&&l(s),te=!1,ne()}}}function Uf(i){let s,u,g=i[21].picture&&Mf(i),m=i[21].name&&jf(i);return{c(){s=p("div"),g&&g.c(),u=R(),m&&m.c(),$(s,"class","mb-2 flex items-center justify-center gap-2")},m(_,P){O(_,s,P),g&&g.m(s,null),B(s,u),m&&m.m(s,null)},p(_,P){_[21].picture?g?g.p(_,P):(g=Mf(_),g.c(),g.m(s,u)):g&&(g.d(1),g=null),_[21].name?m?m.p(_,P):(m=jf(_),m.c(),m.m(s,null)):m&&(m.d(1),m=null)},d(_){_&&l(s),g&&g.d(),m&&m.d()}}}function Mf(i){let s,u,g;return{c(){s=p("img"),C(s.src,u=i[21].picture)||$(s,"src",u),$(s,"alt",""),$(s,"class",g="h-10 w-10 rounded-full border-2 border-solid border-transparent group-hover:border-"+i[0]+"-100")},m(m,_){O(m,s,_)},p(m,_){_[0]&2097152&&!C(s.src,u=m[21].picture)&&$(s,"src",u),_[0]&1&&g!==(g="h-10 w-10 rounded-full border-2 border-solid border-transparent group-hover:border-"+m[0]+"-100")&&$(s,"class",g)},d(m){m&&l(s)}}}function jf(i){let s,u=i[21].name+"",g;return{c(){s=p("div"),g=x(u),$(s,"class","text-3xl decoration-2 underline-offset-4 group-hover:underline")},m(m,_){O(m,s,_),B(s,g)},p(m,_){_[0]&2097152&&u!==(u=m[21].name+"")&&F(g,u)},d(m){m&&l(s)}}}function Hf(i){let s,u;return{c(){s=p("div"),u=x(i[19]),$(s,"class","my-2 rounded bg-yellow-100 p-2 text-center text-sm leading-4 text-red-400")},m(g,m){O(g,s,m),B(s,u)},p(g,m){m[0]&524288&&F(u,g[19])},d(g){g&&l(s)}}}function py(i){let s;return{c(){s=x("Connect ")},m(u,g){O(u,s,g)},i:c,o:c,d(u){u&&l(s)}}}function gy(i){let s,u,g;return u=new Nf({}),{c(){s=x(`Connecting to bunker
              `),vd(u.$$.fragment)},m(m,_){O(m,s,_),Xa(u,m,_),g=!0},i(m){g||(Et(u.$$.fragment,m),g=!0)},o(m){Kt(u.$$.fragment,m),g=!1},d(m){m&&l(s),ec(u,m)}}}function Df(i){let s,u,g,m,_;return{c(){s=p("div"),u=x(`Waiting too much?
              `),g=p("button"),g.textContent="Cancel the connection",$(g,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),$(s,"class","mt-6 text-center text-sm leading-3")},m(P,U){O(P,s,U),B(s,u),B(s,g),m||(_=E(g,"click",i[39]),m=!0)},p:c,d(P){P&&l(s),m=!1,_()}}}function Vf(i){let s,u,g,m,_,P,U;return{c(){s=p("div"),u=x("Do you need a Nostr account?"),g=p("br"),m=R(),_=p("button"),_.textContent="Sign up now",$(_,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),$(s,"class","mt-6 text-center text-sm leading-3")},m(z,H){O(z,s,H),B(s,u),B(s,g),B(s,m),B(s,_),P||(U=E(_,"click",i[35]),P=!0)},p:c,d(z){z&&l(s),P=!1,U()}}}function qf(i){let s,u,g;return{c(){s=p("option"),$(s,"label",u=i[78].domain),s.__value=g=i[78],I(s,s.__value),$(s,"class","px-2 py-1 text-lg")},m(m,_){O(m,s,_)},p(m,_){_[0]&4194304&&u!==(u=m[78].domain)&&$(s,"label",u),_[0]&4194304&&g!==(g=m[78])&&(s.__value=g,I(s,s.__value))},d(m){m&&l(s)}}}function wy(i){let s,u;return{c(){s=p("img"),C(s.src,u=i[21].picture)||$(s,"src",u),$(s,"alt",""),$(s,"class","h-6 w-6 rounded-full")},m(g,m){O(g,s,m)},p(g,m){m[0]&2097152&&!C(s.src,u=g[21].picture)&&$(s,"src",u)},i:c,o:c,d(g){g&&l(s)}}}function by(i){let s,u,g,m=(i[21].name||i[21].npub.slice(0,7)+""+i[21].npub.slice(-4))+"",_;function P(H,q){return H[21].picture?Ey:_y}let U=P(i),z=U(i);return{c(){s=p("div"),z.c(),u=R(),g=p("div"),_=x(m),$(g,"class","max-w-56 overflow-hidden whitespace-nowrap overflow-ellipsis inline-block"),$(s,"class","flex px-2 items-center")},m(H,q){O(H,s,q),z.m(s,null),B(s,u),B(s,g),B(g,_)},p(H,q){U===(U=P(H))&&z?z.p(H,q):(z.d(1),z=U(H),z&&(z.c(),z.m(s,u))),q[0]&2097152&&m!==(m=(H[21].name||H[21].npub.slice(0,7)+""+H[21].npub.slice(-4))+"")&&F(_,m)},i:c,o:c,d(H){H&&l(s),z.d()}}}function my(i){let s;return{c(){s=p("div"),s.textContent="N",$(s,"class","w-6 text-center")},m(u,g){O(u,s,g)},p:c,i:c,o:c,d(u){u&&l(s)}}}function yy(i){let s;return{c(){s=p("div"),s.textContent="Connect with Nostr",$(s,"class","flex px-2 items-center")},m(u,g){O(u,s,g)},p:c,i:c,o:c,d(u){u&&l(s)}}}function vy(i){let s,u,g,m;return g=new Nf({}),{c(){s=p("div"),u=x(`Connecting to bunker
          `),vd(g.$$.fragment),$(s,"class","flex px-2 items-center")},m(_,P){O(_,s,P),B(s,u),Xa(g,s,null),m=!0},p:c,i(_){m||(Et(g.$$.fragment,_),m=!0)},o(_){Kt(g.$$.fragment,_),m=!1},d(_){_&&l(s),ec(g)}}}function _y(i){let s;return{c(){s=x("")},m(u,g){O(u,s,g)},p:c,d(u){u&&l(s)}}}function Ey(i){let s,u;return{c(){s=p("img"),C(s.src,u=i[21].picture)||$(s,"src",u),$(s,"alt",""),$(s,"class","mr-2 h-5 w-5 rounded-full")},m(g,m){O(g,s,m)},p(g,m){m[0]&2097152&&!C(s.src,u=g[21].picture)&&$(s,"src",u)},d(g){g&&l(s)}}}function ky(i){let s,u,g,m,_,P,U;const z=[sy,iy,oy],H=[];function q(D,Q){return!D[25]&&!D[21]&&D[1]?0:D[25]?2:1}return u=q(i),g=H[u]=z[u](i),{c(){s=p("div"),g.c(),$(s,"class","draggable animate-fadein font-sans text-white"),$(s,"style",m="position: fixed; "+(i[25]&&i[5]?"width: 100vw;":"")+"; right: "+(i[25]&&i[5]?"0":i[3])+"px; user-select: none; "+(i[25]&&i[5]?"bottom: 0px":i[24]+":"+i[23]+"px")),W(s,"cursor-pointer",!i[21]&&!i[25])},m(D,Q){O(D,s,Q),H[u].m(s,null),i[54](s),_=!0,P||(U=[E(Mc,"click",i[29]),E(Mc,"mouseup",i[42]),E(Mc,"mousemove",i[41]),E(s,"mousedown",i[40])],P=!0)},p(D,Q){let J=u;u=q(D),u===J?H[u].p(D,Q):(wt(),Kt(H[J],1,1,()=>{H[J]=null}),It(),g=H[u],g?g.p(D,Q):(g=H[u]=z[u](D),g.c()),Et(g,1),g.m(s,null)),(!_||Q[0]&58720296&&m!==(m="position: fixed; "+(D[25]&&D[5]?"width: 100vw;":"")+"; right: "+(D[25]&&D[5]?"0":D[3])+"px; user-select: none; "+(D[25]&&D[5]?"bottom: 0px":D[24]+":"+D[23]+"px")))&&$(s,"style",m),(!_||Q[0]&35651584)&&W(s,"cursor-pointer",!D[21]&&!D[25])},i(D){_||(Et(g),_=!0)},o(D){Kt(g),_=!1},d(D){D&&l(s),H[u].d(),i[54](null),P=!1,h(U)}}}const Ff="We could not connect to a NIP-46 bunker with that url, are you sure it is set up correctly?",Wf="We were not able to connect using this address. For it to work it has to come from a NIP-46 provider.",br=20;function jc(i){return window.open(i,"window.nostr","width=600,height=800,popup=yes")}function Ay(i,s,u){let g,m,_,P,U,z;const H=ny("only screen and (max-width: 640px)");N(i,H,pe=>u(5,z=pe));const q={ORIGIN:"wnj:origin",CLIENT_SECRET:"wnj:clientSecret",Y_POS:"wnj:ypos",CALLBACK_TOKEN:"wnj:callbackToken",BUNKER_POINTER:"wnj:bunkerPointer"};let D,{accent:Q}=s,{position:J="top"}=s,{startHidden:ee}=s,{compactMode:G}=s;const te=window,ne=new Zb;let X,ue,_e,Ae,le,ce;const oe=localStorage.getItem(q.CLIENT_SECRET);oe?ce=oc(oe):(ce=Bb(),localStorage.setItem(q.CLIENT_SECRET,Lt(ce)));let fe="closed",$e,Be,it,st,at,de,ve=null,ze=null,We=null,Ze=!1,Ve,At,mt,Ut=!1,ct,Jt,un=[],{right:_n=20}=s,mr=!1,Ft=!1,yr,ro,Wt;const Dn={pool:ne,onauth(pe){Ve?u(13,ve=pe):ct?(u(15,We=pe),u(25,_=!0)):u(14,ze=pe)}},oo=Ad(()=>{switch(fe){case"justopened":u(44,fe="opened");break;case"justclosed":u(44,fe="closed");break}},500);function io(){u(44,fe="justopened"),oo()}function vr(){u(44,fe="justclosed"),oo()}function Ss(){if($e&&!de){qc();return}io()}Vc();let Yf={isWnj:!0,async getPublicKey(){return $e?$e.pubkey:(!at&&!de&&io(),(await st).bp.pubkey)},async signEvent(pe){try{return!at&&!de&&Ss(),await(await st).signEvent(pe)}finally{u(15,We=null),vr()}},async getRelays(){return!at&&!de&&Ss(),(await st).getRelays()},nip04:{async encrypt(pe,nt){return!at&&!de&&Ss(),(await st).nip04Encrypt(pe,nt)},async decrypt(pe,nt){return!at&&!de&&Ss(),(await st).nip04Decrypt(pe,nt)}}};function Vc(){vr(),$e=null,st=new Promise((pe,nt)=>{Be=pe,it=nt}),u(21,ct=null),u(12,at=!1),u(16,Ze=!1),u(17,Ve=!1),de=!1,Jt=null,u(19,mt="")}se(()=>{if(!$e){let pe=localStorage.getItem(q.BUNKER_POINTER);pe&&($e=JSON.parse(pe),Fc())}if(te.nostr&&!te.nostr.isWnj){te.destroyWnj();return}else Object.defineProperty(window,"nostr",{get(){return Yf},set(pe){Yf=pe,pe.isWnj||te.destroyWnj()},configurable:!0});return()=>{Jt&&Jt.close()}});function Ty(pe){Math.abs(m-ro)>6||Date.now()-Wt>600||fe==="justopened"||fe==="justclosed"||(pe.composedPath().find(nt=>nt.id==="wnj")?io():vr())}function Py(pe){vr(),u(17,Ve=!1),u(13,ve=null),u(14,ze=null),u(15,We=null),pe.stopPropagation()}function By(pe){u(20,Ut=!0),pe.stopPropagation()}function Iy(pe){u(20,Ut=!1),pe.stopPropagation()}async function Ly(pe){pe.preventDefault();try{if($e=await Km(X.value),!$e){X.value.match(As)?u(19,mt=Ff):u(19,mt=Wf);return}X.setCustomValidity(""),u(19,mt=""),await qc(),Fc()}catch{X.value.match(As)?u(19,mt=Ff):u(19,mt=Wf),u(12,at=!1)}}async function Cy(pe){pe.preventDefault(),localStorage.removeItem(q.BUNKER_POINTER),Vc()}async function Oy(pe){pe.preventDefault(),u(17,Ve=!0),un.length===0&&(u(22,un=await Zm(ne,["wss://relay.nostr.band","wss://nos.lol","wss://nostr-pub.wellorder.net"])),u(10,le=un[0]))}function Ny(pe){u(17,Ve=!1)}async function Ry(pe){if(pe.preventDefault(),!le)return;u(18,At=!0);let nt=await Gm(le,Dn,_e.value,le.domain);u(18,At=!1),io(),u(17,Ve=!1),$e=nt.bp,Fc(),qc(nt)}const zy=Ad(async()=>{le&&_e.value.length>0&&(await Ym(_e.value+"@"+le.domain)?_e.setCustomValidity(`'${_e.value}' is already taken.`):_e.setCustomValidity(""))},500);function Uy(){u(16,Ze=!1),u(12,at=!1),it("connection aborted"),Vc()}async function qc(pe=void 0){pe=pe||new Lf(ce,$e,Dn),u(12,at=!0);let nt=setTimeout(()=>{u(16,Ze=!0),u(25,_=!0)},5e3);try{await pe.connect(),de=!0,localStorage.setItem(q.BUNKER_POINTER,JSON.stringify($e)),vr(),Be(pe)}catch(Vn){it((Vn==null?void 0:Vn.message)||String(Vn))}finally{clearTimeout(nt),u(12,at=!1),u(16,Ze=!1),u(13,ve=null),u(14,ze=null),u(15,We=null)}}function Fc(pe=null){let nt=$e.pubkey;u(21,ct={pubkey:nt,npub:Qm(nt),event:null}),Jt=ne.subscribeMany(["wss://purplepag.es","wss://relay.snort.social","wss://relay.nos.social"],[{kinds:[0],authors:[nt]}],{onevent(Vn){var Jf;if(!((((Jf=ct.event)==null?void 0:Jf.created_at)||0)>=Vn.created_at))try{let{name:Jy,picture:Qy}=JSON.parse(Vn.content);u(21,ct.event=Vn,ct),u(21,ct.name=Jy,ct),u(21,ct.picture=Qy,ct),pe==null||pe(),pe=null}catch{}}})}function My(pe){if(_)return;mr=!0;const nt=D.getBoundingClientRect();yr=pe.clientY-nt.top,ro=m,Wt=Date.now()}function jy(pe){mr&&(g==="top"?u(23,m=pe.clientY):u(23,m=window.innerHeight-pe.clientY),u(23,m-=yr),u(45,Ft=!0),m<br&&u(23,m=br),m>window.innerHeight-br&&u(23,m=window.innerHeight-br))}function Hy(){if(mr=!1,setTimeout(()=>{u(45,Ft=!1)},10),Ft){const pe=D.getBoundingClientRect(),nt=window.innerHeight,Vn=nt/2;pe.top<Vn?(u(24,g="top"),u(23,m=pe.top)):(u(24,g="bottom"),u(23,m=nt-pe.bottom)),m<br&&u(23,m=br),localStorage.setItem(q.ORIGIN,g),localStorage.setItem(q.Y_POS,m.toString())}}const Dy=()=>jc(ve),Vy=()=>jc(ze),qy=()=>{jc(We)};function Fy(pe){me[pe?"unshift":"push"](()=>{_e=pe,u(8,_e)})}function Wy(){Ae=this.value,u(9,Ae)}function Ky(){le=V(this),u(10,le),u(22,un)}function Gy(pe){me[pe?"unshift":"push"](()=>{X=pe,u(7,X)})}function Zy(){ue=this.value,u(4,ue)}function Yy(pe){me[pe?"unshift":"push"](()=>{D=pe,u(6,D)})}return i.$$set=pe=>{"accent"in pe&&u(0,Q=pe.accent),"position"in pe&&u(43,J=pe.position),"startHidden"in pe&&u(1,ee=pe.startHidden),"compactMode"in pe&&u(2,G=pe.compactMode),"right"in pe&&u(3,_n=pe.right)},i.$$.update=()=>{i.$$.dirty[0]&32|i.$$.dirty[1]&4096&&u(24,g=z?"bottom":localStorage.getItem(q.ORIGIN)||J),i.$$.dirty[0]&32&&u(23,m=z?br:parseInt(localStorage.getItem(q.Y_POS)||"0")||br),i.$$.dirty[1]&8192&&u(25,_=fe==="justopened"||fe==="opened"),i.$$.dirty[0]&1|i.$$.dirty[1]&16384&&u(27,P=Ft?"cursor-grabbing outline-dashed outline-"+Q+"-500 outline-1 outline-offset-4":"outline-none"),i.$$.dirty[0]&16&&u(26,U=ue&&(ue.match(As)||ue.match(Cf)))},[Q,ee,G,_n,ue,z,D,X,_e,Ae,le,ce,at,ve,ze,We,Ze,Ve,At,mt,Ut,ct,un,m,g,_,U,P,H,Ty,Py,By,Iy,Ly,Cy,Oy,Ny,Ry,zy,Uy,My,jy,Hy,J,fe,Ft,Dy,Vy,qy,Fy,Wy,Ky,Gy,Zy,Yy]}class Sy extends Ed{constructor(s){super(),_d(this,s,Ay,ky,b,{accent:0,position:43,startHidden:1,compactMode:2,right:3},null,[-1,-1,-1])}}const Lo=window;Lo.destroyWnj=()=>{setTimeout(()=>{$y.$destroy()},1)};const Hc=document.createElement("div");Hc.style.zIndex="90000",document.body.appendChild(Hc);const Dc=document.createElement("div");Dc.id="wnj";const Kf=document.createElement("style");Kf.innerHTML=a;const Gf=Hc.attachShadow({mode:"open"});Gf.appendChild(Dc),Gf.appendChild(Kf);const $y=new Sy({target:Dc,props:{accent:((e=Lo.wnjParams)==null?void 0:e.accent)||"cyan",position:((t=Lo.wnjParams)==null?void 0:t.position)==="bottom"?"bottom":"top",startHidden:!!((n=Lo.wnjParams)!=null&&n.startHidden),compactMode:!!((r=Lo.wnjParams)!=null&&r.compactMode)}});if(!((o=Lo.wnjParams)!=null&&o.disableOverflowFix)){var Zf=document.createElement("style"),xy=`
    html, body {
      overflow: auto;
      height: 100%;
    }
  `;Zf.innerHTML=xy,document.head.appendChild(Zf)}})();const Ak=t1({__proto__:null,default:Bp},[Bp]);</script>
    <style rel="stylesheet" crossorigin>html{font-size:20px}@media only screen and (max-width: 768px){html{font-size:18px}}body{margin:0;padding:0}html.dark body{background-color:#242424;color:#cbcbcb}#app{box-sizing:border-box;width:80%;max-width:760px;margin:2rem auto;font-family:Arial,Helvetica,sans-serif;color:#242424}@media only screen and (max-width: 768px){#app{width:100%;padding:0 1rem;max-width:unset}}html.dark #app{background-color:#242424;color:#ebebeb}a,a:visited{color:#242424}html.dark a,html.dark a:visited{color:#f5f5f5}ol,ul{padding-left:1rem;margin:0}ol li,ul li{margin-bottom:1rem}blockquote{margin:0;padding-left:1rem;border-left:8px solid #ebebeb}code{font-size:.9rem;background-color:#f6f6f6}pre code{overflow:scroll;display:block;padding:1rem .5rem}.unfinished-setup{width:80%;margin:0 auto;text-align:center}.header.home h1{font-size:3rem}.header .external-link{text-align:right;margin-top:-1rem;font-size:.8em;color:#cbcbcb}@media only screen and (max-width: 768px){.header .external-link{margin-bottom:1rem;margin-right:2.5rem}}.header .external-link a{text-decoration:underline;color:#cbcbcb}.header .picture-container{position:relative;display:inline-block;width:2.5rem;height:2.5rem;overflow:hidden;border-radius:50%;margin-bottom:-.25rem}.header .picture-container img{position:absolute;top:50%;left:50%;width:100%;height:100%;object-fit:cover;transform:translate(-50%,-50%);clip-path:circle(50%)}.header.note .picture-container{width:1.5rem;height:1.5rem;margin-bottom:-.4rem}.header a{text-decoration:none}.header a span{text-decoration:underline}html.dark .header a:visited{color:#cbcbcb}html.dark .header .external-link,html.dark .header .external-link a{color:#747474}.topic-wrapper{margin-bottom:1.5rem;display:flex;flex-direction:row;flex-wrap:wrap;row-gap:1rem}.topic-wrapper div{display:inline-grid;margin-right:1rem}.topic-wrapper div a{padding:.4rem 1rem;background-color:#e0e0e0;text-decoration:none;border-radius:4px}.topic-wrapper div a:hover{background-color:#ebebeb}.topic-wrapper div a.selected{background-color:#242424;color:#f5f5f5}html.dark .topic-wrapper div a{background-color:#747474;color:#242424}html.dark .topic-wrapper div a:hover{background-color:#f5f5f5}html.dark .topic-wrapper div a.selected{background-color:#cbcbcb}.externalLink{display:block;text-align:right;margin-top:-1rem;font-size:.8em;color:#cbcbcb}.externalLink a{color:#cbcbcb}.about{margin-bottom:2rem;padding-bottom:1rem;border-bottom:8px solid #ebebeb}html.dark .about{border-bottom:8px solid #373737}.separator{margin-bottom:2rem;border-bottom:8px solid #ebebeb}html.dark .separator{border-bottom:8px solid #373737}.top-notes{display:flex;color:#747474;flex-wrap:wrap;justify-content:space-between;gap:2rem;width:100%;margin-bottom:1rem;padding-bottom:2rem;border-bottom:8px solid #f5f5f5}@media only screen and (max-width: 768px){.top-notes{display:block}}@media only screen and (max-width: 768px){.top-notes{padding-bottom:0rem}}.top-notes .note{flex:1 1 calc(50% - 2rem);box-sizing:border-box}@media only screen and (max-width: 768px){.top-notes .note{margin-bottom:2rem}}.top-notes .note a{text-decoration:none}.top-notes .note img{width:100%;height:200px;object-fit:cover;margin-bottom:.5rem;border-radius:4px}.top-notes .note .title{display:block;margin-bottom:.4rem;font-size:1.1rem;font-weight:bolder}.top-notes .note .summary{margin-bottom:.4rem;font-size:.9rem}.top-notes .note .date{font-size:.8rem;color:#a9a9a9}html.dark .top-notes{color:#cbcbcb;border-bottom:8px solid #373737}.short-notes{border-bottom:8px solid #f5f5f5;padding-bottom:1rem;margin-bottom:2rem}.short-notes .splide__slide{font-size:.9rem;overflow-wrap:break-word}.short-notes .splide__slide a{text-decoration:none}.short-notes .splide__slide .date{font-size:.8rem;color:#a9a9a9;margin-bottom:.3rem}.short-notes .splide__arrow--prev{left:-3em}.short-notes .splide__arrow--next{right:-3em}@media only screen and (max-width: 768px){.short-notes .splide__arrow--prev,.short-notes .splide__arrow--next{display:none}}.short-notes .splide__arrow{background:none}.short-notes .splide__arrow svg{fill:#a9a9a9}html.dark .short-notes{border-bottom:8px solid #373737}html.dark .short-notes a{color:#cbcbcb}.listing-notes{margin-top:1rem;color:#747474}.listing-notes.short-feed-full li{margin-bottom:2rem}.listing-notes.short-feed-full .summary{color:#242424}.listing-notes ul{list-style-type:none;padding:0;margin:0}.listing-notes ul li{margin-bottom:1rem}.listing-notes ul li h2{font-size:1.1rem;margin-bottom:.5rem}.listing-notes ul li h2 a{display:block;font-size:1.1rem}.listing-notes ul li .summary{margin-bottom:.4rem;overflow-wrap:break-word}.listing-notes ul li .summary p{margin:0}.listing-notes ul li .summary img{display:block;margin:2rem auto;max-width:100%;border-radius:4px}.listing-notes ul li .summary video{width:100%;margin:2rem auto}.listing-notes ul li .summary audio{width:100%;margin:2rem auto}.listing-notes ul li .date{font-size:.8rem;color:#a9a9a9}html.dark .listing-notes{color:#cbcbcb}html.dark .listing-notes.short-feed-full .summary{color:#fff}h1{font-size:2rem;line-height:.9;margin-top:0}@media only screen and (max-width: 768px){h1{font-size:1.6rem}}.note-wrapper{position:relative;margin-top:2rem;overflow-wrap:break-word}.note-wrapper h1,.note-wrapper h2,.note-wrapper h3{margin-top:1.4rem;margin-bottom:.6rem}.note-wrapper h1:first-of-type{margin-top:0rem}.note-wrapper .content{margin-top:1.5rem}.note-wrapper p{line-height:1.3rem;margin-top:0rem}.note-wrapper .date{display:block;margin-bottom:.5rem;font-size:.8rem;color:#a9a9a9}.note-wrapper img{display:block;margin:2rem auto;max-width:100%;border-radius:4px}.note-wrapper img.note-banner{margin:2.5rem auto 3.5rem;transform:scale(1.1)}.note-wrapper video{width:100%;margin:2rem auto}.note-wrapper audio{width:100%;margin:2rem auto}.footer{margin-top:4rem;padding-top:2rem;margin-bottom:2rem;border-top:8px solid #ebebeb;font-size:.8rem;text-align:center;color:#cbcbcb}.footer a{color:#cbcbcb}html.dark .footer{border-top:8px solid #373737;color:#747474}html.dark .footer a,html.dark .footer a:visited{color:#747474}zap-threads{font-size:.9rem}.splide__container{box-sizing:border-box;position:relative}.splide__list{backface-visibility:hidden;display:-ms-flexbox;display:flex;height:100%;margin:0!important;padding:0!important}.splide.is-initialized:not(.is-active) .splide__list{display:block}.splide__pagination{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;margin:0;pointer-events:none}.splide__pagination li{display:inline-block;line-height:1;list-style-type:none;margin:0;pointer-events:auto}.splide:not(.is-overflow) .splide__pagination{display:none}.splide__progress__bar{width:0}.splide{position:relative;visibility:hidden}.splide.is-initialized,.splide.is-rendered{visibility:visible}.splide__slide{backface-visibility:hidden;box-sizing:border-box;-ms-flex-negative:0;flex-shrink:0;list-style-type:none!important;margin:0;position:relative}.splide__slide img{vertical-align:bottom}.splide__spinner{animation:splide-loading 1s linear infinite;border:2px solid #999;border-left-color:transparent;border-radius:50%;bottom:0;contain:strict;display:inline-block;height:20px;left:0;margin:auto;position:absolute;right:0;top:0;width:20px}.splide__sr{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.splide__toggle.is-active .splide__toggle__play,.splide__toggle__pause{display:none}.splide__toggle.is-active .splide__toggle__pause{display:inline}.splide__track{overflow:hidden;position:relative;z-index:0}@keyframes splide-loading{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.splide__track--draggable{-webkit-touch-callout:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.splide__track--fade>.splide__list>.splide__slide{margin:0!important;opacity:0;z-index:0}.splide__track--fade>.splide__list>.splide__slide.is-active{opacity:1;z-index:1}.splide--rtl{direction:rtl}.splide__track--ttb>.splide__list{display:block}.splide__arrow{-ms-flex-align:center;align-items:center;background:#ccc;border:0;border-radius:50%;cursor:pointer;display:-ms-flexbox;display:flex;height:2em;-ms-flex-pack:center;justify-content:center;opacity:.7;padding:0;position:absolute;top:50%;transform:translateY(-50%);width:2em;z-index:1}.splide__arrow svg{fill:#000;height:1.2em;width:1.2em}.splide__arrow:hover:not(:disabled){opacity:.9}.splide__arrow:disabled{opacity:.3}.splide__arrow:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide__arrow--prev{left:1em}.splide__arrow--prev svg{transform:scaleX(-1)}.splide__arrow--next{right:1em}.splide.is-focus-in .splide__arrow:focus{outline:3px solid #0bf;outline-offset:3px}.splide__pagination{bottom:.5em;left:0;padding:0 1em;position:absolute;right:0;z-index:1}.splide__pagination__page{background:#ccc;border:0;border-radius:50%;display:inline-block;height:8px;margin:3px;opacity:.7;padding:0;position:relative;transition:transform .2s linear;width:8px}.splide__pagination__page.is-active{background:#fff;transform:scale(1.4);z-index:1}.splide__pagination__page:hover{cursor:pointer;opacity:.9}.splide__pagination__page:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide.is-focus-in .splide__pagination__page:focus{outline:3px solid #0bf;outline-offset:3px}.splide__progress__bar{background:#ccc;height:3px}.splide__slide{-webkit-tap-highlight-color:rgba(0,0,0,0)}.splide__slide:focus{outline:0}@supports (outline-offset:-3px){.splide__slide:focus-visible{outline:3px solid #0bf;outline-offset:-3px}}@media screen and (-ms-high-contrast:none){.splide__slide:focus-visible{border:3px solid #0bf}}@supports (outline-offset:-3px){.splide.is-focus-in .splide__slide:focus{outline:3px solid #0bf;outline-offset:-3px}}@media screen and (-ms-high-contrast:none){.splide.is-focus-in .splide__slide:focus{border:3px solid #0bf}.splide.is-focus-in .splide__track>.splide__list>.splide__slide:focus{border-color:#0bf}}.splide__toggle{cursor:pointer}.splide__toggle:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide.is-focus-in .splide__toggle:focus{outline:3px solid #0bf;outline-offset:3px}.splide__track--nav>.splide__list>.splide__slide{border:3px solid transparent;cursor:pointer}.splide__track--nav>.splide__list>.splide__slide.is-active{border:3px solid #000}.splide__arrows--rtl .splide__arrow--prev{left:auto;right:1em}.splide__arrows--rtl .splide__arrow--prev svg{transform:scaleX(1)}.splide__arrows--rtl .splide__arrow--next{left:1em;right:auto}.splide__arrows--rtl .splide__arrow--next svg{transform:scaleX(-1)}.splide__arrows--ttb .splide__arrow{left:50%;transform:translate(-50%)}.splide__arrows--ttb .splide__arrow--prev{top:1em}.splide__arrows--ttb .splide__arrow--prev svg{transform:rotate(-90deg)}.splide__arrows--ttb .splide__arrow--next{bottom:1em;top:auto}.splide__arrows--ttb .splide__arrow--next svg{transform:rotate(90deg)}.splide__pagination--ttb{bottom:0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;left:auto;padding:1em 0;right:.5em;top:0}.loader-container.svelte-1gbkpfy{display:flex;align-items:center;justify-content:center}.loader.svelte-1gbkpfy{display:inline-block;width:92px;height:92px;opacity:0;animation:svelte-1gbkpfy-fade-in .5s .4s forwards,svelte-1gbkpfy-loader-animation 2s linear infinite .4s}.loader.svelte-1gbkpfy:after{content:" ";display:block;width:64px;height:64px;margin:8px;border-radius:50%;border:6px solid #a9a9a9;border-color:#a9a9a9 transparent #a9a9a9 transparent;animation:svelte-1gbkpfy-loader-animation 2s linear infinite}@keyframes svelte-1gbkpfy-loader-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes svelte-1gbkpfy-fade-in{to{opacity:1}}html.dark .loader.svelte-1gbkpfy:after{border:6px solid #373737;border-color:#373737 transparent #373737 transparent}#theme-toggle.svelte-aypc0d.svelte-aypc0d{display:none}#theme-toggle.svelte-aypc0d+label.svelte-aypc0d{display:inline-block;cursor:pointer;height:1rem;width:1rem;position:absolute;top:1rem;right:3rem;border-radius:9px;transition-duration:.3s;content:""}@media only screen and (max-width: 768px){#theme-toggle.svelte-aypc0d+label.svelte-aypc0d{right:1rem}}#theme-toggle.svelte-aypc0d:not(:checked)+label.svelte-aypc0d{background-color:#e9e9e9}#theme-toggle.svelte-aypc0d:checked+label.svelte-aypc0d{background-color:transparent;box-shadow:inset -6px -6px 1px 1px #3f3f3f}</style>
  </head>
  <body>
    <div id="app"></div>
    <script>
      window.wnjParams = {
        position: 'bottom',
        accent: 'neutral',
        startHidden: true,
        compactMode: true,
      };
    </script>
  </body>
</html>
