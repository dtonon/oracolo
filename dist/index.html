<!doctype html>
<html lang="en">
  <head>
    <!-- -=*=- -->
    <!-- Configure with your npub/nprofile -->
    <meta name="author" value="replace_with_your_npub" />

    <!-- Personalize your relays list -->
    <meta name="relays" value="wss://nos.lol, wss://relay.damus.io, wss://relay.nostr.band, wss://nostr.wine" />

    <!-- Show top notes with images, use a even value, zero to disable -->
    <meta name="top-notes" value="2" />

    <!-- Show short notes as carousel (value 'carousel') or in the main feed (value 'main'), empty to disable -->
    <meta name="short-notes" value="carousel" />

    <!-- Show short notes with X minimum characters for the 'short-notes' setting, zero to disable -->
    <meta name="short-notes-min-chars" value="800" />

    <!-- Size in characters of the short notes preview in the feed, zero to display full content -->
    <meta name="short-notes-summary-max-chars" value="400" />

    <!-- Enable navigation by topics (tags), empty to disable -->
    <meta name="topics" value="" />

    <!-- Enable comments, 'yes' to enable -->
    <meta name="comments" value="yes" />
    <!-- -=*=- -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <script type="module" crossorigin>var Tf=Object.defineProperty;var Pf=(e,t,n)=>t in e?Tf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Q=(e,t,n)=>Pf(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Pe(){}function mt(e,t){for(const n in t)e[n]=t[n];return e}function Uc(e){return e()}function da(){return Object.create(null)}function Xr(e){e.forEach(Uc)}function Dc(e){return typeof e=="function"}function vt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ci;function tn(e,t){return e===t?!0:(ci||(ci=document.createElement("a")),ci.href=t,e===ci.href)}function Bf(e){return Object.keys(e).length===0}function Qi(e,t,n,r){if(e){const i=Vc(e,t,n,r);return e[0](i)}}function Vc(e,t,n,r){return e[1]&&r?mt(n.ctx.slice(),e[1](r(t))):n.ctx}function es(e,t,n,r){return e[2],t.dirty}function ts(e,t,n,r,i,s){if(i){const o=Vc(t,n,r,s);e.p(o,i)}}function ns(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function pu(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function ir(e,t){const n={};t=new Set(t);for(const r in e)!t.has(r)&&r[0]!=="$"&&(n[r]=e[r]);return n}function D(e,t){e.appendChild(t)}function te(e,t,n){e.insertBefore(t,n||null)}function ee(e){e.parentNode&&e.parentNode.removeChild(e)}function rs(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function G(e){return document.createElement(e)}function pe(e){return document.createTextNode(e)}function de(){return pe(" ")}function xn(){return pe("")}function Lf(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function W(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const If=["width","height"];function sr(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)t[r]==null?e.removeAttribute(r):r==="style"?e.style.cssText=t[r]:r==="__value"?e.value=e[r]=t[r]:n[r]&&n[r].set&&If.indexOf(r)===-1?e[r]=t[r]:W(e,r,t[r])}function di(e,t,n){const r=t.toLowerCase();r in e?e[r]=typeof e[r]=="boolean"&&n===""?!0:n:t in e?e[t]=typeof e[t]=="boolean"&&n===""?!0:n:W(e,t,n)}function Cf(e){return Array.from(e.childNodes)}function Oe(e,t){t=""+t,e.data!==t&&(e.data=t)}function la(e,t,n){e.classList.toggle(t,!!n)}function Of(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let Mr;function Or(e){Mr=e}function is(){if(!Mr)throw new Error("Function called outside component initialization");return Mr}function ss(e){is().$$.on_mount.push(e)}function Nf(e){is().$$.after_update.push(e)}function zf(e){is().$$.on_destroy.push(e)}function Rf(){const e=is();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const s=Of(t,n,{cancelable:r});return i.slice().forEach(o=>{o.call(e,s)}),!s.defaultPrevented}return!0}}const qn=[],vo=[];let Yn=[];const fa=[],xf=Promise.resolve();let _o=!1;function Mf(){_o||(_o=!0,xf.then(Xt))}function Eo(e){Yn.push(e)}const xs=new Set;let jn=0;function Xt(){if(jn!==0)return;const e=Mr;do{try{for(;jn<qn.length;){const t=qn[jn];jn++,Or(t),jf(t.$$)}}catch(t){throw qn.length=0,jn=0,t}for(Or(null),qn.length=0,jn=0;vo.length;)vo.pop()();for(let t=0;t<Yn.length;t+=1){const n=Yn[t];xs.has(n)||(xs.add(n),n())}Yn.length=0}while(qn.length);for(;fa.length;)fa.pop()();_o=!1,xs.clear(),Or(e)}function jf(e){if(e.fragment!==null){e.update(),Xr(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Eo)}}function Hf(e){const t=[],n=[];Yn.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Yn=t}const wi=new Set;let Tn;function dn(){Tn={r:0,c:[],p:Tn}}function ln(){Tn.r||Xr(Tn.c),Tn=Tn.p}function ce(e,t){e&&e.i&&(wi.delete(e),e.i(t))}function le(e,t,n,r){if(e&&e.o){if(wi.has(e))return;wi.add(e),Tn.c.push(()=>{wi.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function nn(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function gu(e,t){const n={},r={},i={$$scope:1};let s=e.length;for(;s--;){const o=e[s],a=t[s];if(a){for(const c in o)c in a||(r[c]=1);for(const c in a)i[c]||(n[c]=a[c],i[c]=1);e[s]=a}else for(const c in o)i[c]=1}for(const o in r)o in n||(n[o]=void 0);return n}function zt(e){e&&e.c()}function _t(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),Eo(()=>{const s=e.$$.on_mount.map(Uc).filter(Dc);e.$$.on_destroy?e.$$.on_destroy.push(...s):Xr(s),e.$$.on_mount=[]}),i.forEach(Eo)}function Et(e,t){const n=e.$$;n.fragment!==null&&(Hf(n.after_update),Xr(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Uf(e,t){e.$$.dirty[0]===-1&&(qn.push(e),Mf(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function fn(e,t,n,r,i,s,o=null,a=[-1]){const c=Mr;Or(e);const d=e.$$={fragment:null,ctx:[],props:s,update:Pe,not_equal:i,bound:da(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:da(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};o&&o(d.root);let p=!1;if(d.ctx=n?n(e,t.props||{},(h,y,...$)=>{const k=$.length?$[0]:y;return d.ctx&&i(d.ctx[h],d.ctx[h]=k)&&(!d.skip_bound&&d.bound[h]&&d.bound[h](k),p&&Uf(e,h)),y}):[],d.update(),p=!0,Xr(d.before_update),d.fragment=r?r(d.ctx):!1,t.target){if(t.hydrate){const h=Cf(t.target);d.fragment&&d.fragment.l(h),h.forEach(ee)}else d.fragment&&d.fragment.c();t.intro&&ce(e.$$.fragment),_t(e,t.target,t.anchor),Xt()}Or(c)}class hn{constructor(){Q(this,"$$");Q(this,"$$set")}$destroy(){Et(this,1),this.$destroy=Pe}$on(t,n){if(!Dc(n))return Pe;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Bf(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Df="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Df);var Vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ff=function(){function e(n,r){if(typeof n!="function")throw new TypeError("DataLoader must be constructed with a function which accepts "+("Array<key> and returns Promise<Array<value>>, but got: "+n+"."));this._batchLoadFn=n,this._maxBatchSize=Gf(r),this._batchScheduleFn=Zf(r),this._cacheKeyFn=Yf(r),this._cacheMap=Xf(r),this._batch=null,this.name=Jf(r)}var t=e.prototype;return t.load=function(r){if(r==null)throw new TypeError("The loader.load() function must be called with a value, "+("but got: "+String(r)+"."));var i=Wf(this),s=this._cacheMap,o;if(s){o=this._cacheKeyFn(r);var a=s.get(o);if(a){var c=i.cacheHits||(i.cacheHits=[]);return new Promise(function(p){c.push(function(){p(a)})})}}i.keys.push(r);var d=new Promise(function(p,h){i.callbacks.push({resolve:p,reject:h})});return s&&s.set(o,d),d},t.loadMany=function(r){if(!qc(r))throw new TypeError("The loader.loadMany() function must be called with Array<key> "+("but got: "+r+"."));for(var i=[],s=0;s<r.length;s++)i.push(this.load(r[s]).catch(function(o){return o}));return Promise.all(i)},t.clear=function(r){var i=this._cacheMap;if(i){var s=this._cacheKeyFn(r);i.delete(s)}return this},t.clearAll=function(){var r=this._cacheMap;return r&&r.clear(),this},t.prime=function(r,i){var s=this._cacheMap;if(s){var o=this._cacheKeyFn(r);if(s.get(o)===void 0){var a;i instanceof Error?(a=Promise.reject(i),a.catch(function(){})):a=Promise.resolve(i),s.set(o,a)}}return this},e}(),qf=typeof process=="object"&&typeof process.nextTick=="function"?function(e){Ms||(Ms=Promise.resolve()),Ms.then(function(){process.nextTick(e)})}:typeof setImmediate=="function"?function(e){setImmediate(e)}:function(e){setTimeout(e)},Ms;function Wf(e){var t=e._batch;if(t!==null&&!t.hasDispatched&&t.keys.length<e._maxBatchSize)return t;var n={hasDispatched:!1,keys:[],callbacks:[]};return e._batch=n,e._batchScheduleFn(function(){Kf(e,n)}),n}function Kf(e,t){if(t.hasDispatched=!0,t.keys.length===0){ko(t);return}var n;try{n=e._batchLoadFn(t.keys)}catch(r){return js(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function "+("errored synchronously: "+String(r)+".")))}if(!n||typeof n.then!="function")return js(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did "+("not return a Promise: "+String(n)+".")));n.then(function(r){if(!qc(r))throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did "+("not return a Promise of an Array: "+String(r)+"."));if(r.length!==t.keys.length)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys."+(`

Keys:
`+String(t.keys))+(`

Values:
`+String(r)));ko(t);for(var i=0;i<t.callbacks.length;i++){var s=r[i];s instanceof Error?t.callbacks[i].reject(s):t.callbacks[i].resolve(s)}}).catch(function(r){js(e,t,r)})}function js(e,t,n){ko(t);for(var r=0;r<t.keys.length;r++)e.clear(t.keys[r]),t.callbacks[r].reject(n)}function ko(e){if(e.cacheHits)for(var t=0;t<e.cacheHits.length;t++)e.cacheHits[t]()}function Gf(e){var t=!e||e.batch!==!1;if(!t)return 1;var n=e&&e.maxBatchSize;if(n===void 0)return 1/0;if(typeof n!="number"||n<1)throw new TypeError("maxBatchSize must be a positive number: "+n);return n}function Zf(e){var t=e&&e.batchScheduleFn;if(t===void 0)return qf;if(typeof t!="function")throw new TypeError("batchScheduleFn must be a function: "+t);return t}function Yf(e){var t=e&&e.cacheKeyFn;if(t===void 0)return function(n){return n};if(typeof t!="function")throw new TypeError("cacheKeyFn must be a function: "+t);return t}function Xf(e){var t=!e||e.cache!==!1;if(!t)return null;var n=e&&e.cacheMap;if(n===void 0)return new Map;if(n!==null){var r=["get","set","delete","clear"],i=r.filter(function(s){return n&&typeof n[s]!="function"});if(i.length!==0)throw new TypeError("Custom cacheMap missing methods: "+i.join(", "))}return n}function Jf(e){return e&&e.name?e.name:null}function qc(e){return typeof e=="object"&&e!==null&&typeof e.length=="number"&&(e.length===0||e.length>0&&Object.prototype.hasOwnProperty.call(e,e.length-1))}var Qf=Ff;const Wc=Fc(Qf);/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mu=e=>e instanceof Uint8Array,Hs=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ct=(e,t)=>e<<32-t|e>>>t,eh=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!eh)throw new Error("Non little-endian hardware is not supported");const th=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Re(e){if(!mu(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=th[e[n]];return t}function Ao(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const i=r*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function nh(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Kc(e){if(typeof e=="string"&&(e=nh(e)),!mu(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function rh(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!mu(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let ih=class{clone(){return this._cloneInto()}};function Gc(e){const t=r=>e().update(Kc(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vr(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Rt(...e){const t=(i,s)=>o=>i(s(o)),n=Array.from(e).reverse().reduce((i,s)=>i?t(i,s.encode):s.encode,void 0),r=e.reduce((i,s)=>i?t(i,s.decode):s.decode,void 0);return{encode:n,decode:r}}function xt(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(vr(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function Mt(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function os(e,t="="){if(vr(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of n)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function Zc(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function ha(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],s=Array.from(e);for(s.forEach(o=>{if(vr(o),o<0||o>=t)throw new Error(`Wrong integer: ${o}`)});;){let o=0,a=!0;for(let c=r;c<s.length;c++){const d=s[c],p=t*o+d;if(!Number.isSafeInteger(p)||t*o/t!==o||p-d!==t*o)throw new Error("convertRadix: carry overflow");if(o=p%n,s[c]=Math.floor(p/n),!Number.isSafeInteger(s[c])||s[c]*n+o!==p)throw new Error("convertRadix: carry overflow");if(a)s[c]?a=!1:r=c;else continue}if(i.push(o),a)break}for(let o=0;o<e.length-1&&e[o]===0;o++)i.push(0);return i.reverse()}const Yc=(e,t)=>t?Yc(t,e%t):e,Si=(e,t)=>e+(t-Yc(e,t));function $o(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Si(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Si(t,n)}`);let i=0,s=0;const o=2**n-1,a=[];for(const c of e){if(vr(c),c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(i=i<<t|c,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)a.push((i>>s-n&o)>>>0);i&=2**s-1}if(i=i<<n-s&o,!r&&s>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&a.push(i>>>0),a}function sh(e){return vr(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return ha(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(ha(t,e,2**8))}}}function pn(e,t=!1){if(vr(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Si(8,e)>32||Si(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return $o(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from($o(n,e,8,t))}}}function pa(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}const oh=Rt(pn(4),xt("0123456789ABCDEF"),Mt("")),uh=Rt(pn(5),xt("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),os(5),Mt(""));Rt(pn(5),xt("0123456789ABCDEFGHIJKLMNOPQRSTUV"),os(5),Mt(""));Rt(pn(5),xt("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Mt(""),Zc(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const ah=Rt(pn(6),xt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),os(6),Mt("")),ch=Rt(pn(6),xt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),os(6),Mt("")),wu=e=>Rt(sh(58),xt(e),Mt("")),So=wu("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");wu("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");wu("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const ga=[0,2,3,5,6,7,9,10,11],dh={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=So.encode(r).padStart(ga[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),i=ga.indexOf(r.length),s=So.decode(r);for(let o=0;o<s.length-i;o++)if(s[o]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(t)}},To=Rt(xt("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Mt("")),ma=[996825010,642813549,513874426,1027748829,705979059];function $r(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<ma.length;r++)(t>>r&1)===1&&(n^=ma[r]);return n}function wa(e,t,n=1){const r=e.length;let i=1;for(let s=0;s<r;s++){const o=e.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);i=$r(i)^o>>5}i=$r(i);for(let s=0;s<r;s++)i=$r(i)^e.charCodeAt(s)&31;for(let s of t)i=$r(i)^s;for(let s=0;s<6;s++)i=$r(i);return i^=n,To.encode($o([i%2**30],30,5,!1))}function Xc(e){const t=e==="bech32"?1:734539939,n=pn(5),r=n.decode,i=n.encode,s=pa(r);function o(p,h,y=90){if(typeof p!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof p}`);if(!Array.isArray(h)||h.length&&typeof h[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof h}`);const $=p.length+7+h.length;if(y!==!1&&$>y)throw new TypeError(`Length ${$} exceeds limit ${y}`);return p=p.toLowerCase(),`${p}1${To.encode(h)}${wa(p,h,t)}`}function a(p,h=90){if(typeof p!="string")throw new Error(`bech32.decode input should be string, not ${typeof p}`);if(p.length<8||h!==!1&&p.length>h)throw new TypeError(`Wrong string length: ${p.length} (${p}). Expected (8..${h})`);const y=p.toLowerCase();if(p!==y&&p!==p.toUpperCase())throw new Error("String must be lowercase or uppercase");p=y;const $=p.lastIndexOf("1");if($===0||$===-1)throw new Error('Letter "1" must be present between prefix and data only');const k=p.slice(0,$),w=p.slice($+1);if(w.length<6)throw new Error("Data must be at least 6 characters long");const A=To.decode(w).slice(0,-6),T=wa(k,A,t);if(!w.endsWith(T))throw new Error(`Invalid checksum in ${p}: expected "${T}"`);return{prefix:k,words:A}}const c=pa(a);function d(p){const{prefix:h,words:y}=a(p,!1);return{prefix:h,words:y,bytes:r(y)}}return{encode:o,decode:a,decodeToBytes:d,decodeUnsafe:c,fromWords:r,fromWordsUnsafe:s,toWords:i}}const or=Xc("bech32");Xc("bech32m");const lh={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},fh=Rt(pn(4),xt("0123456789abcdef"),Mt(""),Zc(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),hh={utf8:lh,hex:fh,base16:oh,base32:uh,base64:ah,base64url:ch,base58:So,base58xmr:dh};`${Object.keys(hh).join(", ")}`;new TextDecoder("utf-8");const ph=new TextEncoder;function Br(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}class gh{constructor(t){Q(this,"value");Q(this,"next",null);Q(this,"prev",null);this.value=t}}class mh{constructor(){Q(this,"first");Q(this,"last");this.first=null,this.last=null}enqueue(t){const n=new gh(t);return this.last?this.last===this.first?(this.last=n,this.last.prev=this.first,this.first.next=n):(n.prev=this.last,this.last.next=n,this.last=n):(this.first=n,this.last=n),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const n=this.first;return this.first=null,this.last=null,n.value}const t=this.first;return this.first=t.next,t.value}}const wh=5e3;function bh(e){return vh("npub",Ao(e))}function yh(e,t){let n=or.toWords(t);return or.encode(e,n,wh)}function vh(e,t){return yh(e,t)}function bu(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function yu(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=bu(n);return(i,s)=>r.then(o=>s(o.transaction(t,i).objectStore(t)))}let Us;function Jc(){return Us||(Us=yu("keyval-store","keyval")),Us}function Qc(e,t=Jc()){return t("readwrite",n=>(e.forEach(r=>n.put(r[1],r[0])),bu(n.transaction)))}function ed(e,t=Jc()){return t("readonly",n=>Promise.all(e.map(r=>bu(n.get(r)))))}var _h=Math.pow(2,8)-1,Eh=Math.pow(2,16)-1,kh=Math.pow(2,32)-1;const Ah=function(e){var t=e-1;if(t<=_h)return Uint8Array;if(t<=Eh)return Uint16Array;if(t<=kh)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")};function gn(e){if(this.capacity=e,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var t=Ah(e);this.forward=new t(e),this.backward=new t(e),this.K=new Array(e),this.V=new Array(e),this.size=0,this.head=0,this.tail=0,this.items={}}gn.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};gn.prototype.splayOnTop=function(e){var t=this.head;if(this.head===e)return this;var n=this.backward[e],r=this.forward[e];return this.tail===e?this.tail=n:this.backward[r]=n,this.forward[n]=r,this.backward[t]=e,this.head=e,this.forward[e]=t,this};gn.prototype.set=function(e,t){var n=this.items[e];if(typeof n<"u"){this.splayOnTop(n),this.V[n]=t;return}this.size<this.capacity?n=this.size++:(n=this.tail,this.tail=this.backward[n],delete this.items[this.K[n]]),this.items[e]=n,this.K[n]=e,this.V[n]=t,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n};gn.prototype.setpop=function(e,t){var n=null,r=null,i=this.items[e];return typeof i<"u"?(this.splayOnTop(i),n=this.V[i],this.V[i]=t,{evicted:!1,key:e,value:n}):(this.size<this.capacity?i=this.size++:(i=this.tail,this.tail=this.backward[i],n=this.V[i],r=this.K[i],delete this.items[r]),this.items[e]=i,this.K[i]=e,this.V[i]=t,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,r?{evicted:!0,key:r,value:n}:null)};gn.prototype.has=function(e){return e in this.items};gn.prototype.get=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.splayOnTop(t),this.V[t]};gn.prototype.peek=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.V[t]};function td(){const e=new gn(2e3);return e.delete=t=>{},e}function $h(e){return!!e}function ba(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function nd(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Sh(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ba(e.outputLen),ba(e.blockLen)}function Ti(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Th(e,t){nd(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Ds=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rd=e=>e instanceof Uint8Array,Vs=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),dt=(e,t)=>e<<32-t|e>>>t,Ph=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ph)throw new Error("Non little-endian hardware is not supported");function Bh(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function vu(e){if(typeof e=="string"&&(e=Bh(e)),!rd(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Lh(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!rd(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}class id{clone(){return this._cloneInto()}}function Ih(e){const t=r=>e().update(vu(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function sd(e=32){if(Ds&&typeof Ds.getRandomValues=="function")return Ds.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Ch(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,d=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+d,a,r)}let Oh=class extends id{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Vs(this.buffer)}update(t){Ti(this);const{view:n,buffer:r,blockLen:i}=this;t=vu(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Vs(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ti(this),Th(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;Ch(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Vs(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<d;h++)a.setUint32(4*h,p[h],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}};const Nh=(e,t,n)=>e&t^~e&n,zh=(e,t,n)=>e&t^e&n^t&n,Rh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Vt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ft=new Uint32Array(64);let xh=class extends Oh{constructor(){super(64,32,8,!1),this.A=Vt[0]|0,this.B=Vt[1]|0,this.C=Vt[2]|0,this.D=Vt[3]|0,this.E=Vt[4]|0,this.F=Vt[5]|0,this.G=Vt[6]|0,this.H=Vt[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[t,n,r,i,s,o,a,c]}set(t,n,r,i,s,o,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let h=0;h<16;h++,n+=4)Ft[h]=t.getUint32(n,!1);for(let h=16;h<64;h++){const y=Ft[h-15],$=Ft[h-2],k=dt(y,7)^dt(y,18)^y>>>3,w=dt($,17)^dt($,19)^$>>>10;Ft[h]=w+Ft[h-7]+k+Ft[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:d,H:p}=this;for(let h=0;h<64;h++){const y=dt(a,6)^dt(a,11)^dt(a,25),$=p+y+Nh(a,c,d)+Rh[h]+Ft[h]|0,w=(dt(r,2)^dt(r,13)^dt(r,22))+zh(r,i,s)|0;p=d,d=c,c=a,a=o+$|0,o=s,s=i,i=r,r=$+w|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,i,s,o,a,c,d,p)}roundClean(){Ft.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Po=Ih(()=>new xh);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const od=BigInt(0),us=BigInt(1),Mh=BigInt(2),as=e=>e instanceof Uint8Array,jh=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ur(e){if(!as(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=jh[e[n]];return t}function ud(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function _u(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function ar(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const i=r*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Ue(e){return _u(ur(e))}function Eu(e){if(!as(e))throw new Error("Uint8Array expected");return _u(ur(Uint8Array.from(e).reverse()))}function rn(e,t){return ar(e.toString(16).padStart(t*2,"0"))}function ku(e,t){return rn(e,t).reverse()}function Hh(e){return ar(ud(e))}function Be(e,t,n){let r;if(typeof t=="string")try{r=ar(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(as(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function In(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!as(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function Uh(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Dh(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Vh(e){let t;for(t=0;e>od;e>>=us,t+=1);return t}function Fh(e,t){return e>>BigInt(t)&us}const qh=(e,t,n)=>e|(n?us:od)<<BigInt(t),Au=e=>(Mh<<BigInt(e-1))-us,Fs=e=>new Uint8Array(e),ya=e=>Uint8Array.from(e);function ad(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Fs(e),i=Fs(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...h)=>n(i,r,...h),c=(h=Fs())=>{i=a(ya([0]),h),r=a(),h.length!==0&&(i=a(ya([1]),h),r=a())},d=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const y=[];for(;h<t;){r=a();const $=r.slice();y.push($),h+=r.length}return In(...y)};return(h,y)=>{o(),c(h);let $;for(;!($=y(d()));)c();return o(),$}}const Wh={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Jr(e,t,n={}){const r=(i,s,o)=>{const a=Wh[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=e[i];if(!(o&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}const Kh=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Fh,bitLen:Vh,bitMask:Au,bitSet:qh,bytesToHex:ur,bytesToNumberBE:Ue,bytesToNumberLE:Eu,concatBytes:In,createHmacDrbg:ad,ensureBytes:Be,equalBytes:Uh,hexToBytes:ar,hexToNumber:_u,numberToBytesBE:rn,numberToBytesLE:ku,numberToHexUnpadded:ud,numberToVarBytesBE:Hh,utf8ToBytes:Dh,validateObject:Jr},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ae=BigInt(0),ye=BigInt(1),An=BigInt(2),Gh=BigInt(3),Bo=BigInt(4),va=BigInt(5),_a=BigInt(8);BigInt(9);BigInt(16);function Se(e,t){const n=e%t;return n>=Ae?n:t+n}function Zh(e,t,n){if(n<=Ae||t<Ae)throw new Error("Expected power/modulo > 0");if(n===ye)return Ae;let r=ye;for(;t>Ae;)t&ye&&(r=r*e%n),e=e*e%n,t>>=ye;return r}function qe(e,t,n){let r=e;for(;t-- >Ae;)r*=r,r%=n;return r}function Lo(e,t){if(e===Ae||t<=Ae)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Se(e,t),r=t,i=Ae,s=ye;for(;n!==Ae;){const a=r/n,c=r%n,d=i-s*a;r=n,n=c,i=s,s=d}if(r!==ye)throw new Error("invert: does not exist");return Se(i,t)}function Yh(e){const t=(e-ye)/An;let n,r,i;for(n=e-ye,r=0;n%An===Ae;n/=An,r++);for(i=An;i<e&&Zh(i,t,e)!==e-ye;i++);if(r===1){const o=(e+ye)/Bo;return function(c,d){const p=c.pow(d,o);if(!c.eql(c.sqr(p),d))throw new Error("Cannot find square root");return p}}const s=(n+ye)/An;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let d=r,p=a.pow(a.mul(a.ONE,i),n),h=a.pow(c,s),y=a.pow(c,n);for(;!a.eql(y,a.ONE);){if(a.eql(y,a.ZERO))return a.ZERO;let $=1;for(let w=a.sqr(y);$<d&&!a.eql(w,a.ONE);$++)w=a.sqr(w);const k=a.pow(p,ye<<BigInt(d-$-1));p=a.sqr(k),h=a.mul(h,k),y=a.mul(y,p),d=$}return h}}function Xh(e){if(e%Bo===Gh){const t=(e+ye)/Bo;return function(r,i){const s=r.pow(i,t);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%_a===va){const t=(e-va)/_a;return function(r,i){const s=r.mul(i,An),o=r.pow(s,t),a=r.mul(i,o),c=r.mul(r.mul(a,An),o),d=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(d),i))throw new Error("Cannot find square root");return d}}return Yh(e)}const Jh=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Qh(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Jh.reduce((r,i)=>(r[i]="function",r),t);return Jr(e,n)}function ep(e,t,n){if(n<Ae)throw new Error("Expected power > 0");if(n===Ae)return e.ONE;if(n===ye)return t;let r=e.ONE,i=t;for(;n>Ae;)n&ye&&(r=e.mul(r,i)),i=e.sqr(i),n>>=ye;return r}function tp(e,t){const n=new Array(t.length),r=t.reduce((s,o,a)=>e.is0(o)?s:(n[a]=s,e.mul(s,o)),e.ONE),i=e.inv(r);return t.reduceRight((s,o,a)=>e.is0(o)?s:(n[a]=e.mul(s,n[a]),e.mul(s,o)),i),n}function cd(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function np(e,t,n=!1,r={}){if(e<=Ae)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=cd(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Xh(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:Au(i),ZERO:Ae,ONE:ye,create:c=>Se(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Ae<=c&&c<e},is0:c=>c===Ae,isOdd:c=>(c&ye)===ye,neg:c=>Se(-c,e),eql:(c,d)=>c===d,sqr:c=>Se(c*c,e),add:(c,d)=>Se(c+d,e),sub:(c,d)=>Se(c-d,e),mul:(c,d)=>Se(c*d,e),pow:(c,d)=>ep(a,c,d),div:(c,d)=>Se(c*Lo(d,e),e),sqrN:c=>c*c,addN:(c,d)=>c+d,subN:(c,d)=>c-d,mulN:(c,d)=>c*d,inv:c=>Lo(c,e),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>tp(a,c),cmov:(c,d,p)=>p?d:c,toBytes:c=>n?ku(c,s):rn(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?Eu(c):Ue(c)}});return Object.freeze(a)}function dd(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function ld(e){const t=dd(e);return t+Math.ceil(t/2)}function rp(e,t,n=!1){const r=e.length,i=dd(t),s=ld(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?Ue(e):Eu(e),a=Se(o,t-ye)+ye;return n?ku(a,i):rn(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ip=BigInt(0),qs=BigInt(1);function sp(e,t){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(t/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>ip;)s&qs&&(o=o.add(a)),a=a.double(),s>>=qs;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),c=[];let d=i,p=d;for(let h=0;h<o;h++){p=d,c.push(p);for(let y=1;y<a;y++)p=p.add(d),c.push(p);d=p.double()}return c},wNAF(i,s,o){const{windows:a,windowSize:c}=r(i);let d=e.ZERO,p=e.BASE;const h=BigInt(2**i-1),y=2**i,$=BigInt(i);for(let k=0;k<a;k++){const w=k*c;let A=Number(o&h);o>>=$,A>c&&(A-=y,o+=qs);const T=w,L=w+Math.abs(A)-1,P=k%2!==0,u=A<0;A===0?p=p.add(n(P,s[T])):d=d.add(n(u,s[L]))}return{p:d,f:p}},wNAFCached(i,s,o,a){const c=i._WINDOW_SIZE||1;let d=s.get(i);return d||(d=this.precomputeWindow(i,c),c!==1&&s.set(i,a(d))),this.wNAF(c,d,o)}}}function fd(e){return Qh(e.Fp),Jr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...cd(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function op(e){const t=fd(e);Jr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:up,hexToBytes:ap}=Kh,Pn={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Pn;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:up(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Pn,n=typeof e=="string"?ap(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=Pn._parseInt(n.subarray(2)),{d:o,l:a}=Pn._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=d=>Number.parseInt(d[0],16)&8?"00"+d:d,n=d=>{const p=d.toString(16);return p.length&1?`0${p}`:p},r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,o=i.length/2,a=n(s),c=n(o);return`30${n(o+s+4)}02${c}${i}02${a}${r}`}},St=BigInt(0),Ke=BigInt(1);BigInt(2);const Ea=BigInt(3);BigInt(4);function cp(e){const t=op(e),{Fp:n}=t,r=t.toBytes||((k,w,A)=>{const T=w.toAffine();return In(Uint8Array.from([4]),n.toBytes(T.x),n.toBytes(T.y))}),i=t.fromBytes||(k=>{const w=k.subarray(1),A=n.fromBytes(w.subarray(0,n.BYTES)),T=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:A,y:T}});function s(k){const{a:w,b:A}=t,T=n.sqr(k),L=n.mul(T,k);return n.add(n.add(L,n.mul(k,w)),A)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(k){return typeof k=="bigint"&&St<k&&k<t.n}function a(k){if(!o(k))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(k){const{allowedPrivateKeyLengths:w,nByteLength:A,wrapPrivateKey:T,n:L}=t;if(w&&typeof k!="bigint"){if(k instanceof Uint8Array&&(k=ur(k)),typeof k!="string"||!w.includes(k.length))throw new Error("Invalid key");k=k.padStart(A*2,"0")}let P;try{P=typeof k=="bigint"?k:Ue(Be("private key",k,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof k}`)}return T&&(P=Se(P,L)),a(P),P}const d=new Map;function p(k){if(!(k instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(w,A,T){if(this.px=w,this.py=A,this.pz=T,w==null||!n.isValid(w))throw new Error("x required");if(A==null||!n.isValid(A))throw new Error("y required");if(T==null||!n.isValid(T))throw new Error("z required")}static fromAffine(w){const{x:A,y:T}=w||{};if(!w||!n.isValid(A)||!n.isValid(T))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const L=P=>n.eql(P,n.ZERO);return L(A)&&L(T)?h.ZERO:new h(A,T,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const A=n.invertBatch(w.map(T=>T.pz));return w.map((T,L)=>T.toAffine(A[L])).map(h.fromAffine)}static fromHex(w){const A=h.fromAffine(i(Be("pointHex",w)));return A.assertValidity(),A}static fromPrivateKey(w){return h.BASE.multiply(c(w))}_setWindowSize(w){this._WINDOW_SIZE=w,d.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:w,y:A}=this.toAffine();if(!n.isValid(w)||!n.isValid(A))throw new Error("bad point: x or y not FE");const T=n.sqr(A),L=s(w);if(!n.eql(T,L))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){p(w);const{px:A,py:T,pz:L}=this,{px:P,py:u,pz:f}=w,l=n.eql(n.mul(A,f),n.mul(P,L)),g=n.eql(n.mul(T,f),n.mul(u,L));return l&&g}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:A}=t,T=n.mul(A,Ea),{px:L,py:P,pz:u}=this;let f=n.ZERO,l=n.ZERO,g=n.ZERO,v=n.mul(L,L),B=n.mul(P,P),_=n.mul(u,u),b=n.mul(L,P);return b=n.add(b,b),g=n.mul(L,u),g=n.add(g,g),f=n.mul(w,g),l=n.mul(T,_),l=n.add(f,l),f=n.sub(B,l),l=n.add(B,l),l=n.mul(f,l),f=n.mul(b,f),g=n.mul(T,g),_=n.mul(w,_),b=n.sub(v,_),b=n.mul(w,b),b=n.add(b,g),g=n.add(v,v),v=n.add(g,v),v=n.add(v,_),v=n.mul(v,b),l=n.add(l,v),_=n.mul(P,u),_=n.add(_,_),v=n.mul(_,b),f=n.sub(f,v),g=n.mul(_,B),g=n.add(g,g),g=n.add(g,g),new h(f,l,g)}add(w){p(w);const{px:A,py:T,pz:L}=this,{px:P,py:u,pz:f}=w;let l=n.ZERO,g=n.ZERO,v=n.ZERO;const B=t.a,_=n.mul(t.b,Ea);let b=n.mul(A,P),S=n.mul(T,u),I=n.mul(L,f),O=n.add(A,T),E=n.add(P,u);O=n.mul(O,E),E=n.add(b,S),O=n.sub(O,E),E=n.add(A,L);let m=n.add(P,f);return E=n.mul(E,m),m=n.add(b,I),E=n.sub(E,m),m=n.add(T,L),l=n.add(u,f),m=n.mul(m,l),l=n.add(S,I),m=n.sub(m,l),v=n.mul(B,E),l=n.mul(_,I),v=n.add(l,v),l=n.sub(S,v),v=n.add(S,v),g=n.mul(l,v),S=n.add(b,b),S=n.add(S,b),I=n.mul(B,I),E=n.mul(_,E),S=n.add(S,I),I=n.sub(b,I),I=n.mul(B,I),E=n.add(E,I),b=n.mul(S,E),g=n.add(g,b),b=n.mul(m,E),l=n.mul(O,l),l=n.sub(l,b),b=n.mul(O,S),v=n.mul(m,v),v=n.add(v,b),new h(l,g,v)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return $.wNAFCached(this,d,w,A=>{const T=n.invertBatch(A.map(L=>L.pz));return A.map((L,P)=>L.toAffine(T[P])).map(h.fromAffine)})}multiplyUnsafe(w){const A=h.ZERO;if(w===St)return A;if(a(w),w===Ke)return this;const{endo:T}=t;if(!T)return $.unsafeLadder(this,w);let{k1neg:L,k1:P,k2neg:u,k2:f}=T.splitScalar(w),l=A,g=A,v=this;for(;P>St||f>St;)P&Ke&&(l=l.add(v)),f&Ke&&(g=g.add(v)),v=v.double(),P>>=Ke,f>>=Ke;return L&&(l=l.negate()),u&&(g=g.negate()),g=new h(n.mul(g.px,T.beta),g.py,g.pz),l.add(g)}multiply(w){a(w);let A=w,T,L;const{endo:P}=t;if(P){const{k1neg:u,k1:f,k2neg:l,k2:g}=P.splitScalar(A);let{p:v,f:B}=this.wNAF(f),{p:_,f:b}=this.wNAF(g);v=$.constTimeNegate(u,v),_=$.constTimeNegate(l,_),_=new h(n.mul(_.px,P.beta),_.py,_.pz),T=v.add(_),L=B.add(b)}else{const{p:u,f}=this.wNAF(A);T=u,L=f}return h.normalizeZ([T,L])[0]}multiplyAndAddUnsafe(w,A,T){const L=h.BASE,P=(f,l)=>l===St||l===Ke||!f.equals(L)?f.multiplyUnsafe(l):f.multiply(l),u=P(this,A).add(P(w,T));return u.is0()?void 0:u}toAffine(w){const{px:A,py:T,pz:L}=this,P=this.is0();w==null&&(w=P?n.ONE:n.inv(L));const u=n.mul(A,w),f=n.mul(T,w),l=n.mul(L,w);if(P)return{x:n.ZERO,y:n.ZERO};if(!n.eql(l,n.ONE))throw new Error("invZ was invalid");return{x:u,y:f}}isTorsionFree(){const{h:w,isTorsionFree:A}=t;if(w===Ke)return!0;if(A)return A(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:A}=t;return w===Ke?this:A?A(h,this):this.multiplyUnsafe(t.h)}toRawBytes(w=!0){return this.assertValidity(),r(h,this,w)}toHex(w=!0){return ur(this.toRawBytes(w))}}h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const y=t.nBitLength,$=sp(h,t.endo?Math.ceil(y/2):y);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function dp(e){const t=fd(e);return Jr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function lp(e){const t=dp(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function o(E){return St<E&&E<n.ORDER}function a(E){return Se(E,r)}function c(E){return Lo(E,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:p,weierstrassEquation:h,isWithinCurveOrder:y}=cp({...t,toBytes(E,m,C){const N=m.toAffine(),z=n.toBytes(N.x),x=In;return C?x(Uint8Array.from([m.hasEvenY()?2:3]),z):x(Uint8Array.from([4]),z,n.toBytes(N.y))},fromBytes(E){const m=E.length,C=E[0],N=E.subarray(1);if(m===i&&(C===2||C===3)){const z=Ue(N);if(!o(z))throw new Error("Point is not on curve");const x=h(z);let R=n.sqrt(x);const H=(R&Ke)===Ke;return(C&1)===1!==H&&(R=n.neg(R)),{x:z,y:R}}else if(m===s&&C===4){const z=n.fromBytes(N.subarray(0,n.BYTES)),x=n.fromBytes(N.subarray(n.BYTES,2*n.BYTES));return{x:z,y:x}}else throw new Error(`Point of length ${m} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),$=E=>ur(rn(E,t.nByteLength));function k(E){const m=r>>Ke;return E>m}function w(E){return k(E)?a(-E):E}const A=(E,m,C)=>Ue(E.slice(m,C));class T{constructor(m,C,N){this.r=m,this.s=C,this.recovery=N,this.assertValidity()}static fromCompact(m){const C=t.nByteLength;return m=Be("compactSignature",m,C*2),new T(A(m,0,C),A(m,C,2*C))}static fromDER(m){const{r:C,s:N}=Pn.toSig(Be("DER",m));return new T(C,N)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(m){return new T(this.r,this.s,m)}recoverPublicKey(m){const{r:C,s:N,recovery:z}=this,x=g(Be("msgHash",m));if(z==null||![0,1,2,3].includes(z))throw new Error("recovery id invalid");const R=z===2||z===3?C+t.n:C;if(R>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=z&1?"03":"02",F=d.fromHex(H+$(R)),K=c(R),X=a(-x*K),M=a(N*K),q=d.BASE.multiplyAndAddUnsafe(F,X,M);if(!q)throw new Error("point at infinify");return q.assertValidity(),q}hasHighS(){return k(this.s)}normalizeS(){return this.hasHighS()?new T(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return ar(this.toDERHex())}toDERHex(){return Pn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ar(this.toCompactHex())}toCompactHex(){return $(this.r)+$(this.s)}}const L={isValidPrivateKey(E){try{return p(E),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const E=ld(t.n);return rp(t.randomBytes(E),t.n)},precompute(E=8,m=d.BASE){return m._setWindowSize(E),m.multiply(BigInt(3)),m}};function P(E,m=!0){return d.fromPrivateKey(E).toRawBytes(m)}function u(E){const m=E instanceof Uint8Array,C=typeof E=="string",N=(m||C)&&E.length;return m?N===i||N===s:C?N===2*i||N===2*s:E instanceof d}function f(E,m,C=!0){if(u(E))throw new Error("first arg must be private key");if(!u(m))throw new Error("second arg must be public key");return d.fromHex(m).multiply(p(E)).toRawBytes(C)}const l=t.bits2int||function(E){const m=Ue(E),C=E.length*8-t.nBitLength;return C>0?m>>BigInt(C):m},g=t.bits2int_modN||function(E){return a(l(E))},v=Au(t.nBitLength);function B(E){if(typeof E!="bigint")throw new Error("bigint expected");if(!(St<=E&&E<v))throw new Error(`bigint expected < 2^${t.nBitLength}`);return rn(E,t.nByteLength)}function _(E,m,C=b){if(["recovered","canonical"].some(re=>re in C))throw new Error("sign() legacy options not supported");const{hash:N,randomBytes:z}=t;let{lowS:x,prehash:R,extraEntropy:H}=C;x==null&&(x=!0),E=Be("msgHash",E),R&&(E=Be("prehashed msgHash",N(E)));const F=g(E),K=p(m),X=[B(K),B(F)];if(H!=null){const re=H===!0?z(n.BYTES):H;X.push(Be("extraEntropy",re))}const M=In(...X),q=F;function ne(re){const ue=l(re);if(!y(ue))return;const Me=c(ue),me=d.BASE.multiply(ue).toAffine(),j=a(me.x);if(j===St)return;const ie=a(Me*a(q+j*K));if(ie===St)return;let Y=(me.x===j?0:2)|Number(me.y&Ke),J=ie;return x&&k(ie)&&(J=w(ie),Y^=1),new T(j,J,Y)}return{seed:M,k2sig:ne}}const b={lowS:t.lowS,prehash:!1},S={lowS:t.lowS,prehash:!1};function I(E,m,C=b){const{seed:N,k2sig:z}=_(E,m,C),x=t;return ad(x.hash.outputLen,x.nByteLength,x.hmac)(N,z)}d.BASE._setWindowSize(8);function O(E,m,C,N=S){var me;const z=E;if(m=Be("msgHash",m),C=Be("publicKey",C),"strict"in N)throw new Error("options.strict was renamed to lowS");const{lowS:x,prehash:R}=N;let H,F;try{if(typeof z=="string"||z instanceof Uint8Array)try{H=T.fromDER(z)}catch(j){if(!(j instanceof Pn.Err))throw j;H=T.fromCompact(z)}else if(typeof z=="object"&&typeof z.r=="bigint"&&typeof z.s=="bigint"){const{r:j,s:ie}=z;H=new T(j,ie)}else throw new Error("PARSE");F=d.fromHex(C)}catch(j){if(j.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(x&&H.hasHighS())return!1;R&&(m=t.hash(m));const{r:K,s:X}=H,M=g(m),q=c(X),ne=a(M*q),re=a(K*q),ue=(me=d.BASE.multiplyAndAddUnsafe(F,ne,re))==null?void 0:me.toAffine();return ue?a(ue.x)===K:!1}return{CURVE:t,getPublicKey:P,getSharedSecret:f,sign:I,verify:O,ProjectivePoint:d,Signature:T,utils:L}}let hd=class extends id{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Sh(t);const r=vu(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return Ti(this),this.iHash.update(t),this}digestInto(t){Ti(this),nd(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const pd=(e,t,n)=>new hd(e,t).update(n).digest();pd.create=(e,t)=>new hd(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fp(e){return{hash:e,hmac:(t,...n)=>pd(e,t,Lh(...n)),randomBytes:sd}}function hp(e,t){const n=r=>lp({...e,...fp(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cs=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Pi=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),gd=BigInt(1),Bi=BigInt(2),ka=(e,t)=>(e+t/Bi)/t;function md(e){const t=cs,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),d=e*e*e%t,p=d*d*e%t,h=qe(p,n,t)*p%t,y=qe(h,n,t)*p%t,$=qe(y,Bi,t)*d%t,k=qe($,i,t)*$%t,w=qe(k,s,t)*k%t,A=qe(w,a,t)*w%t,T=qe(A,c,t)*A%t,L=qe(T,a,t)*w%t,P=qe(L,n,t)*p%t,u=qe(P,o,t)*k%t,f=qe(u,r,t)*d%t,l=qe(f,Bi,t);if(!Io.eql(Io.sqr(l),e))throw new Error("Cannot find square root");return l}const Io=np(cs,void 0,void 0,{sqrt:md}),$u=hp({a:BigInt(0),b:BigInt(7),Fp:Io,n:Pi,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Pi,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-gd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=ka(s*e,t),c=ka(-r*e,t);let d=Se(e-a*n-c*i,t),p=Se(-a*r-c*s,t);const h=d>o,y=p>o;if(h&&(d=t-d),y&&(p=t-p),d>o||p>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:d,k2neg:y,k2:p}}}},Po),ds=BigInt(0),wd=e=>typeof e=="bigint"&&ds<e&&e<cs,pp=e=>typeof e=="bigint"&&ds<e&&e<Pi,Aa={};function Li(e,...t){let n=Aa[e];if(n===void 0){const r=Po(Uint8Array.from(e,i=>i.charCodeAt(0)));n=In(r,r),Aa[e]=n}return Po(In(n,...t))}const Su=e=>e.toRawBytes(!0).slice(1),Co=e=>rn(e,32),Ws=e=>Se(e,cs),jr=e=>Se(e,Pi),Tu=$u.ProjectivePoint,gp=(e,t,n)=>Tu.BASE.multiplyAndAddUnsafe(e,t,n);function Oo(e){let t=$u.utils.normPrivateKeyToScalar(e),n=Tu.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:jr(-t),bytes:Su(n)}}function bd(e){if(!wd(e))throw new Error("bad x: need 0 < x < p");const t=Ws(e*e),n=Ws(t*e+BigInt(7));let r=md(n);r%Bi!==ds&&(r=Ws(-r));const i=new Tu(e,r,gd);return i.assertValidity(),i}function yd(...e){return jr(Ue(Li("BIP0340/challenge",...e)))}function mp(e){return Oo(e).bytes}function wp(e,t,n=sd(32)){const r=Be("message",e),{bytes:i,scalar:s}=Oo(t),o=Be("auxRand",n,32),a=Co(s^Ue(Li("BIP0340/aux",o))),c=Li("BIP0340/nonce",a,i,r),d=jr(Ue(c));if(d===ds)throw new Error("sign failed: k is zero");const{bytes:p,scalar:h}=Oo(d),y=yd(p,i,r),$=new Uint8Array(64);if($.set(p,0),$.set(Co(jr(h+y*s)),32),!vd($,r,i))throw new Error("sign: Invalid signature produced");return $}function vd(e,t,n){const r=Be("signature",e,64),i=Be("message",t),s=Be("publicKey",n,32);try{const o=bd(Ue(s)),a=Ue(r.subarray(0,32));if(!wd(a))return!1;const c=Ue(r.subarray(32,64));if(!pp(c))return!1;const d=yd(Co(a),Su(o),i),p=gp(o,c,jr(-d));return!(!p||!p.hasEvenY()||p.toAffine().x!==a)}catch{return!1}}const pt={getPublicKey:mp,sign:wp,verify:vd,utils:{randomPrivateKey:$u.utils.randomPrivateKey,lift_x:bd,pointToBytes:Su,numberToBytesBE:rn,bytesToNumberBE:Ue,taggedHash:Li,mod:Se}},_n=Symbol("verified"),bp=e=>e instanceof Object;function yp(e){if(!bp(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}function No(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function vp(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function _d(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function _p(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");No(e.outputLen),No(e.blockLen)}function Ep(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function kp(e,t){_d(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Ks={number:No,bool:vp,bytes:_d,hash:_p,exists:Ep,output:kp};function Ap(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,d=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+d,a,r)}class $p extends ih{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Hs(this.buffer)}update(t){Ks.exists(this);const{view:n,buffer:r,blockLen:i}=this;t=Kc(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Hs(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ks.exists(this),Ks.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;Ap(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Hs(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<d;h++)a.setUint32(4*h,p[h],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}}const Sp=(e,t,n)=>e&t^~e&n,Tp=(e,t,n)=>e&t^e&n^t&n,Pp=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Wt=new Uint32Array(64);class Ed extends $p{constructor(){super(64,32,8,!1),this.A=qt[0]|0,this.B=qt[1]|0,this.C=qt[2]|0,this.D=qt[3]|0,this.E=qt[4]|0,this.F=qt[5]|0,this.G=qt[6]|0,this.H=qt[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[t,n,r,i,s,o,a,c]}set(t,n,r,i,s,o,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let h=0;h<16;h++,n+=4)Wt[h]=t.getUint32(n,!1);for(let h=16;h<64;h++){const y=Wt[h-15],$=Wt[h-2],k=ct(y,7)^ct(y,18)^y>>>3,w=ct($,17)^ct($,19)^$>>>10;Wt[h]=w+Wt[h-7]+k+Wt[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:d,H:p}=this;for(let h=0;h<64;h++){const y=ct(a,6)^ct(a,11)^ct(a,25),$=p+y+Sp(a,c,d)+Pp[h]+Wt[h]|0,w=(ct(r,2)^ct(r,13)^ct(r,22))+Tp(r,i,s)|0;p=d,d=c,c=a,a=o+$|0,o=s,s=i,i=r,r=$+w|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,i,s,o,a,c,d,p)}roundClean(){Wt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let Bp=class extends Ed{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const kd=Gc(()=>new Ed);Gc(()=>new Bp);let Lp=class{generateSecretKey(){return pt.utils.randomPrivateKey()}getPublicKey(t){return Re(pt.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=Re(pt.getPublicKey(n)),r.id=Gs(r),r.sig=Re(pt.sign(Gs(r),n)),r[_n]=!0,r}verifyEvent(t){if(typeof t[_n]=="boolean")return t[_n];const n=Gs(t);if(n!==t.id)return t[_n]=!1,!1;try{const r=pt.verify(t.sig,n,t.pubkey);return t[_n]=r,r}catch{return t[_n]=!1,!1}}};function Ip(e){if(!yp(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Gs(e){let t=kd(ph.encode(Ip(e)));return Re(t)}const ls=new Lp;ls.generateSecretKey;ls.getPublicKey;ls.finalizeEvent;const Cp=ls.verifyEvent,Op=22242;function Np(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1)return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),i=e[`#${r}`];if(i&&!t.tags.find(([s,o])=>s===n.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function zp(e,t){for(let n=0;n<e.length;n++)if(Np(e[n],t))return!0;return!1}function Rp(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,i=e.slice(r).indexOf('"')+r+1;return e.slice(i,i+64)}function xp(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,i=e.slice(r+1,80).indexOf('"');if(i===-1)return null;let s=r+1+i;return e.slice(r+1,s)}function Mp(e,t){return{kind:Op,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function jp(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}const Hp=e=>(e[_n]=!0,!0);class Pu{constructor(t,n){Q(this,"url");Q(this,"_connected",!1);Q(this,"onclose",null);Q(this,"onnotice",t=>console.debug(`NOTICE from ${this.url}: ${t}`));Q(this,"_onauth",null);Q(this,"baseEoseTimeout",4400);Q(this,"connectionTimeout",4400);Q(this,"publishTimeout",4400);Q(this,"openSubs",new Map);Q(this,"connectionTimeoutHandle");Q(this,"connectionPromise");Q(this,"openCountRequests",new Map);Q(this,"openEventPublishes",new Map);Q(this,"ws");Q(this,"incomingMessageQueue",new mh);Q(this,"queueRunning",!1);Q(this,"challenge");Q(this,"serial",0);Q(this,"verifyEvent");Q(this,"_WebSocket");this.url=Br(t),this.verifyEvent=n.verifyEvent,this._WebSocket=n.websocketImplementation||WebSocket}static async connect(t,n){const r=new Pu(t,n);return await r.connect(),r}closeAllSubscriptions(t){for(let[n,r]of this.openSubs)r.close(t);this.openSubs.clear();for(let[n,r]of this.openEventPublishes)r.reject(new Error(t));this.openEventPublishes.clear();for(let[n,r]of this.openCountRequests)r.reject(new Error(t));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((t,n)=>{this.connectionTimeoutHandle=setTimeout(()=>{var r;n("connection timed out"),this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(r){n(r);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,t()},this.ws.onerror=r=>{var i;n(r.message||"websocket error"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(i=this.onclose)==null||i.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var r;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await jp();this.queueRunning=!1}handleNext(){var r,i,s;const t=this.incomingMessageQueue.dequeue();if(!t)return!1;const n=xp(t);if(n){const o=this.openSubs.get(n);if(!o)return;const a=Rp(t,"id"),c=(r=o.alreadyHaveEvent)==null?void 0:r.call(o,a);if((i=o.receivedEvent)==null||i.call(o,this,a),c)return}try{let o=JSON.parse(t);switch(o[0]){case"EVENT":{const a=this.openSubs.get(o[1]),c=o[2];this.verifyEvent(c)&&zp(a.filters,c)&&a.onevent(c);return}case"COUNT":{const a=o[1],c=o[2],d=this.openCountRequests.get(a);d&&(d.resolve(c.count),this.openCountRequests.delete(a));return}case"EOSE":{const a=this.openSubs.get(o[1]);if(!a)return;a.receivedEose();return}case"OK":{const a=o[1],c=o[2],d=o[3],p=this.openEventPublishes.get(a);p&&(c?p.resolve(d):p.reject(new Error(d)),this.openEventPublishes.delete(a));return}case"CLOSED":{const a=o[1],c=this.openSubs.get(a);if(!c)return;c.closed=!0,c.close(o[2]);return}case"NOTICE":this.onnotice(o[1]);return;case"AUTH":{this.challenge=o[1],(s=this._onauth)==null||s.call(this,o[1]);return}}}catch{return}}async send(t){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var n;(n=this.ws)==null||n.send(t)})}async auth(t){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const n=await t(Mp(this.url,this.challenge)),r=new Promise((i,s)=>{this.openEventPublishes.set(n.id,{resolve:i,reject:s})});return this.send('["AUTH",'+JSON.stringify(n)+"]"),r}async publish(t){const n=new Promise((r,i)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:i})});return this.send('["EVENT",'+JSON.stringify(t)+"]"),setTimeout(()=>{const r=this.openEventPublishes.get(t.id);r&&(r.reject(new Error("publish timed out")),this.openEventPublishes.delete(t.id))},this.publishTimeout),n}async count(t,n){this.serial++;const r=(n==null?void 0:n.id)||"count:"+this.serial,i=new Promise((s,o)=>{this.openCountRequests.set(r,{resolve:s,reject:o})});return this.send('["COUNT","'+r+'",'+JSON.stringify(t).substring(1)),i}subscribe(t,n){const r=this.prepareSubscription(t,n);return r.fire(),r}prepareSubscription(t,n){this.serial++;const r=n.id||"sub:"+this.serial,i=new Up(this,r,t,n);return this.openSubs.set(r,i),i}close(){var t;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(t=this.ws)==null||t.close()}_onmessage(t){this.incomingMessageQueue.enqueue(t.data),this.queueRunning||this.runQueue()}}class Up{constructor(t,n,r,i){Q(this,"relay");Q(this,"id");Q(this,"closed",!1);Q(this,"eosed",!1);Q(this,"filters");Q(this,"alreadyHaveEvent");Q(this,"receivedEvent");Q(this,"onevent");Q(this,"oneose");Q(this,"onclose");Q(this,"eoseTimeout");Q(this,"eoseTimeoutHandle");this.relay=t,this.filters=r,this.id=n,this.alreadyHaveEvent=i.alreadyHaveEvent,this.receivedEvent=i.receivedEvent,this.eoseTimeout=i.eoseTimeout||t.baseEoseTimeout,this.oneose=i.oneose,this.onclose=i.onclose,this.onevent=i.onevent||(s=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,s)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var t;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(t=this.oneose)==null||t.call(this))}close(t="closed by caller"){var n;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(n=this.onclose)==null||n.call(this,t)}}var Dp;try{Dp=WebSocket}catch{}let Vp=class{constructor(t){Q(this,"relays",new Map);Q(this,"seenOn",new Map);Q(this,"trackRelays",!1);Q(this,"verifyEvent");Q(this,"trustedRelayURLs",new Set);Q(this,"_WebSocket");this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation}async ensureRelay(t,n){t=Br(t);let r=this.relays.get(t);return r||(r=new Pu(t,{verifyEvent:this.trustedRelayURLs.has(t)?Hp:this.verifyEvent,websocketImplementation:this._WebSocket}),n!=null&&n.connectionTimeout&&(r.connectionTimeout=n.connectionTimeout),this.relays.set(t,r)),await r.connect(),r}close(t){t.map(Br).forEach(n=>{var r;(r=this.relays.get(n))==null||r.close()})}subscribeMany(t,n,r){return this.subscribeManyMap(Object.fromEntries(t.map(i=>[i,n])),r)}subscribeManyMap(t,n){this.trackRelays&&(n.receivedEvent=(y,$)=>{let k=this.seenOn.get($);k||(k=new Set,this.seenOn.set($,k)),k.add(y)});const r=new Set,i=[],s=Object.keys(t).length,o=[];let a=y=>{var $;o[y]=!0,o.filter(k=>k).length===s&&(($=n.oneose)==null||$.call(n),a=()=>{})};const c=[];let d=(y,$)=>{var k;a(y),c[y]=$,c.filter(w=>w).length===s&&((k=n.onclose)==null||k.call(n,c),d=()=>{})};const p=y=>{var k;if((k=n.alreadyHaveEvent)!=null&&k.call(n,y))return!0;const $=r.has(y);return r.add(y),$},h=Promise.all(Object.entries(t).map(async(y,$,k)=>{if(k.indexOf(y)!==$){d($,"duplicate url");return}let[w,A]=y;w=Br(w);let T;try{T=await this.ensureRelay(w,{connectionTimeout:n.maxWait?Math.max(n.maxWait*.8,n.maxWait-1e3):void 0})}catch(P){d($,(P==null?void 0:P.message)||String(P));return}let L=T.subscribe(A,{...n,oneose:()=>a($),onclose:P=>d($,P),alreadyHaveEvent:p,eoseTimeout:n.maxWait});i.push(L)}));return{async close(){await h,i.forEach(y=>{y.close()})}}}subscribeManyEose(t,n,r){const i=this.subscribeMany(t,n,{...r,oneose(){i.close()}});return i}async querySync(t,n,r){return new Promise(async i=>{const s=[];this.subscribeManyEose(t,[n],{...r,onevent(o){s.push(o)},onclose(o){i(s)}})})}async get(t,n,r){n.limit=1;const i=await this.querySync(t,n,r);return i.sort((s,o)=>o.created_at-s.created_at),i[0]||null}publish(t,n){return t.map(Br).map(async(r,i,s)=>{if(s.indexOf(r)!==i)return Promise.reject("duplicate url");let o=await this.ensureRelay(r);return o.publish(n).then(a=>{if(this.trackRelays){let c=this.seenOn.get(n.id);c||(c=new Set,this.seenOn.set(n.id,c)),c.add(o)}return a})})}listConnectionStatus(){const t=new Map;return this.relays.forEach((n,r)=>t.set(r,n.connected)),t}destroy(){this.relays.forEach(t=>t.close()),this.relays=new Map}};var Ad;try{Ad=WebSocket}catch{}let Fp=class extends Vp{constructor(){super({verifyEvent:Cp,websocketImplementation:Ad})}},qp;try{qp=fetch}catch{}var Wp;try{Wp=fetch}catch{}var Kp;try{Kp=fetch}catch{}var Gp;try{Gp=fetch}catch{}const $d=["wss://purplepag.es","wss://relay.nos.social","wss://user.kindpag.es"],Zp=["wss://purplepag.es","wss://relay.nos.social","wss://user.kindpag.es"];let Yp=0,Xp=0;Iu(3,$d,Lu(e=>{if(e.length>=2&&e[0]==="p")return e[1]}),e=>[]);const Bu=Iu(10002,Zp,Lu(e=>{if(e.length===2)return{url:e[1],read:!0,write:!0};if(e[2]==="read")return{url:e[1],read:!0,write:!1};if(e[2]==="write")return{url:e[1],read:!1,write:!0}}),e=>[{url:"wss://relay.damus.io",read:!0,write:!0},{url:"wss://nos.lol",read:!0,write:!0}]);Iu(1e4,[],Lu(e=>{if(e.length>=2){switch(e[0]){case"p":return{label:"pubkey",value:e[1]};case"e":return{label:"thread",value:e[1]};case"t":return{label:"hashtag",value:e[1]};case"word":return{label:"word",value:e[1]}}return}}),e=>[]);function Lu(e){return t=>t?t.tags.map(e).filter($h):[]}function Iu(e,t,n,r){const i=td(),s=yu(`@nostr/gadgets/list:${e}`,"cache"),o=new Wc(a=>new Promise(async c=>{var y,$;let d=[],p=await ed(a.map(k=>k.target),s).then(k=>k.map((w,A)=>{const T=a[A];return T.index=A,w?w.lastAttempt<Date.now()/1e3-172800?(d.push(T),w.lastAttempt=Math.round(Date.now()/1e3),w):(w.event===null&&w.lastAttempt<Date.now()/1e3-3600&&(d.push(T),w.lastAttempt=Math.round(Date.now()/1e3)),w):(d.push(T),{items:r(T.target),event:null})}));if(d.length===0){c(p);return}const h={};for(let k=0;k<d.length;k++){const w=d[k],A=w.relays.slice(0,Math.min(4,w.relays.length));do A.push(Jp(t));while(A.length<3);for(let T=0;T<A.length;T++){const L=A[T];let P=h[L];P||(P=[{kinds:[e],authors:[]}],h[L]=P),($=(y=P[0])==null?void 0:y.authors)==null||$.push(w.target)}}try{let k;k=Hr.subscribeManyMap(h,{id:`kind:${e}:batch(${d.length})-${Xp++}`,onevent(w){var A;for(let T=0;T<d.length;T++){const L=d[T];if(L.target===w.pubkey){const P=(A=p[L.index])==null?void 0:A.event;if(P!=null&&P.created_at||0>w.created_at)return;p[L.index]={event:w,items:n(w)};return}}},oneose(){k==null||k.close()},async onclose(){c(p),Qc(d.map(w=>[w.target,p[w.index]]),s)}})}catch(k){c(p.map(w=>k))}}),{cache:!0,cacheKeyFn:a=>a.target,cacheMap:i});return async function(a,c=[]){let d=c;if(e===10002)return await o.load({target:a,relays:d});{const p=await Bu(a,c);return d.push(...p.items.filter(({write:h})=>h).map(({url:h})=>h).slice(0,3)),await o.load({target:a,relays:d})}}}function Jp(e){return e[Yp++%e.length]}var At;(function(e){e[e.lastFetchAttempt=0]="lastFetchAttempt",e[e.mostRecentEventFetched=1]="mostRecentEventFetched",e[e.lastInRelayList=2]="lastInRelayList",e[e.lastInTag=3]="lastInTag",e[e.lastInNprofile=4]="lastInNprofile",e[e.lastInNevent=5]="lastInNevent",e[e.lastInNIP05=6]="lastInNIP05"})(At||(At={}));At.lastFetchAttempt+"",At.mostRecentEventFetched+"",At.lastInRelayList+"",At.lastInTag+"",At.lastInNprofile+"",At.lastInNevent+"",At.lastInNIP05+"";let Hr=new Fp,Qp=0,$a=0;const Sa=yu("@nostr/gadgets/metadata","cache");function eg(e){return typeof e=="string"?Ta.load({pubkey:e}):Ta.load(e)}const Ta=new Wc(async e=>new Promise(async t=>{const n=[];let r=await ed(e.map(s=>s.pubkey),Sa).then(s=>s.map((o,a)=>{const c=e[a];if(o)return o.lastAttempt<Date.now()/1e3-172800?(n.push(c),o.lastAttempt=Math.round(Date.now()/1e3),o):(o.lastAttempt<Date.now()/1e3-3600&&!o.metadata.name&&!o.metadata.picture&&!o.metadata.about&&(n.push(c),o.lastAttempt=Math.round(Date.now()/1e3)),o);{n.push(c);let d=tg(c.pubkey);return d.lastAttempt=Math.round(Date.now()/1e3),d}}));if(n.length===0){t(r);return}const i={};await Promise.all(n.map(async({pubkey:s,relays:o=[]})=>{const a=new Set(o.slice(0,3));try{const{items:c}=await Bu(s);let d=0;for(let p=0;p<c.length&&!(c[p].write&&(a.add(c[p].url),d++,d>=3));p++);}catch(c){console.error("Failed to load relay list for",s,c)}do a.add($d[$a]),$a++;while(a.size<3);i[s]=Array.from(a)}));try{const s={};for(const[a,c]of Object.entries(i))for(const d of c)s[d]||(s[d]=[{kinds:[0],authors:[]}]),s[d][0].authors.push(a);let o=Hr.subscribeManyMap(s,{id:`metadata(${e.length})-${Qp++}`,onevent(a){for(let c=0;c<e.length;c++)if(e[c].pubkey===a.pubkey){const d=r[c];if(d.lastUpdated>a.created_at)return;ng(d,a);return}},oneose(){t(r),o.close();let a=[];for(let c=0;c<r.length;c++){let d=r[c];d.pubkey&&a.push([d.pubkey,d])}Qc(a,Sa)}})}catch(s){for(let o=0;o<r.length;o++)r[o]=s;t(r)}}),{cacheKeyFn:e=>e.pubkey,cache:!0,cacheMap:td()});function tg(e){const t=bh(e);return{pubkey:e,npub:t,shortName:t.substring(0,8)+""+t.substring(59),lastUpdated:0,metadata:{}}}function ng(e,t){var r,i;let n={};try{n=JSON.parse(t.content)}catch{}e.metadata=n,e.shortName=n.name||n.display_name||((i=(r=n.nip05)==null?void 0:r.split("@"))==null?void 0:i[0])||e.shortName,n.picture&&(e.image=n.picture)}const li=new TextDecoder("utf-8"),Sd=new TextEncoder,Td=5e3;function rg(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}function Pd(e){var i,s,o,a,c,d,p;let{prefix:t,words:n}=or.decode(e,Td),r=new Uint8Array(or.fromWords(n));switch(t){case"nprofile":{let h=Zs(r);if(!((i=h[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(h[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Re(h[0][0]),relays:h[1]?h[1].map(y=>li.decode(y)):[]}}}case"nevent":{let h=Zs(r);if(!((s=h[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(h[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(h[2]&&h[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(h[3]&&h[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Re(h[0][0]),relays:h[1]?h[1].map(y=>li.decode(y)):[],author:(o=h[2])!=null&&o[0]?Re(h[2][0]):void 0,kind:(a=h[3])!=null&&a[0]?parseInt(Re(h[3][0]),16):void 0}}}case"naddr":{let h=Zs(r);if(!((c=h[0])!=null&&c[0]))throw new Error("missing TLV 0 for naddr");if(!((d=h[2])!=null&&d[0]))throw new Error("missing TLV 2 for naddr");if(h[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((p=h[3])!=null&&p[0]))throw new Error("missing TLV 3 for naddr");if(h[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:li.decode(h[0][0]),pubkey:Re(h[2][0]),kind:parseInt(Re(h[3][0]),16),relays:h[1]?h[1].map(y=>li.decode(y)):[]}}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:Re(r)};default:throw new Error(`unknown prefix ${t}`)}}function Zs(e){let t={},n=e;for(;n.length>0;){let r=n[0],i=n[1],s=n.slice(2,2+i);if(n=n.slice(2+i),s.length<i)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(s)}return t}function ig(e,t){let n=or.toWords(t);return or.encode(e,n,Td)}function sg(e){let t;e.kind!==void 0&&(t=rg(e.kind));let n=og({0:[Ao(e.id)],1:(e.relays||[]).map(r=>Sd.encode(r)),2:e.author?[Ao(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return ig("nevent",n)}function og(e){let t=[];return Object.entries(e).reverse().forEach(([n,r])=>{r.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(n)],0),s.set([i.length],1),s.set(i,2),t.push(s)})}),rh(...t)}async function Cu(){var A,T,L,P,u,f,l,g;const e=document.querySelector('meta[name="author"]'),t=document.querySelector('meta[name="relays"]'),n=document.querySelector('meta[name="top-notes"]'),r=document.querySelector('meta[name="short-notes"]'),i=document.querySelector('meta[name="short-notes-min-chars"]'),s=document.querySelector('meta[name="short-notes-summary-max-chars"]'),o=document.querySelector('meta[name="topics"]'),a=document.querySelector('meta[name="comments"]');if(!e)throw new Error("Missing meta tags for configuration");const c=e.getAttribute("value");let d=(T=(A=t==null?void 0:t.getAttribute)==null?void 0:A.call(t,"value"))==null?void 0:T.split(",").map(v=>v.trim());(!d||d.length===0)&&(d=(await Bu(Pd(c).data)).items.filter(v=>v.write).map(v=>v.url));const p=parseFloat(((L=n==null?void 0:n.getAttribute)==null?void 0:L.call(n,"value"))||"2")||2,h=parseFloat(((P=i==null?void 0:i.getAttribute)==null?void 0:P.call(i,"value"))||"800")||800,y=(()=>{var v;switch(((v=r==null?void 0:r.getAttribute)==null?void 0:v.call(r,"value"))||"carousel"){case"carousel":return"carousel";case"main":return"main";default:return""}})(),$=parseFloat(((u=s==null?void 0:s.getAttribute)==null?void 0:u.call(s,"value"))||"400")||400,k=((l=(f=o==null?void 0:o.getAttribute)==null?void 0:f.call(o,"value"))==null?void 0:l.split(",").map(v=>v.trim()).filter(v=>v!==""))||[],w=(((g=a==null?void 0:a.getAttribute)==null?void 0:g.call(a,"value"))||"yes")==="yes";return{npub:c,relays:d,topNotes:p,shortNotesMinChars:h,shortNotes:y,shortFeedSummaryMaxChars:$,topics:k,comments:w}}var Bd={exports:{}};(function(e){(function(){function t(u){var f={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `` and `` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(u===!1)return JSON.parse(JSON.stringify(f));var l={};for(var g in f)f.hasOwnProperty(g)&&(l[g]=f[g].defaultValue);return l}function n(){var u=t(!0),f={};for(var l in u)u.hasOwnProperty(l)&&(f[l]=!0);return f}var r={},i={},s={},o=t(!0),a="vanilla",c={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:t(!0),allOn:n()};r.helper={},r.extensions={},r.setOption=function(u,f){return o[u]=f,this},r.getOption=function(u){return o[u]},r.getOptions=function(){return o},r.resetOptions=function(){o=t(!0)},r.setFlavor=function(u){if(!c.hasOwnProperty(u))throw Error(u+" flavor was not found");r.resetOptions();var f=c[u];a=u;for(var l in f)f.hasOwnProperty(l)&&(o[l]=f[l])},r.getFlavor=function(){return a},r.getFlavorOptions=function(u){if(c.hasOwnProperty(u))return c[u]},r.getDefaultOptions=function(u){return t(u)},r.subParser=function(u,f){if(r.helper.isString(u))if(typeof f<"u")i[u]=f;else{if(i.hasOwnProperty(u))return i[u];throw Error("SubParser named "+u+" not registered!")}},r.extension=function(u,f){if(!r.helper.isString(u))throw Error("Extension 'name' must be a string");if(u=r.helper.stdExtName(u),r.helper.isUndefined(f)){if(!s.hasOwnProperty(u))throw Error("Extension named "+u+" is not registered!");return s[u]}else{typeof f=="function"&&(f=f()),r.helper.isArray(f)||(f=[f]);var l=d(f,u);if(l.valid)s[u]=f;else throw Error(l.error)}},r.getAllExtensions=function(){return s},r.removeExtension=function(u){delete s[u]},r.resetExtensions=function(){s={}};function d(u,f){var l=f?"Error in "+f+" extension->":"Error in unnamed extension",g={valid:!0,error:""};r.helper.isArray(u)||(u=[u]);for(var v=0;v<u.length;++v){var B=l+" sub-extension "+v+": ",_=u[v];if(typeof _!="object")return g.valid=!1,g.error=B+"must be an object, but "+typeof _+" given",g;if(!r.helper.isString(_.type))return g.valid=!1,g.error=B+'property "type" must be a string, but '+typeof _.type+" given",g;var b=_.type=_.type.toLowerCase();if(b==="language"&&(b=_.type="lang"),b==="html"&&(b=_.type="output"),b!=="lang"&&b!=="output"&&b!=="listener")return g.valid=!1,g.error=B+"type "+b+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',g;if(b==="listener"){if(r.helper.isUndefined(_.listeners))return g.valid=!1,g.error=B+'. Extensions of type "listener" must have a property called "listeners"',g}else if(r.helper.isUndefined(_.filter)&&r.helper.isUndefined(_.regex))return g.valid=!1,g.error=B+b+' extensions must define either a "regex" property or a "filter" method',g;if(_.listeners){if(typeof _.listeners!="object")return g.valid=!1,g.error=B+'"listeners" property must be an object but '+typeof _.listeners+" given",g;for(var S in _.listeners)if(_.listeners.hasOwnProperty(S)&&typeof _.listeners[S]!="function")return g.valid=!1,g.error=B+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+S+" must be a function but "+typeof _.listeners[S]+" given",g}if(_.filter){if(typeof _.filter!="function")return g.valid=!1,g.error=B+'"filter" must be a function, but '+typeof _.filter+" given",g}else if(_.regex){if(r.helper.isString(_.regex)&&(_.regex=new RegExp(_.regex,"g")),!(_.regex instanceof RegExp))return g.valid=!1,g.error=B+'"regex" property must either be a string or a RegExp object, but '+typeof _.regex+" given",g;if(r.helper.isUndefined(_.replace))return g.valid=!1,g.error=B+'"regex" extensions must implement a replace string or function',g}}return g}r.validateExtension=function(u){var f=d(u,null);return f.valid?!0:(console.warn(f.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(u){return typeof u=="string"||u instanceof String},r.helper.isFunction=function(u){var f={};return u&&f.toString.call(u)==="[object Function]"},r.helper.isArray=function(u){return Array.isArray(u)},r.helper.isUndefined=function(u){return typeof u>"u"},r.helper.forEach=function(u,f){if(r.helper.isUndefined(u))throw new Error("obj param is required");if(r.helper.isUndefined(f))throw new Error("callback param is required");if(!r.helper.isFunction(f))throw new Error("callback param must be a function/closure");if(typeof u.forEach=="function")u.forEach(f);else if(r.helper.isArray(u))for(var l=0;l<u.length;l++)f(u[l],l,u);else if(typeof u=="object")for(var g in u)u.hasOwnProperty(g)&&f(u[g],g,u);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(u){return u.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function p(u,f){var l=f.charCodeAt(0);return"E"+l+"E"}r.helper.escapeCharactersCallback=p,r.helper.escapeCharacters=function(u,f,l){var g="(["+f.replace(/([\[\]\\])/g,"\\$1")+"])";l&&(g="\\\\"+g);var v=new RegExp(g,"g");return u=u.replace(v,p),u},r.helper.unescapeHTMLEntities=function(u){return u.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var h=function(u,f,l,g){var v=g||"",B=v.indexOf("g")>-1,_=new RegExp(f+"|"+l,"g"+v.replace(/g/g,"")),b=new RegExp(f,v.replace(/g/g,"")),S=[],I,O,E,m,C;do for(I=0;E=_.exec(u);)if(b.test(E[0]))I++||(O=_.lastIndex,m=O-E[0].length);else if(I&&!--I){C=E.index+E[0].length;var N={left:{start:m,end:O},match:{start:O,end:E.index},right:{start:E.index,end:C},wholeMatch:{start:m,end:C}};if(S.push(N),!B)return S}while(I&&(_.lastIndex=O));return S};r.helper.matchRecursiveRegExp=function(u,f,l,g){for(var v=h(u,f,l,g),B=[],_=0;_<v.length;++_)B.push([u.slice(v[_].wholeMatch.start,v[_].wholeMatch.end),u.slice(v[_].match.start,v[_].match.end),u.slice(v[_].left.start,v[_].left.end),u.slice(v[_].right.start,v[_].right.end)]);return B},r.helper.replaceRecursiveRegExp=function(u,f,l,g,v){if(!r.helper.isFunction(f)){var B=f;f=function(){return B}}var _=h(u,l,g,v),b=u,S=_.length;if(S>0){var I=[];_[0].wholeMatch.start!==0&&I.push(u.slice(0,_[0].wholeMatch.start));for(var O=0;O<S;++O)I.push(f(u.slice(_[O].wholeMatch.start,_[O].wholeMatch.end),u.slice(_[O].match.start,_[O].match.end),u.slice(_[O].left.start,_[O].left.end),u.slice(_[O].right.start,_[O].right.end))),O<S-1&&I.push(u.slice(_[O].wholeMatch.end,_[O+1].wholeMatch.start));_[S-1].wholeMatch.end<u.length&&I.push(u.slice(_[S-1].wholeMatch.end)),b=I.join("")}return b},r.helper.regexIndexOf=function(u,f,l){if(!r.helper.isString(u))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(f instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var g=u.substring(l||0).search(f);return g>=0?g+(l||0):g},r.helper.splitAtIndex=function(u,f){if(!r.helper.isString(u))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[u.substring(0,f),u.substring(f)]},r.helper.encodeEmailAddress=function(u){var f=[function(l){return"&#"+l.charCodeAt(0)+";"},function(l){return"&#x"+l.charCodeAt(0).toString(16)+";"},function(l){return l}];return u=u.replace(/./g,function(l){if(l==="@")l=f[Math.floor(Math.random()*2)](l);else{var g=Math.random();l=g>.9?f[2](l):g>.45?f[1](l):f[0](l)}return l}),u},r.helper.padEnd=function(f,l,g){return l=l>>0,g=String(g||" "),f.length>l?String(f):(l=l-f.length,l>g.length&&(g+=g.repeat(l/g.length)),String(f)+g.slice(0,l))},typeof console>"u"&&(console={warn:function(u){alert(u)},log:function(u){alert(u)},error:function(u){throw u}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"","-1":"",100:"",1234:"","1st_place_medal":"","2nd_place_medal":"","3rd_place_medal":"","8ball":"",a:"",ab:"",abc:"",abcd:"",accept:"",aerial_tramway:"",airplane:"",alarm_clock:"",alembic:"",alien:"",ambulance:"",amphora:"",anchor:"",angel:"",anger:"",angry:"",anguished:"",ant:"",apple:"",aquarius:"",aries:"",arrow_backward:"",arrow_double_down:"",arrow_double_up:"",arrow_down:"",arrow_down_small:"",arrow_forward:"",arrow_heading_down:"",arrow_heading_up:"",arrow_left:"",arrow_lower_left:"",arrow_lower_right:"",arrow_right:"",arrow_right_hook:"",arrow_up:"",arrow_up_down:"",arrow_up_small:"",arrow_upper_left:"",arrow_upper_right:"",arrows_clockwise:"",arrows_counterclockwise:"",art:"",articulated_lorry:"",artificial_satellite:"",astonished:"",athletic_shoe:"",atm:"",atom_symbol:"",avocado:"",b:"",baby:"",baby_bottle:"",baby_chick:"",baby_symbol:"",back:"",bacon:"",badminton:"",baggage_claim:"",baguette_bread:"",balance_scale:"",balloon:"",ballot_box:"",ballot_box_with_check:"",bamboo:"",banana:"",bangbang:"",bank:"",bar_chart:"",barber:"",baseball:"",basketball:"",basketball_man:"",basketball_woman:"&zwj;",bat:"",bath:"",bathtub:"",battery:"",beach_umbrella:"",bear:"",bed:"",bee:"",beer:"",beers:"",beetle:"",beginner:"",bell:"",bellhop_bell:"",bento:"",biking_man:"",bike:"",biking_woman:"&zwj;",bikini:"",biohazard:"",bird:"",birthday:"",black_circle:"",black_flag:"",black_heart:"",black_joker:"",black_large_square:"",black_medium_small_square:"",black_medium_square:"",black_nib:"",black_small_square:"",black_square_button:"",blonde_man:"",blonde_woman:"&zwj;",blossom:"",blowfish:"",blue_book:"",blue_car:"",blue_heart:"",blush:"",boar:"",boat:"",bomb:"",book:"",bookmark:"",bookmark_tabs:"",books:"",boom:"",boot:"",bouquet:"",bowing_man:"",bow_and_arrow:"",bowing_woman:"&zwj;",bowling:"",boxing_glove:"",boy:"",bread:"",bride_with_veil:"",bridge_at_night:"",briefcase:"",broken_heart:"",bug:"",building_construction:"",bulb:"",bullettrain_front:"",bullettrain_side:"",burrito:"",bus:"",business_suit_levitating:"",busstop:"",bust_in_silhouette:"",busts_in_silhouette:"",butterfly:"",cactus:"",cake:"",calendar:"",call_me_hand:"",calling:"",camel:"",camera:"",camera_flash:"",camping:"",cancer:"",candle:"",candy:"",canoe:"",capital_abcd:"",capricorn:"",car:"",card_file_box:"",card_index:"",card_index_dividers:"",carousel_horse:"",carrot:"",cat:"",cat2:"",cd:"",chains:"",champagne:"",chart:"",chart_with_downwards_trend:"",chart_with_upwards_trend:"",checkered_flag:"",cheese:"",cherries:"",cherry_blossom:"",chestnut:"",chicken:"",children_crossing:"",chipmunk:"",chocolate_bar:"",christmas_tree:"",church:"",cinema:"",circus_tent:"",city_sunrise:"",city_sunset:"",cityscape:"",cl:"",clamp:"",clap:"",clapper:"",classical_building:"",clinking_glasses:"",clipboard:"",clock1:"",clock10:"",clock1030:"",clock11:"",clock1130:"",clock12:"",clock1230:"",clock130:"",clock2:"",clock230:"",clock3:"",clock330:"",clock4:"",clock430:"",clock5:"",clock530:"",clock6:"",clock630:"",clock7:"",clock730:"",clock8:"",clock830:"",clock9:"",clock930:"",closed_book:"",closed_lock_with_key:"",closed_umbrella:"",cloud:"",cloud_with_lightning:"",cloud_with_lightning_and_rain:"",cloud_with_rain:"",cloud_with_snow:"",clown_face:"",clubs:"",cocktail:"",coffee:"",coffin:"",cold_sweat:"",comet:"",computer:"",computer_mouse:"",confetti_ball:"",confounded:"",confused:"",congratulations:"",construction:"",construction_worker_man:"",construction_worker_woman:"&zwj;",control_knobs:"",convenience_store:"",cookie:"",cool:"",policeman:"",copyright:"",corn:"",couch_and_lamp:"",couple:"",couple_with_heart_woman_man:"",couple_with_heart_man_man:"&zwj;&zwj;",couple_with_heart_woman_woman:"&zwj;&zwj;",couplekiss_man_man:"&zwj;&zwj;&zwj;",couplekiss_man_woman:"",couplekiss_woman_woman:"&zwj;&zwj;&zwj;",cow:"",cow2:"",cowboy_hat_face:"",crab:"",crayon:"",credit_card:"",crescent_moon:"",cricket:"",crocodile:"",croissant:"",crossed_fingers:"",crossed_flags:"",crossed_swords:"",crown:"",cry:"",crying_cat_face:"",crystal_ball:"",cucumber:"",cupid:"",curly_loop:"",currency_exchange:"",curry:"",custard:"",customs:"",cyclone:"",dagger:"",dancer:"",dancing_women:"",dancing_men:"&zwj;",dango:"",dark_sunglasses:"",dart:"",dash:"",date:"",deciduous_tree:"",deer:"",department_store:"",derelict_house:"",desert:"",desert_island:"",desktop_computer:"",male_detective:"",diamond_shape_with_a_dot_inside:"",diamonds:"",disappointed:"",disappointed_relieved:"",dizzy:"",dizzy_face:"",do_not_litter:"",dog:"",dog2:"",dollar:"",dolls:"",dolphin:"",door:"",doughnut:"",dove:"",dragon:"",dragon_face:"",dress:"",dromedary_camel:"",drooling_face:"",droplet:"",drum:"",duck:"",dvd:"","e-mail":"",eagle:"",ear:"",ear_of_rice:"",earth_africa:"",earth_americas:"",earth_asia:"",egg:"",eggplant:"",eight_pointed_black_star:"",eight_spoked_asterisk:"",electric_plug:"",elephant:"",email:"",end:"",envelope_with_arrow:"",euro:"",european_castle:"",european_post_office:"",evergreen_tree:"",exclamation:"",expressionless:"",eye:"",eye_speech_bubble:"&zwj;",eyeglasses:"",eyes:"",face_with_head_bandage:"",face_with_thermometer:"",fist_oncoming:"",factory:"",fallen_leaf:"",family_man_woman_boy:"",family_man_boy:"&zwj;",family_man_boy_boy:"&zwj;&zwj;",family_man_girl:"&zwj;",family_man_girl_boy:"&zwj;&zwj;",family_man_girl_girl:"&zwj;&zwj;",family_man_man_boy:"&zwj;&zwj;",family_man_man_boy_boy:"&zwj;&zwj;&zwj;",family_man_man_girl:"&zwj;&zwj;",family_man_man_girl_boy:"&zwj;&zwj;&zwj;",family_man_man_girl_girl:"&zwj;&zwj;&zwj;",family_man_woman_boy_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl:"&zwj;&zwj;",family_man_woman_girl_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl_girl:"&zwj;&zwj;&zwj;",family_woman_boy:"&zwj;",family_woman_boy_boy:"&zwj;&zwj;",family_woman_girl:"&zwj;",family_woman_girl_boy:"&zwj;&zwj;",family_woman_girl_girl:"&zwj;&zwj;",family_woman_woman_boy:"&zwj;&zwj;",family_woman_woman_boy_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl:"&zwj;&zwj;",family_woman_woman_girl_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl_girl:"&zwj;&zwj;&zwj;",fast_forward:"",fax:"",fearful:"",feet:"",female_detective:"&zwj;",ferris_wheel:"",ferry:"",field_hockey:"",file_cabinet:"",file_folder:"",film_projector:"",film_strip:"",fire:"",fire_engine:"",fireworks:"",first_quarter_moon:"",first_quarter_moon_with_face:"",fish:"",fish_cake:"",fishing_pole_and_fish:"",fist_raised:"",fist_left:"",fist_right:"",flags:"",flashlight:"",fleur_de_lis:"",flight_arrival:"",flight_departure:"",floppy_disk:"",flower_playing_cards:"",flushed:"",fog:"",foggy:"",football:"",footprints:"",fork_and_knife:"",fountain:"",fountain_pen:"",four_leaf_clover:"",fox_face:"",framed_picture:"",free:"",fried_egg:"",fried_shrimp:"",fries:"",frog:"",frowning:"",frowning_face:"",frowning_man:"&zwj;",frowning_woman:"",middle_finger:"",fuelpump:"",full_moon:"",full_moon_with_face:"",funeral_urn:"",game_die:"",gear:"",gem:"",gemini:"",ghost:"",gift:"",gift_heart:"",girl:"",globe_with_meridians:"",goal_net:"",goat:"",golf:"",golfing_man:"",golfing_woman:"&zwj;",gorilla:"",grapes:"",green_apple:"",green_book:"",green_heart:"",green_salad:"",grey_exclamation:"",grey_question:"",grimacing:"",grin:"",grinning:"",guardsman:"",guardswoman:"&zwj;",guitar:"",gun:"",haircut_woman:"",haircut_man:"&zwj;",hamburger:"",hammer:"",hammer_and_pick:"",hammer_and_wrench:"",hamster:"",hand:"",handbag:"",handshake:"",hankey:"",hatched_chick:"",hatching_chick:"",headphones:"",hear_no_evil:"",heart:"",heart_decoration:"",heart_eyes:"",heart_eyes_cat:"",heartbeat:"",heartpulse:"",hearts:"",heavy_check_mark:"",heavy_division_sign:"",heavy_dollar_sign:"",heavy_heart_exclamation:"",heavy_minus_sign:"",heavy_multiplication_x:"",heavy_plus_sign:"",helicopter:"",herb:"",hibiscus:"",high_brightness:"",high_heel:"",hocho:"",hole:"",honey_pot:"",horse:"",horse_racing:"",hospital:"",hot_pepper:"",hotdog:"",hotel:"",hotsprings:"",hourglass:"",hourglass_flowing_sand:"",house:"",house_with_garden:"",houses:"",hugs:"",hushed:"",ice_cream:"",ice_hockey:"",ice_skate:"",icecream:"",id:"",ideograph_advantage:"",imp:"",inbox_tray:"",incoming_envelope:"",tipping_hand_woman:"",information_source:"",innocent:"",interrobang:"",iphone:"",izakaya_lantern:"",jack_o_lantern:"",japan:"",japanese_castle:"",japanese_goblin:"",japanese_ogre:"",jeans:"",joy:"",joy_cat:"",joystick:"",kaaba:"",key:"",keyboard:"",keycap_ten:"",kick_scooter:"",kimono:"",kiss:"",kissing:"",kissing_cat:"",kissing_closed_eyes:"",kissing_heart:"",kissing_smiling_eyes:"",kiwi_fruit:"",koala:"",koko:"",label:"",large_blue_circle:"",large_blue_diamond:"",large_orange_diamond:"",last_quarter_moon:"",last_quarter_moon_with_face:"",latin_cross:"",laughing:"",leaves:"",ledger:"",left_luggage:"",left_right_arrow:"",leftwards_arrow_with_hook:"",lemon:"",leo:"",leopard:"",level_slider:"",libra:"",light_rail:"",link:"",lion:"",lips:"",lipstick:"",lizard:"",lock:"",lock_with_ink_pen:"",lollipop:"",loop:"",loud_sound:"",loudspeaker:"",love_hotel:"",love_letter:"",low_brightness:"",lying_face:"",m:"",mag:"",mag_right:"",mahjong:"",mailbox:"",mailbox_closed:"",mailbox_with_mail:"",mailbox_with_no_mail:"",man:"",man_artist:"&zwj;",man_astronaut:"&zwj;",man_cartwheeling:"&zwj;",man_cook:"&zwj;",man_dancing:"",man_facepalming:"&zwj;",man_factory_worker:"&zwj;",man_farmer:"&zwj;",man_firefighter:"&zwj;",man_health_worker:"&zwj;",man_in_tuxedo:"",man_judge:"&zwj;",man_juggling:"&zwj;",man_mechanic:"&zwj;",man_office_worker:"&zwj;",man_pilot:"&zwj;",man_playing_handball:"&zwj;",man_playing_water_polo:"&zwj;",man_scientist:"&zwj;",man_shrugging:"&zwj;",man_singer:"&zwj;",man_student:"&zwj;",man_teacher:"&zwj;",man_technologist:"&zwj;",man_with_gua_pi_mao:"",man_with_turban:"",tangerine:"",mans_shoe:"",mantelpiece_clock:"",maple_leaf:"",martial_arts_uniform:"",mask:"",massage_woman:"",massage_man:"&zwj;",meat_on_bone:"",medal_military:"",medal_sports:"",mega:"",melon:"",memo:"",men_wrestling:"&zwj;",menorah:"",mens:"",metal:"",metro:"",microphone:"",microscope:"",milk_glass:"",milky_way:"",minibus:"",minidisc:"",mobile_phone_off:"",money_mouth_face:"",money_with_wings:"",moneybag:"",monkey:"",monkey_face:"",monorail:"",moon:"",mortar_board:"",mosque:"",motor_boat:"",motor_scooter:"",motorcycle:"",motorway:"",mount_fuji:"",mountain:"",mountain_biking_man:"",mountain_biking_woman:"&zwj;",mountain_cableway:"",mountain_railway:"",mountain_snow:"",mouse:"",mouse2:"",movie_camera:"",moyai:"",mrs_claus:"",muscle:"",mushroom:"",musical_keyboard:"",musical_note:"",musical_score:"",mute:"",nail_care:"",name_badge:"",national_park:"",nauseated_face:"",necktie:"",negative_squared_cross_mark:"",nerd_face:"",neutral_face:"",new:"",new_moon:"",new_moon_with_face:"",newspaper:"",newspaper_roll:"",next_track_button:"",ng:"",no_good_man:"&zwj;",no_good_woman:"",night_with_stars:"",no_bell:"",no_bicycles:"",no_entry:"",no_entry_sign:"",no_mobile_phones:"",no_mouth:"",no_pedestrians:"",no_smoking:"","non-potable_water":"",nose:"",notebook:"",notebook_with_decorative_cover:"",notes:"",nut_and_bolt:"",o:"",o2:"",ocean:"",octopus:"",oden:"",office:"",oil_drum:"",ok:"",ok_hand:"",ok_man:"&zwj;",ok_woman:"",old_key:"",older_man:"",older_woman:"",om:"",on:"",oncoming_automobile:"",oncoming_bus:"",oncoming_police_car:"",oncoming_taxi:"",open_file_folder:"",open_hands:"",open_mouth:"",open_umbrella:"",ophiuchus:"",orange_book:"",orthodox_cross:"",outbox_tray:"",owl:"",ox:"",package:"",page_facing_up:"",page_with_curl:"",pager:"",paintbrush:"",palm_tree:"",pancakes:"",panda_face:"",paperclip:"",paperclips:"",parasol_on_ground:"",parking:"",part_alternation_mark:"",partly_sunny:"",passenger_ship:"",passport_control:"",pause_button:"",peace_symbol:"",peach:"",peanuts:"",pear:"",pen:"",pencil2:"",penguin:"",pensive:"",performing_arts:"",persevere:"",person_fencing:"",pouting_woman:"",phone:"",pick:"",pig:"",pig2:"",pig_nose:"",pill:"",pineapple:"",ping_pong:"",pisces:"",pizza:"",place_of_worship:"",plate_with_cutlery:"",play_or_pause_button:"",point_down:"",point_left:"",point_right:"",point_up:"",point_up_2:"",police_car:"",policewoman:"&zwj;",poodle:"",popcorn:"",post_office:"",postal_horn:"",postbox:"",potable_water:"",potato:"",pouch:"",poultry_leg:"",pound:"",rage:"",pouting_cat:"",pouting_man:"&zwj;",pray:"",prayer_beads:"",pregnant_woman:"",previous_track_button:"",prince:"",princess:"",printer:"",purple_heart:"",purse:"",pushpin:"",put_litter_in_its_place:"",question:"",rabbit:"",rabbit2:"",racehorse:"",racing_car:"",radio:"",radio_button:"",radioactive:"",railway_car:"",railway_track:"",rainbow:"",rainbow_flag:"&zwj;",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",raised_hands:"",raising_hand_woman:"",raising_hand_man:"&zwj;",ram:"",ramen:"",rat:"",record_button:"",recycle:"",red_circle:"",registered:"",relaxed:"",relieved:"",reminder_ribbon:"",repeat:"",repeat_one:"",rescue_worker_helmet:"",restroom:"",revolving_hearts:"",rewind:"",rhinoceros:"",ribbon:"",rice:"",rice_ball:"",rice_cracker:"",rice_scene:"",right_anger_bubble:"",ring:"",robot:"",rocket:"",rofl:"",roll_eyes:"",roller_coaster:"",rooster:"",rose:"",rosette:"",rotating_light:"",round_pushpin:"",rowing_man:"",rowing_woman:"&zwj;",rugby_football:"",running_man:"",running_shirt_with_sash:"",running_woman:"&zwj;",sa:"",sagittarius:"",sake:"",sandal:"",santa:"",satellite:"",saxophone:"",school:"",school_satchel:"",scissors:"",scorpion:"",scorpius:"",scream:"",scream_cat:"",scroll:"",seat:"",secret:"",see_no_evil:"",seedling:"",selfie:"",shallow_pan_of_food:"",shamrock:"",shark:"",shaved_ice:"",sheep:"",shell:"",shield:"",shinto_shrine:"",ship:"",shirt:"",shopping:"",shopping_cart:"",shower:"",shrimp:"",signal_strength:"",six_pointed_star:"",ski:"",skier:"",skull:"",skull_and_crossbones:"",sleeping:"",sleeping_bed:"",sleepy:"",slightly_frowning_face:"",slightly_smiling_face:"",slot_machine:"",small_airplane:"",small_blue_diamond:"",small_orange_diamond:"",small_red_triangle:"",small_red_triangle_down:"",smile:"",smile_cat:"",smiley:"",smiley_cat:"",smiling_imp:"",smirk:"",smirk_cat:"",smoking:"",snail:"",snake:"",sneezing_face:"",snowboarder:"",snowflake:"",snowman:"",snowman_with_snow:"",sob:"",soccer:"",soon:"",sos:"",sound:"",space_invader:"",spades:"",spaghetti:"",sparkle:"",sparkler:"",sparkles:"",sparkling_heart:"",speak_no_evil:"",speaker:"",speaking_head:"",speech_balloon:"",speedboat:"",spider:"",spider_web:"",spiral_calendar:"",spiral_notepad:"",spoon:"",squid:"",stadium:"",star:"",star2:"",star_and_crescent:"",star_of_david:"",stars:"",station:"",statue_of_liberty:"",steam_locomotive:"",stew:"",stop_button:"",stop_sign:"",stopwatch:"",straight_ruler:"",strawberry:"",stuck_out_tongue:"",stuck_out_tongue_closed_eyes:"",stuck_out_tongue_winking_eye:"",studio_microphone:"",stuffed_flatbread:"",sun_behind_large_cloud:"",sun_behind_rain_cloud:"",sun_behind_small_cloud:"",sun_with_face:"",sunflower:"",sunglasses:"",sunny:"",sunrise:"",sunrise_over_mountains:"",surfing_man:"",surfing_woman:"&zwj;",sushi:"",suspension_railway:"",sweat:"",sweat_drops:"",sweat_smile:"",sweet_potato:"",swimming_man:"",swimming_woman:"&zwj;",symbols:"",synagogue:"",syringe:"",taco:"",tada:"",tanabata_tree:"",taurus:"",taxi:"",tea:"",telephone_receiver:"",telescope:"",tennis:"",tent:"",thermometer:"",thinking:"",thought_balloon:"",ticket:"",tickets:"",tiger:"",tiger2:"",timer_clock:"",tipping_hand_man:"&zwj;",tired_face:"",tm:"",toilet:"",tokyo_tower:"",tomato:"",tongue:"",top:"",tophat:"",tornado:"",trackball:"",tractor:"",traffic_light:"",train:"",train2:"",tram:"",triangular_flag_on_post:"",triangular_ruler:"",trident:"",triumph:"",trolleybus:"",trophy:"",tropical_drink:"",tropical_fish:"",truck:"",trumpet:"",tulip:"",tumbler_glass:"",turkey:"",turtle:"",tv:"",twisted_rightwards_arrows:"",two_hearts:"",two_men_holding_hands:"",two_women_holding_hands:"",u5272:"",u5408:"",u55b6:"",u6307:"",u6708:"",u6709:"",u6e80:"",u7121:"",u7533:"",u7981:"",u7a7a:"",umbrella:"",unamused:"",underage:"",unicorn:"",unlock:"",up:"",upside_down_face:"",v:"",vertical_traffic_light:"",vhs:"",vibration_mode:"",video_camera:"",video_game:"",violin:"",virgo:"",volcano:"",volleyball:"",vs:"",vulcan_salute:"",walking_man:"",walking_woman:"&zwj;",waning_crescent_moon:"",waning_gibbous_moon:"",warning:"",wastebasket:"",watch:"",water_buffalo:"",watermelon:"",wave:"",wavy_dash:"",waxing_crescent_moon:"",wc:"",weary:"",wedding:"",weight_lifting_man:"",weight_lifting_woman:"&zwj;",whale:"",whale2:"",wheel_of_dharma:"",wheelchair:"",white_check_mark:"",white_circle:"",white_flag:"",white_flower:"",white_large_square:"",white_medium_small_square:"",white_medium_square:"",white_small_square:"",white_square_button:"",wilted_flower:"",wind_chime:"",wind_face:"",wine_glass:"",wink:"",wolf:"",woman:"",woman_artist:"&zwj;",woman_astronaut:"&zwj;",woman_cartwheeling:"&zwj;",woman_cook:"&zwj;",woman_facepalming:"&zwj;",woman_factory_worker:"&zwj;",woman_farmer:"&zwj;",woman_firefighter:"&zwj;",woman_health_worker:"&zwj;",woman_judge:"&zwj;",woman_juggling:"&zwj;",woman_mechanic:"&zwj;",woman_office_worker:"&zwj;",woman_pilot:"&zwj;",woman_playing_handball:"&zwj;",woman_playing_water_polo:"&zwj;",woman_scientist:"&zwj;",woman_shrugging:"&zwj;",woman_singer:"&zwj;",woman_student:"&zwj;",woman_teacher:"&zwj;",woman_technologist:"&zwj;",woman_with_turban:"&zwj;",womans_clothes:"",womans_hat:"",women_wrestling:"&zwj;",womens:"",world_map:"",worried:"",wrench:"",writing_hand:"",x:"",yellow_heart:"",yen:"",yin_yang:"",yum:"",zap:"",zipper_mouth_face:"",zzz:"",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(u){var f={},l=[],g=[],v={},B=a,_={parsed:{},raw:"",format:""};b();function b(){u=u||{};for(var m in o)o.hasOwnProperty(m)&&(f[m]=o[m]);if(typeof u=="object")for(var C in u)u.hasOwnProperty(C)&&(f[C]=u[C]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof u+" was passed instead.");f.extensions&&r.helper.forEach(f.extensions,S)}function S(m,C){if(C=C||null,r.helper.isString(m))if(m=r.helper.stdExtName(m),C=m,r.extensions[m]){console.warn("DEPRECATION WARNING: "+m+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),I(r.extensions[m],m);return}else if(!r.helper.isUndefined(s[m]))m=s[m];else throw Error('Extension "'+m+'" could not be loaded. It was either not found or is not a valid extension.');typeof m=="function"&&(m=m()),r.helper.isArray(m)||(m=[m]);var N=d(m,C);if(!N.valid)throw Error(N.error);for(var z=0;z<m.length;++z){switch(m[z].type){case"lang":l.push(m[z]);break;case"output":g.push(m[z]);break}if(m[z].hasOwnProperty("listeners"))for(var x in m[z].listeners)m[z].listeners.hasOwnProperty(x)&&O(x,m[z].listeners[x])}}function I(m,C){typeof m=="function"&&(m=m(new r.Converter)),r.helper.isArray(m)||(m=[m]);var N=d(m,C);if(!N.valid)throw Error(N.error);for(var z=0;z<m.length;++z)switch(m[z].type){case"lang":l.push(m[z]);break;case"output":g.push(m[z]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function O(m,C){if(!r.helper.isString(m))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof m+" given");if(typeof C!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof C+" given");v.hasOwnProperty(m)||(v[m]=[]),v[m].push(C)}function E(m){var C=m.match(/^\s*/)[0].length,N=new RegExp("^\\s{0,"+C+"}","gm");return m.replace(N,"")}this._dispatch=function(C,N,z,x){if(v.hasOwnProperty(C))for(var R=0;R<v[C].length;++R){var H=v[C][R](C,N,this,z,x);H&&typeof H<"u"&&(N=H)}return N},this.listen=function(m,C){return O(m,C),this},this.makeHtml=function(m){if(!m)return m;var C={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:l,outputModifiers:g,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return m=m.replace(//g,"T"),m=m.replace(/\$/g,"D"),m=m.replace(/\r\n/g,`
`),m=m.replace(/\r/g,`
`),m=m.replace(/\u00A0/g,"&nbsp;"),f.smartIndentationFix&&(m=E(m)),m=`

`+m+`

`,m=r.subParser("detab")(m,f,C),m=m.replace(/^[ \t]+$/mg,""),r.helper.forEach(l,function(N){m=r.subParser("runExtension")(N,m,f,C)}),m=r.subParser("metadata")(m,f,C),m=r.subParser("hashPreCodeTags")(m,f,C),m=r.subParser("githubCodeBlocks")(m,f,C),m=r.subParser("hashHTMLBlocks")(m,f,C),m=r.subParser("hashCodeTags")(m,f,C),m=r.subParser("stripLinkDefinitions")(m,f,C),m=r.subParser("blockGamut")(m,f,C),m=r.subParser("unhashHTMLSpans")(m,f,C),m=r.subParser("unescapeSpecialChars")(m,f,C),m=m.replace(/D/g,"$$"),m=m.replace(/T/g,""),m=r.subParser("completeHTMLDocument")(m,f,C),r.helper.forEach(g,function(N){m=r.subParser("runExtension")(N,m,f,C)}),_=C.metadata,m},this.makeMarkdown=this.makeMd=function(m,C){if(m=m.replace(/\r\n/g,`
`),m=m.replace(/\r/g,`
`),m=m.replace(/>[ \t]+</,">NBSP;<"),!C)if(window&&window.document)C=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var N=C.createElement("div");N.innerHTML=m;var z={preList:K(N)};F(N);for(var x=N.childNodes,R="",H=0;H<x.length;H++)R+=r.subParser("makeMarkdown.node")(x[H],z);function F(X){for(var M=0;M<X.childNodes.length;++M){var q=X.childNodes[M];q.nodeType===3?!/\S/.test(q.nodeValue)&&!/^[ ]+$/.test(q.nodeValue)?(X.removeChild(q),--M):(q.nodeValue=q.nodeValue.split(`
`).join(" "),q.nodeValue=q.nodeValue.replace(/(\s)+/g,"$1")):q.nodeType===1&&F(q)}}function K(X){for(var M=X.querySelectorAll("pre"),q=[],ne=0;ne<M.length;++ne)if(M[ne].childElementCount===1&&M[ne].firstChild.tagName.toLowerCase()==="code"){var re=M[ne].firstChild.innerHTML.trim(),ue=M[ne].firstChild.getAttribute("data-language")||"";if(ue==="")for(var Me=M[ne].firstChild.className.split(" "),me=0;me<Me.length;++me){var j=Me[me].match(/^language-(.+)$/);if(j!==null){ue=j[1];break}}re=r.helper.unescapeHTMLEntities(re),q.push(re),M[ne].outerHTML='<precode language="'+ue+'" precodenum="'+ne.toString()+'"></precode>'}else q.push(M[ne].innerHTML),M[ne].innerHTML="",M[ne].setAttribute("prenum",ne.toString());return q}return R},this.setOption=function(m,C){f[m]=C},this.getOption=function(m){return f[m]},this.getOptions=function(){return f},this.addExtension=function(m,C){C=C||null,S(m,C)},this.useExtension=function(m){S(m)},this.setFlavor=function(m){if(!c.hasOwnProperty(m))throw Error(m+" flavor was not found");var C=c[m];B=m;for(var N in C)C.hasOwnProperty(N)&&(f[N]=C[N])},this.getFlavor=function(){return B},this.removeExtension=function(m){r.helper.isArray(m)||(m=[m]);for(var C=0;C<m.length;++C){for(var N=m[C],z=0;z<l.length;++z)l[z]===N&&l.splice(z,1);for(var x=0;x<g.length;++x)g[x]===N&&g.splice(x,1)}},this.getAllExtensions=function(){return{language:l,output:g}},this.getMetadata=function(m){return m?_.raw:_.parsed},this.getMetadataFormat=function(){return _.format},this._setMetadataPair=function(m,C){_.parsed[m]=C},this._setMetadataFormat=function(m){_.format=m},this._setMetadataRaw=function(m){_.raw=m}},r.subParser("anchors",function(u,f,l){u=l.converter._dispatch("anchors.before",u,f,l);var g=function(v,B,_,b,S,I,O){if(r.helper.isUndefined(O)&&(O=""),_=_.toLowerCase(),v.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)b="";else if(!b)if(_||(_=B.toLowerCase().replace(/ ?\n/g," ")),b="#"+_,!r.helper.isUndefined(l.gUrls[_]))b=l.gUrls[_],r.helper.isUndefined(l.gTitles[_])||(O=l.gTitles[_]);else return v;b=b.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var E='<a href="'+b+'"';return O!==""&&O!==null&&(O=O.replace(/"/g,"&quot;"),O=O.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),E+=' title="'+O+'"'),f.openLinksInNewWindow&&!/^#/.test(b)&&(E+=' rel="noopener noreferrer" target="E95Eblank"'),E+=">"+B+"</a>",E};return u=u.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,g),u=u.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,g),u=u.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,g),u=u.replace(/\[([^\[\]]+)]()()()()()/g,g),f.ghMentions&&(u=u.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(v,B,_,b,S){if(_==="\\")return B+b;if(!r.helper.isString(f.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var I=f.ghMentionsLink.replace(/\{u}/g,S),O="";return f.openLinksInNewWindow&&(O=' rel="noopener noreferrer" target="E95Eblank"'),B+'<a href="'+I+'"'+O+">"+b+"</a>"})),u=l.converter._dispatch("anchors.after",u,f,l),u});var y=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,$=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,k=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,w=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,A=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,T=function(u){return function(f,l,g,v,B,_,b){g=g.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var S=g,I="",O="",E=l||"",m=b||"";return/^www\./i.test(g)&&(g=g.replace(/^www\./i,"http://www.")),u.excludeTrailingPunctuationFromURLs&&_&&(I=_),u.openLinksInNewWindow&&(O=' rel="noopener noreferrer" target="E95Eblank"'),E+'<a href="'+g+'"'+O+">"+S+"</a>"+I+m}},L=function(u,f){return function(l,g,v){var B="mailto:";return g=g||"",v=r.subParser("unescapeSpecialChars")(v,u,f),u.encodeEmails?(B=r.helper.encodeEmailAddress(B+v),v=r.helper.encodeEmailAddress(v)):B=B+v,g+'<a href="'+B+'">'+v+"</a>"}};r.subParser("autoLinks",function(u,f,l){return u=l.converter._dispatch("autoLinks.before",u,f,l),u=u.replace(k,T(f)),u=u.replace(A,L(f,l)),u=l.converter._dispatch("autoLinks.after",u,f,l),u}),r.subParser("simplifiedAutoLinks",function(u,f,l){return f.simplifiedAutoLink&&(u=l.converter._dispatch("simplifiedAutoLinks.before",u,f,l),f.excludeTrailingPunctuationFromURLs?u=u.replace($,T(f)):u=u.replace(y,T(f)),u=u.replace(w,L(f,l)),u=l.converter._dispatch("simplifiedAutoLinks.after",u,f,l)),u}),r.subParser("blockGamut",function(u,f,l){return u=l.converter._dispatch("blockGamut.before",u,f,l),u=r.subParser("blockQuotes")(u,f,l),u=r.subParser("headers")(u,f,l),u=r.subParser("horizontalRule")(u,f,l),u=r.subParser("lists")(u,f,l),u=r.subParser("codeBlocks")(u,f,l),u=r.subParser("tables")(u,f,l),u=r.subParser("hashHTMLBlocks")(u,f,l),u=r.subParser("paragraphs")(u,f,l),u=l.converter._dispatch("blockGamut.after",u,f,l),u}),r.subParser("blockQuotes",function(u,f,l){u=l.converter._dispatch("blockQuotes.before",u,f,l),u=u+`

`;var g=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return f.splitAdjacentBlockquotes&&(g=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),u=u.replace(g,function(v){return v=v.replace(/^[ \t]*>[ \t]?/gm,""),v=v.replace(/0/g,""),v=v.replace(/^[ \t]+$/gm,""),v=r.subParser("githubCodeBlocks")(v,f,l),v=r.subParser("blockGamut")(v,f,l),v=v.replace(/(^|\n)/g,"$1  "),v=v.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(B,_){var b=_;return b=b.replace(/^  /mg,"0"),b=b.replace(/0/g,""),b}),r.subParser("hashBlock")(`<blockquote>
`+v+`
</blockquote>`,f,l)}),u=l.converter._dispatch("blockQuotes.after",u,f,l),u}),r.subParser("codeBlocks",function(u,f,l){u=l.converter._dispatch("codeBlocks.before",u,f,l),u+="0";var g=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return u=u.replace(g,function(v,B,_){var b=B,S=_,I=`
`;return b=r.subParser("outdent")(b,f,l),b=r.subParser("encodeCode")(b,f,l),b=r.subParser("detab")(b,f,l),b=b.replace(/^\n+/g,""),b=b.replace(/\n+$/g,""),f.omitExtraWLInCodeBlocks&&(I=""),b="<pre><code>"+b+I+"</code></pre>",r.subParser("hashBlock")(b,f,l)+S}),u=u.replace(/0/,""),u=l.converter._dispatch("codeBlocks.after",u,f,l),u}),r.subParser("codeSpans",function(u,f,l){return u=l.converter._dispatch("codeSpans.before",u,f,l),typeof u>"u"&&(u=""),u=u.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(g,v,B,_){var b=_;return b=b.replace(/^([ \t]*)/g,""),b=b.replace(/[ \t]*$/g,""),b=r.subParser("encodeCode")(b,f,l),b=v+"<code>"+b+"</code>",b=r.subParser("hashHTMLSpans")(b,f,l),b}),u=l.converter._dispatch("codeSpans.after",u,f,l),u}),r.subParser("completeHTMLDocument",function(u,f,l){if(!f.completeHTMLDocument)return u;u=l.converter._dispatch("completeHTMLDocument.before",u,f,l);var g="html",v=`<!DOCTYPE HTML>
`,B="",_=`<meta charset="utf-8">
`,b="",S="";typeof l.metadata.parsed.doctype<"u"&&(v="<!DOCTYPE "+l.metadata.parsed.doctype+`>
`,g=l.metadata.parsed.doctype.toString().toLowerCase(),(g==="html"||g==="html5")&&(_='<meta charset="utf-8">'));for(var I in l.metadata.parsed)if(l.metadata.parsed.hasOwnProperty(I))switch(I.toLowerCase()){case"doctype":break;case"title":B="<title>"+l.metadata.parsed.title+`</title>
`;break;case"charset":g==="html"||g==="html5"?_='<meta charset="'+l.metadata.parsed.charset+`">
`:_='<meta name="charset" content="'+l.metadata.parsed.charset+`">
`;break;case"language":case"lang":b=' lang="'+l.metadata.parsed[I]+'"',S+='<meta name="'+I+'" content="'+l.metadata.parsed[I]+`">
`;break;default:S+='<meta name="'+I+'" content="'+l.metadata.parsed[I]+`">
`}return u=v+"<html"+b+`>
<head>
`+B+_+S+`</head>
<body>
`+u.trim()+`
</body>
</html>`,u=l.converter._dispatch("completeHTMLDocument.after",u,f,l),u}),r.subParser("detab",function(u,f,l){return u=l.converter._dispatch("detab.before",u,f,l),u=u.replace(/\t(?=\t)/g,"    "),u=u.replace(/\t/g,"AB"),u=u.replace(/B(.+?)A/g,function(g,v){for(var B=v,_=4-B.length%4,b=0;b<_;b++)B+=" ";return B}),u=u.replace(/A/g,"    "),u=u.replace(/B/g,""),u=l.converter._dispatch("detab.after",u,f,l),u}),r.subParser("ellipsis",function(u,f,l){return f.ellipsis&&(u=l.converter._dispatch("ellipsis.before",u,f,l),u=u.replace(/\.\.\./g,""),u=l.converter._dispatch("ellipsis.after",u,f,l)),u}),r.subParser("emoji",function(u,f,l){if(!f.emoji)return u;u=l.converter._dispatch("emoji.before",u,f,l);var g=/:([\S]+?):/g;return u=u.replace(g,function(v,B){return r.helper.emojis.hasOwnProperty(B)?r.helper.emojis[B]:v}),u=l.converter._dispatch("emoji.after",u,f,l),u}),r.subParser("encodeAmpsAndAngles",function(u,f,l){return u=l.converter._dispatch("encodeAmpsAndAngles.before",u,f,l),u=u.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),u=u.replace(/<(?![a-z\/?$!])/gi,"&lt;"),u=u.replace(/</g,"&lt;"),u=u.replace(/>/g,"&gt;"),u=l.converter._dispatch("encodeAmpsAndAngles.after",u,f,l),u}),r.subParser("encodeBackslashEscapes",function(u,f,l){return u=l.converter._dispatch("encodeBackslashEscapes.before",u,f,l),u=u.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),u=u.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),u=l.converter._dispatch("encodeBackslashEscapes.after",u,f,l),u}),r.subParser("encodeCode",function(u,f,l){return u=l.converter._dispatch("encodeCode.before",u,f,l),u=u.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),u=l.converter._dispatch("encodeCode.after",u,f,l),u}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(u,f,l){u=l.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",u,f,l);var g=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,v=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return u=u.replace(g,function(B){return B.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),u=u.replace(v,function(B){return B.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),u=l.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",u,f,l),u}),r.subParser("githubCodeBlocks",function(u,f,l){return f.ghCodeBlocks?(u=l.converter._dispatch("githubCodeBlocks.before",u,f,l),u+="0",u=u.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(g,v,B,_){var b=f.omitExtraWLInCodeBlocks?"":`
`;return _=r.subParser("encodeCode")(_,f,l),_=r.subParser("detab")(_,f,l),_=_.replace(/^\n+/g,""),_=_.replace(/\n+$/g,""),_="<pre><code"+(B?' class="'+B+" language-"+B+'"':"")+">"+_+b+"</code></pre>",_=r.subParser("hashBlock")(_,f,l),`

G`+(l.ghCodeBlocks.push({text:g,codeblock:_})-1)+`G

`}),u=u.replace(/0/,""),l.converter._dispatch("githubCodeBlocks.after",u,f,l)):u}),r.subParser("hashBlock",function(u,f,l){return u=l.converter._dispatch("hashBlock.before",u,f,l),u=u.replace(/(^\n+|\n+$)/g,""),u=`

K`+(l.gHtmlBlocks.push(u)-1)+`K

`,u=l.converter._dispatch("hashBlock.after",u,f,l),u}),r.subParser("hashCodeTags",function(u,f,l){u=l.converter._dispatch("hashCodeTags.before",u,f,l);var g=function(v,B,_,b){var S=_+r.subParser("encodeCode")(B,f,l)+b;return"C"+(l.gHtmlSpans.push(S)-1)+"C"};return u=r.helper.replaceRecursiveRegExp(u,g,"<code\\b[^>]*>","</code>","gim"),u=l.converter._dispatch("hashCodeTags.after",u,f,l),u}),r.subParser("hashElement",function(u,f,l){return function(g,v){var B=v;return B=B.replace(/\n\n/g,`
`),B=B.replace(/^\n/,""),B=B.replace(/\n+$/g,""),B=`

K`+(l.gHtmlBlocks.push(B)-1)+`K

`,B}}),r.subParser("hashHTMLBlocks",function(u,f,l){u=l.converter._dispatch("hashHTMLBlocks.before",u,f,l);var g=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],v=function(m,C,N,z){var x=m;return N.search(/\bmarkdown\b/)!==-1&&(x=N+l.converter.makeHtml(C)+z),`

K`+(l.gHtmlBlocks.push(x)-1)+`K

`};f.backslashEscapesHTMLTags&&(u=u.replace(/\\<(\/?[^>]+?)>/g,function(m,C){return"&lt;"+C+"&gt;"}));for(var B=0;B<g.length;++B)for(var _,b=new RegExp("^ {0,3}(<"+g[B]+"\\b[^>]*>)","im"),S="<"+g[B]+"\\b[^>]*>",I="</"+g[B]+">";(_=r.helper.regexIndexOf(u,b))!==-1;){var O=r.helper.splitAtIndex(u,_),E=r.helper.replaceRecursiveRegExp(O[1],v,S,I,"im");if(E===O[1])break;u=O[0].concat(E)}return u=u.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(u,f,l)),u=r.helper.replaceRecursiveRegExp(u,function(m){return`

K`+(l.gHtmlBlocks.push(m)-1)+`K

`},"^ {0,3}\x3C!--","-->","gm"),u=u.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(u,f,l)),u=l.converter._dispatch("hashHTMLBlocks.after",u,f,l),u}),r.subParser("hashHTMLSpans",function(u,f,l){u=l.converter._dispatch("hashHTMLSpans.before",u,f,l);function g(v){return"C"+(l.gHtmlSpans.push(v)-1)+"C"}return u=u.replace(/<[^>]+?\/>/gi,function(v){return g(v)}),u=u.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(v){return g(v)}),u=u.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(v){return g(v)}),u=u.replace(/<[^>]+?>/gi,function(v){return g(v)}),u=l.converter._dispatch("hashHTMLSpans.after",u,f,l),u}),r.subParser("unhashHTMLSpans",function(u,f,l){u=l.converter._dispatch("unhashHTMLSpans.before",u,f,l);for(var g=0;g<l.gHtmlSpans.length;++g){for(var v=l.gHtmlSpans[g],B=0;/C(\d+)C/.test(v);){var _=RegExp.$1;if(v=v.replace("C"+_+"C",l.gHtmlSpans[_]),B===10){console.error("maximum nesting of 10 spans reached!!!");break}++B}u=u.replace("C"+g+"C",v)}return u=l.converter._dispatch("unhashHTMLSpans.after",u,f,l),u}),r.subParser("hashPreCodeTags",function(u,f,l){u=l.converter._dispatch("hashPreCodeTags.before",u,f,l);var g=function(v,B,_,b){var S=_+r.subParser("encodeCode")(B,f,l)+b;return`

G`+(l.ghCodeBlocks.push({text:v,codeblock:S})-1)+`G

`};return u=r.helper.replaceRecursiveRegExp(u,g,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),u=l.converter._dispatch("hashPreCodeTags.after",u,f,l),u}),r.subParser("headers",function(u,f,l){u=l.converter._dispatch("headers.before",u,f,l);var g=isNaN(parseInt(f.headerLevelStart))?1:parseInt(f.headerLevelStart),v=f.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,B=f.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;u=u.replace(v,function(S,I){var O=r.subParser("spanGamut")(I,f,l),E=f.noHeaderId?"":' id="'+b(I)+'"',m=g,C="<h"+m+E+">"+O+"</h"+m+">";return r.subParser("hashBlock")(C,f,l)}),u=u.replace(B,function(S,I){var O=r.subParser("spanGamut")(I,f,l),E=f.noHeaderId?"":' id="'+b(I)+'"',m=g+1,C="<h"+m+E+">"+O+"</h"+m+">";return r.subParser("hashBlock")(C,f,l)});var _=f.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;u=u.replace(_,function(S,I,O){var E=O;f.customizedHeaderId&&(E=O.replace(/\s?\{([^{]+?)}\s*$/,""));var m=r.subParser("spanGamut")(E,f,l),C=f.noHeaderId?"":' id="'+b(O)+'"',N=g-1+I.length,z="<h"+N+C+">"+m+"</h"+N+">";return r.subParser("hashBlock")(z,f,l)});function b(S){var I,O;if(f.customizedHeaderId){var E=S.match(/\{([^{]+?)}\s*$/);E&&E[1]&&(S=E[1])}return I=S,r.helper.isString(f.prefixHeaderId)?O=f.prefixHeaderId:f.prefixHeaderId===!0?O="section-":O="",f.rawPrefixHeaderId||(I=O+I),f.ghCompatibleHeaderId?I=I.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():f.rawHeaderId?I=I.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():I=I.replace(/[^\w]/g,"").toLowerCase(),f.rawPrefixHeaderId&&(I=O+I),l.hashLinkCounts[I]?I=I+"-"+l.hashLinkCounts[I]++:l.hashLinkCounts[I]=1,I}return u=l.converter._dispatch("headers.after",u,f,l),u}),r.subParser("horizontalRule",function(u,f,l){u=l.converter._dispatch("horizontalRule.before",u,f,l);var g=r.subParser("hashBlock")("<hr />",f,l);return u=u.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,g),u=u.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,g),u=u.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,g),u=l.converter._dispatch("horizontalRule.after",u,f,l),u}),r.subParser("images",function(u,f,l){u=l.converter._dispatch("images.before",u,f,l);var g=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,v=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,B=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,_=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,b=/!\[([^\[\]]+)]()()()()()/g;function S(O,E,m,C,N,z,x,R){return C=C.replace(/\s/g,""),I(O,E,m,C,N,z,x,R)}function I(O,E,m,C,N,z,x,R){var H=l.gUrls,F=l.gTitles,K=l.gDimensions;if(m=m.toLowerCase(),R||(R=""),O.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)C="";else if(C===""||C===null)if((m===""||m===null)&&(m=E.toLowerCase().replace(/ ?\n/g," ")),C="#"+m,!r.helper.isUndefined(H[m]))C=H[m],r.helper.isUndefined(F[m])||(R=F[m]),r.helper.isUndefined(K[m])||(N=K[m].width,z=K[m].height);else return O;E=E.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),C=C.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var X='<img src="'+C+'" alt="'+E+'"';return R&&r.helper.isString(R)&&(R=R.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),X+=' title="'+R+'"'),N&&z&&(N=N==="*"?"auto":N,z=z==="*"?"auto":z,X+=' width="'+N+'"',X+=' height="'+z+'"'),X+=" />",X}return u=u.replace(_,I),u=u.replace(B,S),u=u.replace(v,I),u=u.replace(g,I),u=u.replace(b,I),u=l.converter._dispatch("images.after",u,f,l),u}),r.subParser("italicsAndBold",function(u,f,l){u=l.converter._dispatch("italicsAndBold.before",u,f,l);function g(v,B,_){return B+v+_}return f.literalMidWordUnderscores?(u=u.replace(/\b___(\S[\s\S]*?)___\b/g,function(v,B){return g(B,"<strong><em>","</em></strong>")}),u=u.replace(/\b__(\S[\s\S]*?)__\b/g,function(v,B){return g(B,"<strong>","</strong>")}),u=u.replace(/\b_(\S[\s\S]*?)_\b/g,function(v,B){return g(B,"<em>","</em>")})):(u=u.replace(/___(\S[\s\S]*?)___/g,function(v,B){return/\S$/.test(B)?g(B,"<strong><em>","</em></strong>"):v}),u=u.replace(/__(\S[\s\S]*?)__/g,function(v,B){return/\S$/.test(B)?g(B,"<strong>","</strong>"):v}),u=u.replace(/_([^\s_][\s\S]*?)_/g,function(v,B){return/\S$/.test(B)?g(B,"<em>","</em>"):v})),f.literalMidWordAsterisks?(u=u.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(v,B,_){return g(_,B+"<strong><em>","</em></strong>")}),u=u.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(v,B,_){return g(_,B+"<strong>","</strong>")}),u=u.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(v,B,_){return g(_,B+"<em>","</em>")})):(u=u.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(v,B){return/\S$/.test(B)?g(B,"<strong><em>","</em></strong>"):v}),u=u.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(v,B){return/\S$/.test(B)?g(B,"<strong>","</strong>"):v}),u=u.replace(/\*([^\s*][\s\S]*?)\*/g,function(v,B){return/\S$/.test(B)?g(B,"<em>","</em>"):v})),u=l.converter._dispatch("italicsAndBold.after",u,f,l),u}),r.subParser("lists",function(u,f,l){function g(_,b){l.gListLevel++,_=_.replace(/\n{2,}$/,`
`),_+="0";var S=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,I=/\n[ \t]*\n(?!0)/.test(_);return f.disableForced4SpacesIndentedSublists&&(S=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),_=_.replace(S,function(O,E,m,C,N,z,x){x=x&&x.trim()!=="";var R=r.subParser("outdent")(N,f,l),H="";return z&&f.tasklists&&(H=' class="task-list-item" style="list-style-type: none;"',R=R.replace(/^[ \t]*\[(x|X| )?]/m,function(){var F='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return x&&(F+=" checked"),F+=">",F})),R=R.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(F){return"A"+F}),E||R.search(/\n{2,}/)>-1?(R=r.subParser("githubCodeBlocks")(R,f,l),R=r.subParser("blockGamut")(R,f,l)):(R=r.subParser("lists")(R,f,l),R=R.replace(/\n$/,""),R=r.subParser("hashHTMLBlocks")(R,f,l),R=R.replace(/\n\n+/g,`

`),I?R=r.subParser("paragraphs")(R,f,l):R=r.subParser("spanGamut")(R,f,l)),R=R.replace("A",""),R="<li"+H+">"+R+`</li>
`,R}),_=_.replace(/0/g,""),l.gListLevel--,b&&(_=_.replace(/\s+$/,"")),_}function v(_,b){if(b==="ol"){var S=_.match(/^ *(\d+)\./);if(S&&S[1]!=="1")return' start="'+S[1]+'"'}return""}function B(_,b,S){var I=f.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,O=f.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,E=b==="ul"?I:O,m="";if(_.search(E)!==-1)(function N(z){var x=z.search(E),R=v(_,b);x!==-1?(m+=`

<`+b+R+`>
`+g(z.slice(0,x),!!S)+"</"+b+`>
`,b=b==="ul"?"ol":"ul",E=b==="ul"?I:O,N(z.slice(x))):m+=`

<`+b+R+`>
`+g(z,!!S)+"</"+b+`>
`})(_);else{var C=v(_,b);m=`

<`+b+C+`>
`+g(_,!!S)+"</"+b+`>
`}return m}return u=l.converter._dispatch("lists.before",u,f,l),u+="0",l.gListLevel?u=u.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(_,b,S){var I=S.search(/[*+-]/g)>-1?"ul":"ol";return B(b,I,!0)}):u=u.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(_,b,S,I){var O=I.search(/[*+-]/g)>-1?"ul":"ol";return B(S,O,!1)}),u=u.replace(/0/,""),u=l.converter._dispatch("lists.after",u,f,l),u}),r.subParser("metadata",function(u,f,l){if(!f.metadata)return u;u=l.converter._dispatch("metadata.before",u,f,l);function g(v){l.metadata.raw=v,v=v.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),v=v.replace(/\n {4}/g," "),v.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(B,_,b){return l.metadata.parsed[_]=b,""})}return u=u.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function(v,B,_){return g(_),"M"}),u=u.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(v,B,_){return B&&(l.metadata.format=B),g(_),"M"}),u=u.replace(/M/g,""),u=l.converter._dispatch("metadata.after",u,f,l),u}),r.subParser("outdent",function(u,f,l){return u=l.converter._dispatch("outdent.before",u,f,l),u=u.replace(/^(\t|[ ]{1,4})/gm,"0"),u=u.replace(/0/g,""),u=l.converter._dispatch("outdent.after",u,f,l),u}),r.subParser("paragraphs",function(u,f,l){u=l.converter._dispatch("paragraphs.before",u,f,l),u=u.replace(/^\n+/g,""),u=u.replace(/\n+$/g,"");for(var g=u.split(/\n{2,}/g),v=[],B=g.length,_=0;_<B;_++){var b=g[_];b.search(/(K|G)(\d+)\1/g)>=0?v.push(b):b.search(/\S/)>=0&&(b=r.subParser("spanGamut")(b,f,l),b=b.replace(/^([ \t]*)/g,"<p>"),b+="</p>",v.push(b))}for(B=v.length,_=0;_<B;_++){for(var S="",I=v[_],O=!1;/(K|G)(\d+)\1/.test(I);){var E=RegExp.$1,m=RegExp.$2;E==="K"?S=l.gHtmlBlocks[m]:O?S=r.subParser("encodeCode")(l.ghCodeBlocks[m].text,f,l):S=l.ghCodeBlocks[m].codeblock,S=S.replace(/\$/g,"$$$$"),I=I.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,S),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(I)&&(O=!0)}v[_]=I}return u=v.join(`
`),u=u.replace(/^\n+/g,""),u=u.replace(/\n+$/g,""),l.converter._dispatch("paragraphs.after",u,f,l)}),r.subParser("runExtension",function(u,f,l,g){if(u.filter)f=u.filter(f,g.converter,l);else if(u.regex){var v=u.regex;v instanceof RegExp||(v=new RegExp(v,"g")),f=f.replace(v,u.replace)}return f}),r.subParser("spanGamut",function(u,f,l){return u=l.converter._dispatch("spanGamut.before",u,f,l),u=r.subParser("codeSpans")(u,f,l),u=r.subParser("escapeSpecialCharsWithinTagAttributes")(u,f,l),u=r.subParser("encodeBackslashEscapes")(u,f,l),u=r.subParser("images")(u,f,l),u=r.subParser("anchors")(u,f,l),u=r.subParser("autoLinks")(u,f,l),u=r.subParser("simplifiedAutoLinks")(u,f,l),u=r.subParser("emoji")(u,f,l),u=r.subParser("underline")(u,f,l),u=r.subParser("italicsAndBold")(u,f,l),u=r.subParser("strikethrough")(u,f,l),u=r.subParser("ellipsis")(u,f,l),u=r.subParser("hashHTMLSpans")(u,f,l),u=r.subParser("encodeAmpsAndAngles")(u,f,l),f.simpleLineBreaks?/\n\nK/.test(u)||(u=u.replace(/\n+/g,`<br />
`)):u=u.replace(/  +\n/g,`<br />
`),u=l.converter._dispatch("spanGamut.after",u,f,l),u}),r.subParser("strikethrough",function(u,f,l){function g(v){return f.simplifiedAutoLink&&(v=r.subParser("simplifiedAutoLinks")(v,f,l)),"<del>"+v+"</del>"}return f.strikethrough&&(u=l.converter._dispatch("strikethrough.before",u,f,l),u=u.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(v,B){return g(B)}),u=l.converter._dispatch("strikethrough.after",u,f,l)),u}),r.subParser("stripLinkDefinitions",function(u,f,l){var g=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,v=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;u+="0";var B=function(_,b,S,I,O,E,m){return b=b.toLowerCase(),u.toLowerCase().split(b).length-1<2?_:(S.match(/^data:.+?\/.+?;base64,/)?l.gUrls[b]=S.replace(/\s/g,""):l.gUrls[b]=r.subParser("encodeAmpsAndAngles")(S,f,l),E?E+m:(m&&(l.gTitles[b]=m.replace(/"|'/g,"&quot;")),f.parseImgDimensions&&I&&O&&(l.gDimensions[b]={width:I,height:O}),""))};return u=u.replace(v,B),u=u.replace(g,B),u=u.replace(/0/,""),u}),r.subParser("tables",function(u,f,l){if(!f.tables)return u;var g=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,v=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function B(O){return/^:[ \t]*--*$/.test(O)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(O)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(O)?' style="text-align:center;"':""}function _(O,E){var m="";return O=O.trim(),(f.tablesHeaderId||f.tableHeaderId)&&(m=' id="'+O.replace(/ /g,"_").toLowerCase()+'"'),O=r.subParser("spanGamut")(O,f,l),"<th"+m+E+">"+O+`</th>
`}function b(O,E){var m=r.subParser("spanGamut")(O,f,l);return"<td"+E+">"+m+`</td>
`}function S(O,E){for(var m=`<table>
<thead>
<tr>
`,C=O.length,N=0;N<C;++N)m+=O[N];for(m+=`</tr>
</thead>
<tbody>
`,N=0;N<E.length;++N){m+=`<tr>
`;for(var z=0;z<C;++z)m+=E[N][z];m+=`</tr>
`}return m+=`</tbody>
</table>
`,m}function I(O){var E,m=O.split(`
`);for(E=0;E<m.length;++E)/^ {0,3}\|/.test(m[E])&&(m[E]=m[E].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(m[E])&&(m[E]=m[E].replace(/\|[ \t]*$/,"")),m[E]=r.subParser("codeSpans")(m[E],f,l);var C=m[0].split("|").map(function(X){return X.trim()}),N=m[1].split("|").map(function(X){return X.trim()}),z=[],x=[],R=[],H=[];for(m.shift(),m.shift(),E=0;E<m.length;++E)m[E].trim()!==""&&z.push(m[E].split("|").map(function(X){return X.trim()}));if(C.length<N.length)return O;for(E=0;E<N.length;++E)R.push(B(N[E]));for(E=0;E<C.length;++E)r.helper.isUndefined(R[E])&&(R[E]=""),x.push(_(C[E],R[E]));for(E=0;E<z.length;++E){for(var F=[],K=0;K<x.length;++K)r.helper.isUndefined(z[E][K]),F.push(b(z[E][K],R[K]));H.push(F)}return S(x,H)}return u=l.converter._dispatch("tables.before",u,f,l),u=u.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),u=u.replace(g,I),u=u.replace(v,I),u=l.converter._dispatch("tables.after",u,f,l),u}),r.subParser("underline",function(u,f,l){return f.underline&&(u=l.converter._dispatch("underline.before",u,f,l),f.literalMidWordUnderscores?(u=u.replace(/\b___(\S[\s\S]*?)___\b/g,function(g,v){return"<u>"+v+"</u>"}),u=u.replace(/\b__(\S[\s\S]*?)__\b/g,function(g,v){return"<u>"+v+"</u>"})):(u=u.replace(/___(\S[\s\S]*?)___/g,function(g,v){return/\S$/.test(v)?"<u>"+v+"</u>":g}),u=u.replace(/__(\S[\s\S]*?)__/g,function(g,v){return/\S$/.test(v)?"<u>"+v+"</u>":g})),u=u.replace(/(_)/g,r.helper.escapeCharactersCallback),u=l.converter._dispatch("underline.after",u,f,l)),u}),r.subParser("unescapeSpecialChars",function(u,f,l){return u=l.converter._dispatch("unescapeSpecialChars.before",u,f,l),u=u.replace(/E(\d+)E/g,function(g,v){var B=parseInt(v);return String.fromCharCode(B)}),u=l.converter._dispatch("unescapeSpecialChars.after",u,f,l),u}),r.subParser("makeMarkdown.blockquote",function(u,f){var l="";if(u.hasChildNodes())for(var g=u.childNodes,v=g.length,B=0;B<v;++B){var _=r.subParser("makeMarkdown.node")(g[B],f);_!==""&&(l+=_)}return l=l.trim(),l="> "+l.split(`
`).join(`
> `),l}),r.subParser("makeMarkdown.codeBlock",function(u,f){var l=u.getAttribute("language"),g=u.getAttribute("precodenum");return"```"+l+`
`+f.preList[g]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(u){return"`"+u.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(u,f){var l="";if(u.hasChildNodes()){l+="*";for(var g=u.childNodes,v=g.length,B=0;B<v;++B)l+=r.subParser("makeMarkdown.node")(g[B],f);l+="*"}return l}),r.subParser("makeMarkdown.header",function(u,f,l){var g=new Array(l+1).join("#"),v="";if(u.hasChildNodes()){v=g+" ";for(var B=u.childNodes,_=B.length,b=0;b<_;++b)v+=r.subParser("makeMarkdown.node")(B[b],f)}return v}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(u){var f="";return u.hasAttribute("src")&&(f+="!["+u.getAttribute("alt")+"](",f+="<"+u.getAttribute("src")+">",u.hasAttribute("width")&&u.hasAttribute("height")&&(f+=" ="+u.getAttribute("width")+"x"+u.getAttribute("height")),u.hasAttribute("title")&&(f+=' "'+u.getAttribute("title")+'"'),f+=")"),f}),r.subParser("makeMarkdown.links",function(u,f){var l="";if(u.hasChildNodes()&&u.hasAttribute("href")){var g=u.childNodes,v=g.length;l="[";for(var B=0;B<v;++B)l+=r.subParser("makeMarkdown.node")(g[B],f);l+="](",l+="<"+u.getAttribute("href")+">",u.hasAttribute("title")&&(l+=' "'+u.getAttribute("title")+'"'),l+=")"}return l}),r.subParser("makeMarkdown.list",function(u,f,l){var g="";if(!u.hasChildNodes())return"";for(var v=u.childNodes,B=v.length,_=u.getAttribute("start")||1,b=0;b<B;++b)if(!(typeof v[b].tagName>"u"||v[b].tagName.toLowerCase()!=="li")){var S="";l==="ol"?S=_.toString()+". ":S="- ",g+=S+r.subParser("makeMarkdown.listItem")(v[b],f),++_}return g+=`
\x3C!-- -->
`,g.trim()}),r.subParser("makeMarkdown.listItem",function(u,f){for(var l="",g=u.childNodes,v=g.length,B=0;B<v;++B)l+=r.subParser("makeMarkdown.node")(g[B],f);return/\n$/.test(l)?l=l.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):l+=`
`,l}),r.subParser("makeMarkdown.node",function(u,f,l){l=l||!1;var g="";if(u.nodeType===3)return r.subParser("makeMarkdown.txt")(u,f);if(u.nodeType===8)return"\x3C!--"+u.data+`-->

`;if(u.nodeType!==1)return"";var v=u.tagName.toLowerCase();switch(v){case"h1":l||(g=r.subParser("makeMarkdown.header")(u,f,1)+`

`);break;case"h2":l||(g=r.subParser("makeMarkdown.header")(u,f,2)+`

`);break;case"h3":l||(g=r.subParser("makeMarkdown.header")(u,f,3)+`

`);break;case"h4":l||(g=r.subParser("makeMarkdown.header")(u,f,4)+`

`);break;case"h5":l||(g=r.subParser("makeMarkdown.header")(u,f,5)+`

`);break;case"h6":l||(g=r.subParser("makeMarkdown.header")(u,f,6)+`

`);break;case"p":l||(g=r.subParser("makeMarkdown.paragraph")(u,f)+`

`);break;case"blockquote":l||(g=r.subParser("makeMarkdown.blockquote")(u,f)+`

`);break;case"hr":l||(g=r.subParser("makeMarkdown.hr")(u,f)+`

`);break;case"ol":l||(g=r.subParser("makeMarkdown.list")(u,f,"ol")+`

`);break;case"ul":l||(g=r.subParser("makeMarkdown.list")(u,f,"ul")+`

`);break;case"precode":l||(g=r.subParser("makeMarkdown.codeBlock")(u,f)+`

`);break;case"pre":l||(g=r.subParser("makeMarkdown.pre")(u,f)+`

`);break;case"table":l||(g=r.subParser("makeMarkdown.table")(u,f)+`

`);break;case"code":g=r.subParser("makeMarkdown.codeSpan")(u,f);break;case"em":case"i":g=r.subParser("makeMarkdown.emphasis")(u,f);break;case"strong":case"b":g=r.subParser("makeMarkdown.strong")(u,f);break;case"del":g=r.subParser("makeMarkdown.strikethrough")(u,f);break;case"a":g=r.subParser("makeMarkdown.links")(u,f);break;case"img":g=r.subParser("makeMarkdown.image")(u,f);break;default:g=u.outerHTML+`

`}return g}),r.subParser("makeMarkdown.paragraph",function(u,f){var l="";if(u.hasChildNodes())for(var g=u.childNodes,v=g.length,B=0;B<v;++B)l+=r.subParser("makeMarkdown.node")(g[B],f);return l=l.trim(),l}),r.subParser("makeMarkdown.pre",function(u,f){var l=u.getAttribute("prenum");return"<pre>"+f.preList[l]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(u,f){var l="";if(u.hasChildNodes()){l+="~~";for(var g=u.childNodes,v=g.length,B=0;B<v;++B)l+=r.subParser("makeMarkdown.node")(g[B],f);l+="~~"}return l}),r.subParser("makeMarkdown.strong",function(u,f){var l="";if(u.hasChildNodes()){l+="**";for(var g=u.childNodes,v=g.length,B=0;B<v;++B)l+=r.subParser("makeMarkdown.node")(g[B],f);l+="**"}return l}),r.subParser("makeMarkdown.table",function(u,f){var l="",g=[[],[]],v=u.querySelectorAll("thead>tr>th"),B=u.querySelectorAll("tbody>tr"),_,b;for(_=0;_<v.length;++_){var S=r.subParser("makeMarkdown.tableCell")(v[_],f),I="---";if(v[_].hasAttribute("style")){var O=v[_].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(O){case"text-align:left;":I=":---";break;case"text-align:right;":I="---:";break;case"text-align:center;":I=":---:";break}}g[0][_]=S.trim(),g[1][_]=I}for(_=0;_<B.length;++_){var E=g.push([])-1,m=B[_].getElementsByTagName("td");for(b=0;b<v.length;++b){var C=" ";typeof m[b]<"u"&&(C=r.subParser("makeMarkdown.tableCell")(m[b],f)),g[E].push(C)}}var N=3;for(_=0;_<g.length;++_)for(b=0;b<g[_].length;++b){var z=g[_][b].length;z>N&&(N=z)}for(_=0;_<g.length;++_){for(b=0;b<g[_].length;++b)_===1?g[_][b].slice(-1)===":"?g[_][b]=r.helper.padEnd(g[_][b].slice(-1),N-1,"-")+":":g[_][b]=r.helper.padEnd(g[_][b],N,"-"):g[_][b]=r.helper.padEnd(g[_][b],N);l+="| "+g[_].join(" | ")+` |
`}return l.trim()}),r.subParser("makeMarkdown.tableCell",function(u,f){var l="";if(!u.hasChildNodes())return"";for(var g=u.childNodes,v=g.length,B=0;B<v;++B)l+=r.subParser("makeMarkdown.node")(g[B],f,!0);return l.trim()}),r.subParser("makeMarkdown.txt",function(u){var f=u.nodeValue;return f=f.replace(/ +/g," "),f=f.replace(/NBSP;/g," "),f=r.helper.unescapeHTMLEntities(f),f=f.replace(/([*_~|`])/g,"\\$1"),f=f.replace(/^(\s*)>/g,"\\$1>"),f=f.replace(/^#/gm,"\\#"),f=f.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),f=f.replace(/^( {0,3}\d+)\./gm,"$1\\."),f=f.replace(/^( {0,3})([+-])/gm,"$1\\$2"),f=f.replace(/]([\s]*)\(/g,"\\]$1\\("),f=f.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),f});var P=this;e.exports?e.exports=r:P.showdown=r}).call(Vf)})(Bd);var ug=Bd.exports;const ag=Fc(ug),Hn=Symbol("verified"),cg=e=>e instanceof Object;function dg(e){if(!cg(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}function Pa(e){for(let t of e.tags)if(t[0]==="e"&&(t[3]==="root"||t[3]==="reply"))return!1;return!0}function bi(e){var r,i,s;let t,n;return e.kind==30023?(t=((r=e==null?void 0:e.tags.find(([o])=>o==="title"))==null?void 0:r[1])||"No title",n=((i=e==null?void 0:e.tags.find(([o])=>o==="summary"))==null?void 0:i[1])||void 0):(t="Note of "+new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"long",year:"numeric"}).format(new Date(e.created_at*1e3)),n=e.content.slice(0,200)+"..."),{id:e.id,kind:e.kind,created_at:e.created_at,title:t,image:((s=e==null?void 0:e.tags.find(([o])=>o==="image"))==null?void 0:s[1])||void 0,summary:n,content:e.content}}async function fs(e){let t,n=[];try{let r=Pd(e);if(r.type==="npub")t=r.data;else if(r.type==="nprofile")t=r.data.pubkey,n=r.data.relays||[];else return console.error("author should be an npub"),null}catch(r){if(e.length===64)t=e;else return console.error("Failed to decode npub:",r),null}return eg({pubkey:t,relays:n})}async function Ld(e){const t=/nostr:(npub1\w+|nprofile1\w+)/g,r=(e.match(t)||[]).map(async o=>{try{const a=await fs(o.slice(6));return a?{match:o,replacement:`[${a.shortName}](${o})`}:{match:o,replacement:o}}catch(a){return console.error("Failed to fetch profile:",a),{match:o,replacement:o}}}),i=await Promise.all(r);let s=e;return i.forEach(({match:o,replacement:a})=>{s=s.replace(o,a)}),s}function Id(e){if(e==null)return;const t=/(^|\s|\n|\()(nevent1\w+|note1\w+|npub1\w+|nprofile1\w+)(?=\s|\n|\)|$)/gm;e=e.replace(t,(i,s,o)=>(o.slice(0,24),`${s}nostr:${o}`));const n=/(^|\s|\n)nostr:(nevent1\w+|note1\w+|npub1\w+|nprofile1\w+)(?=\s|\n|$)/gm;e=e.replace(n,(i,s,o)=>{const a=o.slice(0,24);return`${s}[${a}...](nostr:${o})`});const r=/\(nostr:([a-zA-Z0-9]+)\)/g;return e=e.replace(r,(i,s)=>`(https://njump.me/${s})`),e}function lg(e){if(e==null)return;const t=/\[([^\]]+)\]\(([^)]+)\)/g;return e.replace(t,(r,i)=>i)}function fg(e){if(e==null)return;const t=/\s*(https?:\/\/\S+\.(?:png|jpg|jpeg|gif|bmp))\s*/gi;return e.replace(t,(r,i)=>` ![Image](${i}) `)}function hg(e){if(e==null)return;const t=/\s*(https?:\/\/\S+\.(?:mp4|webm|ogg|mov))(\s*|$)/gi;return e.replace(t,(r,i)=>` <video controls><source src="${i}" type="video/mp4"></video> `)}function pg(e){const t=/\s*(https?:\/\/\S+\.(?:mp3))(\s*|$)/gi;return e.replace(t,(r,i)=>` <audio controls src="${i}"></audio> `)}function gg(e){return e==null?void 0:([{regex:/<<|/g,replacement:"&laquo;"},{regex:/>>|/g,replacement:"&raquo;"},{regex:/\.\.\./g,replacement:"&hellip;"},{regex:/---/g,replacement:"&mdash;"},{regex:/--/g,replacement:"&mdash;"}].forEach(({regex:n,replacement:r})=>{e=e.replace(n,r)}),e)}async function Cd(e){let t=e.content;return t=await Ld(t),t=Id(t),t=fg(t),t=hg(t),t=pg(t),t=gg(t),e.kind==1&&(t=t.replace(/\n/g,`
<br/>`)),t=t.replace("# "+e.title,""),t=new ag.Converter({simplifiedAutoLink:!0,tables:!0,strikethrough:!0}).makeHtml(t),t}function sn(e,t=!1){const n=new Date(e*1e3),r={day:"2-digit",month:"long",year:"numeric"},i=new Intl.DateTimeFormat("en-US",r).formatToParts(n);let s,o,a;i.forEach(d=>{d.type==="day"&&(s=d.value),d.type==="month"&&(o=d.value),d.type==="year"&&(a=d.value)});let c=`${s} ${o} ${a}`;if(t){const d={hour:"2-digit",minute:"2-digit",hourCycle:"h23"},h=new Intl.DateTimeFormat("en-US",d).format(n);c+=` - ${h}`}return c}function cr(...e){return e.filter(Boolean).join(" ")}function mg(e,t){if(e){const n=Object.keys(e);for(let r=0;r<n.length;r++){const i=n[r];if(i!=="__proto__"&&t(e[i],i)===!1)break}}return e}function Ba(e){var n;const t=(n=e.Components.Elements)==null?void 0:n.list.children;return t&&Array.prototype.slice.call(t)||[]}function Ii(e){return e!==null&&typeof e=="object"}function zo(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&!e.some((n,r)=>!zo(n,t[r]));if(Ii(e)&&Ii(t)){const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&!n.some(i=>!Object.prototype.hasOwnProperty.call(t,i)||!zo(e[i],t[i]))}return e===t}function wg(e,t){return e.length===t.length&&!e.some((n,r)=>n!==t[r])}function Ro(e,t){const n=e;return mg(t,(r,i)=>{Array.isArray(r)?n[i]=r.slice():Ii(r)?n[i]=Ro(Ii(n[i])?n[i]:{},r):n[i]=r}),n}function bg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yg(e,t,n){return t&&bg(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}/*!
 * Splide.js
 * Version  : 4.1.4
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var La="(prefers-reduced-motion: reduce)",Zn=1,vg=2,dr=3,_r=4,Qr=5,yi=6,Ci=7,_g={CREATED:Zn,MOUNTED:vg,IDLE:dr,MOVING:_r,SCROLLING:Qr,DRAGGING:yi,DESTROYED:Ci};function Ct(e){e.length=0}function mn(e,t,n){return Array.prototype.slice.call(e,t,n)}function ge(e){return e.bind.apply(e,[null].concat(mn(arguments,1)))}var Od=setTimeout,xo=function(){};function Ia(e){return requestAnimationFrame(e)}function hs(e,t){return typeof t===e}function Ur(e){return!Nu(e)&&hs("object",e)}var Ou=Array.isArray,Nd=ge(hs,"function"),on=ge(hs,"string"),ei=ge(hs,"undefined");function Nu(e){return e===null}function zd(e){try{return e instanceof(e.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function ti(e){return Ou(e)?e:[e]}function et(e,t){ti(e).forEach(t)}function zu(e,t){return e.indexOf(t)>-1}function vi(e,t){return e.push.apply(e,ti(t)),e}function Pt(e,t,n){e&&et(t,function(r){r&&e.classList[n?"add":"remove"](r)})}function wt(e,t){Pt(e,on(t)?t.split(" "):t,!0)}function ni(e,t){et(t,e.appendChild.bind(e))}function Ru(e,t){et(e,function(n){var r=(t||n).parentNode;r&&r.insertBefore(n,t)})}function Dr(e,t){return zd(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function Rd(e,t){var n=e?mn(e.children):[];return t?n.filter(function(r){return Dr(r,t)}):n}function ri(e,t){return t?Rd(e,t)[0]:e.firstElementChild}var Vr=Object.keys;function Ln(e,t,n){return e&&(n?Vr(e).reverse():Vr(e)).forEach(function(r){r!=="__proto__"&&t(e[r],r)}),e}function Fr(e){return mn(arguments,1).forEach(function(t){Ln(t,function(n,r){e[r]=t[r]})}),e}function Qt(e){return mn(arguments,1).forEach(function(t){Ln(t,function(n,r){Ou(n)?e[r]=n.slice():Ur(n)?e[r]=Qt({},Ur(e[r])?e[r]:{},n):e[r]=n})}),e}function Ca(e,t){et(t||Vr(e),function(n){delete e[n]})}function bt(e,t){et(e,function(n){et(t,function(r){n&&n.removeAttribute(r)})})}function se(e,t,n){Ur(t)?Ln(t,function(r,i){se(e,i,r)}):et(e,function(r){Nu(n)||n===""?bt(r,t):r.setAttribute(t,String(n))})}function Xn(e,t,n){var r=document.createElement(e);return t&&(on(t)?wt(r,t):se(r,t)),n&&ni(n,r),r}function tt(e,t,n){if(ei(n))return getComputedStyle(e)[t];Nu(n)||(e.style[t]=""+n)}function qr(e,t){tt(e,"display",t)}function xd(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function rt(e,t){return e.getAttribute(t)}function Oa(e,t){return e&&e.classList.contains(t)}function Ze(e){return e.getBoundingClientRect()}function Cn(e){et(e,function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})}function Md(e){return ri(new DOMParser().parseFromString(e,"text/html").body)}function $t(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function jd(e,t){return e&&e.querySelector(t)}function xu(e,t){return t?mn(e.querySelectorAll(t)):[]}function Bt(e,t){Pt(e,t,!1)}function Mo(e){return e.timeStamp}function vn(e){return on(e)?e:e?e+"px":""}var ii="splide",Mu="data-"+ii;function Nr(e,t){if(!e)throw new Error("["+ii+"] "+(t||""))}var un=Math.min,Oi=Math.max,Ni=Math.floor,Wr=Math.ceil,He=Math.abs;function Hd(e,t,n){return He(e-t)<n}function _i(e,t,n,r){var i=un(t,n),s=Oi(t,n);return r?i<e&&e<s:i<=e&&e<=s}function Wn(e,t,n){var r=un(t,n),i=Oi(t,n);return un(Oi(r,e),i)}function jo(e){return+(e>0)-+(e<0)}function Ho(e,t){return et(t,function(n){e=e.replace("%s",""+n)}),e}function ju(e){return e<10?"0"+e:""+e}var Na={};function Eg(e){return""+e+ju(Na[e]=(Na[e]||0)+1)}function Ud(){var e=[];function t(o,a,c,d){i(o,a,function(p,h,y){var $="addEventListener"in p,k=$?p.removeEventListener.bind(p,h,c,d):p.removeListener.bind(p,c);$?p.addEventListener(h,c,d):p.addListener(c),e.push([p,h,y,c,k])})}function n(o,a,c){i(o,a,function(d,p,h){e=e.filter(function(y){return y[0]===d&&y[1]===p&&y[2]===h&&(!c||y[3]===c)?(y[4](),!1):!0})})}function r(o,a,c){var d,p=!0;return typeof CustomEvent=="function"?d=new CustomEvent(a,{bubbles:p,detail:c}):(d=document.createEvent("CustomEvent"),d.initCustomEvent(a,p,!1,c)),o.dispatchEvent(d),d}function i(o,a,c){et(o,function(d){d&&et(a,function(p){p.split(" ").forEach(function(h){var y=h.split(".");c(d,y[0],y[1])})})})}function s(){e.forEach(function(o){o[4]()}),Ct(e)}return{bind:t,unbind:n,dispatch:r,destroy:s}}var wn="mounted",za="ready",yt="move",On="moved",zi="click",Uo="active",Do="inactive",Vo="visible",Fo="hidden",Ee="refresh",Ne="updated",lr="resize",ps="resized",Dd="drag",Vd="dragging",Fd="dragged",gs="scroll",Mn="scrolled",kg="overflow",Hu="destroy",qo="arrows:mounted",Wo="arrows:updated",Ko="pagination:mounted",Go="pagination:updated",Ri="navigation:mounted",Uu="autoplay:play",Zo="autoplay:playing",Du="autoplay:pause",xi="lazyload:loaded",qd="sk",Wd="sh",Mi="ei";function be(e){var t=e?e.event.bus:document.createDocumentFragment(),n=Ud();function r(s,o){n.bind(t,ti(s).join(" "),function(a){o.apply(o,Ou(a.detail)?a.detail:[])})}function i(s){n.dispatch(t,s,mn(arguments,1))}return e&&e.event.on(Hu,n.destroy),Fr(n,{bus:t,on:r,off:ge(n.unbind,t),emit:i})}function ms(e,t,n,r){var i=Date.now,s,o=0,a,c=!0,d=0;function p(){if(!c){if(o=e?un((i()-s)/e,1):1,n&&n(o),o>=1&&(t(),s=i(),r&&++d>=r))return y();a=Ia(p)}}function h(T){T||k(),s=i()-(T?o*e:0),c=!1,a=Ia(p)}function y(){c=!0}function $(){s=i(),o=0,n&&n(o)}function k(){a&&cancelAnimationFrame(a),o=0,a=0,c=!0}function w(T){e=T}function A(){return c}return{start:h,rewind:$,pause:y,cancel:k,set:w,isPaused:A}}function Ag(e){var t=e;function n(i){t=i}function r(i){return zu(ti(i),t)}return{set:n,is:r}}function $g(e,t){var n=ms(0,e,null,1);return function(){n.isPaused()&&n.start()}}function Sg(e,t,n){var r=e.state,i=n.breakpoints||{},s=n.reducedMotion||{},o=Ud(),a=[];function c(){var k=n.mediaQuery==="min";Vr(i).sort(function(w,A){return k?+w-+A:+A-+w}).forEach(function(w){p(i[w],"("+(k?"min":"max")+"-width:"+w+"px)")}),p(s,La),h()}function d(k){k&&o.destroy()}function p(k,w){var A=matchMedia(w);o.bind(A,"change",h),a.push([k,A])}function h(){var k=r.is(Ci),w=n.direction,A=a.reduce(function(T,L){return Qt(T,L[1].matches?L[0]:{})},{});Ca(n),$(A),n.destroy?e.destroy(n.destroy==="completely"):k?(d(!0),e.mount()):w!==n.direction&&e.refresh()}function y(k){matchMedia(La).matches&&(k?Qt(n,s):Ca(n,Vr(s)))}function $(k,w,A){Qt(n,k),w&&Qt(Object.getPrototypeOf(n),k),(A||!r.is(Zn))&&e.emit(Ne,n)}return{setup:c,destroy:d,reduce:y,set:$}}var ws="Arrow",bs=ws+"Left",ys=ws+"Right",Kd=ws+"Up",Gd=ws+"Down",Ra="rtl",vs="ttb",Ys={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[Kd,ys],ArrowRight:[Gd,bs]};function Tg(e,t,n){function r(s,o,a){a=a||n.direction;var c=a===Ra&&!o?1:a===vs?0:-1;return Ys[s]&&Ys[s][c]||s.replace(/width|left|right/i,function(d,p){var h=Ys[d.toLowerCase()][c]||d;return p>0?h.charAt(0).toUpperCase()+h.slice(1):h})}function i(s){return s*(n.direction===Ra?1:-1)}return{resolve:r,orient:i}}var Lt="role",Jn="tabindex",Pg="disabled",ut="aria-",si=ut+"controls",Zd=ut+"current",xa=ut+"selected",Qe=ut+"label",Vu=ut+"labelledby",Yd=ut+"hidden",Fu=ut+"orientation",Kr=ut+"roledescription",Ma=ut+"live",ja=ut+"busy",Ha=ut+"atomic",qu=[Lt,Jn,Pg,si,Zd,Qe,Vu,Yd,Fu,Kr],kt=ii+"__",bn="is-",Xs=ii,Ua=kt+"track",Bg=kt+"list",_s=kt+"slide",Xd=_s+"--clone",Lg=_s+"__container",Wu=kt+"arrows",Es=kt+"arrow",Jd=Es+"--prev",Qd=Es+"--next",ks=kt+"pagination",el=ks+"__page",Ig=kt+"progress",Cg=Ig+"__bar",Og=kt+"toggle",Ng=kt+"spinner",zg=kt+"sr",Rg=bn+"initialized",Nn=bn+"active",tl=bn+"prev",nl=bn+"next",Yo=bn+"visible",Xo=bn+"loading",rl=bn+"focus-in",il=bn+"overflow",xg=[Nn,Yo,tl,nl,Xo,rl,il],Mg={slide:_s,clone:Xd,arrows:Wu,arrow:Es,prev:Jd,next:Qd,pagination:ks,page:el,spinner:Ng};function jg(e,t){if(Nd(e.closest))return e.closest(t);for(var n=e;n&&n.nodeType===1&&!Dr(n,t);)n=n.parentElement;return n}var Hg=5,Da=200,sl="touchstart mousedown",Js="touchmove mousemove",Qs="touchend touchcancel mouseup click";function Ug(e,t,n){var r=be(e),i=r.on,s=r.bind,o=e.root,a=n.i18n,c={},d=[],p=[],h=[],y,$,k;function w(){P(),u(),L()}function A(){i(Ee,T),i(Ee,w),i(Ne,L),s(document,sl+" keydown",function(g){k=g.type==="keydown"},{capture:!0}),s(o,"focusin",function(){Pt(o,rl,!!k)})}function T(g){var v=qu.concat("style");Ct(d),Bt(o,p),Bt(y,h),bt([y,$],v),bt(o,g?v:["style",Kr])}function L(){Bt(o,p),Bt(y,h),p=l(Xs),h=l(Ua),wt(o,p),wt(y,h),se(o,Qe,n.label),se(o,Vu,n.labelledby)}function P(){y=f("."+Ua),$=ri(y,"."+Bg),Nr(y&&$,"A track/list element is missing."),vi(d,Rd($,"."+_s+":not(."+Xd+")")),Ln({arrows:Wu,pagination:ks,prev:Jd,next:Qd,bar:Cg,toggle:Og},function(g,v){c[v]=f("."+g)}),Fr(c,{root:o,track:y,list:$,slides:d})}function u(){var g=o.id||Eg(ii),v=n.role;o.id=g,y.id=y.id||g+"-track",$.id=$.id||g+"-list",!rt(o,Lt)&&o.tagName!=="SECTION"&&v&&se(o,Lt,v),se(o,Kr,a.carousel),se($,Lt,"presentation")}function f(g){var v=jd(o,g);return v&&jg(v,"."+Xs)===o?v:void 0}function l(g){return[g+"--"+n.type,g+"--"+n.direction,n.drag&&g+"--draggable",n.isNavigation&&g+"--nav",g===Xs&&Nn]}return Fr(c,{setup:w,mount:A,destroy:T})}var fr="slide",Er="loop",oi="fade";function Dg(e,t,n,r){var i=be(e),s=i.on,o=i.emit,a=i.bind,c=e.Components,d=e.root,p=e.options,h=p.isNavigation,y=p.updateOnMove,$=p.i18n,k=p.pagination,w=p.slideFocus,A=c.Direction.resolve,T=rt(r,"style"),L=rt(r,Qe),P=n>-1,u=ri(r,"."+Lg),f;function l(){P||(r.id=d.id+"-slide"+ju(t+1),se(r,Lt,k?"tabpanel":"group"),se(r,Kr,$.slide),se(r,Qe,L||Ho($.slideLabel,[t+1,e.length]))),g()}function g(){a(r,"click",ge(o,zi,N)),a(r,"keydown",ge(o,qd,N)),s([On,Wd,Mn],b),s(Ri,B),y&&s(yt,_)}function v(){f=!0,i.destroy(),Bt(r,xg),bt(r,qu),se(r,"style",T),se(r,Qe,L||"")}function B(){var z=e.splides.map(function(x){var R=x.splide.Components.Slides.getAt(t);return R?R.slide.id:""}).join(" ");se(r,Qe,Ho($.slideX,(P?n:t)+1)),se(r,si,z),se(r,Lt,w?"button":""),w&&bt(r,Kr)}function _(){f||b()}function b(){if(!f){var z=e.index;S(),I(),Pt(r,tl,t===z-1),Pt(r,nl,t===z+1)}}function S(){var z=E();z!==Oa(r,Nn)&&(Pt(r,Nn,z),se(r,Zd,h&&z||""),o(z?Uo:Do,N))}function I(){var z=m(),x=!z&&(!E()||P);if(e.state.is([_r,Qr])||se(r,Yd,x||""),se(xu(r,p.focusableNodes||""),Jn,x?-1:""),w&&se(r,Jn,x?-1:0),z!==Oa(r,Yo)&&(Pt(r,Yo,z),o(z?Vo:Fo,N)),!z&&document.activeElement===r){var R=c.Slides.getAt(e.index);R&&xd(R.slide)}}function O(z,x,R){tt(R&&u||r,z,x)}function E(){var z=e.index;return z===t||p.cloneStatus&&z===n}function m(){if(e.is(oi))return E();var z=Ze(c.Elements.track),x=Ze(r),R=A("left",!0),H=A("right",!0);return Ni(z[R])<=Wr(x[R])&&Ni(x[H])<=Wr(z[H])}function C(z,x){var R=He(z-t);return!P&&(p.rewind||e.is(Er))&&(R=un(R,e.length-R)),R<=x}var N={index:t,slideIndex:n,slide:r,container:u,isClone:P,mount:l,destroy:v,update:b,style:O,isWithin:C};return N}function Vg(e,t,n){var r=be(e),i=r.on,s=r.emit,o=r.bind,a=t.Elements,c=a.slides,d=a.list,p=[];function h(){y(),i(Ee,$),i(Ee,y)}function y(){c.forEach(function(b,S){w(b,S,-1)})}function $(){f(function(b){b.destroy()}),Ct(p)}function k(){f(function(b){b.update()})}function w(b,S,I){var O=Dg(e,S,I,b);O.mount(),p.push(O),p.sort(function(E,m){return E.index-m.index})}function A(b){return b?l(function(S){return!S.isClone}):p}function T(b){var S=t.Controller,I=S.toIndex(b),O=S.hasFocus()?1:n.perPage;return l(function(E){return _i(E.index,I,I+O-1)})}function L(b){return l(b)[0]}function P(b,S){et(b,function(I){if(on(I)&&(I=Md(I)),zd(I)){var O=c[S];O?Ru(I,O):ni(d,I),wt(I,n.classes.slide),v(I,ge(s,lr))}}),s(Ee)}function u(b){Cn(l(b).map(function(S){return S.slide})),s(Ee)}function f(b,S){A(S).forEach(b)}function l(b){return p.filter(Nd(b)?b:function(S){return on(b)?Dr(S.slide,b):zu(ti(b),S.index)})}function g(b,S,I){f(function(O){O.style(b,S,I)})}function v(b,S){var I=xu(b,"img"),O=I.length;O?I.forEach(function(E){o(E,"load error",function(){--O||S()})}):S()}function B(b){return b?c.length:p.length}function _(){return p.length>n.perPage}return{mount:h,destroy:$,update:k,register:w,get:A,getIn:T,getAt:L,add:P,remove:u,forEach:f,filter:l,style:g,getLength:B,isEnough:_}}function Fg(e,t,n){var r=be(e),i=r.on,s=r.bind,o=r.emit,a=t.Slides,c=t.Direction.resolve,d=t.Elements,p=d.root,h=d.track,y=d.list,$=a.getAt,k=a.style,w,A,T;function L(){P(),s(window,"resize load",$g(ge(o,lr))),i([Ne,Ee],P),i(lr,u)}function P(){w=n.direction===vs,tt(p,"maxWidth",vn(n.width)),tt(h,c("paddingLeft"),f(!1)),tt(h,c("paddingRight"),f(!0)),u(!0)}function u(N){var z=Ze(p);(N||A.width!==z.width||A.height!==z.height)&&(tt(h,"height",l()),k(c("marginRight"),vn(n.gap)),k("width",v()),k("height",B(),!0),A=z,o(ps),T!==(T=C())&&(Pt(p,il,T),o(kg,T)))}function f(N){var z=n.padding,x=c(N?"right":"left");return z&&vn(z[x]||(Ur(z)?0:z))||"0px"}function l(){var N="";return w&&(N=g(),Nr(N,"height or heightRatio is missing."),N="calc("+N+" - "+f(!1)+" - "+f(!0)+")"),N}function g(){return vn(n.height||Ze(y).width*n.heightRatio)}function v(){return n.autoWidth?null:vn(n.fixedWidth)||(w?"":_())}function B(){return vn(n.fixedHeight)||(w?n.autoHeight?null:_():g())}function _(){var N=vn(n.gap);return"calc((100%"+(N&&" + "+N)+")/"+(n.perPage||1)+(N&&" - "+N)+")"}function b(){return Ze(y)[c("width")]}function S(N,z){var x=$(N||0);return x?Ze(x.slide)[c("width")]+(z?0:E()):0}function I(N,z){var x=$(N);if(x){var R=Ze(x.slide)[c("right")],H=Ze(y)[c("left")];return He(R-H)+(z?0:E())}return 0}function O(N){return I(e.length-1)-I(0)+S(0,N)}function E(){var N=$(0);return N&&parseFloat(tt(N.slide,c("marginRight")))||0}function m(N){return parseFloat(tt(h,c("padding"+(N?"Right":"Left"))))||0}function C(){return e.is(oi)||O(!0)>b()}return{mount:L,resize:u,listSize:b,slideSize:S,sliderSize:O,totalSize:I,getPadding:m,isOverflow:C}}var qg=2;function Wg(e,t,n){var r=be(e),i=r.on,s=t.Elements,o=t.Slides,a=t.Direction.resolve,c=[],d;function p(){i(Ee,h),i([Ne,lr],$),(d=A())&&(k(d),t.Layout.resize(!0))}function h(){y(),p()}function y(){Cn(c),Ct(c),r.destroy()}function $(){var T=A();d!==T&&(d<T||!T)&&r.emit(Ee)}function k(T){var L=o.get().slice(),P=L.length;if(P){for(;L.length<T;)vi(L,L);vi(L.slice(-T),L.slice(0,T)).forEach(function(u,f){var l=f<T,g=w(u.slide,f);l?Ru(g,L[0].slide):ni(s.list,g),vi(c,g),o.register(g,f-T+(l?0:P),u.index)})}}function w(T,L){var P=T.cloneNode(!0);return wt(P,n.classes.clone),P.id=e.root.id+"-clone"+ju(L+1),P}function A(){var T=n.clones;if(!e.is(Er))T=0;else if(ei(T)){var L=n[a("fixedWidth")]&&t.Layout.slideSize(0),P=L&&Wr(Ze(s.track)[a("width")]/L);T=P||n[a("autoWidth")]&&e.length||n.perPage*qg}return T}return{mount:p,destroy:y}}function Kg(e,t,n){var r=be(e),i=r.on,s=r.emit,o=e.state.set,a=t.Layout,c=a.slideSize,d=a.getPadding,p=a.totalSize,h=a.listSize,y=a.sliderSize,$=t.Direction,k=$.resolve,w=$.orient,A=t.Elements,T=A.list,L=A.track,P;function u(){P=t.Transition,i([wn,ps,Ne,Ee],f)}function f(){t.Controller.isBusy()||(t.Scroll.cancel(),g(e.index),t.Slides.update())}function l(x,R,H,F){x!==R&&N(x>H)&&(b(),v(_(O(),x>H),!0)),o(_r),s(yt,R,H,x),P.start(R,function(){o(dr),s(On,R,H,x),F&&F()})}function g(x){v(I(x,!0))}function v(x,R){if(!e.is(oi)){var H=R?x:B(x);tt(T,"transform","translate"+k("X")+"("+H+"px)"),x!==H&&s(Wd)}}function B(x){if(e.is(Er)){var R=S(x),H=R>t.Controller.getEnd(),F=R<0;(F||H)&&(x=_(x,H))}return x}function _(x,R){var H=x-C(R),F=y();return x-=w(F*(Wr(He(H)/F)||1))*(R?1:-1),x}function b(){v(O(),!0),P.cancel()}function S(x){for(var R=t.Slides.get(),H=0,F=1/0,K=0;K<R.length;K++){var X=R[K].index,M=He(I(X,!0)-x);if(M<=F)F=M,H=X;else break}return H}function I(x,R){var H=w(p(x-1)-m(x));return R?E(H):H}function O(){var x=k("left");return Ze(T)[x]-Ze(L)[x]+w(d(!1))}function E(x){return n.trimSpace&&e.is(fr)&&(x=Wn(x,0,w(y(!0)-h()))),x}function m(x){var R=n.focus;return R==="center"?(h()-c(x,!0))/2:+R*c(x)||0}function C(x){return I(x?t.Controller.getEnd():0,!!n.trimSpace)}function N(x){var R=w(_(O(),x));return x?R>=0:R<=T[k("scrollWidth")]-Ze(L)[k("width")]}function z(x,R){R=ei(R)?O():R;var H=x!==!0&&w(R)<w(C(!1)),F=x!==!1&&w(R)>w(C(!0));return H||F}return{mount:u,move:l,jump:g,translate:v,shift:_,cancel:b,toIndex:S,toPosition:I,getPosition:O,getLimit:C,exceededLimit:z,reposition:f}}function Gg(e,t,n){var r=be(e),i=r.on,s=r.emit,o=t.Move,a=o.getPosition,c=o.getLimit,d=o.toPosition,p=t.Slides,h=p.isEnough,y=p.getLength,$=n.omitEnd,k=e.is(Er),w=e.is(fr),A=ge(O,!1),T=ge(O,!0),L=n.start||0,P,u=L,f,l,g;function v(){B(),i([Ne,Ee,Mi],B),i(ps,_)}function B(){f=y(!0),l=n.perMove,g=n.perPage,P=N();var M=Wn(L,0,$?P:f-1);M!==L&&(L=M,o.reposition())}function _(){P!==N()&&s(Mi)}function b(M,q,ne){if(!X()){var re=I(M),ue=C(re);ue>-1&&(q||ue!==L)&&(H(ue),o.move(re,ue,u,ne))}}function S(M,q,ne,re){t.Scroll.scroll(M,q,ne,function(){var ue=C(o.toIndex(a()));H($?un(ue,P):ue),re&&re()})}function I(M){var q=L;if(on(M)){var ne=M.match(/([+\-<>])(\d+)?/)||[],re=ne[1],ue=ne[2];re==="+"||re==="-"?q=E(L+ +(""+re+(+ue||1)),L):re===">"?q=ue?z(+ue):A(!0):re==="<"&&(q=T(!0))}else q=k?M:Wn(M,0,P);return q}function O(M,q){var ne=l||(K()?1:g),re=E(L+ne*(M?-1:1),L,!(l||K()));return re===-1&&w&&!Hd(a(),c(!M),1)?M?0:P:q?re:C(re)}function E(M,q,ne){if(h()||K()){var re=m(M);re!==M&&(q=M,M=re,ne=!1),M<0||M>P?!l&&(_i(0,M,q,!0)||_i(P,q,M,!0))?M=z(x(M)):k?M=ne?M<0?-(f%g||g):f:M:n.rewind?M=M<0?P:0:M=-1:ne&&M!==q&&(M=z(x(q)+(M<q?-1:1)))}else M=-1;return M}function m(M){if(w&&n.trimSpace==="move"&&M!==L)for(var q=a();q===d(M,!0)&&_i(M,0,e.length-1,!n.rewind);)M<L?--M:++M;return M}function C(M){return k?(M+f)%f||0:M}function N(){for(var M=f-(K()||k&&l?1:g);$&&M-- >0;)if(d(f-1,!0)!==d(M,!0)){M++;break}return Wn(M,0,f-1)}function z(M){return Wn(K()?M:g*M,0,P)}function x(M){return K()?un(M,P):Ni((M>=P?f-1:M)/g)}function R(M){var q=o.toIndex(M);return w?Wn(q,0,P):q}function H(M){M!==L&&(u=L,L=M)}function F(M){return M?u:L}function K(){return!ei(n.focus)||n.isNavigation}function X(){return e.state.is([_r,Qr])&&!!n.waitForTransition}return{mount:v,go:b,scroll:S,getNext:A,getPrev:T,getAdjacent:O,getEnd:N,setIndex:H,getIndex:F,toIndex:z,toPage:x,toDest:R,hasFocus:K,isBusy:X}}var Zg="http://www.w3.org/2000/svg",Yg="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",fi=40;function Xg(e,t,n){var r=be(e),i=r.on,s=r.bind,o=r.emit,a=n.classes,c=n.i18n,d=t.Elements,p=t.Controller,h=d.arrows,y=d.track,$=h,k=d.prev,w=d.next,A,T,L={};function P(){f(),i(Ne,u)}function u(){l(),P()}function f(){var S=n.arrows;S&&!(k&&w)&&B(),k&&w&&(Fr(L,{prev:k,next:w}),qr($,S?"":"none"),wt($,T=Wu+"--"+n.direction),S&&(g(),b(),se([k,w],si,y.id),o(qo,k,w)))}function l(){r.destroy(),Bt($,T),A?(Cn(h?[k,w]:$),k=w=null):bt([k,w],qu)}function g(){i([wn,On,Ee,Mn,Mi],b),s(w,"click",ge(v,">")),s(k,"click",ge(v,"<"))}function v(S){p.go(S,!0)}function B(){$=h||Xn("div",a.arrows),k=_(!0),w=_(!1),A=!0,ni($,[k,w]),!h&&Ru($,y)}function _(S){var I='<button class="'+a.arrow+" "+(S?a.prev:a.next)+'" type="button"><svg xmlns="'+Zg+'" viewBox="0 0 '+fi+" "+fi+'" width="'+fi+'" height="'+fi+'" focusable="false"><path d="'+(n.arrowPath||Yg)+'" />';return Md(I)}function b(){if(k&&w){var S=e.index,I=p.getPrev(),O=p.getNext(),E=I>-1&&S<I?c.last:c.prev,m=O>-1&&S>O?c.first:c.next;k.disabled=I<0,w.disabled=O<0,se(k,Qe,E),se(w,Qe,m),o(Wo,k,w,I,O)}}return{arrows:L,mount:P,destroy:l,update:b}}var Jg=Mu+"-interval";function Qg(e,t,n){var r=be(e),i=r.on,s=r.bind,o=r.emit,a=ms(n.interval,e.go.bind(e,">"),g),c=a.isPaused,d=t.Elements,p=t.Elements,h=p.root,y=p.toggle,$=n.autoplay,k,w,A=$==="pause";function T(){$&&(L(),y&&se(y,si,d.track.id),A||P(),l())}function L(){n.pauseOnHover&&s(h,"mouseenter mouseleave",function(B){k=B.type==="mouseenter",f()}),n.pauseOnFocus&&s(h,"focusin focusout",function(B){w=B.type==="focusin",f()}),y&&s(y,"click",function(){A?P():u(!0)}),i([yt,gs,Ee],a.rewind),i(yt,v)}function P(){c()&&t.Slides.isEnough()&&(a.start(!n.resetProgress),w=k=A=!1,l(),o(Uu))}function u(B){B===void 0&&(B=!0),A=!!B,l(),c()||(a.pause(),o(Du))}function f(){A||(k||w?u(!1):P())}function l(){y&&(Pt(y,Nn,!A),se(y,Qe,n.i18n[A?"play":"pause"]))}function g(B){var _=d.bar;_&&tt(_,"width",B*100+"%"),o(Zo,B)}function v(B){var _=t.Slides.getAt(B);a.set(_&&+rt(_.slide,Jg)||n.interval)}return{mount:T,destroy:a.cancel,play:P,pause:u,isPaused:c}}function e0(e,t,n){var r=be(e),i=r.on;function s(){n.cover&&(i(xi,ge(a,!0)),i([wn,Ne,Ee],ge(o,!0)))}function o(c){t.Slides.forEach(function(d){var p=ri(d.container||d.slide,"img");p&&p.src&&a(c,p,d)})}function a(c,d,p){p.style("background",c?'center/cover no-repeat url("'+d.src+'")':"",!0),qr(d,c?"none":"")}return{mount:s,destroy:ge(o,!1)}}var t0=10,n0=600,r0=.6,i0=1.5,s0=800;function o0(e,t,n){var r=be(e),i=r.on,s=r.emit,o=e.state.set,a=t.Move,c=a.getPosition,d=a.getLimit,p=a.exceededLimit,h=a.translate,y=e.is(fr),$,k,w=1;function A(){i(yt,u),i([Ne,Ee],f)}function T(g,v,B,_,b){var S=c();if(u(),B&&(!y||!p())){var I=t.Layout.sliderSize(),O=jo(g)*I*Ni(He(g)/I)||0;g=a.toPosition(t.Controller.toDest(g%I))+O}var E=Hd(S,g,1);w=1,v=E?0:v||Oi(He(g-S)/i0,s0),k=_,$=ms(v,L,ge(P,S,g,b),1),o(Qr),s(gs),$.start()}function L(){o(dr),k&&k(),s(Mn)}function P(g,v,B,_){var b=c(),S=g+(v-g)*l(_),I=(S-b)*w;h(b+I),y&&!B&&p()&&(w*=r0,He(I)<t0&&T(d(p(!0)),n0,!1,k,!0))}function u(){$&&$.cancel()}function f(){$&&!$.isPaused()&&(u(),L())}function l(g){var v=n.easingFunc;return v?v(g):1-Math.pow(1-g,4)}return{mount:A,destroy:u,scroll:T,cancel:f}}var Kn={passive:!1,capture:!0};function u0(e,t,n){var r=be(e),i=r.on,s=r.emit,o=r.bind,a=r.unbind,c=e.state,d=t.Move,p=t.Scroll,h=t.Controller,y=t.Elements.track,$=t.Media.reduce,k=t.Direction,w=k.resolve,A=k.orient,T=d.getPosition,L=d.exceededLimit,P,u,f,l,g,v=!1,B,_,b;function S(){o(y,Js,xo,Kn),o(y,Qs,xo,Kn),o(y,sl,O,Kn),o(y,"click",C,{capture:!0}),o(y,"dragstart",$t),i([wn,Ne],I)}function I(){var j=n.drag;me(!j),l=j==="free"}function O(j){if(B=!1,!_){var ie=ue(j);re(j.target)&&(ie||!j.button)&&(h.isBusy()?$t(j,!0):(b=ie?y:window,g=c.is([_r,Qr]),f=null,o(b,Js,E,Kn),o(b,Qs,m,Kn),d.cancel(),p.cancel(),N(j)))}}function E(j){if(c.is(yi)||(c.set(yi),s(Dd)),j.cancelable)if(g){d.translate(P+ne(K(j)));var ie=X(j)>Da,Y=v!==(v=L());(ie||Y)&&N(j),B=!0,s(Vd),$t(j)}else R(j)&&(g=x(j),$t(j))}function m(j){c.is(yi)&&(c.set(dr),s(Fd)),g&&(z(j),$t(j)),a(b,Js,E),a(b,Qs,m),g=!1}function C(j){!_&&B&&$t(j,!0)}function N(j){f=u,u=j,P=T()}function z(j){var ie=H(j),Y=F(ie),J=n.rewind&&n.rewindByDrag;$(!1),l?h.scroll(Y,0,n.snap):e.is(oi)?h.go(A(jo(ie))<0?J?"<":"-":J?">":"+"):e.is(fr)&&v&&J?h.go(L(!0)?">":"<"):h.go(h.toDest(Y),!0),$(!0)}function x(j){var ie=n.dragMinThreshold,Y=Ur(ie),J=Y&&ie.mouse||0,fe=(Y?ie.touch:+ie)||10;return He(K(j))>(ue(j)?fe:J)}function R(j){return He(K(j))>He(K(j,!0))}function H(j){if(e.is(Er)||!v){var ie=X(j);if(ie&&ie<Da)return K(j)/ie}return 0}function F(j){return T()+jo(j)*un(He(j)*(n.flickPower||600),l?1/0:t.Layout.listSize()*(n.flickMaxPages||1))}function K(j,ie){return q(j,ie)-q(M(j),ie)}function X(j){return Mo(j)-Mo(M(j))}function M(j){return u===j&&f||u}function q(j,ie){return(ue(j)?j.changedTouches[0]:j)["page"+w(ie?"Y":"X")]}function ne(j){return j/(v&&e.is(fr)?Hg:1)}function re(j){var ie=n.noDrag;return!Dr(j,"."+el+", ."+Es)&&(!ie||!Dr(j,ie))}function ue(j){return typeof TouchEvent<"u"&&j instanceof TouchEvent}function Me(){return g}function me(j){_=j}return{mount:S,disable:me,isDragging:Me}}var a0={Spacebar:" ",Right:ys,Left:bs,Up:Kd,Down:Gd};function Ku(e){return e=on(e)?e:e.key,a0[e]||e}var Va="keydown";function c0(e,t,n){var r=be(e),i=r.on,s=r.bind,o=r.unbind,a=e.root,c=t.Direction.resolve,d,p;function h(){y(),i(Ne,$),i(Ne,y),i(yt,w)}function y(){var T=n.keyboard;T&&(d=T==="global"?window:a,s(d,Va,A))}function $(){o(d,Va)}function k(T){p=T}function w(){var T=p;p=!0,Od(function(){p=T})}function A(T){if(!p){var L=Ku(T);L===c(bs)?e.go("<"):L===c(ys)&&e.go(">")}}return{mount:h,destroy:$,disable:k}}var zr=Mu+"-lazy",Ei=zr+"-srcset",d0="["+zr+"], ["+Ei+"]";function l0(e,t,n){var r=be(e),i=r.on,s=r.off,o=r.bind,a=r.emit,c=n.lazyLoad==="sequential",d=[On,Mn],p=[];function h(){n.lazyLoad&&(y(),i(Ee,y))}function y(){Ct(p),$(),c?T():(s(d),i(d,k),k())}function $(){t.Slides.forEach(function(L){xu(L.slide,d0).forEach(function(P){var u=rt(P,zr),f=rt(P,Ei);if(u!==P.src||f!==P.srcset){var l=n.classes.spinner,g=P.parentElement,v=ri(g,"."+l)||Xn("span",l,g);p.push([P,L,v]),P.src||qr(P,"none")}})})}function k(){p=p.filter(function(L){var P=n.perPage*((n.preloadPages||1)+1)-1;return L[1].isWithin(e.index,P)?w(L):!0}),p.length||s(d)}function w(L){var P=L[0];wt(L[1].slide,Xo),o(P,"load error",ge(A,L)),se(P,"src",rt(P,zr)),se(P,"srcset",rt(P,Ei)),bt(P,zr),bt(P,Ei)}function A(L,P){var u=L[0],f=L[1];Bt(f.slide,Xo),P.type!=="error"&&(Cn(L[2]),qr(u,""),a(xi,u,f),a(lr)),c&&T()}function T(){p.length&&w(p.shift())}return{mount:h,destroy:ge(Ct,p),check:k}}function f0(e,t,n){var r=be(e),i=r.on,s=r.emit,o=r.bind,a=t.Slides,c=t.Elements,d=t.Controller,p=d.hasFocus,h=d.getIndex,y=d.go,$=t.Direction.resolve,k=c.pagination,w=[],A,T;function L(){P(),i([Ne,Ee,Mi],L);var _=n.pagination;k&&qr(k,_?"":"none"),_&&(i([yt,gs,Mn],B),u(),B(),s(Ko,{list:A,items:w},v(e.index)))}function P(){A&&(Cn(k?mn(A.children):A),Bt(A,T),Ct(w),A=null),r.destroy()}function u(){var _=e.length,b=n.classes,S=n.i18n,I=n.perPage,O=p()?d.getEnd()+1:Wr(_/I);A=k||Xn("ul",b.pagination,c.track.parentElement),wt(A,T=ks+"--"+g()),se(A,Lt,"tablist"),se(A,Qe,S.select),se(A,Fu,g()===vs?"vertical":"");for(var E=0;E<O;E++){var m=Xn("li",null,A),C=Xn("button",{class:b.page,type:"button"},m),N=a.getIn(E).map(function(x){return x.slide.id}),z=!p()&&I>1?S.pageX:S.slideX;o(C,"click",ge(f,E)),n.paginationKeyboard&&o(C,"keydown",ge(l,E)),se(m,Lt,"presentation"),se(C,Lt,"tab"),se(C,si,N.join(" ")),se(C,Qe,Ho(z,E+1)),se(C,Jn,-1),w.push({li:m,button:C,page:E})}}function f(_){y(">"+_,!0)}function l(_,b){var S=w.length,I=Ku(b),O=g(),E=-1;I===$(ys,!1,O)?E=++_%S:I===$(bs,!1,O)?E=(--_+S)%S:I==="Home"?E=0:I==="End"&&(E=S-1);var m=w[E];m&&(xd(m.button),y(">"+E),$t(b,!0))}function g(){return n.paginationDirection||n.direction}function v(_){return w[d.toPage(_)]}function B(){var _=v(h(!0)),b=v(h());if(_){var S=_.button;Bt(S,Nn),bt(S,xa),se(S,Jn,-1)}if(b){var I=b.button;wt(I,Nn),se(I,xa,!0),se(I,Jn,"")}s(Go,{list:A,items:w},_,b)}return{items:w,mount:L,destroy:P,getAt:v,update:B}}var h0=[" ","Enter"];function p0(e,t,n){var r=n.isNavigation,i=n.slideFocus,s=[];function o(){e.splides.forEach(function(k){k.isParent||(d(e,k.splide),d(k.splide,e))}),r&&p()}function a(){s.forEach(function(k){k.destroy()}),Ct(s)}function c(){a(),o()}function d(k,w){var A=be(k);A.on(yt,function(T,L,P){w.go(w.is(Er)?P:T)}),s.push(A)}function p(){var k=be(e),w=k.on;w(zi,y),w(qd,$),w([wn,Ne],h),s.push(k),k.emit(Ri,e.splides)}function h(){se(t.Elements.list,Fu,n.direction===vs?"vertical":"")}function y(k){e.go(k.index)}function $(k,w){zu(h0,Ku(w))&&(y(k),$t(w))}return{setup:ge(t.Media.set,{slideFocus:ei(i)?r:i},!0),mount:o,destroy:a,remount:c}}function g0(e,t,n){var r=be(e),i=r.bind,s=0;function o(){n.wheel&&i(t.Elements.track,"wheel",a,Kn)}function a(d){if(d.cancelable){var p=d.deltaY,h=p<0,y=Mo(d),$=n.wheelMinThreshold||0,k=n.wheelSleep||0;He(p)>$&&y-s>k&&(e.go(h?"<":">"),s=y),c(h)&&$t(d)}}function c(d){return!n.releaseWheel||e.state.is(_r)||t.Controller.getAdjacent(d)!==-1}return{mount:o}}var m0=90;function w0(e,t,n){var r=be(e),i=r.on,s=t.Elements.track,o=n.live&&!n.isNavigation,a=Xn("span",zg),c=ms(m0,ge(p,!1));function d(){o&&(y(!t.Autoplay.isPaused()),se(s,Ha,!0),a.textContent="",i(Uu,ge(y,!0)),i(Du,ge(y,!1)),i([On,Mn],ge(p,!0)))}function p($){se(s,ja,$),$?(ni(s,a),c.start()):(Cn(a),c.cancel())}function h(){bt(s,[Ma,Ha,ja]),Cn(a)}function y($){o&&se(s,Ma,$?"off":"polite")}return{mount:d,disable:y,destroy:h}}var b0=Object.freeze({__proto__:null,Media:Sg,Direction:Tg,Elements:Ug,Slides:Vg,Layout:Fg,Clones:Wg,Move:Kg,Controller:Gg,Arrows:Xg,Autoplay:Qg,Cover:e0,Scroll:o0,Drag:u0,Keyboard:c0,LazyLoad:l0,Pagination:f0,Sync:p0,Wheel:g0,Live:w0}),y0={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},v0={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:Mg,i18n:y0,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function _0(e,t,n){var r=t.Slides;function i(){be(e).on([wn,Ee],s)}function s(){r.forEach(function(a){a.style("transform","translateX(-"+100*a.index+"%)")})}function o(a,c){r.style("transition","opacity "+n.speed+"ms "+n.easing),Od(c)}return{mount:i,start:o,cancel:xo}}function E0(e,t,n){var r=t.Move,i=t.Controller,s=t.Scroll,o=t.Elements.list,a=ge(tt,o,"transition"),c;function d(){be(e).bind(o,"transitionend",function($){$.target===o&&c&&(h(),c())})}function p($,k){var w=r.toPosition($,!0),A=r.getPosition(),T=y($);He(w-A)>=1&&T>=1?n.useScroll?s.scroll(w,T,!1,k):(a("transform "+T+"ms "+n.easing),r.translate(w,!0),c=k):(r.jump($),k())}function h(){a(""),s.cancel()}function y($){var k=n.rewindSpeed;if(e.is(fr)&&k){var w=i.getIndex(!0),A=i.getEnd();if(w===0&&$>=A||w>=A&&$===0)return k}return n.speed}return{mount:d,start:p,cancel:h}}var k0=function(){function e(n,r){this.event=be(),this.Components={},this.state=Ag(Zn),this.splides=[],this._o={},this._E={};var i=on(n)?jd(document,n):n;Nr(i,i+" is invalid."),this.root=i,r=Qt({label:rt(i,Qe)||"",labelledby:rt(i,Vu)||""},v0,e.defaults,r||{});try{Qt(r,JSON.parse(rt(i,Mu)))}catch{Nr(!1,"Invalid JSON")}this._o=Object.create(Qt({},r))}var t=e.prototype;return t.mount=function(r,i){var s=this,o=this.state,a=this.Components;Nr(o.is([Zn,Ci]),"Already mounted!"),o.set(Zn),this._C=a,this._T=i||this._T||(this.is(oi)?_0:E0),this._E=r||this._E;var c=Fr({},b0,this._E,{Transition:this._T});return Ln(c,function(d,p){var h=d(s,a,s._o);a[p]=h,h.setup&&h.setup()}),Ln(a,function(d){d.mount&&d.mount()}),this.emit(wn),wt(this.root,Rg),o.set(dr),this.emit(za),this},t.sync=function(r){return this.splides.push({splide:r}),r.splides.push({splide:this,isParent:!0}),this.state.is(dr)&&(this._C.Sync.remount(),r.Components.Sync.remount()),this},t.go=function(r){return this._C.Controller.go(r),this},t.on=function(r,i){return this.event.on(r,i),this},t.off=function(r){return this.event.off(r),this},t.emit=function(r){var i;return(i=this.event).emit.apply(i,[r].concat(mn(arguments,1))),this},t.add=function(r,i){return this._C.Slides.add(r,i),this},t.remove=function(r){return this._C.Slides.remove(r),this},t.is=function(r){return this._o.type===r},t.refresh=function(){return this.emit(Ee),this},t.destroy=function(r){r===void 0&&(r=!0);var i=this.event,s=this.state;return s.is(Zn)?be(this).on(za,this.destroy.bind(this,r)):(Ln(this._C,function(o){o.destroy&&o.destroy(r)},!0),i.emit(Hu),i.destroy(),r&&Ct(this.splides),s.set(Ci)),this},yg(e,[{key:"options",get:function(){return this._o},set:function(r){this._C.Media.set(r,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),e}(),Gu=k0;Gu.defaults={};Gu.STATES=_g;const A0=[wn,Ee,lr,ps,Dd,Vd,Fd,gs,Mn,Hu,Uu,Du];function $0(e,t){const n=(r,i={})=>{t(S0(r),{splide:e,...i})};e.on(zi,(r,i)=>{n(zi,{Slide:r,e:i})}),e.on(yt,(r,i,s)=>{n(yt,{index:r,prev:i,dest:s})}),e.on(On,(r,i,s)=>{n(On,{index:r,prev:i,dest:s})}),e.on(Uo,r=>{n(Uo,{Slide:r})}),e.on(Do,r=>{n(Do,{Slide:r})}),e.on(Vo,r=>{n(Vo,{Slide:r})}),e.on(Fo,r=>{n(Fo,{Slide:r})}),e.on(Ne,r=>{n(Ne,r)}),e.on(qo,(r,i)=>{n(qo,{prev:r,next:i})}),e.on(Wo,(r,i)=>{n(Wo,{prev:r,next:i})}),e.on(Ko,(r,i)=>{n(Ko,{data:r,item:i})}),e.on(Go,(r,i,s)=>{n(Go,{data:r,prev:i,curr:s})}),e.on(Ri,r=>{n(Ri,{splides:r})}),e.on(Zo,r=>{n(Zo,{rate:r})}),e.on(xi,(r,i)=>{n(xi,{img:r,Slide:i})}),A0.forEach(r=>{e.on(r,()=>{n(r)})})}function S0(e){return e.split(":").map((t,n)=>n>0?t.charAt(0).toUpperCase()+t.slice(1):t).join("").replace("Lazyload","LazyLoad")}function T0(e){let t;const n=e[11].default,r=Qi(n,e,e[13],null);return{c(){r&&r.c()},m(i,s){r&&r.m(i,s),t=!0},p(i,s){r&&r.p&&(!t||s&8192)&&ts(r,n,i,i[13],t?es(n,i[13],s,null):ns(i[13]),null)},i(i){t||(ce(r,i),t=!0)},o(i){le(r,i),t=!1},d(i){r&&r.d(i)}}}function P0(e){let t,n;return t=new z0({props:{$$slots:{default:[B0]},$$scope:{ctx:e}}}),{c(){zt(t.$$.fragment)},m(r,i){_t(t,r,i),n=!0},p(r,i){const s={};i&8192&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(ce(t.$$.fragment,r),n=!0)},o(r){le(t.$$.fragment,r),n=!1},d(r){Et(t,r)}}}function B0(e){let t;const n=e[11].default,r=Qi(n,e,e[13],null);return{c(){r&&r.c()},m(i,s){r&&r.m(i,s),t=!0},p(i,s){r&&r.p&&(!t||s&8192)&&ts(r,n,i,i[13],t?es(n,i[13],s,null):ns(i[13]),null)},i(i){t||(ce(r,i),t=!0)},o(i){le(r,i),t=!1},d(i){r&&r.d(i)}}}function L0(e){let t,n,r,i,s;const o=[P0,T0],a=[];function c(h,y){return h[1]?0:1}n=c(e),r=a[n]=o[n](e);let d=[{class:i=cr("splide",e[0])},e[3]],p={};for(let h=0;h<d.length;h+=1)p=mt(p,d[h]);return{c(){t=G("div"),r.c(),sr(t,p)},m(h,y){te(h,t,y),a[n].m(t,null),e[12](t),s=!0},p(h,[y]){let $=n;n=c(h),n===$?a[n].p(h,y):(dn(),le(a[$],1,1,()=>{a[$]=null}),ln(),r=a[n],r?r.p(h,y):(r=a[n]=o[n](h),r.c()),ce(r,1),r.m(t,null)),sr(t,p=gu(d,[(!s||y&1&&i!==(i=cr("splide",h[0])))&&{class:i},y&8&&h[3]]))},i(h){s||(ce(r),s=!0)},o(h){le(r),s=!1},d(h){h&&ee(t),a[n].d(),e[12](null)}}}function I0(e,t,n){const r=["class","options","splide","extensions","transition","hasTrack","go","sync"];let i=ir(t,r),{$$slots:s={},$$scope:o}=t,{class:a=void 0}=t,{options:c={}}=t,{splide:d=void 0}=t,{extensions:p=void 0}=t,{transition:h=void 0}=t,{hasTrack:y=!0}=t;const $=Rf();let k,w,A=Ro({},c);ss(()=>(n(4,d=new Gu(k,c)),$0(d,$),d.mount(p,h),w=Ba(d),()=>d.destroy())),Nf(()=>{if(d){const u=Ba(d);wg(w,u)||(d.refresh(),w=u.slice())}});function T(u){d==null||d.go(u)}function L(u){d==null||d.sync(u)}function P(u){vo[u?"unshift":"push"](()=>{k=u,n(2,k)})}return e.$$set=u=>{t=mt(mt({},t),pu(u)),n(3,i=ir(t,r)),"class"in u&&n(0,a=u.class),"options"in u&&n(5,c=u.options),"splide"in u&&n(4,d=u.splide),"extensions"in u&&n(6,p=u.extensions),"transition"in u&&n(7,h=u.transition),"hasTrack"in u&&n(1,y=u.hasTrack),"$$scope"in u&&n(13,o=u.$$scope)},e.$$.update=()=>{e.$$.dirty&1072&&d&&!zo(A,c)&&(n(4,d.options=c,d),n(10,A=Ro({},A)))},[a,y,k,i,d,c,p,h,T,L,A,s,P,o]}class C0 extends hn{constructor(t){super(),fn(this,t,I0,L0,vt,{class:0,options:5,splide:4,extensions:6,transition:7,hasTrack:1,go:8,sync:9})}get class(){return this.$$.ctx[0]}set class(t){this.$$set({class:t}),Xt()}get options(){return this.$$.ctx[5]}set options(t){this.$$set({options:t}),Xt()}get splide(){return this.$$.ctx[4]}set splide(t){this.$$set({splide:t}),Xt()}get extensions(){return this.$$.ctx[6]}set extensions(t){this.$$set({extensions:t}),Xt()}get transition(){return this.$$.ctx[7]}set transition(t){this.$$set({transition:t}),Xt()}get hasTrack(){return this.$$.ctx[1]}set hasTrack(t){this.$$set({hasTrack:t}),Xt()}get go(){return this.$$.ctx[8]}get sync(){return this.$$.ctx[9]}}function O0(e){let t,n,r,i;const s=e[3].default,o=Qi(s,e,e[2],null);let a=[{class:r=cr("splide__track",e[0])},e[1]],c={};for(let d=0;d<a.length;d+=1)c=mt(c,a[d]);return{c(){t=G("div"),n=G("ul"),o&&o.c(),W(n,"class","splide__list"),sr(t,c)},m(d,p){te(d,t,p),D(t,n),o&&o.m(n,null),i=!0},p(d,[p]){o&&o.p&&(!i||p&4)&&ts(o,s,d,d[2],i?es(s,d[2],p,null):ns(d[2]),null),sr(t,c=gu(a,[(!i||p&1&&r!==(r=cr("splide__track",d[0])))&&{class:r},p&2&&d[1]]))},i(d){i||(ce(o,d),i=!0)},o(d){le(o,d),i=!1},d(d){d&&ee(t),o&&o.d(d)}}}function N0(e,t,n){const r=["class"];let i=ir(t,r),{$$slots:s={},$$scope:o}=t,{class:a=void 0}=t;return e.$$set=c=>{t=mt(mt({},t),pu(c)),n(1,i=ir(t,r)),"class"in c&&n(0,a=c.class),"$$scope"in c&&n(2,o=c.$$scope)},[a,i,o,s]}class z0 extends hn{constructor(t){super(),fn(this,t,N0,O0,vt,{class:0})}}function R0(e){let t,n,r;const i=e[3].default,s=Qi(i,e,e[2],null);let o=[{class:n=cr("splide__slide",e[0])},e[1]],a={};for(let c=0;c<o.length;c+=1)a=mt(a,o[c]);return{c(){t=G("li"),s&&s.c(),sr(t,a)},m(c,d){te(c,t,d),s&&s.m(t,null),r=!0},p(c,[d]){s&&s.p&&(!r||d&4)&&ts(s,i,c,c[2],r?es(i,c[2],d,null):ns(c[2]),null),sr(t,a=gu(o,[(!r||d&1&&n!==(n=cr("splide__slide",c[0])))&&{class:n},d&2&&c[1]]))},i(c){r||(ce(s,c),r=!0)},o(c){le(s,c),r=!1},d(c){c&&ee(t),s&&s.d(c)}}}function x0(e,t,n){const r=["class"];let i=ir(t,r),{$$slots:s={},$$scope:o}=t,{class:a=void 0}=t;return e.$$set=c=>{t=mt(mt({},t),pu(c)),n(1,i=ir(t,r)),"class"in c&&n(0,a=c.class),"$$scope"in c&&n(2,o=c.$$scope)},[a,i,o,s]}class M0 extends hn{constructor(t){super(),fn(this,t,x0,R0,vt,{class:0})}}class j0{generateSecretKey(){return pt.utils.randomPrivateKey()}getPublicKey(t){return Re(pt.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=Re(pt.getPublicKey(n)),r.id=eo(r),r.sig=Re(pt.sign(eo(r),n)),r[Hn]=!0,r}verifyEvent(t){if(typeof t[Hn]=="boolean")return t[Hn];const n=eo(t);if(n!==t.id)return t[Hn]=!1,!1;try{const r=pt.verify(t.sig,n,t.pubkey);return t[Hn]=r,r}catch{return t[Hn]=!1,!1}}}function H0(e){if(!dg(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function eo(e){let t=kd(Sd.encode(H0(e)));return Re(t)}const As=new j0;As.generateSecretKey;As.getPublicKey;As.finalizeEvent;As.verifyEvent;const Un=[];function U0(e,t=Pe){let n;const r=new Set;function i(a){if(vt(e,a)&&(e=a,n)){const c=!Un.length;for(const d of r)d[1](),Un.push(d,e);if(c){for(let d=0;d<Un.length;d+=2)Un[d][0](Un[d+1]);Un.length=0}}}function s(a){i(a(e))}function o(a,c=Pe){const d=[a,c];return r.add(d),r.size===1&&(n=t(i,s)||Pe),a(e),()=>{r.delete(d),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}const ji=U0("");function D0(e){let t;return{c(){t=G("div"),t.innerHTML='<div class="loader svelte-1gbkpfy"></div>',W(t,"class","loader-container svelte-1gbkpfy")},m(n,r){te(n,t,r)},p:Pe,i:Pe,o:Pe,d(n){n&&ee(t)}}}class ol extends hn{constructor(t){super(),fn(this,t,null,D0,vt,{})}}function Fa(e,t,n){const r=e.slice();return r[13]=t[n],r}function qa(e,t,n){const r=e.slice();return r[13]=t[n],r}function Wa(e,t,n){const r=e.slice();return r[13]=t[n],r}function Ka(e,t,n){const r=e.slice();return r[20]=t[n],r}function Ga(e){let t,n,r,i,s,o,a=nn(e[4]),c=[];for(let d=0;d<a.length;d+=1)c[d]=Za(Ka(e,a,d));return{c(){t=G("div"),n=G("div"),r=G("a"),i=pe("Home"),o=de();for(let d=0;d<c.length;d+=1)c[d].c();W(r,"href","#"),W(r,"class",s=e[0]==""?"selected":""),W(t,"class","topic-wrapper")},m(d,p){te(d,t,p),D(t,n),D(n,r),D(r,i),D(t,o);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(t,null)},p(d,p){if(p&1&&s!==(s=d[0]==""?"selected":"")&&W(r,"class",s),p&17){a=nn(d[4]);let h;for(h=0;h<a.length;h+=1){const y=Ka(d,a,h);c[h]?c[h].p(y,p):(c[h]=Za(y),c[h].c(),c[h].m(t,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=a.length}},d(d){d&&ee(t),rs(c,d)}}}function Za(e){let t,n,r,i=e[20]+"",s,o,a;return{c(){t=G("div"),n=G("a"),r=pe("#"),s=pe(i),W(n,"href",o="#tags/"+e[20]),W(n,"class",a=e[20]==e[0]?"selected":"")},m(c,d){te(c,t,d),D(t,n),D(n,r),D(n,s)},p(c,d){d&16&&i!==(i=c[20]+"")&&Oe(s,i),d&16&&o!==(o="#tags/"+c[20])&&W(n,"href",o),d&17&&a!==(a=c[20]==c[0]?"selected":"")&&W(n,"class",a)},d(c){c&&ee(t)}}}function V0(e){let t;return{c(){t=G("div"),W(t,"class","separator")},m(n,r){te(n,t,r)},p:Pe,d(n){n&&ee(t)}}}function F0(e){var i,s;let t,n=(((s=(i=e[1])==null?void 0:i.metadata)==null?void 0:s.about)||"")+"",r;return{c(){t=G("div"),r=pe(n),W(t,"class","about")},m(o,a){te(o,t,a),D(t,r)},p(o,a){var c,d;a&2&&n!==(n=(((d=(c=o[1])==null?void 0:c.metadata)==null?void 0:d.about)||"")+"")&&Oe(r,n)},d(o){o&&ee(t)}}}function q0(e){let t,n;return t=new ol({}),{c(){zt(t.$$.fragment)},m(r,i){_t(t,r,i),n=!0},p:Pe,i(r){n||(ce(t.$$.fragment,r),n=!0)},o(r){le(t.$$.fragment,r),n=!1},d(r){Et(t,r)}}}function W0(e){let t,n,r,i,s=e[8].length>0&&Ya(e),o=e[6].length>0&&!e[0]&&Qa(e),a=e[7].length>0&&tc(e);return{c(){s&&s.c(),t=de(),o&&o.c(),n=de(),a&&a.c(),r=xn()},m(c,d){s&&s.m(c,d),te(c,t,d),o&&o.m(c,d),te(c,n,d),a&&a.m(c,d),te(c,r,d),i=!0},p(c,d){c[8].length>0?s?s.p(c,d):(s=Ya(c),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),c[6].length>0&&!c[0]?o?(o.p(c,d),d&65&&ce(o,1)):(o=Qa(c),o.c(),ce(o,1),o.m(n.parentNode,n)):o&&(dn(),le(o,1,1,()=>{o=null}),ln()),c[7].length>0?a?a.p(c,d):(a=tc(c),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},i(c){i||(ce(o),i=!0)},o(c){le(o),i=!1},d(c){c&&(ee(t),ee(n),ee(r)),s&&s.d(c),o&&o.d(c),a&&a.d(c)}}}function Ya(e){let t,n=nn(e[8]),r=[];for(let i=0;i<n.length;i+=1)r[i]=Ja(Wa(e,n,i));return{c(){t=G("div");for(let i=0;i<r.length;i+=1)r[i].c();W(t,"class","top-notes")},m(i,s){te(i,t,s);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null)},p(i,s){if(s&256){n=nn(i[8]);let o;for(o=0;o<n.length;o+=1){const a=Wa(i,n,o);r[o]?r[o].p(a,s):(r[o]=Ja(a),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(i){i&&ee(t),rs(r,i)}}}function Xa(e){let t,n=e[13].summary+"";return{c(){t=G("div"),W(t,"class","summary")},m(r,i){te(r,t,i),t.innerHTML=n},p(r,i){i&256&&n!==(n=r[13].summary+"")&&(t.innerHTML=n)},d(r){r&&ee(t)}}}function Ja(e){let t,n,r,i,s,o,a=e[13].title+"",c,d,p,h,y,$=sn(e[13].created_at)+"",k,w,A=e[13].summary&&Xa(e);return{c(){t=G("div"),n=G("a"),r=G("img"),s=de(),o=G("div"),c=pe(a),p=de(),A&&A.c(),h=de(),y=G("div"),k=pe($),w=de(),tn(r.src,i=e[13].image)||W(r,"src",i),W(o,"class","title"),W(n,"href",d=`#${e[13].id}`),W(y,"class","date"),W(t,"class","note")},m(T,L){te(T,t,L),D(t,n),D(n,r),D(n,s),D(n,o),D(o,c),D(t,p),A&&A.m(t,null),D(t,h),D(t,y),D(y,k),D(t,w)},p(T,L){L&256&&!tn(r.src,i=T[13].image)&&W(r,"src",i),L&256&&a!==(a=T[13].title+"")&&Oe(c,a),L&256&&d!==(d=`#${T[13].id}`)&&W(n,"href",d),T[13].summary?A?A.p(T,L):(A=Xa(T),A.c(),A.m(t,h)):A&&(A.d(1),A=null),L&256&&$!==($=sn(T[13].created_at)+"")&&Oe(k,$)},d(T){T&&ee(t),A&&A.d()}}}function Qa(e){let t,n;return t=new C0({props:{class:"short-notes",options:{type:"loop",gap:"1rem",pagination:!1,perPage:3,breakpoints:{640:{perPage:2}},autoplay:!0},$$slots:{default:[G0]},$$scope:{ctx:e}}}),{c(){zt(t.$$.fragment)},m(r,i){_t(t,r,i),n=!0},p(r,i){const s={};i&8388672&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(ce(t.$$.fragment,r),n=!0)},o(r){le(t.$$.fragment,r),n=!1},d(r){Et(t,r)}}}function K0(e){let t,n,r=sn(e[13].created_at,!0)+"",i,s,o=e[13].summary+"",a,c,d;return{c(){t=G("a"),n=G("div"),i=pe(r),s=de(),a=pe(o),d=de(),W(n,"class","date"),W(t,"href",c=`#${e[13].id}`)},m(p,h){te(p,t,h),D(t,n),D(n,i),D(t,s),D(t,a),te(p,d,h)},p(p,h){h&64&&r!==(r=sn(p[13].created_at,!0)+"")&&Oe(i,r),h&64&&o!==(o=p[13].summary+"")&&Oe(a,o),h&64&&c!==(c=`#${p[13].id}`)&&W(t,"href",c)},d(p){p&&(ee(t),ee(d))}}}function ec(e){let t,n;return t=new M0({props:{$$slots:{default:[K0]},$$scope:{ctx:e}}}),{c(){zt(t.$$.fragment)},m(r,i){_t(t,r,i),n=!0},p(r,i){const s={};i&8388672&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(ce(t.$$.fragment,r),n=!0)},o(r){le(t.$$.fragment,r),n=!1},d(r){Et(t,r)}}}function G0(e){let t,n,r=nn(e[6]),i=[];for(let o=0;o<r.length;o+=1)i[o]=ec(qa(e,r,o));const s=o=>le(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=xn()},m(o,a){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(o,a);te(o,t,a),n=!0},p(o,a){if(a&64){r=nn(o[6]);let c;for(c=0;c<r.length;c+=1){const d=qa(o,r,c);i[c]?(i[c].p(d,a),ce(i[c],1)):(i[c]=ec(d),i[c].c(),ce(i[c],1),i[c].m(t.parentNode,t))}for(dn(),c=r.length;c<i.length;c+=1)s(c);ln()}},i(o){if(!n){for(let a=0;a<r.length;a+=1)ce(i[a]);n=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)le(i[a]);n=!1},d(o){o&&ee(t),rs(i,o)}}}function tc(e){let t,n,r=nn(e[7]),i=[];for(let s=0;s<r.length;s+=1)i[s]=rc(Fa(e,r,s));return{c(){t=G("div"),n=G("ul");for(let s=0;s<i.length;s+=1)i[s].c();W(t,"class","listing-notes"),la(t,"short-feed-full",e[5])},m(s,o){te(s,t,o),D(t,n);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(n,null)},p(s,o){if(o&160){r=nn(s[7]);let a;for(a=0;a<r.length;a+=1){const c=Fa(s,r,a);i[a]?i[a].p(c,o):(i[a]=rc(c),i[a].c(),i[a].m(n,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=r.length}o&32&&la(t,"short-feed-full",s[5])},d(s){s&&ee(t),rs(i,s)}}}function Z0(e){let t,n=e[13].summary+"",r;return{c(){t=G("div"),r=pe(n),W(t,"class","summary")},m(i,s){te(i,t,s),D(t,r)},p(i,s){s&128&&n!==(n=i[13].summary+"")&&Oe(r,n)},d(i){i&&ee(t)}}}function Y0(e){let t,n=e[13].content+"";return{c(){t=G("div"),W(t,"class","summary full")},m(r,i){te(r,t,i),t.innerHTML=n},p(r,i){i&128&&n!==(n=r[13].content+"")&&(t.innerHTML=n)},d(r){r&&ee(t)}}}function nc(e){let t,n=sn(e[13].created_at)+"",r;return{c(){t=G("div"),r=pe(n),W(t,"class","date")},m(i,s){te(i,t,s),D(t,r)},p(i,s){s&128&&n!==(n=sn(i[13].created_at)+"")&&Oe(r,n)},d(i){i&&ee(t)}}}function rc(e){let t,n,r,i=e[13].title+"",s,o,a,c,d;function p(k,w){if(k[13].kind==1&&k[5])return Y0;if(k[13].summary)return Z0}let h=p(e),y=h&&h(e),$=!(e[13].kind==1&&e[5])&&nc(e);return{c(){t=G("li"),n=G("h2"),r=G("a"),s=pe(i),a=de(),y&&y.c(),c=de(),$&&$.c(),d=de(),W(r,"href",o=`#${e[13].id}`)},m(k,w){te(k,t,w),D(t,n),D(n,r),D(r,s),D(t,a),y&&y.m(t,null),D(t,c),$&&$.m(t,null),D(t,d)},p(k,w){w&128&&i!==(i=k[13].title+"")&&Oe(s,i),w&128&&o!==(o=`#${k[13].id}`)&&W(r,"href",o),h===(h=p(k))&&y?y.p(k,w):(y&&y.d(1),y=h&&h(k),y&&(y.c(),y.m(t,c))),k[13].kind==1&&k[5]?$&&($.d(1),$=null):$?$.p(k,w):($=nc(k),$.c(),$.m(t,d))},d(k){k&&ee(t),y&&y.d(),$&&$.d()}}}function X0(e){var O;let t,n,r,i,s=e[3].slice(0,9)+"..."+e[3].slice(-5),o,a,c,d,p,h,y,$,k=((O=e[1])==null?void 0:O.shortName)+"",w,A,T,L,P,u,f,l,g=e[4].length>0&&Ga(e);function v(E,m){return E[0]==""?F0:V0}let B=v(e),_=B(e);const b=[W0,q0],S=[];function I(E,m){return E[2].length>0?0:1}return P=I(e),u=S[P]=b[P](e),{c(){var E;t=G("div"),n=G("div"),r=pe("Profile: "),i=G("a"),o=pe(s),c=de(),d=G("h1"),p=G("div"),h=G("img"),$=de(),w=pe(k),A=de(),g&&g.c(),T=de(),_.c(),L=de(),u.c(),f=xn(),W(i,"href",a="https://njump.me/"+e[3]),W(n,"class","external-link"),tn(h.src,y=(E=e[1])==null?void 0:E.image)||W(h,"src",y),W(p,"class","picture-container"),W(t,"class","header home")},m(E,m){te(E,t,m),D(t,n),D(n,r),D(n,i),D(i,o),D(t,c),D(t,d),D(d,p),D(p,h),D(d,$),D(d,w),te(E,A,m),g&&g.m(E,m),te(E,T,m),_.m(E,m),te(E,L,m),S[P].m(E,m),te(E,f,m),l=!0},p(E,[m]){var N,z;(!l||m&8)&&s!==(s=E[3].slice(0,9)+"..."+E[3].slice(-5))&&Oe(o,s),(!l||m&8&&a!==(a="https://njump.me/"+E[3]))&&W(i,"href",a),(!l||m&2&&!tn(h.src,y=(N=E[1])==null?void 0:N.image))&&W(h,"src",y),(!l||m&2)&&k!==(k=((z=E[1])==null?void 0:z.shortName)+"")&&Oe(w,k),E[4].length>0?g?g.p(E,m):(g=Ga(E),g.c(),g.m(T.parentNode,T)):g&&(g.d(1),g=null),B===(B=v(E))&&_?_.p(E,m):(_.d(1),_=B(E),_&&(_.c(),_.m(L.parentNode,L)));let C=P;P=I(E),P===C?S[P].p(E,m):(dn(),le(S[C],1,1,()=>{S[C]=null}),ln(),u=S[P],u?u.p(E,m):(u=S[P]=b[P](E),u.c()),ce(u,1),u.m(f.parentNode,f))},i(E){l||(ce(u),l=!0)},o(E){le(u),l=!1},d(E){E&&(ee(t),ee(A),ee(T),ee(L),ee(f)),g&&g.d(E),_.d(E),S[P].d(E)}}}function J0(e,t,n){let r,i,s,o=[],a=[],c=new Set,d="",p=[],h=!1,y=0,{tag:$}=t,{profile:k}=t;ss(()=>{Cu().then(async({npub:A,relays:T,topNotes:L,shortNotesMinChars:P,shortNotes:u,shortFeedSummaryMaxChars:f,topics:l})=>{if(n(3,d=A),n(1,k=await fs(d)),!k)throw new Error("invalid npub");n(10,y=L),n(4,p=l),n(5,h=f==0);let g=[30023];u=="main"&&g.push(1),ji.set(k.shortName+" home, powered by Nostr");let v={kinds:g,authors:[k.pubkey],limit:1e3};$&&(n(0,$=$.substring(5)),v={...v,"#t":[$]});let B=Hr.subscribeMany(T,[v],{onevent:async _=>{if(!c.has(_.id)){if(_.kind==1&&(_.content.length<P||!Pa(_)))return;_.kind==1&&h&&(_.content=await Cd(_)),n(2,o=[...o,_]),c.add(_.id),o.sort((b,S)=>S.created_at-b.created_at)}},oneose(){console.log("No subscribers left. Closing subscription."),B.close()}});u=="carousel"&&(B=Hr.subscribeMany(T,[{kinds:[1],authors:[k.pubkey],limit:1e3}],{onevent:async _=>{if(!c.has(_.id)&&_.content.length>P&&Pa(_)){if(_=await w(_),_.content.length<P)return;n(9,a=[...a,_]),c.add(_.id),a.sort((b,S)=>S.created_at-b.created_at)}},oneose(){console.log("No subscribers left. Closing subscription."),B.close()}}))})});async function w(A){let T;return T=await Ld(A.content),T=Id(T),T=lg(T),A.content=T,A}return e.$$set=A=>{"tag"in A&&n(0,$=A.tag),"profile"in A&&n(1,k=A.profile)},e.$$.update=()=>{e.$$.dirty&1028&&n(8,r=y>0?o.filter(A=>A.kind===30023).slice(0,y).map(bi):[]),e.$$.dirty&1028&&n(7,i=o.slice(y).map(bi)),e.$$.dirty&512&&n(6,s=a.map(bi))},ji.subscribe(A=>{document.title=A}),[$,k,o,d,p,h,s,i,r,a,y]}class ul extends hn{constructor(t){super(),fn(this,t,J0,X0,vt,{tag:0,profile:1})}}var Q0=Object.defineProperty,em=(e,t,n)=>t in e?Q0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U=(e,t,n)=>(em(e,typeof t!="symbol"?t+"":t,n),n);const tm=(e,t)=>e===t,De=Symbol("solid-proxy"),Gr=Symbol("solid-track"),Hi={equals:tm};let al=hl;const jt=1,Ui=2,cl={owned:null,cleanups:null,context:null,owner:null},to={};var ke=null;let no=null,we=null,Ce=null,It=null,$s=0;function Jo(e,t){const n=we,r=ke,i=e.length===0,s=t===void 0?r:t,o=i?cl:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=i?e:()=>e(()=>st(()=>Ts(o)));ke=o,we=null;try{return an(a,!0)}finally{we=n,ke=r}}function _e(e,t){t=t?Object.assign({},Hi,t):Hi;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),fl(n,i));return[ll.bind(n),r]}function En(e,t,n){const r=Ss(e,t,!0,jt);kr(r)}function Xe(e,t,n){const r=Ss(e,t,!1,jt);kr(r)}function hr(e,t,n){al=om;const r=Ss(e,t,!1,jt);r.user=!0,It?It.push(r):kr(r)}function ae(e,t,n){n=n?Object.assign({},Hi,n):Hi;const r=Ss(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,kr(r),ll.bind(r)}function nm(e){return e&&typeof e=="object"&&"then"in e}function dl(e,t,n){let r,i,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,i=e,s=t||{}):(r=e,i=t,s=n||{});let o=null,a=to,c=!1,d="initialValue"in s,p=typeof r=="function"&&ae(r);const h=new Set,[y,$]=(s.storage||_e)(s.initialValue),[k,w]=_e(void 0),[A,T]=_e(void 0,{equals:!1}),[L,P]=_e(d?"ready":"unresolved");function u(v,B,_,b){return o===v&&(o=null,b!==void 0&&(d=!0),(v===a||B===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(b,{value:B})),a=to,f(B,_)),B}function f(v,B){an(()=>{B===void 0&&$(()=>v),P(B!==void 0?"errored":d?"ready":"unresolved"),w(B);for(const _ of h.keys())_.decrement();h.clear()},!1)}function l(){const v=rm,B=y(),_=k();if(_!==void 0&&!o)throw _;return we&&we.user,B}function g(v=!0){if(v!==!1&&c)return;c=!1;const B=p?p():r;if(B==null||B===!1){u(o,st(y));return}const _=a!==to?a:st(()=>i(B,{value:y(),refetching:v}));return nm(_)?(o=_,"value"in _?(_.status==="success"?u(o,_.value,void 0,B):u(o,void 0,void 0,B),_):(c=!0,queueMicrotask(()=>c=!1),an(()=>{P(d?"refreshing":"pending"),T()},!1),_.then(b=>u(_,b,void 0,B),b=>u(_,void 0,gl(b),B)))):(u(o,_,void 0,B),_)}return Object.defineProperties(l,{state:{get:()=>L()},error:{get:()=>k()},loading:{get(){const v=L();return v==="pending"||v==="refreshing"}},latest:{get(){if(!d)return l();const v=k();if(v&&!o)throw v;return y()}}}),p?En(()=>g(!1)):g(!1),[l,{refetch:g,mutate:$}]}function Qn(e){return an(e,!1)}function st(e){if(we===null)return e();const t=we;we=null;try{return e()}finally{we=t}}function Jt(e,t,n){const r=Array.isArray(e);let i,s=n&&n.defer;return o=>{let a;if(r){a=Array(e.length);for(let d=0;d<e.length;d++)a[d]=e[d]()}else a=e();if(s){s=!1;return}const c=st(()=>t(a,i,o));return i=a,c}}function er(e){return ke===null||(ke.cleanups===null?ke.cleanups=[e]:ke.cleanups.push(e)),e}function pr(){return we}let rm;function ll(){if(this.sources&&this.state)if(this.state===jt)kr(this);else{const e=Ce;Ce=null,an(()=>Vi(this),!1),Ce=e}if(we){const e=this.observers?this.observers.length:0;we.sources?(we.sources.push(this),we.sourceSlots.push(e)):(we.sources=[this],we.sourceSlots=[e]),this.observers?(this.observers.push(we),this.observerSlots.push(we.sources.length-1)):(this.observers=[we],this.observerSlots=[we.sources.length-1])}return this.value}function fl(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&an(()=>{for(let i=0;i<e.observers.length;i+=1){const s=e.observers[i],o=no&&no.running;o&&no.disposed.has(s),(o?!s.tState:!s.state)&&(s.pure?Ce.push(s):It.push(s),s.observers&&pl(s)),o||(s.state=jt)}if(Ce.length>1e6)throw Ce=[],new Error},!1)),t}function kr(e){if(!e.fn)return;Ts(e);const t=ke,n=we,r=$s;we=ke=e,im(e,e.value,r),we=n,ke=t}function im(e,t,n){let r;try{r=e.fn(t)}catch(i){return e.pure&&(e.state=jt,e.owned&&e.owned.forEach(Ts),e.owned=null),e.updatedAt=n+1,ml(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?fl(e,r):e.value=r,e.updatedAt=n)}function Ss(e,t,n,r=jt,i){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:ke,context:ke?ke.context:null,pure:n};return ke===null||ke!==cl&&(ke.owned?ke.owned.push(s):ke.owned=[s]),s}function Di(e){if(e.state===0)return;if(e.state===Ui)return Vi(e);if(e.suspense&&st(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<$s);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===jt)kr(e);else if(e.state===Ui){const r=Ce;Ce=null,an(()=>Vi(e,t[0]),!1),Ce=r}}function an(e,t){if(Ce)return e();let n=!1;t||(Ce=[]),It?n=!0:It=[],$s++;try{const r=e();return sm(n),r}catch(r){n||(It=null),Ce=null,ml(r)}}function sm(e){if(Ce&&(hl(Ce),Ce=null),e)return;const t=It;It=null,t.length&&an(()=>al(t),!1)}function hl(e){for(let t=0;t<e.length;t++)Di(e[t])}function om(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Di(r)}for(t=0;t<n;t++)Di(e[t])}function Vi(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const i=r.state;i===jt?r!==t&&(!r.updatedAt||r.updatedAt<$s)&&Di(r):i===Ui&&Vi(r,t)}}}function pl(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Ui,n.pure?Ce.push(n):It.push(n),n.observers&&pl(n))}}function Ts(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const s=i.pop(),o=n.observerSlots.pop();r<i.length&&(s.sourceSlots[o]=r,i[r]=s,n.observerSlots[r]=o)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ts(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function gl(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function ml(e,t=ke){throw gl(e)}const ic=Symbol("fallback");function sc(e){for(let t=0;t<e.length;t++)e[t]()}function um(e,t,n={}){let r=[],i=[],s=[],o=[],a=0,c;return er(()=>sc(s)),()=>{const d=e()||[];return d[Gr],st(()=>{if(d.length===0)return a!==0&&(sc(s),s=[],r=[],i=[],a=0,o=[]),n.fallback&&(r=[ic],i[0]=Jo(h=>(s[0]=h,n.fallback())),a=1),i;for(r[0]===ic&&(s[0](),s=[],r=[],i=[],a=0),c=0;c<d.length;c++)c<r.length&&r[c]!==d[c]?o[c](()=>d[c]):c>=r.length&&(i[c]=Jo(p));for(;c<r.length;c++)s[c]();return a=o.length=s.length=d.length,r=d.slice(0),i=i.slice(0,a)});function p(h){s[c]=h;const[y,$]=_e(d[c]);return o[c]=$,t(y,c)}}}function it(e,t){return st(()=>e(t||{}))}const am=e=>`Stale read from <${e}>.`;function cm(e){const t="fallback"in e&&{fallback:()=>e.fallback};return ae(um(()=>e.each,e.children,t||void 0))}function Fi(e){const t=e.keyed,n=ae(()=>e.when,void 0,{equals:(r,i)=>t?r===i:!r==!i});return ae(()=>{const r=n();if(r){const i=e.children;return typeof i=="function"&&i.length>0?st(()=>i(t?r:()=>{if(!st(n))throw am("Show");return e.when})):i}return e.fallback},void 0,void 0)}function dm(e,t,n){let r=n.length,i=t.length,s=r,o=0,a=0,c=t[i-1].nextSibling,d=null;for(;o<i||a<s;){if(t[o]===n[a]){o++,a++;continue}for(;t[i-1]===n[s-1];)i--,s--;if(i===o){const p=s<r?a?n[a-1].nextSibling:n[s-a]:c;for(;a<s;)e.insertBefore(n[a++],p)}else if(s===a)for(;o<i;)(!d||!d.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[s-1]&&n[a]===t[i-1]){const p=t[--i].nextSibling;e.insertBefore(n[a++],t[o++].nextSibling),e.insertBefore(n[--s],p),t[i]=n[s]}else{if(!d){d=new Map;let h=a;for(;h<s;)d.set(n[h],h++)}const p=d.get(t[o]);if(p!=null)if(a<p&&p<s){let h=o,y=1,$;for(;++h<i&&h<s&&!(($=d.get(t[h]))==null||$!==p+y);)y++;if(y>p-a){const k=t[o];for(;a<p;)e.insertBefore(n[a++],k)}else e.replaceChild(n[a++],t[o++])}else o++;else t[o++].remove()}}}const oc="_$DX_DELEGATE";function oe(e,t,n){let r;const i=()=>{const o=document.createElement("template");return o.innerHTML=e,o.content.firstChild},s=()=>(r||(r=i())).cloneNode(!0);return s.cloneNode=s,s}function Zu(e,t=window.document){const n=t[oc]||(t[oc]=new Set);for(let r=0,i=e.length;r<i;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,hm))}}function Ie(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function lm(e,t,n,r){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function fm(e,t,n){if(!t)return n?Ie(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)i=t[s],i!==n[s]&&(r.setProperty(s,i),n[s]=i);return n}function wl(e,t,n){return st(()=>e(t,n))}function Z(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return qi(e,t,r,n);Xe(i=>qi(e,t(),i,n),r)}function hm(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[t];if(r&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?r.call(n,i,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function qi(e,t,n,r,i){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,o=r!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),o){let a=n[0];a&&a.nodeType===3?a.data=t:a=document.createTextNode(t),n=Dn(e,n,r,a)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||s==="boolean")n=Dn(e,n,r);else{if(s==="function")return Xe(()=>{let a=t();for(;typeof a=="function";)a=a();n=qi(e,a,n,r)}),()=>n;if(Array.isArray(t)){const a=[],c=n&&Array.isArray(n);if(Qo(a,t,n,i))return Xe(()=>n=qi(e,a,n,r,!0)),()=>n;if(a.length===0){if(n=Dn(e,n,r),o)return n}else c?n.length===0?uc(e,a,r):dm(e,n,a):(n&&Dn(e),uc(e,a));n=a}else if(t.nodeType){if(Array.isArray(n)){if(o)return n=Dn(e,n,r,t);Dn(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Qo(e,t,n,r){let i=!1;for(let s=0,o=t.length;s<o;s++){let a=t[s],c=n&&n[s],d;if(!(a==null||a===!0||a===!1))if((d=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))i=Qo(e,a,c)||i;else if(d==="function")if(r){for(;typeof a=="function";)a=a();i=Qo(e,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||i}else e.push(a),i=!0;else{const p=String(a);c&&c.nodeType===3&&c.data===p?e.push(c):e.push(document.createTextNode(p))}}return i}function uc(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function Dn(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let s=!1;for(let o=t.length-1;o>=0;o--){const a=t[o];if(i!==a){const c=a.parentNode===e;!s&&!o?c?e.replaceChild(i,a):e.insertBefore(i,n):c&&a.remove()}else s=!0}}else e.insertBefore(i,n);return[i]}function pm(e){return Object.keys(e).reduce((n,r)=>{const i=e[r];return n[r]=Object.assign({},i),yl(i.value)&&!ym(i.value)&&!Array.isArray(i.value)&&(n[r].value=Object.assign({},i.value)),Array.isArray(i.value)&&(n[r].value=i.value.slice(0)),n},{})}function gm(e){return e?Object.keys(e).reduce((n,r)=>{const i=e[r];return n[r]=yl(i)&&"value"in i?i:{value:i},n[r].attribute||(n[r].attribute=bm(r)),n[r].parse="parse"in n[r]?n[r].parse:typeof n[r].value!="string",n},{}):{}}function mm(e){return Object.keys(e).reduce((n,r)=>(n[r]=e[r].value,n),{})}function wm(e,t){const n=pm(t);return Object.keys(t).forEach(i=>{const s=n[i],o=e.getAttribute(s.attribute),a=e[i];o&&(s.value=s.parse?bl(o):o),a!=null&&(s.value=Array.isArray(a)?a.slice(0):a),s.reflect&&ac(e,s.attribute,s.value),Object.defineProperty(e,i,{get(){return s.value},set(c){const d=s.value;s.value=c,s.reflect&&ac(this,s.attribute,s.value);for(let p=0,h=this.__propertyChangedCallbacks.length;p<h;p++)this.__propertyChangedCallbacks[p](i,c,d)},enumerable:!0,configurable:!0})}),n}function bl(e){if(e)try{return JSON.parse(e)}catch{return e}}function ac(e,t,n){if(n==null||n===!1)return e.removeAttribute(t);let r=JSON.stringify(n);e.__updating[t]=!0,r==="true"&&(r=""),e.setAttribute(t,r),Promise.resolve().then(()=>delete e.__updating[t])}function bm(e){return e.replace(/\.?([A-Z]+)/g,(t,n)=>"-"+n.toLowerCase()).replace("_","-").replace(/^-/,"")}function yl(e){return e!=null&&(typeof e=="object"||typeof e=="function")}function ym(e){return Object.prototype.toString.call(e)==="[object Function]"}function vm(e){return typeof e=="function"&&e.toString().indexOf("class")===0}let ro;function _m(e,t){const n=Object.keys(t);return class extends e{static get observedAttributes(){return n.map(i=>t[i].attribute)}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(this.__initialized)return;this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=wm(this,t);const i=mm(this.props),s=this.Component,o=ro;try{ro=this,this.__initialized=!0,vm(s)?new s(i,{element:this}):s(i,{element:this})}finally{ro=o}}async disconnectedCallback(){if(await Promise.resolve(),this.isConnected)return;this.__propertyChangedCallbacks.length=0;let i=null;for(;i=this.__releaseCallbacks.pop();)i(this);delete this.__initialized,this.__released=!0}attributeChangedCallback(i,s,o){if(this.__initialized&&!this.__updating[i]&&(i=this.lookupProp(i),i in t)){if(o==null&&!this[i])return;this[i]=t[i].parse?bl(o):o}}lookupProp(i){if(t)return n.find(s=>i===s||i===t[s].attribute)}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(i){this.__releaseCallbacks.push(i)}addPropertyChangedCallback(i){this.__propertyChangedCallbacks.push(i)}}}function Em(e,t={},n={}){const{BaseElement:r=HTMLElement,extension:i}=n;return s=>{let o=customElements.get(e);return o?(o.prototype.Component=s,o):(o=_m(r,gm(t)),o.prototype.Component=s,o.prototype.registeredTag=e,customElements.define(e,o,i),o)}}function km(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const[i,s]=_e(e[t[r]]);Object.defineProperty(n,t[r],{get:i,set(o){s(()=>o)}})}return n}function Am(e){if(e.assignedSlot&&e.assignedSlot._$owner)return e.assignedSlot._$owner;let t=e.parentNode;for(;t&&!t._$owner&&!(t.assignedSlot&&t.assignedSlot._$owner);)t=t.parentNode;return t&&t.assignedSlot?t.assignedSlot._$owner:e._$owner}function $m(e){return(t,n)=>{const{element:r}=n;return Jo(i=>{const s=km(t);r.addPropertyChangedCallback((a,c)=>s[a]=c),r.addReleaseCallback(()=>{r.renderRoot.textContent="",i()});const o=e(s,n);return Z(r.renderRoot,o)},Am(r))}}function Sm(e,t,n){return arguments.length===2&&(n=t,t={}),Em(e,t)($m(n))}const Tm=`#ztr-content,
#ztr-content img {
  max-width: 100%;
}

#ztr-root {
  display: flex;
  flex-direction: column;
  font-family: var(--ztr-font);
  font-size: var(--ztr-font-size);
  color: var(--ztr-text-color);
  border: 1px solid transparent;
  word-wrap: break-word;
  /* removes margin collapse */
  margin-top: 4em;
  line-height: 1.2em;
}

#ztr-subtitle {
  font-size: 1.2em;
  color: #666;
}

a {
  color: var(--ztr-link-color);
  text-decoration: none;
}

/* Comment */

.ztr-comment {
  position: relative;
  margin: 0;
  padding: 0;
}

.ztr-comment,
.ztr-reply-button {
  background-color: var(--ztr-background-color, rgba(0, 0, 0, 0.03));
}

.ztr-comment-body {
  padding: 1em;
}

.ztr-comment:first-child {
  border-top-left-radius: 0.3em;
  border-top-right-radius: 0.3em;
}

.ztr-comment:last-child {
  border-bottom-left-radius: 0.3em;
  border-bottom-right-radius: 0.3em;
}

.ztr-comment-info-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.ztr-comment-info {
  display: flex;
  align-items: center;
}

.ztr-comment-info-picture {
  width: 3.5em;
}

ul.ztr-comment-info-items {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0;
  font-size: 0.9em;
}

ul.ztr-comment-info-items li {
  display: inline-block;
  cursor: default;
  padding-right: 0.5em;
}

ul.ztr-comment-info-items li a {
  font-weight: 600;
}

.ztr-comment-info-author a {
  font-size: 1.2em;
  padding-right: 0.2em;
}

.ztr-comment-info-dots {
  cursor: pointer;
}

.ztr-comment-info-separator {
  width: 0.5em;
}

.ztr-comment-info-picture img {
  width: 2em;
  height: 2em;
  border-radius: 50%;
  padding: 0.5em;
  position: relative;
  display: block;
  object-fit: cover;
}

.ztr-comment-text,
#ztr-content {
  margin-bottom: 0.75em;
  padding: 0 0.8em 0 3.5em;
  line-height: 1.5em;
  line-break: loose;
  word-break: break-word;
  overflow: hidden;
  max-width: 750px;
}

.ztr-comment-text p {
  margin: 0 0 0.5em 0;
}

.ztr-comment-text code {
  font-size: 1.1em;
  margin: 0 0.2em;
}

.ztr-comment-text pre,
.ztr-info-pane pre {
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  word-wrap: break-word;
}

.ztr-comment-text a:hover {
  text-decoration: underline;
}

.ztr-comment-text img {
  max-width: 100%;
}

.ztr-comment-text .warning {
  margin-top: 0em;
  font-size: 0.8em;
  display: flex;
  align-items: center;
}

.ztr-comment-text .warning svg {
  height: 1.2em;
  fill: #e4984d;
  padding-right: 0.7em;
}

.ztr-comment-replies {
  margin-left: 2em;
}

.highlight p {
  background: #F6AD55;
  color: #2B2B2B;
  display: inline;
  padding: 0.2em;
}

/* Styling the reply to comment form */

.ztr-comment-expand {
  display: flex;
  justify-content: center;
}

.ztr-comment-expand span {
  margin: 1em 0 1em 0.35em;
  cursor: pointer;
}

ul.ztr-comment-actions,
.ztr-comment-expand {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0 0 0 3.5em;
  font-weight: 600;
  user-select: none;
}

ul.ztr-comment-actions li {
  display: inline-flex;
  align-items: center;
  text-align: center;
  padding: 0 2em 0 0;
  cursor: pointer;
}

ul.ztr-comment-actions li span {
  padding: 0.25em 0.25em 0 0.25em;
  color: var(--ztr-icon-color, #3B3B3B);
}

svg {
  fill: var(--ztr-icon-color, #3B3B3B);
  width: 1.1em;
  height: 1.1em;
}

.ztr-comment-action-reply:hover svg {
  fill: #92379c;
}

.ztr-comment-action-reply:hover span {
  color: #92379c;
}

.ztr-comment-action-zap:hover svg {
  fill: #e4984d;
}

.ztr-comment-action-zap:hover span {
  color: #e4984d;
}

.ztr-comment-action-like:hover svg {
  fill: #e35428;
}

.ztr-comment-action-like:hover span {
  color: #e35428;
}

.ztr-reply-form {
  padding: 0 0.5em 0 3.5em;
}

.ztr-reply-form textarea {
  font-family: var(--ztr-font);
  font-size: 1.1em;
  line-height: 1.4;
  color: #2B2B2B;
  background-color: #FDFDFD;
  border: 1px solid #BBB;
  outline: none;
  width: calc(100% - 1.5em);
  padding: 0.7em;
  margin: 0.5em 0;
  height: 4em;
  border-radius: 0.2em;
  min-height: 4em;
  resize: vertical;
}

.ztr-reply-form:disabled {
  opacity: 65%;
  user-select: none;
}

.ztr-reply-controls {
  display: flex;
  align-items: center;
  justify-content: flex-end;
}

.ztr-reply-controls span {
  font-weight: bold;
  font-size: 0.85em;
  margin-right: 1em;
  user-select: none;
  cursor: default;
}

.ztr-reply-error {
  color: rgb(202, 23, 23);
}

.ztr-reply-controls button {
  font-family: var(--ztr-font);
  appearance: none;
  border: none;
  padding: 0.5em 1em;
  border-radius: 0.2em;
  font-size: 0.85em;
  font-weight: 600;
  cursor: pointer;
}

.ztr-reply-login-button {
  color: white;
  background-color: var(--ztr-login-button-color, #2B2B2B);
  margin-left: 1em;
}

.ztr-reply-button {
  color: var(--ztr-text-color);
  display: flex;
  align-items: center;
}

.ztr-info-pane {
  padding: 0 0.5em 1em 3.5em;
}

.ztr-info-pane pre {
  font-size: 0.8em;
}

.ztr-spinner {
  width: 1.2em;
  height: 1.2em;
  padding: 0.9em;
  animation: rotate 4s linear infinite;
}

.ztr-reply-button:disabled {
  opacity: 65%;
  pointer-events: none;
  cursor: pointer;
  user-select: none;
}

.ztr-spinner .path {
  stroke: var(--ztr-text-color, #2B2B2B);
  stroke-linecap: round;
  animation: dash 1.5s ease-in-out infinite;
}

@keyframes rotate {
  100% {
    transform: rotate(360deg);
  }
}

@keyframes dash {
  0% {
    stroke-dasharray: 1, 150;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -35;
  }

  100% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -124;
  }
}

/* new */

.ztr-comment-new .ztr-reply-form {
  margin: 0.5em 0;
  padding: 0;
}

.ztr-comment-new .ztr-comment-body {
  padding: 0;
}

.ztr-comment-new .ztr-comment-actions {
  font-size: 1.1em;
  padding: 0;
}

/* Dark mode defaults */

@media (prefers-color-scheme: dark) {
  .ztr-spinner .path {
    stroke: var(--ztr-text-color, #DEDEDE);
  }

  .ztr-comment,
  .ztr-reply-button {
    background-color: var(--ztr-background-color, rgba(255, 255, 255, 0.06));
  }

  .ztr-reply-login-button {
    color: #2B2B2B;
    background-color: var(--ztr-login-button-color, #DEDEDE);
  }

  svg {
    fill: var(--ztr-icon-color, #DEDEDE);
  }

  ul.ztr-comment-actions li span {
    color: var(--ztr-icon-color);
  }

  .ztr-comment-action-reply:hover svg {
    fill: #96609c;
  }

  .ztr-comment-action-reply:hover span {
    color: #96609c;
  }
}`;function cc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function vl(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Pm(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");cc(e.outputLen),cc(e.blockLen)}function Wi(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Bm(e,t){vl(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const io=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _l=e=>e instanceof Uint8Array,so=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),lt=(e,t)=>e<<32-t|e>>>t,Lm=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Lm)throw new Error("Non little-endian hardware is not supported");function Im(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Yu(e){if(typeof e=="string"&&(e=Im(e)),!_l(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Cm(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!_l(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let El=class{clone(){return this._cloneInto()}};function Om(e){const t=r=>e().update(Yu(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function kl(e=32){if(io&&typeof io.getRandomValues=="function")return io.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Nm(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,d=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+d,a,r)}let zm=class extends El{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=so(this.buffer)}update(t){Wi(this);const{view:n,buffer:r,blockLen:i}=this;t=Yu(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=so(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Wi(this),Bm(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;Nm(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=so(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<d;h++)a.setUint32(4*h,p[h],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}};const Rm=(e,t,n)=>e&t^~e&n,xm=(e,t,n)=>e&t^e&n^t&n,Mm=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Gt=new Uint32Array(64);let jm=class extends zm{constructor(){super(64,32,8,!1),this.A=Kt[0]|0,this.B=Kt[1]|0,this.C=Kt[2]|0,this.D=Kt[3]|0,this.E=Kt[4]|0,this.F=Kt[5]|0,this.G=Kt[6]|0,this.H=Kt[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[t,n,r,i,s,o,a,c]}set(t,n,r,i,s,o,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let h=0;h<16;h++,n+=4)Gt[h]=t.getUint32(n,!1);for(let h=16;h<64;h++){const y=Gt[h-15],$=Gt[h-2],k=lt(y,7)^lt(y,18)^y>>>3,w=lt($,17)^lt($,19)^$>>>10;Gt[h]=w+Gt[h-7]+k+Gt[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:d,H:p}=this;for(let h=0;h<64;h++){const y=lt(a,6)^lt(a,11)^lt(a,25),$=p+y+Rm(a,c,d)+Mm[h]+Gt[h]|0,w=(lt(r,2)^lt(r,13)^lt(r,22))+xm(r,i,s)|0;p=d,d=c,c=a,a=o+$|0,o=s,s=i,i=r,r=$+w|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,i,s,o,a,c,d,p)}roundClean(){Gt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const eu=Om(()=>new jm);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Al=BigInt(0),Ps=BigInt(1),Hm=BigInt(2),Bs=e=>e instanceof Uint8Array,Um=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function gr(e){if(!Bs(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Um[e[n]];return t}function $l(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Xu(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function mr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const i=r*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Ve(e){return Xu(gr(e))}function Ju(e){if(!Bs(e))throw new Error("Uint8Array expected");return Xu(gr(Uint8Array.from(e).reverse()))}function cn(e,t){return mr(e.toString(16).padStart(t*2,"0"))}function Qu(e,t){return cn(e,t).reverse()}function Dm(e){return mr($l(e))}function Le(e,t,n){let r;if(typeof t=="string")try{r=mr(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(Bs(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function zn(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!Bs(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function Vm(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Fm(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function qm(e){let t;for(t=0;e>Al;e>>=Ps,t+=1);return t}function Wm(e,t){return e>>BigInt(t)&Ps}const Km=(e,t,n)=>e|(n?Ps:Al)<<BigInt(t),ea=e=>(Hm<<BigInt(e-1))-Ps,oo=e=>new Uint8Array(e),dc=e=>Uint8Array.from(e);function Sl(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=oo(e),i=oo(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...h)=>n(i,r,...h),c=(h=oo())=>{i=a(dc([0]),h),r=a(),h.length!==0&&(i=a(dc([1]),h),r=a())},d=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const y=[];for(;h<t;){r=a();const $=r.slice();y.push($),h+=r.length}return zn(...y)};return(h,y)=>{o(),c(h);let $;for(;!($=y(d()));)c();return o(),$}}const Gm={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function ui(e,t,n={}){const r=(i,s,o)=>{const a=Gm[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=e[i];if(!(o&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}const Zm=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Wm,bitLen:qm,bitMask:ea,bitSet:Km,bytesToHex:gr,bytesToNumberBE:Ve,bytesToNumberLE:Ju,concatBytes:zn,createHmacDrbg:Sl,ensureBytes:Le,equalBytes:Vm,hexToBytes:mr,hexToNumber:Xu,numberToBytesBE:cn,numberToBytesLE:Qu,numberToHexUnpadded:$l,numberToVarBytesBE:Dm,utf8ToBytes:Fm,validateObject:ui},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $e=BigInt(0),ve=BigInt(1),$n=BigInt(2),Ym=BigInt(3),tu=BigInt(4),lc=BigInt(5),fc=BigInt(8);BigInt(9);BigInt(16);function Te(e,t){const n=e%t;return n>=$e?n:t+n}function Xm(e,t,n){if(n<=$e||t<$e)throw new Error("Expected power/modulo > 0");if(n===ve)return $e;let r=ve;for(;t>$e;)t&ve&&(r=r*e%n),e=e*e%n,t>>=ve;return r}function We(e,t,n){let r=e;for(;t-- >$e;)r*=r,r%=n;return r}function nu(e,t){if(e===$e||t<=$e)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Te(e,t),r=t,i=$e,s=ve;for(;n!==$e;){const a=r/n,c=r%n,d=i-s*a;r=n,n=c,i=s,s=d}if(r!==ve)throw new Error("invert: does not exist");return Te(i,t)}function Jm(e){const t=(e-ve)/$n;let n,r,i;for(n=e-ve,r=0;n%$n===$e;n/=$n,r++);for(i=$n;i<e&&Xm(i,t,e)!==e-ve;i++);if(r===1){const o=(e+ve)/tu;return function(c,d){const p=c.pow(d,o);if(!c.eql(c.sqr(p),d))throw new Error("Cannot find square root");return p}}const s=(n+ve)/$n;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let d=r,p=a.pow(a.mul(a.ONE,i),n),h=a.pow(c,s),y=a.pow(c,n);for(;!a.eql(y,a.ONE);){if(a.eql(y,a.ZERO))return a.ZERO;let $=1;for(let w=a.sqr(y);$<d&&!a.eql(w,a.ONE);$++)w=a.sqr(w);const k=a.pow(p,ve<<BigInt(d-$-1));p=a.sqr(k),h=a.mul(h,k),y=a.mul(y,p),d=$}return h}}function Qm(e){if(e%tu===Ym){const t=(e+ve)/tu;return function(r,i){const s=r.pow(i,t);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%fc===lc){const t=(e-lc)/fc;return function(r,i){const s=r.mul(i,$n),o=r.pow(s,t),a=r.mul(i,o),c=r.mul(r.mul(a,$n),o),d=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(d),i))throw new Error("Cannot find square root");return d}}return Jm(e)}const ew=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function tw(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=ew.reduce((r,i)=>(r[i]="function",r),t);return ui(e,n)}function nw(e,t,n){if(n<$e)throw new Error("Expected power > 0");if(n===$e)return e.ONE;if(n===ve)return t;let r=e.ONE,i=t;for(;n>$e;)n&ve&&(r=e.mul(r,i)),i=e.sqr(i),n>>=ve;return r}function rw(e,t){const n=new Array(t.length),r=t.reduce((s,o,a)=>e.is0(o)?s:(n[a]=s,e.mul(s,o)),e.ONE),i=e.inv(r);return t.reduceRight((s,o,a)=>e.is0(o)?s:(n[a]=e.mul(s,n[a]),e.mul(s,o)),i),n}function Tl(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function iw(e,t,n=!1,r={}){if(e<=$e)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=Tl(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Qm(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:ea(i),ZERO:$e,ONE:ve,create:c=>Te(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return $e<=c&&c<e},is0:c=>c===$e,isOdd:c=>(c&ve)===ve,neg:c=>Te(-c,e),eql:(c,d)=>c===d,sqr:c=>Te(c*c,e),add:(c,d)=>Te(c+d,e),sub:(c,d)=>Te(c-d,e),mul:(c,d)=>Te(c*d,e),pow:(c,d)=>nw(a,c,d),div:(c,d)=>Te(c*nu(d,e),e),sqrN:c=>c*c,addN:(c,d)=>c+d,subN:(c,d)=>c-d,mulN:(c,d)=>c*d,inv:c=>nu(c,e),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>rw(a,c),cmov:(c,d,p)=>p?d:c,toBytes:c=>n?Qu(c,s):cn(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?Ju(c):Ve(c)}});return Object.freeze(a)}function Pl(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Bl(e){const t=Pl(e);return t+Math.ceil(t/2)}function sw(e,t,n=!1){const r=e.length,i=Pl(t),s=Bl(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?Ve(e):Ju(e),a=Te(o,t-ve)+ve;return n?Qu(a,i):cn(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ow=BigInt(0),uo=BigInt(1);function uw(e,t){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(t/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=e.ZERO,a=i;for(;s>ow;)s&uo&&(o=o.add(a)),a=a.double(),s>>=uo;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),c=[];let d=i,p=d;for(let h=0;h<o;h++){p=d,c.push(p);for(let y=1;y<a;y++)p=p.add(d),c.push(p);d=p.double()}return c},wNAF(i,s,o){const{windows:a,windowSize:c}=r(i);let d=e.ZERO,p=e.BASE;const h=BigInt(2**i-1),y=2**i,$=BigInt(i);for(let k=0;k<a;k++){const w=k*c;let A=Number(o&h);o>>=$,A>c&&(A-=y,o+=uo);const T=w,L=w+Math.abs(A)-1,P=k%2!==0,u=A<0;A===0?p=p.add(n(P,s[T])):d=d.add(n(u,s[L]))}return{p:d,f:p}},wNAFCached(i,s,o,a){const c=i._WINDOW_SIZE||1;let d=s.get(i);return d||(d=this.precomputeWindow(i,c),c!==1&&s.set(i,a(d))),this.wNAF(c,d,o)}}}function Ll(e){return tw(e.Fp),ui(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Tl(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function aw(e){const t=Ll(e);ui(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:cw,hexToBytes:dw}=Zm,Bn={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Bn;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:cw(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Bn,n=typeof e=="string"?dw(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=Bn._parseInt(n.subarray(2)),{d:o,l:a}=Bn._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=d=>Number.parseInt(d[0],16)&8?"00"+d:d,n=d=>{const p=d.toString(16);return p.length&1?`0${p}`:p},r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,o=i.length/2,a=n(s),c=n(o);return`30${n(o+s+4)}02${c}${i}02${a}${r}`}},Tt=BigInt(0),Ge=BigInt(1);BigInt(2);const hc=BigInt(3);BigInt(4);function lw(e){const t=aw(e),{Fp:n}=t,r=t.toBytes||((k,w,A)=>{const T=w.toAffine();return zn(Uint8Array.from([4]),n.toBytes(T.x),n.toBytes(T.y))}),i=t.fromBytes||(k=>{const w=k.subarray(1),A=n.fromBytes(w.subarray(0,n.BYTES)),T=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:A,y:T}});function s(k){const{a:w,b:A}=t,T=n.sqr(k),L=n.mul(T,k);return n.add(n.add(L,n.mul(k,w)),A)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(k){return typeof k=="bigint"&&Tt<k&&k<t.n}function a(k){if(!o(k))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(k){const{allowedPrivateKeyLengths:w,nByteLength:A,wrapPrivateKey:T,n:L}=t;if(w&&typeof k!="bigint"){if(k instanceof Uint8Array&&(k=gr(k)),typeof k!="string"||!w.includes(k.length))throw new Error("Invalid key");k=k.padStart(A*2,"0")}let P;try{P=typeof k=="bigint"?k:Ve(Le("private key",k,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof k}`)}return T&&(P=Te(P,L)),a(P),P}const d=new Map;function p(k){if(!(k instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(w,A,T){if(this.px=w,this.py=A,this.pz=T,w==null||!n.isValid(w))throw new Error("x required");if(A==null||!n.isValid(A))throw new Error("y required");if(T==null||!n.isValid(T))throw new Error("z required")}static fromAffine(w){const{x:A,y:T}=w||{};if(!w||!n.isValid(A)||!n.isValid(T))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const L=P=>n.eql(P,n.ZERO);return L(A)&&L(T)?h.ZERO:new h(A,T,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const A=n.invertBatch(w.map(T=>T.pz));return w.map((T,L)=>T.toAffine(A[L])).map(h.fromAffine)}static fromHex(w){const A=h.fromAffine(i(Le("pointHex",w)));return A.assertValidity(),A}static fromPrivateKey(w){return h.BASE.multiply(c(w))}_setWindowSize(w){this._WINDOW_SIZE=w,d.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:w,y:A}=this.toAffine();if(!n.isValid(w)||!n.isValid(A))throw new Error("bad point: x or y not FE");const T=n.sqr(A),L=s(w);if(!n.eql(T,L))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){p(w);const{px:A,py:T,pz:L}=this,{px:P,py:u,pz:f}=w,l=n.eql(n.mul(A,f),n.mul(P,L)),g=n.eql(n.mul(T,f),n.mul(u,L));return l&&g}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:A}=t,T=n.mul(A,hc),{px:L,py:P,pz:u}=this;let f=n.ZERO,l=n.ZERO,g=n.ZERO,v=n.mul(L,L),B=n.mul(P,P),_=n.mul(u,u),b=n.mul(L,P);return b=n.add(b,b),g=n.mul(L,u),g=n.add(g,g),f=n.mul(w,g),l=n.mul(T,_),l=n.add(f,l),f=n.sub(B,l),l=n.add(B,l),l=n.mul(f,l),f=n.mul(b,f),g=n.mul(T,g),_=n.mul(w,_),b=n.sub(v,_),b=n.mul(w,b),b=n.add(b,g),g=n.add(v,v),v=n.add(g,v),v=n.add(v,_),v=n.mul(v,b),l=n.add(l,v),_=n.mul(P,u),_=n.add(_,_),v=n.mul(_,b),f=n.sub(f,v),g=n.mul(_,B),g=n.add(g,g),g=n.add(g,g),new h(f,l,g)}add(w){p(w);const{px:A,py:T,pz:L}=this,{px:P,py:u,pz:f}=w;let l=n.ZERO,g=n.ZERO,v=n.ZERO;const B=t.a,_=n.mul(t.b,hc);let b=n.mul(A,P),S=n.mul(T,u),I=n.mul(L,f),O=n.add(A,T),E=n.add(P,u);O=n.mul(O,E),E=n.add(b,S),O=n.sub(O,E),E=n.add(A,L);let m=n.add(P,f);return E=n.mul(E,m),m=n.add(b,I),E=n.sub(E,m),m=n.add(T,L),l=n.add(u,f),m=n.mul(m,l),l=n.add(S,I),m=n.sub(m,l),v=n.mul(B,E),l=n.mul(_,I),v=n.add(l,v),l=n.sub(S,v),v=n.add(S,v),g=n.mul(l,v),S=n.add(b,b),S=n.add(S,b),I=n.mul(B,I),E=n.mul(_,E),S=n.add(S,I),I=n.sub(b,I),I=n.mul(B,I),E=n.add(E,I),b=n.mul(S,E),g=n.add(g,b),b=n.mul(m,E),l=n.mul(O,l),l=n.sub(l,b),b=n.mul(O,S),v=n.mul(m,v),v=n.add(v,b),new h(l,g,v)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return $.wNAFCached(this,d,w,A=>{const T=n.invertBatch(A.map(L=>L.pz));return A.map((L,P)=>L.toAffine(T[P])).map(h.fromAffine)})}multiplyUnsafe(w){const A=h.ZERO;if(w===Tt)return A;if(a(w),w===Ge)return this;const{endo:T}=t;if(!T)return $.unsafeLadder(this,w);let{k1neg:L,k1:P,k2neg:u,k2:f}=T.splitScalar(w),l=A,g=A,v=this;for(;P>Tt||f>Tt;)P&Ge&&(l=l.add(v)),f&Ge&&(g=g.add(v)),v=v.double(),P>>=Ge,f>>=Ge;return L&&(l=l.negate()),u&&(g=g.negate()),g=new h(n.mul(g.px,T.beta),g.py,g.pz),l.add(g)}multiply(w){a(w);let A=w,T,L;const{endo:P}=t;if(P){const{k1neg:u,k1:f,k2neg:l,k2:g}=P.splitScalar(A);let{p:v,f:B}=this.wNAF(f),{p:_,f:b}=this.wNAF(g);v=$.constTimeNegate(u,v),_=$.constTimeNegate(l,_),_=new h(n.mul(_.px,P.beta),_.py,_.pz),T=v.add(_),L=B.add(b)}else{const{p:u,f}=this.wNAF(A);T=u,L=f}return h.normalizeZ([T,L])[0]}multiplyAndAddUnsafe(w,A,T){const L=h.BASE,P=(f,l)=>l===Tt||l===Ge||!f.equals(L)?f.multiplyUnsafe(l):f.multiply(l),u=P(this,A).add(P(w,T));return u.is0()?void 0:u}toAffine(w){const{px:A,py:T,pz:L}=this,P=this.is0();w==null&&(w=P?n.ONE:n.inv(L));const u=n.mul(A,w),f=n.mul(T,w),l=n.mul(L,w);if(P)return{x:n.ZERO,y:n.ZERO};if(!n.eql(l,n.ONE))throw new Error("invZ was invalid");return{x:u,y:f}}isTorsionFree(){const{h:w,isTorsionFree:A}=t;if(w===Ge)return!0;if(A)return A(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:A}=t;return w===Ge?this:A?A(h,this):this.multiplyUnsafe(t.h)}toRawBytes(w=!0){return this.assertValidity(),r(h,this,w)}toHex(w=!0){return gr(this.toRawBytes(w))}}h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const y=t.nBitLength,$=uw(h,t.endo?Math.ceil(y/2):y);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function fw(e){const t=Ll(e);return ui(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function hw(e){const t=fw(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function o(E){return Tt<E&&E<n.ORDER}function a(E){return Te(E,r)}function c(E){return nu(E,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:p,weierstrassEquation:h,isWithinCurveOrder:y}=lw({...t,toBytes(E,m,C){const N=m.toAffine(),z=n.toBytes(N.x),x=zn;return C?x(Uint8Array.from([m.hasEvenY()?2:3]),z):x(Uint8Array.from([4]),z,n.toBytes(N.y))},fromBytes(E){const m=E.length,C=E[0],N=E.subarray(1);if(m===i&&(C===2||C===3)){const z=Ve(N);if(!o(z))throw new Error("Point is not on curve");const x=h(z);let R=n.sqrt(x);const H=(R&Ge)===Ge;return(C&1)===1!==H&&(R=n.neg(R)),{x:z,y:R}}else if(m===s&&C===4){const z=n.fromBytes(N.subarray(0,n.BYTES)),x=n.fromBytes(N.subarray(n.BYTES,2*n.BYTES));return{x:z,y:x}}else throw new Error(`Point of length ${m} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),$=E=>gr(cn(E,t.nByteLength));function k(E){const m=r>>Ge;return E>m}function w(E){return k(E)?a(-E):E}const A=(E,m,C)=>Ve(E.slice(m,C));class T{constructor(m,C,N){this.r=m,this.s=C,this.recovery=N,this.assertValidity()}static fromCompact(m){const C=t.nByteLength;return m=Le("compactSignature",m,C*2),new T(A(m,0,C),A(m,C,2*C))}static fromDER(m){const{r:C,s:N}=Bn.toSig(Le("DER",m));return new T(C,N)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(m){return new T(this.r,this.s,m)}recoverPublicKey(m){const{r:C,s:N,recovery:z}=this,x=g(Le("msgHash",m));if(z==null||![0,1,2,3].includes(z))throw new Error("recovery id invalid");const R=z===2||z===3?C+t.n:C;if(R>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=z&1?"03":"02",F=d.fromHex(H+$(R)),K=c(R),X=a(-x*K),M=a(N*K),q=d.BASE.multiplyAndAddUnsafe(F,X,M);if(!q)throw new Error("point at infinify");return q.assertValidity(),q}hasHighS(){return k(this.s)}normalizeS(){return this.hasHighS()?new T(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return mr(this.toDERHex())}toDERHex(){return Bn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return mr(this.toCompactHex())}toCompactHex(){return $(this.r)+$(this.s)}}const L={isValidPrivateKey(E){try{return p(E),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const E=Bl(t.n);return sw(t.randomBytes(E),t.n)},precompute(E=8,m=d.BASE){return m._setWindowSize(E),m.multiply(BigInt(3)),m}};function P(E,m=!0){return d.fromPrivateKey(E).toRawBytes(m)}function u(E){const m=E instanceof Uint8Array,C=typeof E=="string",N=(m||C)&&E.length;return m?N===i||N===s:C?N===2*i||N===2*s:E instanceof d}function f(E,m,C=!0){if(u(E))throw new Error("first arg must be private key");if(!u(m))throw new Error("second arg must be public key");return d.fromHex(m).multiply(p(E)).toRawBytes(C)}const l=t.bits2int||function(E){const m=Ve(E),C=E.length*8-t.nBitLength;return C>0?m>>BigInt(C):m},g=t.bits2int_modN||function(E){return a(l(E))},v=ea(t.nBitLength);function B(E){if(typeof E!="bigint")throw new Error("bigint expected");if(!(Tt<=E&&E<v))throw new Error(`bigint expected < 2^${t.nBitLength}`);return cn(E,t.nByteLength)}function _(E,m,C=b){if(["recovered","canonical"].some(re=>re in C))throw new Error("sign() legacy options not supported");const{hash:N,randomBytes:z}=t;let{lowS:x,prehash:R,extraEntropy:H}=C;x==null&&(x=!0),E=Le("msgHash",E),R&&(E=Le("prehashed msgHash",N(E)));const F=g(E),K=p(m),X=[B(K),B(F)];if(H!=null){const re=H===!0?z(n.BYTES):H;X.push(Le("extraEntropy",re))}const M=zn(...X),q=F;function ne(re){const ue=l(re);if(!y(ue))return;const Me=c(ue),me=d.BASE.multiply(ue).toAffine(),j=a(me.x);if(j===Tt)return;const ie=a(Me*a(q+j*K));if(ie===Tt)return;let Y=(me.x===j?0:2)|Number(me.y&Ge),J=ie;return x&&k(ie)&&(J=w(ie),Y^=1),new T(j,J,Y)}return{seed:M,k2sig:ne}}const b={lowS:t.lowS,prehash:!1},S={lowS:t.lowS,prehash:!1};function I(E,m,C=b){const{seed:N,k2sig:z}=_(E,m,C),x=t;return Sl(x.hash.outputLen,x.nByteLength,x.hmac)(N,z)}d.BASE._setWindowSize(8);function O(E,m,C,N=S){var z;const x=E;if(m=Le("msgHash",m),C=Le("publicKey",C),"strict"in N)throw new Error("options.strict was renamed to lowS");const{lowS:R,prehash:H}=N;let F,K;try{if(typeof x=="string"||x instanceof Uint8Array)try{F=T.fromDER(x)}catch(j){if(!(j instanceof Bn.Err))throw j;F=T.fromCompact(x)}else if(typeof x=="object"&&typeof x.r=="bigint"&&typeof x.s=="bigint"){const{r:j,s:ie}=x;F=new T(j,ie)}else throw new Error("PARSE");K=d.fromHex(C)}catch(j){if(j.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(R&&F.hasHighS())return!1;H&&(m=t.hash(m));const{r:X,s:M}=F,q=g(m),ne=c(M),re=a(q*ne),ue=a(X*ne),Me=(z=d.BASE.multiplyAndAddUnsafe(K,re,ue))==null?void 0:z.toAffine();return Me?a(Me.x)===X:!1}return{CURVE:t,getPublicKey:P,getSharedSecret:f,sign:I,verify:O,ProjectivePoint:d,Signature:T,utils:L}}class Il extends El{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Pm(t);const r=Yu(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return Wi(this),this.iHash.update(t),this}digestInto(t){Wi(this),vl(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Cl=(e,t,n)=>new Il(e,t).update(n).digest();Cl.create=(e,t)=>new Il(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function pw(e){return{hash:e,hmac:(t,...n)=>Cl(e,t,Cm(...n)),randomBytes:kl}}function gw(e,t){const n=r=>hw({...e,...pw(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ls=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ki=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ol=BigInt(1),Gi=BigInt(2),pc=(e,t)=>(e+t/Gi)/t;function Nl(e){const t=Ls,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),d=e*e*e%t,p=d*d*e%t,h=We(p,n,t)*p%t,y=We(h,n,t)*p%t,$=We(y,Gi,t)*d%t,k=We($,i,t)*$%t,w=We(k,s,t)*k%t,A=We(w,a,t)*w%t,T=We(A,c,t)*A%t,L=We(T,a,t)*w%t,P=We(L,n,t)*p%t,u=We(P,o,t)*k%t,f=We(u,r,t)*d%t,l=We(f,Gi,t);if(!ru.eql(ru.sqr(l),e))throw new Error("Cannot find square root");return l}const ru=iw(Ls,void 0,void 0,{sqrt:Nl}),ta=gw({a:BigInt(0),b:BigInt(7),Fp:ru,n:Ki,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ki,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ol*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=pc(s*e,t),c=pc(-r*e,t);let d=Te(e-a*n-c*i,t),p=Te(-a*r-c*s,t);const h=d>o,y=p>o;if(h&&(d=t-d),y&&(p=t-p),d>o||p>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:d,k2neg:y,k2:p}}}},eu),Is=BigInt(0),zl=e=>typeof e=="bigint"&&Is<e&&e<Ls,mw=e=>typeof e=="bigint"&&Is<e&&e<Ki,gc={};function Zi(e,...t){let n=gc[e];if(n===void 0){const r=eu(Uint8Array.from(e,i=>i.charCodeAt(0)));n=zn(r,r),gc[e]=n}return eu(zn(n,...t))}const na=e=>e.toRawBytes(!0).slice(1),iu=e=>cn(e,32),ao=e=>Te(e,Ls),Zr=e=>Te(e,Ki),ra=ta.ProjectivePoint,ww=(e,t,n)=>ra.BASE.multiplyAndAddUnsafe(e,t,n);function su(e){let t=ta.utils.normPrivateKeyToScalar(e),n=ra.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Zr(-t),bytes:na(n)}}function Rl(e){if(!zl(e))throw new Error("bad x: need 0 < x < p");const t=ao(e*e),n=ao(t*e+BigInt(7));let r=Nl(n);r%Gi!==Is&&(r=ao(-r));const i=new ra(e,r,Ol);return i.assertValidity(),i}function xl(...e){return Zr(Ve(Zi("BIP0340/challenge",...e)))}function bw(e){return su(e).bytes}function yw(e,t,n=kl(32)){const r=Le("message",e),{bytes:i,scalar:s}=su(t),o=Le("auxRand",n,32),a=iu(s^Ve(Zi("BIP0340/aux",o))),c=Zi("BIP0340/nonce",a,i,r),d=Zr(Ve(c));if(d===Is)throw new Error("sign failed: k is zero");const{bytes:p,scalar:h}=su(d),y=xl(p,i,r),$=new Uint8Array(64);if($.set(p,0),$.set(iu(Zr(h+y*s)),32),!Ml($,r,i))throw new Error("sign: Invalid signature produced");return $}function Ml(e,t,n){const r=Le("signature",e,64),i=Le("message",t),s=Le("publicKey",n,32);try{const o=Rl(Ve(s)),a=Ve(r.subarray(0,32));if(!zl(a))return!1;const c=Ve(r.subarray(32,64));if(!mw(c))return!1;const d=xl(iu(a),na(o),i),p=ww(o,c,Zr(-d));return!(!p||!p.hasEvenY()||p.toAffine().x!==a)}catch{return!1}}const xe={getPublicKey:bw,sign:yw,verify:Ml,utils:{randomPrivateKey:ta.utils.randomPrivateKey,lift_x:Rl,pointToBytes:na,numberToBytesBE:cn,bytesToNumberBE:Ve,taggedHash:Zi,mod:Te}};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jl=e=>e instanceof Uint8Array,co=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ft=(e,t)=>e<<32-t|e>>>t,vw=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!vw)throw new Error("Non little-endian hardware is not supported");const _w=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function he(e){if(!jl(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=_w[e[n]];return t}function Hl(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const i=r*2,s=e.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Ew(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ul(e){if(typeof e=="string"&&(e=Ew(e)),!jl(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}class kw{clone(){return this._cloneInto()}}function Dl(e){const t=r=>e().update(Ul(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function ou(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Aw(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Vl(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function $w(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ou(e.outputLen),ou(e.blockLen)}function Sw(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Tw(e,t){Vl(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const lo={number:ou,bool:Aw,bytes:Vl,hash:$w,exists:Sw,output:Tw};function Pw(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,d=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+d,a,r)}class Bw extends kw{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=co(this.buffer)}update(t){lo.exists(this);const{view:n,buffer:r,blockLen:i}=this;t=Ul(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=co(t);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){lo.exists(this),lo.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;Pw(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=co(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<d;h++)a.setUint32(4*h,p[h],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%n&&t.buffer.set(r),t}}const Lw=(e,t,n)=>e&t^~e&n,Iw=(e,t,n)=>e&t^e&n^t&n,Cw=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Zt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Yt=new Uint32Array(64);class Fl extends Bw{constructor(){super(64,32,8,!1),this.A=Zt[0]|0,this.B=Zt[1]|0,this.C=Zt[2]|0,this.D=Zt[3]|0,this.E=Zt[4]|0,this.F=Zt[5]|0,this.G=Zt[6]|0,this.H=Zt[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[t,n,r,i,s,o,a,c]}set(t,n,r,i,s,o,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let h=0;h<16;h++,n+=4)Yt[h]=t.getUint32(n,!1);for(let h=16;h<64;h++){const y=Yt[h-15],$=Yt[h-2],k=ft(y,7)^ft(y,18)^y>>>3,w=ft($,17)^ft($,19)^$>>>10;Yt[h]=w+Yt[h-7]+k+Yt[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:d,H:p}=this;for(let h=0;h<64;h++){const y=ft(a,6)^ft(a,11)^ft(a,25),$=p+y+Lw(a,c,d)+Cw[h]+Yt[h]|0,w=(ft(r,2)^ft(r,13)^ft(r,22))+Iw(r,i,s)|0;p=d,d=c,c=a,a=o+$|0,o=s,s=i,i=r,r=$+w|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,i,s,o,a,c,d,p)}roundClean(){Yt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Ow extends Fl{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const ia=Dl(()=>new Fl);Dl(()=>new Ow);var kn=Symbol("verified"),Nw=e=>e instanceof Object;function zw(e){if(!Nw(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var Rw=new TextEncoder;function Lr(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var xw=class{constructor(t){U(this,"value"),U(this,"next",null),U(this,"prev",null),this.value=t}},Mw=class{constructor(){U(this,"first"),U(this,"last"),this.first=null,this.last=null}enqueue(t){const n=new xw(t);return this.last?this.last===this.first?(this.last=n,this.last.prev=this.first,this.first.next=n):(n.prev=this.last,this.last.next=n,this.last=n):(this.first=n,this.last=n),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const n=this.first;return this.first=null,this.last=null,n.value}const t=this.first;return this.first=t.next,t.value}},jw=class{generateSecretKey(){return xe.utils.randomPrivateKey()}getPublicKey(t){return he(xe.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=he(xe.getPublicKey(n)),r.id=fo(r),r.sig=he(xe.sign(fo(r),n)),r[kn]=!0,r}verifyEvent(t){if(typeof t[kn]=="boolean")return t[kn];const n=fo(t);if(n!==t.id)return t[kn]=!1,!1;try{const r=xe.verify(t.sig,n,t.pubkey);return t[kn]=r,r}catch{return t[kn]=!1,!1}}};function Hw(e){if(!zw(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function fo(e){let t=ia(Rw.encode(Hw(e)));return he(t)}var Cs=new jw;Cs.generateSecretKey;Cs.getPublicKey;Cs.finalizeEvent;var Uw=Cs.verifyEvent,Dw=22242;function Vw(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(n=>t.id.startsWith(n))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(n=>t.pubkey.startsWith(n)))return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),i=e[`#${r}`];if(i&&!t.tags.find(([s,o])=>s===n.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function Fw(e,t){for(let n=0;n<e.length;n++)if(Vw(e[n],t))return!0;return!1}function qw(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,i=e.slice(r).indexOf('"')+r+1;return e.slice(i,i+64)}function Ww(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,i=e.slice(r+1,80).indexOf('"');if(i===-1)return null;let s=r+1+i;return e.slice(r+1,s)}function Kw(e,t){return{kind:Dw,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function Gw(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var Zw=e=>(e[kn]=!0,!0),ql;try{ql=WebSocket}catch{}var Wl=class{constructor(t,n){U(this,"url"),U(this,"_connected",!1),U(this,"onclose",null),U(this,"onnotice",r=>console.debug(`NOTICE from ${this.url}: ${r}`)),U(this,"_onauth",null),U(this,"baseEoseTimeout",4400),U(this,"connectionTimeout",4400),U(this,"openSubs",new Map),U(this,"connectionTimeoutHandle"),U(this,"connectionPromise"),U(this,"openCountRequests",new Map),U(this,"openEventPublishes",new Map),U(this,"ws"),U(this,"incomingMessageQueue",new Mw),U(this,"queueRunning",!1),U(this,"challenge"),U(this,"serial",0),U(this,"verifyEvent"),this.url=Lr(t),this.verifyEvent=n.verifyEvent}static async connect(t,n){const r=new Wl(t,n);return await r.connect(),r}closeAllSubscriptions(t){for(let[n,r]of this.openSubs)r.close(t);this.openSubs.clear();for(let[n,r]of this.openEventPublishes)r.reject(new Error(t));this.openEventPublishes.clear();for(let[n,r]of this.openCountRequests)r.reject(new Error(t));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((t,n)=>{this.connectionTimeoutHandle=setTimeout(()=>{var r;n("connection timed out"),this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new ql(this.url)}catch(r){n(r);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,t()},this.ws.onerror=r=>{var i;n(r.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(i=this.onclose)==null||i.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var r;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await Gw();this.queueRunning=!1}handleNext(){var t,n,r;const i=this.incomingMessageQueue.dequeue();if(!i)return!1;const s=Ww(i);if(s){const o=this.openSubs.get(s);if(!o)return;const a=qw(i,"id"),c=(t=o.alreadyHaveEvent)==null?void 0:t.call(o,a);if((n=o.receivedEvent)==null||n.call(o,this,a),c)return}try{let o=JSON.parse(i);switch(o[0]){case"EVENT":{const a=this.openSubs.get(o[1]),c=o[2];this.verifyEvent(c)&&Fw(a.filters,c)&&a.onevent(c);return}case"COUNT":{const a=o[1],c=o[2],d=this.openCountRequests.get(a);d&&(d.resolve(c.count),this.openCountRequests.delete(a));return}case"EOSE":{const a=this.openSubs.get(o[1]);if(!a)return;a.receivedEose();return}case"OK":{const a=o[1],c=o[2],d=o[3],p=this.openEventPublishes.get(a);c?p.resolve(d):p.reject(new Error(d)),this.openEventPublishes.delete(a);return}case"CLOSED":{const a=o[1],c=this.openSubs.get(a);if(!c)return;c.closed=!0,c.close(o[2]);return}case"NOTICE":this.onnotice(o[1]);return;case"AUTH":{this.challenge=o[1],(r=this._onauth)==null||r.call(this,o[1]);return}}}catch{return}}async send(t){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var n;(n=this.ws)==null||n.send(t)})}async auth(t){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const n=await t(Kw(this.url,this.challenge)),r=new Promise((i,s)=>{this.openEventPublishes.set(n.id,{resolve:i,reject:s})});return this.send('["AUTH",'+JSON.stringify(n)+"]"),r}async publish(t){const n=new Promise((r,i)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:i})});return this.send('["EVENT",'+JSON.stringify(t)+"]"),n}async count(t,n){this.serial++;const r=(n==null?void 0:n.id)||"count:"+this.serial,i=new Promise((s,o)=>{this.openCountRequests.set(r,{resolve:s,reject:o})});return this.send('["COUNT","'+r+'",'+JSON.stringify(t)+"]"),i}subscribe(t,n){const r=this.prepareSubscription(t,n);return r.fire(),r}prepareSubscription(t,n){this.serial++;const r=n.id||"sub:"+this.serial,i=new Yw(this,r,t,n);return this.openSubs.set(r,i),i}close(){var t;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(t=this.ws)==null||t.close()}_onmessage(t){this.incomingMessageQueue.enqueue(t.data),this.queueRunning||this.runQueue()}},Yw=class{constructor(t,n,r,i){U(this,"relay"),U(this,"id"),U(this,"closed",!1),U(this,"eosed",!1),U(this,"filters"),U(this,"alreadyHaveEvent"),U(this,"receivedEvent"),U(this,"onevent"),U(this,"oneose"),U(this,"onclose"),U(this,"eoseTimeout"),U(this,"eoseTimeoutHandle"),this.relay=t,this.filters=r,this.id=n,this.alreadyHaveEvent=i.alreadyHaveEvent,this.receivedEvent=i.receivedEvent,this.eoseTimeout=i.eoseTimeout||t.baseEoseTimeout,this.oneose=i.oneose,this.onclose=i.onclose,this.onevent=i.onevent||(s=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,s)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var t;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(t=this.oneose)==null||t.call(this))}close(t="closed by caller"){var n;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(n=this.onclose)==null||n.call(this,t)}},Xw=class{constructor(e){U(this,"relays",new Map),U(this,"seenOn",new Map),U(this,"trackRelays",!1),U(this,"verifyEvent"),U(this,"trustedRelayURLs",new Set),this.verifyEvent=e.verifyEvent}async ensureRelay(e,t){e=Lr(e);let n=this.relays.get(e);return n||(n=new Wl(e,{verifyEvent:this.trustedRelayURLs.has(e)?Zw:this.verifyEvent}),t!=null&&t.connectionTimeout&&(n.connectionTimeout=t.connectionTimeout),this.relays.set(e,n)),await n.connect(),n}close(e){e.map(Lr).forEach(t=>{var n;(n=this.relays.get(t))==null||n.close()})}subscribeMany(e,t,n){this.trackRelays&&(n.receivedEvent=(h,y)=>{let $=this.seenOn.get(y);$||($=new Set,this.seenOn.set(y,$)),$.add(h)});const r=new Set,i=[],s=[];let o=h=>{var y;s[h]=!0,s.filter($=>$).length===e.length&&((y=n.oneose)==null||y.call(n),o=()=>{})};const a=[];let c=(h,y)=>{var $;o(h),a[h]=y,a.filter(k=>k).length===e.length&&(($=n.onclose)==null||$.call(n,a),c=()=>{})};const d=h=>{var y;if((y=n.alreadyHaveEvent)!=null&&y.call(n,h))return!0;const $=r.has(h);return r.add(h),$},p=Promise.all(e.map(Lr).map(async(h,y,$)=>{if($.indexOf(h)!==y){c(y,"duplicate url");return}let k;try{k=await this.ensureRelay(h,{connectionTimeout:n.maxWait?Math.max(n.maxWait*.8,n.maxWait-1e3):void 0})}catch(A){c(y,(A==null?void 0:A.message)||String(A));return}let w=k.subscribe(t,{...n,oneose:()=>o(y),onclose:A=>c(y,A),alreadyHaveEvent:d,eoseTimeout:n.maxWait});i.push(w)}));return{async close(){await p,i.forEach(h=>{h.close()})}}}subscribeManyEose(e,t,n){const r=this.subscribeMany(e,t,{...n,oneose(){r.close()}});return r}async querySync(e,t,n){return new Promise(async r=>{const i=[];this.subscribeManyEose(e,[t],{...n,onevent(s){i.push(s)},onclose(s){r(i)}})})}async get(e,t,n){t.limit=1;const r=await this.querySync(e,t,n);return r.sort((i,s)=>s.created_at-i.created_at),r[0]||null}publish(e,t){return e.map(Lr).map(async(n,r,i)=>i.indexOf(n)!==r?Promise.reject("duplicate url"):(await this.ensureRelay(n)).publish(t))}},Jw=class extends Xw{constructor(){super({verifyEvent:Uw})}};const Yr=Symbol("store-raw"),gt=Symbol("store-node"),Ye=Symbol("store-has"),Kl=Symbol("store-self");function Gl(e){let t=e[De];if(!t&&(Object.defineProperty(e,De,{value:t=new Proxy(e,eb)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,s=n.length;i<s;i++){const o=n[i];r[o].get&&Object.defineProperty(e,o,{enumerable:r[o].enumerable,get:r[o].get.bind(t)})}}return t}function Ot(e){let t;return e!=null&&typeof e=="object"&&(e[De]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Nt(e,t=new Set){let n,r,i,s;if(n=e!=null&&e[Yr])return n;if(!Ot(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,a=e.length;o<a;o++)i=e[o],(r=Nt(i,t))!==i&&(e[o]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let c=0,d=o.length;c<d;c++)s=o[c],!a[s].get&&(i=e[s],(r=Nt(i,t))!==i&&(e[s]=r))}return e}function wr(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function Rn(e,t,n){if(e[t])return e[t];const[r,i]=_e(n,{equals:!1,internal:!0});return r.$=i,e[t]=r}function Qw(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===De||t===gt||(delete n.value,delete n.writable,n.get=()=>e[De][t]),n}function sa(e){pr()&&Rn(wr(e,gt),Kl)()}function Zl(e){return sa(e),Reflect.ownKeys(e)}const eb={get(e,t,n){if(t===Yr)return e;if(t===De)return n;if(t===Gr)return sa(e),n;const r=wr(e,gt),i=r[t];let s=i?i():e[t];if(t===gt||t===Ye||t==="__proto__")return s;if(!i){const o=Object.getOwnPropertyDescriptor(e,t);pr()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(s=Rn(r,t,s)())}return Ot(s)?Gl(s):s},has(e,t){return t===Yr||t===De||t===Gr||t===gt||t===Ye||t==="__proto__"?!0:(pr()&&Rn(wr(e,Ye),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Zl,getOwnPropertyDescriptor:Qw};function je(e,t,n,r=!1){if(!r&&e[t]===n)return;const i=e[t],s=e.length;n===void 0?(delete e[t],e[Ye]&&e[Ye][t]&&i!==void 0&&e[Ye][t].$()):(e[t]=n,e[Ye]&&e[Ye][t]&&i===void 0&&e[Ye][t].$());let o=wr(e,gt),a;if((a=Rn(o,t,i))&&a.$(()=>n),Array.isArray(e)&&e.length!==s){for(let c=e.length;c<s;c++)(a=o[c])&&a.$();(a=Rn(o,"length",s))&&a.$(e.length)}(a=o[Kl])&&a.$()}function Yl(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];je(e,i,t[i])}}function tb(e,t){if(typeof t=="function"&&(t=t(e)),t=Nt(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const i=t[n];e[n]!==i&&je(e,n,i)}je(e,"length",r)}else Yl(e,t)}function Ir(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();const o=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let c=0;c<r.length;c++)Ir(e,[r[c]].concat(t),n);return}else if(a&&o==="function"){for(let c=0;c<e.length;c++)r(e[c],c)&&Ir(e,[c].concat(t),n);return}else if(a&&o==="object"){const{from:c=0,to:d=e.length-1,by:p=1}=r;for(let h=c;h<=d;h+=p)Ir(e,[h].concat(t),n);return}else if(t.length>1){Ir(e[r],t,[r].concat(n));return}i=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(i,n),s===i)||r===void 0&&s==null||(s=Nt(s),r===void 0||Ot(i)&&Ot(s)&&!Array.isArray(s)?Yl(i,s):je(e,r,s))}function nb(...[e,t]){const n=Nt(e||{}),r=Array.isArray(n),i=Gl(n);function s(...o){Qn(()=>{r&&o.length===1?tb(n,o[0]):Ir(n,o)})}return[i,s]}function rb(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||n.set||!n.configurable||t===De||t===gt||(delete n.value,delete n.writable,n.get=()=>e[De][t],n.set=r=>e[De][t]=r),n}const ib={get(e,t,n){if(t===Yr)return e;if(t===De)return n;if(t===Gr)return sa(e),n;const r=wr(e,gt),i=r[t];let s=i?i():e[t];if(t===gt||t===Ye||t==="__proto__")return s;if(!i){const o=Object.getOwnPropertyDescriptor(e,t),a=typeof s=="function";if(pr()&&(!a||e.hasOwnProperty(t))&&!(o&&o.get))s=Rn(r,t,s)();else if(s!=null&&a&&s===Array.prototype[t])return(...c)=>Qn(()=>Array.prototype[t].apply(n,c))}return Ot(s)?Xl(s):s},has(e,t){return t===Yr||t===De||t===Gr||t===gt||t===Ye||t==="__proto__"?!0:(pr()&&Rn(wr(e,Ye),t)(),t in e)},set(e,t,n){return Qn(()=>je(e,t,Nt(n))),!0},deleteProperty(e,t){return Qn(()=>je(e,t,void 0,!0)),!0},ownKeys:Zl,getOwnPropertyDescriptor:rb};function Xl(e){let t=e[De];if(!t){Object.defineProperty(e,De,{value:t=new Proxy(e,ib)});const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,s=n.length;i<s;i++){const o=n[i];if(r[o].get){const a=r[o].get.bind(t);Object.defineProperty(e,o,{get:a})}if(r[o].set){const a=r[o].set;Object.defineProperty(e,o,{set:d=>Qn(()=>a.call(t,d))})}}}return t}function oa(e,t){const n=Nt(e||{});return Xl(n)}const uu=Symbol("store-root");function Gn(e,t,n,r,i){const s=t[n];if(e===s)return;if(n!==uu&&(!Ot(e)||!Ot(s)||i&&e[i]!==s[i])){je(t,n,e);return}if(Array.isArray(e)){if(e.length&&s.length&&(!r||i&&e[0]&&e[0][i]!=null)){let c,d,p,h,y,$,k,w;for(p=0,h=Math.min(s.length,e.length);p<h&&(s[p]===e[p]||i&&s[p]&&e[p]&&s[p][i]===e[p][i]);p++)Gn(e[p],s,p,r,i);const A=new Array(e.length),T=new Map;for(h=s.length-1,y=e.length-1;h>=p&&y>=p&&(s[h]===e[y]||i&&s[p]&&e[p]&&s[h][i]===e[y][i]);h--,y--)A[y]=s[h];if(p>y||p>h){for(d=p;d<=y;d++)je(s,d,e[d]);for(;d<e.length;d++)je(s,d,A[d]),Gn(e[d],s,d,r,i);s.length>e.length&&je(s,"length",e.length);return}for(k=new Array(y+1),d=y;d>=p;d--)$=e[d],w=i&&$?$[i]:$,c=T.get(w),k[d]=c===void 0?-1:c,T.set(w,d);for(c=p;c<=h;c++)$=s[c],w=i&&$?$[i]:$,d=T.get(w),d!==void 0&&d!==-1&&(A[d]=s[c],d=k[d],T.set(w,d));for(d=p;d<e.length;d++)d in A?(je(s,d,A[d]),Gn(e[d],s,d,r,i)):je(s,d,e[d])}else for(let c=0,d=e.length;c<d;c++)Gn(e[c],s,c,r,i);s.length>e.length&&je(s,"length",e.length);return}const o=Object.keys(e);for(let c=0,d=o.length;c<d;c++)Gn(e[o[c]],s,o[c],r,i);const a=Object.keys(s);for(let c=0,d=a.length;c<d;c++)e[a[c]]===void 0&&je(s,a[c],void 0)}function sb(e,t={}){const{merge:n,key:r="id"}=t,i=Nt(e);return s=>{if(!Ot(s)||!Ot(i))return i;const o=Gn(i,{[uu]:s},uu,n,r);return o===void 0?s:o}}const tr=new Jw,V=oa({rootEventIds:[],filter:{},profiles:()=>[]}),ze=oa({}),ob=["reply","likes","zaps","publish","watch","replyAnonymously","hideContent"],ub=e=>ob.includes(e);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ar(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Ht(...e){const t=(i,s)=>o=>i(s(o)),n=Array.from(e).reverse().reduce((i,s)=>i?t(i,s.encode):s.encode,void 0),r=e.reduce((i,s)=>i?t(i,s.decode):s.decode,void 0);return{encode:n,decode:r}}function Ut(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(Ar(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function Dt(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Os(e,t="="){if(Ar(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of n)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function Jl(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function mc(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],s=Array.from(e);for(s.forEach(o=>{if(Ar(o),o<0||o>=t)throw new Error(`Wrong integer: ${o}`)});;){let o=0,a=!0;for(let c=r;c<s.length;c++){const d=s[c],p=t*o+d;if(!Number.isSafeInteger(p)||t*o/t!==o||p-d!==t*o)throw new Error("convertRadix: carry overflow");if(o=p%n,s[c]=Math.floor(p/n),!Number.isSafeInteger(s[c])||s[c]*n+o!==p)throw new Error("convertRadix: carry overflow");if(a)s[c]?a=!1:r=c;else continue}if(i.push(o),a)break}for(let o=0;o<e.length-1&&e[o]===0;o++)i.push(0);return i.reverse()}const Ql=(e,t)=>t?Ql(t,e%t):e,Yi=(e,t)=>e+(t-Ql(e,t));function au(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Yi(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Yi(t,n)}`);let i=0,s=0;const o=2**n-1,a=[];for(const c of e){if(Ar(c),c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(i=i<<t|c,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)a.push((i>>s-n&o)>>>0);i&=2**s-1}if(i=i<<n-s&o,!r&&s>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&a.push(i>>>0),a}function ab(e){return Ar(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return mc(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(mc(t,e,2**8))}}}function yn(e,t=!1){if(Ar(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Yi(8,e)>32||Yi(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return au(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(au(n,e,8,t))}}}function wc(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}const cb=Ht(yn(4),Ut("0123456789ABCDEF"),Dt("")),db=Ht(yn(5),Ut("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Os(5),Dt(""));Ht(yn(5),Ut("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Os(5),Dt(""));Ht(yn(5),Ut("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Dt(""),Jl(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const lb=Ht(yn(6),Ut("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Os(6),Dt("")),fb=Ht(yn(6),Ut("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Os(6),Dt("")),ua=e=>Ht(ab(58),Ut(e),Dt("")),cu=ua("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");ua("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");ua("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const bc=[0,2,3,5,6,7,9,10,11],hb={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=cu.encode(r).padStart(bc[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),i=bc.indexOf(r.length),s=cu.decode(r);for(let o=0;o<s.length-i;o++)if(s[o]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(t)}},du=Ht(Ut("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Dt("")),yc=[996825010,642813549,513874426,1027748829,705979059];function Sr(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<yc.length;r++)(t>>r&1)===1&&(n^=yc[r]);return n}function vc(e,t,n=1){const r=e.length;let i=1;for(let s=0;s<r;s++){const o=e.charCodeAt(s);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);i=Sr(i)^o>>5}i=Sr(i);for(let s=0;s<r;s++)i=Sr(i)^e.charCodeAt(s)&31;for(let s of t)i=Sr(i)^s;for(let s=0;s<6;s++)i=Sr(i);return i^=n,du.encode(au([i%2**30],30,5,!1))}function ef(e){const t=e==="bech32"?1:734539939,n=yn(5),r=n.decode,i=n.encode,s=wc(r);function o(p,h,y=90){if(typeof p!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof p}`);if(!Array.isArray(h)||h.length&&typeof h[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof h}`);const $=p.length+7+h.length;if(y!==!1&&$>y)throw new TypeError(`Length ${$} exceeds limit ${y}`);return p=p.toLowerCase(),`${p}1${du.encode(h)}${vc(p,h,t)}`}function a(p,h=90){if(typeof p!="string")throw new Error(`bech32.decode input should be string, not ${typeof p}`);if(p.length<8||h!==!1&&p.length>h)throw new TypeError(`Wrong string length: ${p.length} (${p}). Expected (8..${h})`);const y=p.toLowerCase();if(p!==y&&p!==p.toUpperCase())throw new Error("String must be lowercase or uppercase");p=y;const $=p.lastIndexOf("1");if($===0||$===-1)throw new Error('Letter "1" must be present between prefix and data only');const k=p.slice(0,$),w=p.slice($+1);if(w.length<6)throw new Error("Data must be at least 6 characters long");const A=du.decode(w).slice(0,-6),T=vc(k,A,t);if(!w.endsWith(T))throw new Error(`Invalid checksum in ${p}: expected "${T}"`);return{prefix:k,words:A}}const c=wc(a);function d(p){const{prefix:h,words:y}=a(p,!1);return{prefix:h,words:y,bytes:r(y)}}return{encode:o,decode:a,decodeToBytes:d,decodeUnsafe:c,fromWords:r,fromWordsUnsafe:s,toWords:i}}const br=ef("bech32");ef("bech32m");const pb={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},gb=Ht(yn(4),Ut("0123456789abcdef"),Dt(""),Jl(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),mb={utf8:pb,hex:gb,base16:cb,base32:db,base64:lb,base64url:fb,base58:cu,base58xmr:hb};`${Object.keys(mb).join(", ")}`;var Tr=new TextDecoder("utf-8");new TextEncoder;var tf=5e3;function ki(e){var t,n,r,i,s,o,a,c;let{prefix:d,words:p}=br.decode(e,tf),h=new Uint8Array(br.fromWords(p));switch(d){case"nprofile":{let y=hi(h);if(!((t=y[0])!=null&&t[0]))throw new Error("missing TLV 0 for nprofile");if(y[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:he(y[0][0]),relays:y[1]?y[1].map($=>Tr.decode($)):[]}}}case"nevent":{let y=hi(h);if(!((n=y[0])!=null&&n[0]))throw new Error("missing TLV 0 for nevent");if(y[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(y[2]&&y[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(y[3]&&y[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:he(y[0][0]),relays:y[1]?y[1].map($=>Tr.decode($)):[],author:(r=y[2])!=null&&r[0]?he(y[2][0]):void 0,kind:(i=y[3])!=null&&i[0]?parseInt(he(y[3][0]),16):void 0}}}case"naddr":{let y=hi(h);if(!((s=y[0])!=null&&s[0]))throw new Error("missing TLV 0 for naddr");if(!((o=y[2])!=null&&o[0]))throw new Error("missing TLV 2 for naddr");if(y[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((a=y[3])!=null&&a[0]))throw new Error("missing TLV 3 for naddr");if(y[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Tr.decode(y[0][0]),pubkey:he(y[2][0]),kind:parseInt(he(y[3][0]),16),relays:y[1]?y[1].map($=>Tr.decode($)):[]}}}case"nrelay":{let y=hi(h);if(!((c=y[0])!=null&&c[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Tr.decode(y[0][0])}}case"nsec":return{type:d,data:h};case"npub":case"note":return{type:d,data:he(h)};default:throw new Error(`unknown prefix ${d}`)}}function hi(e){let t={},n=e;for(;n.length>0;){let r=n[0],i=n[1],s=n.slice(2,2+i);if(n=n.slice(2+i),s.length<i)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(s)}return t}function nf(e){return rf("npub",Hl(e))}function _c(e){return rf("note",Hl(e))}function wb(e,t){let n=br.toWords(t);return br.encode(e,n,tf)}function rf(e,t){return wb(e,t)}var Pr=new TextDecoder("utf-8");new TextEncoder;var bb=5e3,yb=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function sf(e){var t,n,r,i,s,o,a,c;let{prefix:d,words:p}=br.decode(e,bb),h=new Uint8Array(br.fromWords(p));switch(d){case"nprofile":{let y=pi(h);if(!((t=y[0])!=null&&t[0]))throw new Error("missing TLV 0 for nprofile");if(y[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:he(y[0][0]),relays:y[1]?y[1].map($=>Pr.decode($)):[]}}}case"nevent":{let y=pi(h);if(!((n=y[0])!=null&&n[0]))throw new Error("missing TLV 0 for nevent");if(y[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(y[2]&&y[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(y[3]&&y[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:he(y[0][0]),relays:y[1]?y[1].map($=>Pr.decode($)):[],author:(r=y[2])!=null&&r[0]?he(y[2][0]):void 0,kind:(i=y[3])!=null&&i[0]?parseInt(he(y[3][0]),16):void 0}}}case"naddr":{let y=pi(h);if(!((s=y[0])!=null&&s[0]))throw new Error("missing TLV 0 for naddr");if(!((o=y[2])!=null&&o[0]))throw new Error("missing TLV 2 for naddr");if(y[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((a=y[3])!=null&&a[0]))throw new Error("missing TLV 3 for naddr");if(y[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Pr.decode(y[0][0]),pubkey:he(y[2][0]),kind:parseInt(he(y[3][0]),16),relays:y[1]?y[1].map($=>Pr.decode($)):[]}}}case"nrelay":{let y=pi(h);if(!((c=y[0])!=null&&c[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Pr.decode(y[0][0])}}case"nsec":return{type:d,data:h};case"npub":case"note":return{type:d,data:he(h)};default:throw new Error(`unknown prefix ${d}`)}}function pi(e){let t={},n=e;for(;n.length>0;){let r=n[0],i=n[1],s=n.slice(2,2+i);if(n=n.slice(2+i),s.length<i)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(s)}return t}var vb=new RegExp(`nostr:(${yb.source})`),of=()=>new RegExp(`\\b${vb.source}\\b`,"g");function*_b(e){const t=e.matchAll(of());for(const n of t)try{const[r,i]=n;yield{uri:r,value:i,decoded:sf(i),start:n.index,end:n.index+r.length}}catch{}}function Eb(e,t){return e.replaceAll(of(),(n,r)=>t({uri:n,value:r,decoded:sf(r)}))}var kb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ab(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uf={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(kb,function(){function n(a){return a.replace(/\\([(){}[\]#*+\-.!_\\])/g,function(c,d){return String.fromCharCode(1,i.indexOf(d)+s)}).replace(/(\*\*|__|~~)(\S(?:[\s\S]*?\S)?)\1/g,function(c,d,p){return d==="~~"?"<del>"+p+"</del>":"<b>"+p+"</b>"}).replace(/(\n|^|\W)([_\*])(\S(?:[\s\S]*?\S)?)\2(\W|$|\n)/g,function(c,d,p,h,y){return d+"<i>"+h+"</i>"+y}).replace(/(!?)\[([^\]<>]+)\]\((\+?)([^ \)<>]+)(?: "([^\(\)\"]+)")?\)/g,function(c,d,p,h,y,$){var k=$?' title="'+$+'"':"";return d?'<img src="'+o.href(y)+'" alt="'+p+'"'+k+"/>":(h&&(k+=' target="_blank"'),'<a href="'+o.href(y)+'"'+k+">"+p+"</a>")})}function r(a){return a.replace(/\x01([\x0f-\x1c])/g,function(c,d){return i.charAt(d.charCodeAt(0)-s)})}var i="\\[!]#{()}*+-._",s=16,o=function(a){return a.replace(/.+(?:\n.+)*/g,function(c){var d=/^\s{4}([^]*)$/.exec(c);if(d)return"<pre><code>"+d[1].replace(/\n    /g,`
`)+"</code></pre>";for(var p,h=[],y=n(c).split(`
`),$=0,k=y.length;k>$;++$){var w=y[$],A=/^\s{0,3}(\#{1,6})\s+(.*?)\s*#*\s*$/.exec(w);if(A)h.push(p=[A[2],"h",A[1].length]);else{var T=/^(\s*)(?:[-*]|(\d[.)])) (.+)$/.exec(w);T?h.push(p=[T[3],T[2]?"ol":"ul",T[1].length]):/^\s{0,3}([-])(\s*\1){2,}\s*$/.test(w)?h.push(p=["","hr"]):p&&p[1]!=="hr"&&p[1]!=="h"?p[0]+=`
`+w:h.push(p=[w,"p",""])}}var L="",P=[];for($=0,k=h.length;k>$;++$){p=h[$];var u=p[0],f=p[1],l=p[2];if(f==="ul"||f==="ol")!P.length||l>P[0][1]?(P.unshift([f,l]),L+="<"+P[0][0]+"><li>"+u):P.length>1&&l<=P[1][1]?(L+="</li></"+P.shift()[0]+">",--$):L+="</li><li>"+u;else{for(;P.length;)L+="</li></"+P.shift()[0]+">";L+=f==="hr"?"<hr/>":"<"+f+l+o.headAttrs(l,u)+">"+u+"</"+f+l+">"}}for(;P.length;)L+="</li></"+P.shift()[0]+">";return r(L)})};return o.href=function(a){return a},o.headAttrs=function(a,c){return""},o})})(uf);var $b=uf.exports;const Sb=Ab($b);function Tb(e){return async()=>new Promise(t=>{setTimeout(t,e)})}function Pb(e,{delay:t=void 0}={}){if(typeof t!="number"&&t!==void 0)throw new TypeError(`Expected \`interval\` to be of type \`number\` but received type \`${typeof t}\``);const n=t===void 0?async()=>{}:Tb(t);let r=[];return i=>{r.push(i),r.length===1&&(async()=>(await n(),e(r),r=[]))()}}const Bb=(e,t)=>t.some(n=>e instanceof n);let Ec,kc;function Lb(){return Ec||(Ec=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ib(){return kc||(kc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const af=new WeakMap,lu=new WeakMap,cf=new WeakMap,ho=new WeakMap,aa=new WeakMap;function Cb(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(en(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&af.set(n,e)}).catch(()=>{}),aa.set(t,e),t}function Ob(e){if(lu.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});lu.set(e,t)}let fu={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return lu.get(e);if(t==="objectStoreNames")return e.objectStoreNames||cf.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return en(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Nb(e){fu=e(fu)}function zb(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(po(this),t,...n);return cf.set(r,t.sort?t.sort():[t]),en(r)}:Ib().includes(e)?function(...t){return e.apply(po(this),t),en(af.get(this))}:function(...t){return en(e.apply(po(this),t))}}function Rb(e){return typeof e=="function"?zb(e):(e instanceof IDBTransaction&&Ob(e),Bb(e,Lb())?new Proxy(e,fu):e)}function en(e){if(e instanceof IDBRequest)return Cb(e);if(ho.has(e))return ho.get(e);const t=Rb(e);return t!==e&&(ho.set(e,t),aa.set(t,e)),t}const po=e=>aa.get(e);function xb(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=en(o);return r&&o.addEventListener("upgradeneeded",c=>{r(en(o.result),c.oldVersion,c.newVersion,en(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const Mb=["get","getKey","getAll","getAllKeys","count"],jb=["put","add","delete","clear"],go=new Map;function Ac(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(go.get(t))return go.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=jb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Mb.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),i&&c.done]))[0]};return go.set(t,s),s}Nb(e=>({...e,get:(t,n,r)=>Ac(t,n)||e.get(t,n,r),has:(t,n)=>!!Ac(t,n)||e.has(t,n)}));function Hb(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)r[0]==="e"&&r[1]&&n.push(r),r[0]==="p"&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const i=n[r],[s,o,a,c]=i,d={id:o,relays:a?[a]:[]},p=r===0,h=r===n.length-1;if(c==="root"){t.root=d;continue}if(c==="reply"){t.reply=d;continue}if(c==="mention"){t.mentions.push(d);continue}if(p){t.root=d;continue}if(h){t.reply=d;continue}t.mentions.push(d)}return t}const Cr={events:"id",aggregates:["eid","k"],profiles:["pk"],relays:["n","a"]},Ub=async(e,t)=>{if(t<=1){const s=[...e.objectStoreNames];await Promise.all(s.map(o=>e.deleteObjectStore(o)))}const n=e.createObjectStore("events",{keyPath:Cr.events});n.createIndex("a","a"),n.createIndex("ro","ro"),n.createIndex("r","r"),n.createIndex("d","d"),n.createIndex("k","k"),e.createObjectStore("aggregates",{keyPath:Cr.aggregates}),e.createObjectStore("profiles",{keyPath:Cr.profiles}).createIndex("l","l"),e.createObjectStore("relays",{keyPath:Cr.relays}).createIndex("a","a")},Xi=e=>{var t,n;const r=Hb(e),i=e.tags.find(w=>w[0]==="a"),s=i&&i[1],o=i&&i[3]==="mention",a=e.tags.find(w=>w[0]==="r"),c=a&&a[1],d=e.tags.filter(w=>w[0]==="t"),p=[...new Set(d.map(w=>w[1]))],h=e.tags.find(w=>w[0]==="d"),y=h&&h[1],$=e.tags.find(w=>w[0]==="title"),k=$&&$[1];return{id:e.id??"",k:e.kind,c:e.content,ts:e.created_at,pk:e.pubkey,ro:(t=r.root)==null?void 0:t.id,re:(n=r.reply)==null?void 0:n.id,me:r.mentions.map(w=>w.id),p:r.profiles.map(w=>w.pubkey),a:s,am:o,r:c,t:p,d:y,tl:k}},Db=()=>({});let nr=Db(),$c=!0,Sc;const Ns=async()=>{if($c!==!1)try{return Sc||(Sc=await xb("zapthreads",2,{upgrade:Ub}))}catch{$c=!1}},gi=e=>{const t=ae(Jt(e,()=>{const[n,r,i]=e(),s=()=>yr(n,r,i),[o,{mutate:a}]=dl(()=>Rr[n],s,{initialValue:[],storage:df});return yr(n,r,i).then(a),o}));return()=>t()()},Tc=e=>{const t=ae(Jt(e,()=>{const[n,r,i]=e(),s=()=>rr(n,r,i),[o,{mutate:a}]=dl(()=>Rr[n],s,{initialValue:void 0,storage:df});return rr(n,r,i).then(a),o}));return()=>t()()},yr=async(e,t,n)=>{const r=await Ns();if(!r){const i=nr[e];if(i){if(n){const s=Array.isArray(t)?t:[t];return Object.values(i).filter(o=>s.includes(o[n.index]))}return Object.values(i)}return[]}if(t&&n){if(Array.isArray(t)){const i=t.map(o=>r.getAllFromIndex(e,n.index,o));return(await Promise.all(i)).flat()}return r.getAllFromIndex(e,n.index,t)}return r.getAll(e)},rr=async(e,t,n)=>{const r=await Ns();if(!r){const i=nr[e];if(i){if(n)return Object.values(i).find(o=>o[n.index]===t);const s=(t.lower?t.lower:t).toString();return i[s]}return}return n?r.getFromIndex(e,n.index,t):r.get(e,t)},mo={},Pc=(e,t)=>{nr[e]??(nr[e]={});for(const n of t){let r=Cr[e];r=Array.isArray(r)?r:[r];const i=r.map(s=>n[s]).join(",");nr[e][i]=n}},Je=async(e,t,n={immediate:!1})=>{const r=await Ns();if(n.immediate){r?r.put(e,t):Pc(e,[t]),Rr[e]=+new Date;return}mo[e]||(mo[e]=Pb(async i=>{if(!r){Pc(e,i),Rr[e]=+new Date;return}const s=r.transaction(e,"readwrite");await Promise.all([...i.map(a=>s.store.put(a)),s.done])&&(Rr[e]=+new Date)},{delay:96})),mo[e](t)},Vb=async()=>{const e=await Ns();if(!e){nr={};return}const t=[...e.objectStoreNames];await Promise.all(t.map(n=>e.clear(n)))},Rr=oa({});function df(e){const[t,n]=nb({value:e});return[()=>t.value,r=>{const i=Nt(t.value);return typeof r=="function"&&(r=r(i)),n("value",sb(r)),t.value}]}const lf=async(e,t,n)=>{const r=+new Date,i=216e5,s=[...new Set(e)].filter(a=>{const c=n.find(d=>d.pk===a);return!(c!=null&&c.l&&c.l>r-i)}).filter(a=>!!a);if(s.length===0)return;const o=await tr.querySync(t,{kinds:[0],authors:s});for(const a of s){const c=o.find(d=>d.pubkey===a);if(c){const d=JSON.parse(c.content),p=c.pubkey,h={pk:p,ts:c.created_at,i:d.image||d.picture,n:d.displayName||d.display_name||d.name},y=n.find($=>$.pk===p);!y||!(y!=null&&y.n)||y.ts<h.ts?Je("profiles",{...h,l:r}):Je("profiles",{...y,l:r})}}},Fb=async(e,t)=>{const r=(await yr("relays",e.value,{index:"a"})).filter(i=>t.includes(i.n)).map(i=>i.l);return r.length>0?Math.min(...r)+1:0},qb=async(e,t)=>{const n={};for(const i of t){const s=tr.seenOn.get(i.id);if(s)for(const o of s)i.ts>(n[o.url]||0)&&(n[o.url]=i.ts)}const r=await yr("relays",e.value,{index:"a"});for(const i in n){const s=r.find(o=>o.n===i);s?n[i]>s.l&&(s.l=n[i],Je("relays",s)):Je("relays",{n:i,a:e.value,l:n[i]})}},Wb=new RegExp("(?<=^|\\s)https?:\\/\\/[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&\\/\\/=]*)","gi"),Kb=/(\S*(?:png|jpg|jpeg|gif|webp))/gi,Gb=new RegExp("(?<=^|\\s)@?((naddr|npub|nevent|note)[a-z0-9]{20,})","g"),Zb=/\`(.*?)\`/g,Yb=/\B\#([a-zA-Z0-9]+\b)(?!;)/g,ff=(e,t,n=[])=>{let r=e.c;const i=t.urlPrefixes,s=t.profiles;r=r.replace(Wb,a=>a.match(Kb)?`![image](${a})`:`[${a}](${a})`);const o=[...new Set(e.t)];if(o.length>0){const a=new RegExp(`(^|\\s)\\#(${o.join("|")})`,"gi");r=r.replaceAll(a,`$1[#$2](${i.tag}$2)`)}return r=r.replaceAll(Gb,"nostr:$1"),r=Eb(r,({decoded:a,value:c})=>{switch(a.type){case"nprofile":let d=s().find(w=>w.pk===a.data.pubkey);return`[@${(d==null?void 0:d.n)||Sn(c)}](${i.nprofile}${c})`;case"npub":let h=s().find(w=>w.pk===a.data);return`[@${(h==null?void 0:h.n)||Sn(c)}](${i.npub}${c})`;case"note":return`[@${Sn(c)}](${i.note}${c})`;case"naddr":const $=a.data,k=n.find(w=>w.pk===$.pubkey&&w.d===$.identifier);return k&&k.tl?`[${k.tl}](${i.naddr}${c})`:`[@${Sn(c)}](${i.naddr}${c})`;case"nevent":return`[@${Sn(c)}](${i.nevent}${c})`;default:return c}}),r=r.replaceAll(Zb,"<code>$1</code>"),Sb(r.trim())},Xb=e=>{const t=[],n=_b(e);for(const s of n){if(s.decoded.type==="npub"&&t.push(["p",s.decoded.data]),s.decoded.type==="naddr"){const o=s.decoded.data;t.push(["a",`${o.kind}:${o.pubkey}:${o.identifier}`,"","mention"])}s.decoded.type==="nevent"&&t.push(["e",s.decoded.data.id]),s.decoded.type==="note"&&t.push(["e",s.decoded.data])}const r=e.matchAll(Yb),i=new Set([...r].map(s=>s[1].toLowerCase()));for(const s of i)t.push(["t",s]);return t},Jb=(e="")=>{const t={naddr:"https://nostr.com/",npub:"https://nostr.com/",nprofile:"https://nostr.com/",nevent:"https://nostr.com/",note:"https://nostr.com/",tag:"https://snort.social/t/"};for(const n of e.split(",")){const[r,i]=n.split(":");i&&(t[r]=`https://${i}`)}return t},Sn=e=>e.substring(0,8)+"..."+e.substring(e.length-4),Ai=e=>e.sort((t,n)=>(t.ts||0)>=(n.ts||0)?-1:1),ot=20,$i='data:image/svg+xml;utf-8,<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><circle cx="512" cy="512" r="512" fill="%23333" fill-rule="evenodd" /></svg>',Qb=e=>{const t=new Date,n=Math.floor((t.getTime()-e)/1e3);if(n<60)return"now";if(n<3600){const r=Math.floor(n/60);return`${r} minute${r===1?"":"s"} ago`}if(n<=86400){const r=Math.floor(n/3600);return`${r} hour${r===1?"":"s"} ago`}if(n<=604800){const r=Math.floor(n/86400);return`${r} day${r===1?"":"s"} ago`}if(n>604800){const r=new Date(e),i=r.toLocaleDateString("en-us",{day:"numeric",month:"long"}),s=r.getFullYear()===t.getFullYear()?"":" "+r.getFullYear();return"on "+i+s}return""},ey=e=>e<1e4?e.toString():e<1e6?Math.round(e/1e3)+"k":Math.round(e/1e6)+"M",ca=e=>e.children.reduce((t,n)=>t+ca(n),e.children.length),ty=/\/+$/,ny=(e,t=!0)=>{const n=new URL(e);return n.hash="",t&&(n.pathname=n.pathname.replace(ty,"")),n.toString()},hf=(e,t)=>{let n=e.map(i=>({...i,children:[]}));const r=new Set(n.filter(i=>{if(t){const s=t.id===(i.re||i.ro);return s&&(i.parent=t),s}return!n.find(s=>s.id===(i.re||i.ro))}));n=n.filter(i=>!r.has(i));for(let i of r)i.children.push(...hf(n,i));return[...r]};var Vn=Symbol("verified"),ry=e=>e instanceof Object;function iy(e){if(!ry(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var sy=new TextEncoder,oy=class{generateSecretKey(){return xe.utils.randomPrivateKey()}getPublicKey(t){return he(xe.getPublicKey(t))}finalizeEvent(t,n){const r=t;return r.pubkey=he(xe.getPublicKey(n)),r.id=xr(r),r.sig=he(xe.sign(xr(r),n)),r[Vn]=!0,r}verifyEvent(t){if(typeof t[Vn]=="boolean")return t[Vn];const n=xr(t);if(n!==t.id)return t[Vn]=!1,!1;try{const r=xe.verify(t.sig,n,t.pubkey);return t[Vn]=r,r}catch{return t[Vn]=!1,!1}}};function uy(e){if(!iy(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function xr(e){let t=ia(sy.encode(uy(e)));return he(t)}var zs=new oy,ay=zs.generateSecretKey,pf=zs.getPublicKey,gf=zs.finalizeEvent;zs.verifyEvent;var cy=e=>{hr(()=>{const t=e();t&&setTimeout(()=>t.focus())})},Fn=Symbol("verified"),dy=e=>e instanceof Object;function ly(e){if(!dy(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var fy=new TextEncoder;function hy(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var py=class{constructor(e){U(this,"value"),U(this,"next",null),U(this,"prev",null),this.value=e}},gy=class{constructor(){U(this,"first"),U(this,"last"),this.first=null,this.last=null}enqueue(e){const t=new py(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const t=this.first;return this.first=null,this.last=null,t.value}const e=this.first;return this.first=e.next,e.value}},my=class{generateSecretKey(){return xe.utils.randomPrivateKey()}getPublicKey(e){return he(xe.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=he(xe.getPublicKey(t)),n.id=wo(n),n.sig=he(xe.sign(wo(n),t)),n[Fn]=!0,n}verifyEvent(e){if(typeof e[Fn]=="boolean")return e[Fn];const t=wo(e);if(t!==e.id)return e[Fn]=!1,!1;try{const n=xe.verify(e.sig,t,e.pubkey);return e[Fn]=n,n}catch{return e[Fn]=!1,!1}}};function wy(e){if(!ly(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function wo(e){let t=ia(fy.encode(wy(e)));return he(t)}var Rs=new my;Rs.generateSecretKey;Rs.getPublicKey;Rs.finalizeEvent;var by=Rs.verifyEvent,yy=22242;function vy(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(n=>t.id.startsWith(n))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(n=>t.pubkey.startsWith(n)))return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),i=e[`#${r}`];if(i&&!t.tags.find(([s,o])=>s===n.slice(1)&&i.indexOf(o)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function _y(e,t){for(let n=0;n<e.length;n++)if(vy(e[n],t))return!0;return!1}function Ey(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,i=e.slice(r).indexOf('"')+r+1;return e.slice(i,i+64)}function ky(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,i=e.slice(r+1,80).indexOf('"');if(i===-1)return null;let s=r+1+i;return e.slice(r+1,s)}function Ay(e,t){return{kind:yy,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function $y(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var mf;try{mf=WebSocket}catch{}var wf=class{constructor(e,t){U(this,"url"),U(this,"_connected",!1),U(this,"onclose",null),U(this,"onnotice",n=>console.debug(`NOTICE from ${this.url}: ${n}`)),U(this,"_onauth",null),U(this,"baseEoseTimeout",4400),U(this,"connectionTimeout",4400),U(this,"openSubs",new Map),U(this,"connectionTimeoutHandle"),U(this,"connectionPromise"),U(this,"openCountRequests",new Map),U(this,"openEventPublishes",new Map),U(this,"ws"),U(this,"incomingMessageQueue",new gy),U(this,"queueRunning",!1),U(this,"challenge"),U(this,"serial",0),U(this,"verifyEvent"),this.url=hy(e),this.verifyEvent=t.verifyEvent}static async connect(e,t){const n=new wf(e,t);return await n.connect(),n}closeAllSubscriptions(e){for(let[t,n]of this.openSubs)n.close(e);this.openSubs.clear();for(let[t,n]of this.openEventPublishes)n.reject(new Error(e));this.openEventPublishes.clear();for(let[t,n]of this.openCountRequests)n.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;t("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new mf(this.url)}catch(n){t(n);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=n=>{var r;t(n.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var n;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await $y();this.queueRunning=!1}handleNext(){var e,t,n;const r=this.incomingMessageQueue.dequeue();if(!r)return!1;const i=ky(r);if(i){const s=this.openSubs.get(i);if(!s)return;const o=Ey(r,"id"),a=(e=s.alreadyHaveEvent)==null?void 0:e.call(s,o);if((t=s.receivedEvent)==null||t.call(s,this,o),a)return}try{let s=JSON.parse(r);switch(s[0]){case"EVENT":{const o=this.openSubs.get(s[1]),a=s[2];this.verifyEvent(a)&&_y(o.filters,a)&&o.onevent(a);return}case"COUNT":{const o=s[1],a=s[2],c=this.openCountRequests.get(o);c&&(c.resolve(a.count),this.openCountRequests.delete(o));return}case"EOSE":{const o=this.openSubs.get(s[1]);if(!o)return;o.receivedEose();return}case"OK":{const o=s[1],a=s[2],c=s[3],d=this.openEventPublishes.get(o);a?d.resolve(c):d.reject(new Error(c)),this.openEventPublishes.delete(o);return}case"CLOSED":{const o=s[1],a=this.openSubs.get(o);if(!a)return;a.closed=!0,a.close(s[2]);return}case"NOTICE":this.onnotice(s[1]);return;case"AUTH":{this.challenge=s[1],(n=this._onauth)==null||n.call(this,s[1]);return}}}catch{return}}async send(e){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var t;(t=this.ws)==null||t.send(e)})}async auth(e){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const t=await e(Ay(this.url,this.challenge)),n=new Promise((r,i)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:i})});return this.send('["AUTH",'+JSON.stringify(t)+"]"),n}async publish(e){const t=new Promise((n,r)=>{this.openEventPublishes.set(e.id,{resolve:n,reject:r})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;const n=(t==null?void 0:t.id)||"count:"+this.serial,r=new Promise((i,s)=>{this.openCountRequests.set(n,{resolve:i,reject:s})});return this.send('["COUNT","'+n+'",'+JSON.stringify(e)+"]"),r}subscribe(e,t){const n=this.prepareSubscription(e,t);return n.fire(),n}prepareSubscription(e,t){this.serial++;const n=t.id||"sub:"+this.serial,r=new Sy(this,n,e,t);return this.openSubs.set(n,r),r}close(){var e;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(e=this.ws)==null||e.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},Sy=class{constructor(e,t,n,r){U(this,"relay"),U(this,"id"),U(this,"closed",!1),U(this,"eosed",!1),U(this,"filters"),U(this,"alreadyHaveEvent"),U(this,"receivedEvent"),U(this,"onevent"),U(this,"oneose"),U(this,"onclose"),U(this,"eoseTimeout"),U(this,"eoseTimeoutHandle"),this.relay=e,this.filters=n,this.id=t,this.alreadyHaveEvent=r.alreadyHaveEvent,this.receivedEvent=r.receivedEvent,this.eoseTimeout=r.eoseTimeout||e.baseEoseTimeout,this.oneose=r.oneose,this.onclose=r.onclose,this.onevent=r.onevent||(i=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,i)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var e;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(e=this.oneose)==null||e.call(this))}close(e="closed by caller"){var t;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(t=this.onclose)==null||t.call(this,e)}},bf=class extends wf{constructor(e){super(e,{verifyEvent:by})}static async connect(e){const t=new bf(e);return await t.connect(),t}};new TextDecoder("utf-8");new TextEncoder;function Ty(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}const Py=oe("<div class=ztr-comment-info-picture><img>"),By=oe("<div class=ztr-reply-form><textarea></textarea><div class=ztr-reply-controls>"),Ly=oe("<span>Publishing is disabled"),Iy=oe("<span class=ztr-reply-error>Error: "),Cy=oe('<svg class=ztr-spinner viewBox="0 0 50 50"><circle class=path cx=25 cy=25 r=20 fill=none stroke-width=5>'),Oy=oe("<button class=ztr-reply-button>Reply as "),Ny=oe("<button class=ztr-reply-button>Reply anonymously"),zy=oe("<button class=ztr-reply-login-button>Log in"),Ry=oe("<li class=ztr-comment-action-like><span> likes"),xy=oe("<li class=ztr-comment-action-zap><span> sats"),My=oe("<div class=ztr-comment-new><div class=ztr-comment-body><ul class=ztr-comment-actions>"),yf=e=>{const[t,n]=_e(""),[r,i]=_e(!1),[s,o]=_e(),[a,c]=_e(""),d=()=>V.anchor,p=V.profiles,h=()=>V.relays,y=async()=>{if(!window.nostr){k("Error: No NIP-07 extension!");return}const L=await window.nostr.getPublicKey();ze.internal={pk:L,signEvent:async P=>window.nostr.signEvent(P)},c(""),ze.active=ze.internal};hr(async()=>{if(ze.active){const L=ze.active.pk;let P=p().find(u=>u.pk===L);P||(P={pk:L,l:0,ts:0},await Je("profiles",P)),o(P),lf([L],h(),p())}else o()});const $=async(L,P)=>{var u;i(!1),n(""),c(P??""),await Je("events",Xi(L),{immediate:!0}),(u=e.onDone)==null||u.call(globalThis)},k=L=>{i(!1),c(`Error: ${L}`)},w=async L=>{let P;if(L)P=ze.active;else{if(!ze.anonymous){const B=ay();ze.anonymous={pk:pf(B),signEvent:async _=>({sig:gf(_,B).sig})}}P=ze.anonymous}if(!(P!=null&&P.signEvent)){k("Error: User has no signer!");return}const u=t().trim();if(!u)return;const f={kind:1,created_at:Math.round(Date.now()/1e3),content:u,pubkey:P.pk,tags:Xb(u)};if(V.anchorAuthor!==f.pubkey&&f.tags.push(["p",V.anchorAuthor]),V.externalAuthor)try{const B=ki(V.externalAuthor).data;f.tags.push(["p",B])}catch{}if(e.replyTo){const B=await rr("events",IDBKeyRange.only(e.replyTo));B&&(f.tags.push(["e",B.ro,"","root"]),B.pk!==f.pubkey&&f.tags.push(["p",B.pk])),f.tags.push(["e",e.replyTo,"","reply"])}else{const B=V.version||V.rootEventIds[0];if(B)f.tags.push(["e",B,"","root"]);else if(d().type==="http"){const _=Ty(d().value),b={pubkey:P.pk,created_at:Math.round(Date.now()/1e3),kind:8812,tags:[["r",_]],content:`Comments on ${_} `},S={id:xr(b),...b,...await P.signEvent(b)};Je("events",Xi(S)),V.disableFeatures.includes("publish")?console.log("Publishing root event disabled",S):tr.publish(h(),S),V.filter={"#e":[S.id]},f.tags.push(["e",S.id,"","root"])}}d().type==="naddr"&&f.tags.push(["a",d().value,"","root"]);const l=xr(f),g=await P.signEvent(f),v={id:l,...f,...g};if(i(!0),console.log(JSON.stringify(v,null,2)),V.disableFeatures.includes("publish"))setTimeout(()=>$(v),1e3);else{const B=[];for(const _ of h())try{await(await bf.connect(_)).publish(v)}catch(b){console.error(b),B.push(_)}if(B.length===h().length)k("Error: Your comment was not published to any relay");else{const _=`Published to ${B.length}/${h().length} relays (see console for more info)`,b=B.length>0?_:void 0;$(v,b)}B.length=0}},A=e.replyTo!==void 0;let T;return cy(()=>A&&T),(()=>{const L=By(),P=L.firstChild,u=P.nextSibling;P.addEventListener("change",l=>n(l.target.value));const f=T;return typeof f=="function"?wl(f,P):T=P,P.autofocus=A,Z(u,(()=>{const l=ae(()=>!!V.disableFeatures.includes("publish"));return()=>l()&&Ly()})(),null),Z(u,(()=>{const l=ae(()=>!!a());return()=>l()&&(()=>{const g=Iy();return g.firstChild,Z(g,a,null),g})()})(),null),Z(u,it(Fi,{get when(){return!r()},get fallback(){return Cy()},get children(){const l=Py(),g=l.firstChild;return Xe(()=>{var v;return Ie(g,"src",((v=s())==null?void 0:v.i)||$i)}),l}}),null),Z(u,(()=>{const l=ae(()=>!!s());return()=>l()&&(()=>{const g=Oy();return g.firstChild,g.$$click=()=>w(s()),Z(g,()=>s().n||Sn(nf(s().pk)),null),Xe(()=>g.disabled=r()),g})()})(),null),Z(u,(()=>{const l=ae(()=>!s()&&!V.disableFeatures.includes("replyAnonymously"));return()=>l()&&(()=>{const g=Ny();return g.$$click=()=>w(),Xe(()=>g.disabled=r()),g})()})(),null),Z(u,(()=>{const l=ae(()=>!s());return()=>l()&&(()=>{const g=zy();return g.$$click=()=>y(),g})()})(),null),Xe(l=>{const g=r(),v=V.replyPlaceholder||"Add your comment...";return g!==l._v$&&(P.disabled=l._v$=g),v!==l._v$2&&Ie(P,"placeholder",l._v$2=v),l},{_v$:void 0,_v$2:void 0}),Xe(()=>P.value=t()),L})()},jy=()=>{const e=()=>V.anchor,t=Tc(()=>["aggregates",IDBKeyRange.only([e().value,9735])]),n=Tc(()=>["aggregates",IDBKeyRange.only([e().value,7])]),r=()=>{var s;return((s=t())==null?void 0:s.sum)??0},i=()=>{var s;return((s=n())==null?void 0:s.ids.length)??0};return(()=>{const s=My(),o=s.firstChild,a=o.firstChild;return Z(a,it(Fi,{get when(){return!V.disableFeatures.includes("likes")},get children(){const c=Ry(),d=c.firstChild,p=d.firstChild;return Z(c,l3,d),Z(d,i,p),c}}),null),Z(a,it(Fi,{get when(){return!V.disableFeatures.includes("zaps")},get children(){const c=xy(),d=c.firstChild,p=d.firstChild;return Z(c,d3,d),Z(d,()=>ey(r()),p),c}}),null),Z(o,it(yf,{}),null),s})()};Zu(["click"]);function Hy(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function Bc(e,...t){return typeof e=="function"?e(...t):e}function Uy(e){const t={...e},n={...e},r={},i=o=>{let a=r[o];if(!a){if(!pr())return t[o];r[o]=a=_e(t[o],{internal:!0}),delete t[o]}return a[0]()};for(const o in e)Object.defineProperty(n,o,{get:()=>i(o),enumerable:!0});const s=(o,a)=>{const c=r[o];if(c)return c[1](a);o in t&&(t[o]=Bc(a,[t[o]]))};return[n,(o,a)=>{if(Hy(o)){const c=st(()=>Object.entries(Bc(o,n)));Qn(()=>{for(const[d,p]of c)s(d,()=>p)})}else s(o,a);return n}]}var vf={width:null,height:null};function bo(e){if(!e)return{...vf};const{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function Dy(e){const t=typeof e=="function",[n,r]=Uy(t?vf:bo(e)),i=new ResizeObserver(([s])=>r(bo(s.target)));return er(()=>i.disconnect()),t?hr(()=>{const s=e();s&&(r(bo(s)),i.observe(s),er(()=>i.unobserve(s)))}):(i.observe(e),er(()=>i.unobserve(e))),n}const Vy=oe("<div class=ztr-thread>"),Fy=oe("<li class=ztr-comment-action-reply><span>"),qy=oe("<div class=ztr-comment><div class=ztr-comment-body><div class=ztr-comment-info-wrapper><div class=ztr-comment-info><div class=ztr-comment-info-picture><img></div><ul class=ztr-comment-info-items><li class=ztr-comment-info-author><a target=_blank></a><span style=white-space:nowrap;><strong> <!>ed</strong> </span></li><li><a class=ztr-comment-info-dots></a></li></ul></div><ul class=ztr-comment-info-items></ul></div><div class=ztr-comment-text></div><div class=ztr-comment-text></div><ul class=ztr-comment-actions>"),Wy=oe("<li>"),Ky=oe("<li> repl"),Gy=oe("<li><span>"),Zy=oe("<div class=ztr-info-pane><a target=_blank><small>Event data"),Yy=oe("<p class=warning><span>This is a <!> that referenced this article in <a>another thread"),Xy=oe("<p class=warning><span>Article contents may have changed since this <!> was made"),Jy=oe("<p class=warning><span>Article contents changed since this <!> was made"),Qy=oe("<div class=ztr-comment-expand><a></a><span>Show full comment"),e3=oe("<div class=ztr-comment-replies>"),t3=oe('<svg viewBox="0 -6 60 60"xmlns=http://www.w3.org/2000/svg><path d="M 12.6030 50.4905 C 13.3758 50.4905 13.9307 50.1140 14.8621 49.2421 L 20.6483 43.8720 C 19.5188 42.9803 18.6073 41.5733 18.6073 38.3433 L 18.6073 25.2052 C 18.6073 19.1217 22.3129 15.5152 28.3766 15.5152 L 42.2479 15.5152 L 42.2281 14.7622 C 41.9306 10.6999 39.2557 8.0643 34.7177 8.0643 L 7.5301 8.0643 C 2.9922 8.0643 0 10.7791 0 15.4954 L 0 34.9548 C 0 39.6710 2.9922 42.7028 7.5301 42.7028 L 10.8195 42.7028 L 10.8195 48.4693 C 10.8195 49.6979 11.4735 50.4905 12.6030 50.4905 Z M 44.6058 53.2450 C 45.7353 53.2450 46.3895 52.4325 46.3895 51.2237 L 46.3895 45.4374 L 48.4702 45.4374 C 53.0078 45.4374 56 42.4056 56 37.7092 L 56 25.6610 C 56 20.9250 53.0078 18.2300 48.4702 18.2300 L 28.8522 18.2300 C 24.1161 18.2300 21.3221 20.9250 21.3221 25.6610 L 21.3221 37.7092 C 21.3221 42.4056 24.1161 45.4374 28.8522 45.4374 L 35.1735 45.4374 L 42.3470 51.9767 C 43.2784 52.8487 43.8331 53.2450 44.6058 53.2450 Z">'),n3=oe('<svg xmlns=http://www.w3.org/2000/svg viewBox="-120 -80 528 588"><path d="M349.4 44.6c5.9-13.7 1.5-29.7-10.6-38.5s-28.6-8-39.9 1.8l-256 224c-10 8.8-13.6 22.9-8.9 35.3S50.7 288 64 288H175.5L98.6 467.4c-5.9 13.7-1.5 29.7 10.6 38.5s28.6 8 39.9-1.8l256-224c10-8.8 13.6-22.9 8.9-35.3s-16.6-20.7-30-20.7H272.5L349.4 44.6z">'),r3=oe('<svg viewBox="0 -16 180 180"xmlns=http://www.w3.org/2000/svg><path d="M60.732 29.7C41.107 29.7 22 39.7 22 67.41c0 27.29 45.274 67.29 74 94.89 28.744-27.6 74-67.6 74-94.89 0-27.71-19.092-37.71-38.695-37.71C116 29.7 104.325 41.575 96 54.066 87.638 41.516 76 29.7 60.732 29.7z">'),i3=oe('<svg viewBox="0 0 576 512"><path d="M168 80c-13.3 0-24 10.7-24 24V408c0 8.4-1.4 16.5-4.1 24H440c13.3 0 24-10.7 24-24V104c0-13.3-10.7-24-24-24H168zM72 480c-39.8 0-72-32.2-72-72V112C0 98.7 10.7 88 24 88s24 10.7 24 24V408c0 13.3 10.7 24 24 24s24-10.7 24-24V104c0-39.8 32.2-72 72-72H440c39.8 0 72 32.2 72 72V408c0 39.8-32.2 72-72 72H72zM176 136c0-13.3 10.7-24 24-24h96c13.3 0 24 10.7 24 24v80c0 13.3-10.7 24-24 24H200c-13.3 0-24-10.7-24-24V136zm200-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24H376c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80h32c13.3 0 24 10.7 24 24s-10.7 24-24 24H376c-13.3 0-24-10.7-24-24s10.7-24 24-24zM200 272H408c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80H408c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24z">'),s3=oe('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -200 560 640"><path d="M8 256a56 56 0 1 1 112 0A56 56 0 1 1 8 256zm160 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z">'),o3=oe('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -50 256 512"><path d="M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z">'),u3=oe('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -50 320 512"><path d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z">'),a3=oe('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 512 512"><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z">'),_f=e=>{const t=()=>V.anchor,n=V.profiles;return(()=>{const r=Vy();return Z(r,it(cm,{get each(){return Ai(e.nestedEvents())},children:i=>{const[s,o]=_e(!1),[a,c]=_e(!1),[d,p]=_e(!1),[h,y]=_e(!1),$=500,[k,w]=_e(),A=Dy(k),[T,L]=_e($i),P=()=>i().pk,u=()=>nf(P()),f=()=>n().find(m=>m.pk===P());hr(async()=>{var m;L(((m=f())==null?void 0:m.i)||$i)});let l;const g=()=>Qb(i().ts*1e3),[v,B]=_e();hr(()=>{B(g()),l=setInterval(()=>{B(g())},60*1e3)});const _=()=>i().a===t().value&&i().am,b=()=>i().k===9802?"highlight":_()?"mention":"comment",S=ae(()=>ca(i())),I=()=>!i().parent&&!i().ro,O=()=>!i().parent&&i().ro&&!V.rootEventIds.includes(i().ro),E=()=>!i().parent&&i().ro&&V.rootEventIds.includes(i().ro)&&V.version&&V.version!==i().ro;return er(()=>clearInterval(l)),(()=>{const m=qy(),C=m.firstChild,N=C.firstChild,z=N.firstChild,x=z.firstChild,R=x.firstChild,H=x.nextSibling,F=H.firstChild,K=F.firstChild,X=K.nextSibling,M=X.firstChild,q=M.firstChild,ne=q.nextSibling;ne.nextSibling,M.nextSibling;const re=F.nextSibling,ue=re.firstChild,Me=z.nextSibling,me=N.nextSibling,j=me.nextSibling,ie=j.nextSibling;return R.addEventListener("error",()=>L($i)),Z(K,()=>{var Y;return((Y=f())==null?void 0:Y.n)||Sn(u())}),Z(M,b,ne),Z(X,v,null),Z(H,(()=>{const Y=ae(()=>S()>0&&A.width>600);return()=>Y()&&[Wy(),(()=>{const J=Ky(),fe=J.firstChild;return Z(J,S,fe),Z(J,()=>S()>1?"ies":"y",null),Z(J,()=>d()?" (hidden)":"",null),J})()]})(),re),ue.$$click=()=>y(!h()),Z(ue,Ef),Z(Me,(()=>{const Y=ae(()=>S()>0);return()=>Y()&&(()=>{const J=Gy(),fe=J.firstChild;return fe.$$click=()=>p(!d()),Z(fe,(()=>{const Fe=ae(()=>!!d());return()=>Fe()?h3():p3()})()),J})()})()),Z(C,(()=>{const Y=ae(()=>!!h());return()=>Y()&&(()=>{const J=Zy(),fe=J.firstChild;return Xe(()=>Ie(fe,"href",V.urlPrefixes.note+_c(i().id))),J})()})(),me),Z(me,(()=>{const Y=ae(()=>!!O());return()=>Y()&&(()=>{const J=Yy(),fe=J.firstChild,Fe=fe.firstChild,at=Fe.nextSibling,ai=at.nextSibling,Sf=ai.nextSibling;return Z(J,yo,fe),Z(fe,b,at),Xe(()=>Ie(Sf,"href",V.urlPrefixes.note+_c(i().ro))),J})()})(),null),Z(me,(()=>{const Y=ae(()=>!!I());return()=>Y()&&(()=>{const J=Xy(),fe=J.firstChild,Fe=fe.firstChild,at=Fe.nextSibling;return at.nextSibling,Z(J,yo,fe),Z(fe,b,at),J})()})(),null),Z(me,(()=>{const Y=ae(()=>!!E());return()=>Y()&&(()=>{const J=Jy(),fe=J.firstChild,Fe=fe.firstChild,at=Fe.nextSibling;return at.nextSibling,Z(J,yo,fe),Z(fe,b,at),J})()})(),null),wl(w,j),Z(C,(()=>{const Y=ae(()=>!!(A.height&&A.height>=$&&!a()));return()=>Y()&&(()=>{const J=Qy(),fe=J.firstChild,Fe=fe.nextSibling;return`${ot}px`!=null?fe.style.setProperty("height",`${ot}px`):fe.style.removeProperty("height"),Z(fe,f3),Fe.$$click=()=>c(!0),J})()})(),ie),Z(ie,it(Fi,{get when(){return!V.disableFeatures.includes("reply")},get children(){const Y=Fy(),J=Y.firstChild;return Y.$$click=()=>o(!s())&&y(!1),Z(Y,c3,J),Z(J,()=>s()?"Cancel":"Reply"),Y}})),Z(C,(()=>{const Y=ae(()=>!!s());return()=>Y()&&it(yf,{get replyTo(){return i().id},onDone:()=>o(!1)})})(),null),Z(m,(()=>{const Y=ae(()=>!d());return()=>Y()&&(()=>{const J=e3();return Z(J,it(_f,{nestedEvents:()=>i().children,get articles(){return e.articles}})),J})()})(),null),Xe(Y=>{const J=T(),fe=V.urlPrefixes.npub+u(),Fe=i().k==9802,at=a()?{}:{"max-height":`${$}px`},ai=ff(i(),V,e.articles());return J!==Y._v$&&Ie(R,"src",Y._v$=J),fe!==Y._v$2&&Ie(K,"href",Y._v$2=fe),Fe!==Y._v$3&&j.classList.toggle("highlight",Y._v$3=Fe),Y._v$4=fm(j,at,Y._v$4),ai!==Y._v$5&&(j.innerHTML=Y._v$5=ai),Y},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),m})()}})),r})()},c3=()=>(()=>{const e=t3();return Ie(e,"width",ot),Ie(e,"height",ot),e})(),d3=()=>(()=>{const e=n3();return Ie(e,"width",ot),Ie(e,"height",ot),e})(),l3=()=>(()=>{const e=r3();return Ie(e,"width",ot),Ie(e,"height",ot),e})(),f3=()=>(()=>{const e=i3();return Ie(e,"width",ot),Ie(e,"height",ot),e})(),Ef=()=>s3(),h3=()=>o3(),p3=()=>u3(),yo=()=>(()=>{const e=a3();return Ie(e,"height",ot),e})();Zu(["click"]);var kf={};(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0;function t(b){if(!Number.isSafeInteger(b))throw new Error(`Wrong integer: ${b}`)}e.assertNumber=t;function n(...b){const S=(E,m)=>C=>E(m(C)),I=Array.from(b).reverse().reduce((E,m)=>E?S(E,m.encode):m.encode,void 0),O=b.reduce((E,m)=>E?S(E,m.decode):m.decode,void 0);return{encode:I,decode:O}}function r(b){return{encode:S=>{if(!Array.isArray(S)||S.length&&typeof S[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return S.map(I=>{if(t(I),I<0||I>=b.length)throw new Error(`Digit index outside alphabet: ${I} (alphabet: ${b.length})`);return b[I]})},decode:S=>{if(!Array.isArray(S)||S.length&&typeof S[0]!="string")throw new Error("alphabet.decode input should be array of strings");return S.map(I=>{if(typeof I!="string")throw new Error(`alphabet.decode: not string element=${I}`);const O=b.indexOf(I);if(O===-1)throw new Error(`Unknown letter: "${I}". Allowed: ${b}`);return O})}}}function i(b=""){if(typeof b!="string")throw new Error("join separator should be string");return{encode:S=>{if(!Array.isArray(S)||S.length&&typeof S[0]!="string")throw new Error("join.encode input should be array of strings");for(let I of S)if(typeof I!="string")throw new Error(`join.encode: non-string input=${I}`);return S.join(b)},decode:S=>{if(typeof S!="string")throw new Error("join.decode input should be string");return S.split(b)}}}function s(b,S="="){if(t(b),typeof S!="string")throw new Error("padding chr should be string");return{encode(I){if(!Array.isArray(I)||I.length&&typeof I[0]!="string")throw new Error("padding.encode input should be array of strings");for(let O of I)if(typeof O!="string")throw new Error(`padding.encode: non-string input=${O}`);for(;I.length*b%8;)I.push(S);return I},decode(I){if(!Array.isArray(I)||I.length&&typeof I[0]!="string")throw new Error("padding.encode input should be array of strings");for(let E of I)if(typeof E!="string")throw new Error(`padding.decode: non-string input=${E}`);let O=I.length;if(O*b%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;O>0&&I[O-1]===S;O--)if(!((O-1)*b%8))throw new Error("Invalid padding: string has too much padding");return I.slice(0,O)}}}function o(b){if(typeof b!="function")throw new Error("normalize fn should be function");return{encode:S=>S,decode:S=>b(S)}}function a(b,S,I){if(S<2)throw new Error(`convertRadix: wrong from=${S}, base cannot be less than 2`);if(I<2)throw new Error(`convertRadix: wrong to=${I}, base cannot be less than 2`);if(!Array.isArray(b))throw new Error("convertRadix: data should be array");if(!b.length)return[];let O=0;const E=[],m=Array.from(b);for(m.forEach(C=>{if(t(C),C<0||C>=S)throw new Error(`Wrong integer: ${C}`)});;){let C=0,N=!0;for(let z=O;z<m.length;z++){const x=m[z],R=S*C+x;if(!Number.isSafeInteger(R)||S*C/S!==C||R-x!==S*C)throw new Error("convertRadix: carry overflow");if(C=R%I,m[z]=Math.floor(R/I),!Number.isSafeInteger(m[z])||m[z]*I+C!==R)throw new Error("convertRadix: carry overflow");if(N)m[z]?N=!1:O=z;else continue}if(E.push(C),N)break}for(let C=0;C<b.length-1&&b[C]===0;C++)E.push(0);return E.reverse()}const c=(b,S)=>S?c(S,b%S):b,d=(b,S)=>b+(S-c(b,S));function p(b,S,I,O){if(!Array.isArray(b))throw new Error("convertRadix2: data should be array");if(S<=0||S>32)throw new Error(`convertRadix2: wrong from=${S}`);if(I<=0||I>32)throw new Error(`convertRadix2: wrong to=${I}`);if(d(S,I)>32)throw new Error(`convertRadix2: carry overflow from=${S} to=${I} carryBits=${d(S,I)}`);let E=0,m=0;const C=2**I-1,N=[];for(const z of b){if(t(z),z>=2**S)throw new Error(`convertRadix2: invalid data word=${z} from=${S}`);if(E=E<<S|z,m+S>32)throw new Error(`convertRadix2: carry overflow pos=${m} from=${S}`);for(m+=S;m>=I;m-=I)N.push((E>>m-I&C)>>>0);E&=2**m-1}if(E=E<<I-m&C,!O&&m>=S)throw new Error("Excess padding");if(!O&&E)throw new Error(`Non-zero padding: ${E}`);return O&&m>0&&N.push(E>>>0),N}function h(b){return t(b),{encode:S=>{if(!(S instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return a(Array.from(S),2**8,b)},decode:S=>{if(!Array.isArray(S)||S.length&&typeof S[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(a(S,b,2**8))}}}function y(b,S=!1){if(t(b),b<=0||b>32)throw new Error("radix2: bits should be in (0..32]");if(d(8,b)>32||d(b,8)>32)throw new Error("radix2: carry overflow");return{encode:I=>{if(!(I instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return p(Array.from(I),8,b,!S)},decode:I=>{if(!Array.isArray(I)||I.length&&typeof I[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(p(I,b,8,S))}}}function $(b){if(typeof b!="function")throw new Error("unsafeWrapper fn should be function");return function(...S){try{return b.apply(null,S)}catch{}}}function k(b,S){if(t(b),typeof S!="function")throw new Error("checksum fn should be function");return{encode(I){if(!(I instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const O=S(I).slice(0,b),E=new Uint8Array(I.length+b);return E.set(I),E.set(O,I.length),E},decode(I){if(!(I instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const O=I.slice(0,-b),E=S(O).slice(0,b),m=I.slice(-b);for(let C=0;C<b;C++)if(E[C]!==m[C])throw new Error("Invalid checksum");return O}}}e.utils={alphabet:r,chain:n,checksum:k,radix:h,radix2:y,join:i,padding:s},e.base16=n(y(4),r("0123456789ABCDEF"),i("")),e.base32=n(y(5),r("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s(5),i("")),e.base32hex=n(y(5),r("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s(5),i("")),e.base32crockford=n(y(5),r("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),i(""),o(b=>b.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=n(y(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s(6),i("")),e.base64url=n(y(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(6),i(""));const w=b=>n(h(58),r(b),i(""));e.base58=w("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=w("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=w("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const A=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(b){let S="";for(let I=0;I<b.length;I+=8){const O=b.subarray(I,I+8);S+=e.base58.encode(O).padStart(A[O.length],"1")}return S},decode(b){let S=[];for(let I=0;I<b.length;I+=11){const O=b.slice(I,I+11),E=A.indexOf(O.length),m=e.base58.decode(O);for(let C=0;C<m.length-E;C++)if(m[C]!==0)throw new Error("base58xmr: wrong padding");S=S.concat(Array.from(m.slice(m.length-E)))}return Uint8Array.from(S)}};const T=b=>n(k(4,S=>b(b(S))),e.base58);e.base58check=T;const L=n(r("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),i("")),P=[996825010,642813549,513874426,1027748829,705979059];function u(b){const S=b>>25;let I=(b&33554431)<<5;for(let O=0;O<P.length;O++)(S>>O&1)===1&&(I^=P[O]);return I}function f(b,S,I=1){const O=b.length;let E=1;for(let m=0;m<O;m++){const C=b.charCodeAt(m);if(C<33||C>126)throw new Error(`Invalid prefix (${b})`);E=u(E)^C>>5}E=u(E);for(let m=0;m<O;m++)E=u(E)^b.charCodeAt(m)&31;for(let m of S)E=u(E)^m;for(let m=0;m<6;m++)E=u(E);return E^=I,L.encode(p([E%2**30],30,5,!1))}function l(b){const S=b==="bech32"?1:734539939,I=y(5),O=I.decode,E=I.encode,m=$(O);function C(R,H,F=90){if(typeof R!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof R}`);if(!Array.isArray(H)||H.length&&typeof H[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof H}`);const K=R.length+7+H.length;if(F!==!1&&K>F)throw new TypeError(`Length ${K} exceeds limit ${F}`);return R=R.toLowerCase(),`${R}1${L.encode(H)}${f(R,H,S)}`}function N(R,H=90){if(typeof R!="string")throw new Error(`bech32.decode input should be string, not ${typeof R}`);if(R.length<8||H!==!1&&R.length>H)throw new TypeError(`Wrong string length: ${R.length} (${R}). Expected (8..${H})`);const F=R.toLowerCase();if(R!==F&&R!==R.toUpperCase())throw new Error("String must be lowercase or uppercase");R=F;const K=R.lastIndexOf("1");if(K===0||K===-1)throw new Error('Letter "1" must be present between prefix and data only');const X=R.slice(0,K),M=R.slice(K+1);if(M.length<6)throw new Error("Data must be at least 6 characters long");const q=L.decode(M).slice(0,-6),ne=f(X,q,S);if(!M.endsWith(ne))throw new Error(`Invalid checksum in ${R}: expected "${ne}"`);return{prefix:X,words:q}}const z=$(N);function x(R){const{prefix:H,words:F}=N(R,!1);return{prefix:H,words:F,bytes:O(F)}}return{encode:C,decode:N,decodeToBytes:x,decodeUnsafe:z,fromWords:O,fromWordsUnsafe:m,toWords:E}}e.bech32=l("bech32"),e.bech32m=l("bech32m"),e.utf8={encode:b=>new TextDecoder().decode(b),decode:b=>new TextEncoder().encode(b)},e.hex=n(y(4),r("0123456789abcdef"),i(""),o(b=>{if(typeof b!="string"||b.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof b} with length ${b.length}`);return b.toLowerCase()}));const g={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},v=`Invalid encoding type. Available types: ${Object.keys(g).join(", ")}`,B=(b,S)=>{if(typeof b!="string"||!g.hasOwnProperty(b))throw new TypeError(v);if(!(S instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return g[b].encode(S)};e.bytesToString=B,e.str=e.bytesToString;const _=(b,S)=>{if(!g.hasOwnProperty(b))throw new TypeError(v);if(typeof S!="string")throw new TypeError("stringToBytes() expects string");return g[b].decode(S)};e.stringToBytes=_,e.bytes=e.stringToBytes})(kf);const{bech32:ht,hex:nt,utf8:g3}=kf,Lc={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},Ic={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},Cc={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},Oc={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},mi=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],m3={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},w3=BigInt("2100000000000000000"),Nc=BigInt(1e11),hu={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},Af={};for(let e=0,t=Object.keys(hu);e<t.length;e++){const n=t[e],r=hu[t[e]].toString();Af[r]=n}const b3={1:e=>nt.encode(ht.fromWordsUnsafe(e)),16:e=>nt.encode(ht.fromWordsUnsafe(e)),13:e=>g3.encode(ht.fromWordsUnsafe(e)),19:e=>nt.encode(ht.fromWordsUnsafe(e)),23:e=>nt.encode(ht.fromWordsUnsafe(e)),27:e=>nt.encode(ht.fromWordsUnsafe(e)),6:Ji,24:Ji,3:v3,5:_3};function y3(e){return t=>({tagCode:parseInt(e),words:ht.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function Ji(e){return e.reverse().reduce((t,n,r)=>t+n*Math.pow(32,r),0)}function v3(e){const t=[];let n,r,i,s,o,a=ht.fromWordsUnsafe(e);for(;a.length>0;)n=nt.encode(a.slice(0,33)),r=nt.encode(a.slice(33,41)),i=parseInt(nt.encode(a.slice(41,45)),16),s=parseInt(nt.encode(a.slice(45,49)),16),o=parseInt(nt.encode(a.slice(49,51)),16),a=a.slice(51),t.push({pubkey:n,short_channel_id:r,fee_base_msat:i,fee_proportional_millionths:s,cltv_expiry_delta:o});return t}function _3(e){const t=e.slice().reverse().map(i=>[!!(i&1),!!(i&2),!!(i&4),!!(i&8),!!(i&16)]).reduce((i,s)=>i.concat(s),[]);for(;t.length<mi.length*2;)t.push(!1);const n={};mi.forEach((i,s)=>{let o;t[s*2]?o="required":t[s*2+1]?o="supported":o="unsupported",n[i]=o});const r=t.slice(mi.length*2);return n.extra_bits={start_bit:mi.length*2,bits:r,has_required:r.reduce((i,s,o)=>o%2!==0?i||!1:i||s,!1)},n}function $f(e,t){let n,r;if(e.slice(-1).match(/^[munp]$/))n=e.slice(-1),r=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=e}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");const i=BigInt(r),s=n?i*Nc/m3[n]:i*Nc;if(n==="p"&&i%BigInt(10)!==BigInt(0)||s>w3)throw new Error("Amount is outside of valid range");return t?s.toString():s}function E3(e,t){if(typeof e!="string")throw new Error("Lightning Payment Request must be string");if(e.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const n=[],r=ht.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const i=r.prefix;let s=r.words,o=e.slice(i.length+1),a=s.slice(-104);s=s.slice(0,-104);let c=i.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(c&&!c[2]&&(c=i.match(/^ln(\S+)$/)),!c)throw new Error("Not a proper lightning payment request");n.push({name:"lightning_network",letters:"ln"});const d=c[1];let p;if(t){if(t.bech32===void 0||t.pubKeyHash===void 0||t.scriptHash===void 0||!Array.isArray(t.validWitnessVersions))throw new Error("Invalid network");p=t}else switch(d){case Lc.bech32:p=Lc;break;case Ic.bech32:p=Ic;break;case Cc.bech32:p=Cc;break;case Oc.bech32:p=Oc;break}if(!p||p.bech32!==d)throw new Error("Unknown coin bech32 prefix");n.push({name:"coin_network",letters:d,value:p});const h=c[2];let y;if(h){const u=c[3];y=$f(h+u,!0),n.push({name:"amount",letters:c[2]+c[3],value:y})}else y=null;n.push({name:"separator",letters:"1"});const $=Ji(s.slice(0,7));s=s.slice(7),n.push({name:"timestamp",letters:o.slice(0,7),value:$}),o=o.slice(7);let k,w,A,T;for(;s.length>0;){const u=s[0].toString();k=Af[u]||"unknown_tag",w=b3[u]||y3(u),s=s.slice(1),A=Ji(s.slice(0,2)),s=s.slice(2),T=s.slice(0,A),s=s.slice(A),n.push({name:k,tag:o[0],letters:o.slice(0,3+A),value:w(T)}),o=o.slice(3+A)}n.push({name:"signature",letters:o.slice(0,104),value:nt.encode(ht.fromWordsUnsafe(a))}),o=o.slice(104),n.push({name:"checksum",letters:o});let L={paymentRequest:e,sections:n,get expiry(){let u=n.find(f=>f.name==="expiry");if(u)return P("timestamp")+u.value},get route_hints(){return n.filter(u=>u.name==="route_hint").map(u=>u.value)}};for(let u in hu)u!=="route_hint"&&Object.defineProperty(L,u,{get(){return P(u)}});return L;function P(u){let f=n.find(l=>l.name===u);return f?f.value:void 0}}var k3={decode:E3,hrpToMillisat:$f};const A3=oe("<div id=ztr-root><style></style><div style=float:right;opacity:0.2;>"),$3=oe("<div id=ztr-content>"),S3=oe("<h1>Error!"),T3=oe("<div class=ztr-comment-text><pre></pre><p>Only properly formed NIP-19 naddr, note and nevent encoded entities and URLs are supported."),P3=oe("<h2 id=ztr-title>"),B3=oe("<p>Powered by <a href=https://github.com/fr4nzap/zapthreads>zapthreads"),L3=oe("<button>Clear cache"),I3=oe("<p>Anchor version: "),C3=e=>{En(()=>{V.anchor=(()=>{const P=e.anchor.trim();try{if(P.startsWith("http")){const f=!e.legacyUrl;return{type:"http",value:ny(P,f)}}const u=ki(P);switch(u.type){case"nevent":return{type:"note",value:u.data.id};case"note":return{type:"note",value:u.data};case"naddr":const f=u.data;return{type:"naddr",value:`${f.kind}:${f.pubkey}:${f.identifier}`}}}catch(u){return console.error(u),{type:"error",value:`Malformed anchor: ${P}`}}})();const L="wss://relay.damus.io,wss://nos.lol";V.relays=(e.relays||L).split(",").map(P=>new URL(P).toString()),(e.author||"").startsWith("npub")&&(V.externalAuthor=e.author),V.disableFeatures=e.disable.split(",").map(P=>P.trim()).filter(ub),V.urlPrefixes=Jb(e.urls),V.replyPlaceholder=e.replyPlaceholder});const t=()=>V.anchor,n=()=>V.relays,r=()=>V.disableFeatures,i=()=>e.version;V.profiles=gi(()=>["profiles"]);const s=()=>r().includes("watch");En(Jt([t],()=>{V.version=i()})),En(Jt([t,n],async()=>{if(t().type==="error")return;let L,P;switch(t().type){case"http":P=await yr("events",t().value,{index:"r"}),V.rootEventIds=Ai(P).map(b=>b.id),L={"#r":e.legacyUrl?[t().value]:[t().value,`${t().value}/`],kinds:[1,8812]};break;case"note":const g=await rr("events",IDBKeyRange.only(t().value));if(g){P=[g],V.rootEventIds=[g.id],V.anchorAuthor=g.pk;return}else{P=[],L={ids:[t().value]};break}case"naddr":const[v,B,_]=t().value.split(":");P=(await yr("events",_,{index:"d"})).filter(b=>b.pk===B),P.length>0&&(V.rootEventIds=Ai(P).map(b=>b.id),V.anchorAuthor=P[0].pk),L={authors:[B],kinds:[parseInt(v)],"#d":[_]};break;default:throw"error"}const f=(await tr.querySync(n(),{...L})).map(Xi);for(const l of f)t().type=="http"?(l.k==1&&l.c.includes("")||l.k==8812)&&Je("events",l):Je("events",l);switch(t().type){case"http":case"naddr":const l=[...P,...f],g=Ai([...l]).map(v=>v.id);(g.length>0&&g[0])!==V.rootEventIds[0]&&(V.rootEventIds=g);break;case"note":V.rootEventIds=f.map(v=>v.id);break}f.length>0&&(V.anchorAuthor=f[0].pk)}));const o=()=>V.rootEventIds;En(Jt([o,i],()=>{switch(t().type){case"http":case"note":(V.filter["#e"]??[]).toString()!==o().toString()&&(V.filter={"#e":o()});return;case"naddr":const L=V.filter["#a"]&&V.filter["#a"][0];t().value!==L&&(V.filter={"#a":[t().value]}),V.version=i()||o()[0];return}},{defer:!0}));const a=ae(()=>V.filter,{defer:!0});let c;hr(Jt([a],async()=>{const L=a(),P=n(),u=t(),f=$(),l=V.profiles();if(Object.entries(L).length===0)return;c==null||c.close(),c=null,er(()=>{console.log("[zapthreads] unsubscribing and cleaning up",u.value),c==null||c.close(),c=null});const g=[1,9802,7,9735];console.log("[zapthreads] subscribing to",u.value);const v=await Fb(u,P),B=new Set,_={};c=tr.subscribeMany(P,[{...L,kinds:g,since:v}],{onevent(b){if(b.kind===1||b.kind===9802)b.content.trim()&&Je("events",Xi(b));else if(b.kind===7)B.add(b.id);else if(b.kind===9735){const S=b.tags.find(I=>I[0]==="bolt11");S&&S[1]&&(_[b.id]=S[1])}},oneose(){(async()=>{const b=await rr("aggregates",IDBKeyRange.only([u.value,7]))??{eid:u.value,ids:[],k:7};b.ids=[...new Set([...b.ids,...B])],Je("aggregates",b);const S=await rr("aggregates",IDBKeyRange.only([u.value,9735]))??{eid:u.value,ids:[],k:9735,sum:0};S.sum=Object.entries(_).reduce((I,O)=>{if(S.ids.includes(O[0]))return I;const m=k3.decode(O[1]).sections.find(N=>N.name==="amount"),C=Number(m.value)/1e3;return I+C},S.sum??0),S.ids=[...new Set([...S.ids,...Object.keys(_)])],Je("aggregates",S)})(),setTimeout(async()=>{await lf([...f.map(b=>b.pk)],P,l),qb(u,f),s()&&(c==null||c.close(),tr.close(P))},96)}})},{defer:!0}));const d=()=>e.user;En(Jt(d,L=>{if(L){let P,u;L.startsWith("nsec")?(u=ki(L).data,P=pf(u)):P=ki(L).data,ze.external={pk:P,signEvent:async f=>{if(u)return{sig:gf(f,u).sig};if(!window.nostr)throw alert("Please log in with a NIP-07 extension such as Alby or nos2x"),ze.active=void 0,"No extension available";const l=await window.nostr.getPublicKey(),g=P;if(g!==l){const v=`ERROR: Event not signed. Supplied pubkey does not match extension pubkey. ${g} !== ${l}`;throw ze.active=void 0,alert(v),v}else return window.nostr.signEvent(f)}},ze.active=ze.external}})),En(Jt(d,L=>{L||(ze.active=void 0)},{defer:!0}));const p=gi(()=>["events",30023,{index:"k"}]),h=ae(()=>{if(V.disableFeatures.includes("hideContent")&&t().type==="naddr"){const[L,P,u]=t().value.split(":"),f=p().find(l=>l.d===u&&l.pk===P);if(f){const l=`# ${f.tl}
 ${f.c}`;return ff({...f,c:l},V,[])}}}),y=ae(()=>{switch(t().type){case"http":case"note":return gi(()=>["events",V.rootEventIds,{index:"ro"}]);case"naddr":return gi(()=>["events",t().value,{index:"a"}]);default:return()=>[]}}),$=()=>y()(),k=ae(()=>V.rootEventIds&&V.rootEventIds.length?hf($()).filter(P=>!(P.k===9802&&P.children.length===0)):[]),w=()=>k().reduce((L,P)=>L+ca(P),k().length),[A,T]=_e(!1);return(()=>{const L=A3(),P=L.firstChild,u=P.nextSibling;return Z(P,Tm),Z(L,(()=>{const f=ae(()=>!!h());return()=>f()&&(()=>{const l=$3();return Xe(()=>l.innerHTML=h()),l})()})(),u),Z(L,(()=>{const f=ae(()=>t().type==="error");return()=>f()&&[S3(),(()=>{const l=T3(),g=l.firstChild;return Z(g,()=>t().value),l})()]})(),u),Z(L,(()=>{const f=ae(()=>t().type!=="error");return()=>f()&&[ae((()=>{const l=ae(()=>!V.disableFeatures.includes("reply"));return()=>l()&&it(jy,{})})()),(()=>{const l=P3();return Z(l,(()=>{const g=ae(()=>w()>0);return()=>g()&&`${w()} comment${w()==1?"":"s"}`})()),l})(),it(_f,{nestedEvents:k,articles:p})]})(),u),u.$$click=()=>T(!A()),Z(u,Ef),Z(L,(()=>{const f=ae(()=>!!A());return()=>f()&&[B3(),ae((()=>{const l=ae(()=>!!V.version);return()=>l()&&(()=>{const g=I3();return g.firstChild,Z(g,()=>V.version,null),g})()})()),(()=>{const l=L3();return lm(l,"click",Vb),l})()]})(),null),L})()};Sm("zap-threads",{anchor:"",version:"",relays:"",user:"",author:"",disable:"",urls:"","reply-placeholder":"","legacy-url":""},e=>it(C3,{get anchor(){return e.anchor??""},get version(){return e.version??""},get relays(){return e.relays??""},get user(){return e.user??""},get author(){return e.author??""},get disable(){return e.disable??""},get urls(){return e.urls??""},get replyPlaceholder(){return e["reply-placeholder"]??""},get legacyUrl(){return e["legacy-url"]??""}}));Zu(["click"]);function O3(e){let t,n;return t=new ol({}),{c(){zt(t.$$.fragment)},m(r,i){_t(t,r,i),n=!0},p:Pe,i(r){n||(ce(t.$$.fragment,r),n=!0)},o(r){le(t.$$.fragment,r),n=!1},d(r){Et(t,r)}}}function N3(e){let t,n,r=sn(e[2].created_at,!0)+"",i,s,o,a=e[2].title+"",c,d,p,h,y,$,k=e[2].image&&zc(e),w=e[4]&&Rc(e);return{c(){t=G("div"),n=G("div"),i=pe(r),s=de(),o=G("h1"),c=pe(a),d=de(),k&&k.c(),p=de(),h=G("div"),y=de(),w&&w.c(),$=xn(),W(n,"class","date"),W(h,"class","content"),W(t,"class","note-wrapper")},m(A,T){te(A,t,T),D(t,n),D(n,i),D(t,s),D(t,o),D(o,c),D(t,d),k&&k.m(t,null),D(t,p),D(t,h),h.innerHTML=e[5],te(A,y,T),w&&w.m(A,T),te(A,$,T)},p(A,T){T&4&&r!==(r=sn(A[2].created_at,!0)+"")&&Oe(i,r),T&4&&a!==(a=A[2].title+"")&&Oe(c,a),A[2].image?k?k.p(A,T):(k=zc(A),k.c(),k.m(t,p)):k&&(k.d(1),k=null),T&32&&(h.innerHTML=A[5]),A[4]?w?w.p(A,T):(w=Rc(A),w.c(),w.m($.parentNode,$)):w&&(w.d(1),w=null)},i:Pe,o:Pe,d(A){A&&(ee(t),ee(y),ee($)),k&&k.d(),w&&w.d(A)}}}function zc(e){let t,n;return{c(){t=G("img"),W(t,"class","note-banner"),tn(t.src,n=e[2].image)||W(t,"src",n)},m(r,i){te(r,t,i)},p(r,i){i&4&&!tn(t.src,n=r[2].image)&&W(t,"src",n)},d(r){r&&ee(t)}}}function Rc(e){let t;return{c(){t=G("zap-threads"),di(t,"anchor",e[3]),di(t,"relays",e[1])},m(n,r){te(n,t,r)},p(n,r){r&8&&di(t,"anchor",n[3]),r&2&&di(t,"relays",n[1])},d(n){n&&ee(t)}}}function z3(e){var b;let t,n,r,i,s=e[3].substring(0,12)+"..."+e[3].slice(-5),o,a,c,d,p,h,y,$,k,w=((b=e[0])==null?void 0:b.shortName)+"",A,T,L,P,u,f,l,g;const v=[N3,O3],B=[];function _(S,I){return I&4&&(P=null),P==null&&(P=Object.keys(S[2]).length>0),P?0:1}return u=_(e,-1),f=B[u]=v[u](e),{c(){var S;t=G("div"),n=G("div"),r=pe("Note: "),i=G("a"),o=pe(s),c=de(),d=G("a"),p=G("div"),h=G("img"),$=de(),k=G("span"),A=pe(w),T=pe(" homepage"),L=de(),f.c(),l=xn(),W(i,"href",a="https://njump.me/"+e[3]),W(n,"class","external-link"),tn(h.src,y=(S=e[0])==null?void 0:S.image)||W(h,"src",y),W(p,"class","picture-container"),W(d,"href","#"),W(t,"class","header note")},m(S,I){te(S,t,I),D(t,n),D(n,r),D(n,i),D(i,o),D(t,c),D(t,d),D(d,p),D(p,h),D(d,$),D(d,k),D(k,A),D(k,T),te(S,L,I),B[u].m(S,I),te(S,l,I),g=!0},p(S,[I]){var E,m;(!g||I&8)&&s!==(s=S[3].substring(0,12)+"..."+S[3].slice(-5))&&Oe(o,s),(!g||I&8&&a!==(a="https://njump.me/"+S[3]))&&W(i,"href",a),(!g||I&1&&!tn(h.src,y=(E=S[0])==null?void 0:E.image))&&W(h,"src",y),(!g||I&1)&&w!==(w=((m=S[0])==null?void 0:m.shortName)+"")&&Oe(A,w);let O=u;u=_(S,I),u===O?B[u].p(S,I):(dn(),le(B[O],1,1,()=>{B[O]=null}),ln(),f=B[u],f?f.p(S,I):(f=B[u]=v[u](S),f.c()),ce(f,1),f.m(l.parentNode,l))},i(S){g||(ce(f),g=!0)},o(S){le(f),g=!1},d(S){S&&(ee(t),ee(L),ee(l)),B[u].d(S)}}}function R3(e,t,n){let r,i,s,o="",a="",c=!1,{id:d}=t,{profile:p}=t;return ss(()=>{Cu().then(async({npub:h,relays:y,comments:$})=>{if(n(1,i=y),n(0,p=await fs(h)),!p)throw new Error("npub is invalid");n(3,a=sg({id:d})),n(4,c=$);let k=Hr.subscribeMany(i,[{ids:[d]}],{onevent:async w=>{console.log("Received event:",w),n(2,s=bi(w)),ji.set(s.title),n(7,o=await Cd(s))},oneose(){console.log("No subscribers left. Closing subscription."),k.close()}})})}),e.$$set=h=>{"id"in h&&n(6,d=h.id),"profile"in h&&n(0,p=h.profile)},e.$$.update=()=>{e.$$.dirty&128&&n(5,r=o)},ji.subscribe(h=>{document.title=h}),[p,i,s,a,c,r,d,o]}class x3 extends hn{constructor(t){super(),fn(this,t,R3,z3,vt,{id:6,profile:0})}}function M3(e){let t,n,r,i,s,o;return{c(){t=G("div"),n=G("input"),r=de(),i=G("label"),n.checked=e[0],W(n,"type","checkbox"),W(n,"id","theme-toggle"),W(n,"class","svelte-aypc0d"),W(i,"for","theme-toggle"),W(i,"class","svelte-aypc0d")},m(a,c){te(a,t,c),D(t,n),D(t,r),D(t,i),s||(o=Lf(n,"click",e[1]),s=!0)},p(a,[c]){c&1&&(n.checked=a[0])},i:Pe,o:Pe,d(a){a&&ee(t),s=!1,o()}}}function j3(e,t,n){let r=!0;function i(){n(0,r=!r),localStorage.setItem("theme",r?"dark":"light"),r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}return typeof window<"u"&&(localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),r=!0):(document.documentElement.classList.remove("dark"),r=!1)),[r,i]}class H3 extends hn{constructor(t){super(),fn(this,t,j3,M3,vt,{})}}function xc(e){let t;return{c(){t=G("div"),t.innerHTML=`<h1>Oracolo</h1> <h2>Missing config!</h2>
		You need to set (at least) the<strong>author meta tag</strong> by updating this html file! Open it
		with an editor, look at the first lines and personalize them.`,W(t,"class","unfinished-setup")},m(n,r){te(n,t,r)},d(n){n&&ee(t)}}}function Mc(e){let t=e[0],n,r,i=jc(e);return{c(){i.c(),n=xn()},m(s,o){i.m(s,o),te(s,n,o),r=!0},p(s,o){o&1&&vt(t,t=s[0])?(dn(),le(i,1,1,Pe),ln(),i=jc(s),i.c(),ce(i,1),i.m(n.parentNode,n)):i.p(s,o)},i(s){r||(ce(i),r=!0)},o(s){le(i),r=!1},d(s){s&&ee(n),i.d(s)}}}function U3(e){let t,n;return t=new x3({props:{id:e[0],profile:e[1]}}),{c(){zt(t.$$.fragment)},m(r,i){_t(t,r,i),n=!0},p(r,i){const s={};i&1&&(s.id=r[0]),i&2&&(s.profile=r[1]),t.$set(s)},i(r){n||(ce(t.$$.fragment,r),n=!0)},o(r){le(t.$$.fragment,r),n=!1},d(r){Et(t,r)}}}function D3(e){let t,n;return t=new ul({props:{tag:e[0],profile:e[1]}}),{c(){zt(t.$$.fragment)},m(r,i){_t(t,r,i),n=!0},p(r,i){const s={};i&1&&(s.tag=r[0]),i&2&&(s.profile=r[1]),t.$set(s)},i(r){n||(ce(t.$$.fragment,r),n=!0)},o(r){le(t.$$.fragment,r),n=!1},d(r){Et(t,r)}}}function V3(e){let t,n;return t=new ul({props:{tag:"",profile:e[1]}}),{c(){zt(t.$$.fragment)},m(r,i){_t(t,r,i),n=!0},p(r,i){const s={};i&2&&(s.profile=r[1]),t.$set(s)},i(r){n||(ce(t.$$.fragment,r),n=!0)},o(r){le(t.$$.fragment,r),n=!1},d(r){Et(t,r)}}}function jc(e){let t,n,r,i,s;const o=[V3,D3,U3],a=[];function c(d,p){return p&1&&(t=null),d[0]===""?0:(t==null&&(t=!!d[0].startsWith("tags/")),t?1:2)}return n=c(e,-1),r=a[n]=o[n](e),{c(){r.c(),i=xn()},m(d,p){a[n].m(d,p),te(d,i,p),s=!0},p(d,p){let h=n;n=c(d,p),n===h?a[n].p(d,p):(dn(),le(a[h],1,1,()=>{a[h]=null}),ln(),r=a[n],r?r.p(d,p):(r=a[n]=o[n](d),r.c()),ce(r,1),r.m(i.parentNode,i))},i(d){s||(ce(r),s=!0)},o(d){le(r),s=!1},d(d){d&&ee(i),a[n].d(d)}}}function Hc(e){let t,n=e[3].join(", ")+"",r;return{c(){t=pe("This page connects to some servers (Nostr relays) to retrieve data: "),r=pe(n)},m(i,s){te(i,t,s),te(i,r,s)},p(i,s){s&8&&n!==(n=i[3].join(", ")+"")&&Oe(r,n)},d(i){i&&(ee(t),ee(r))}}}function F3(e){let t,n=e[1]&&Object.keys(e[1]).length>0,r,i,s,o,a,c,d,p,h,y,$,k,w=e[2]&&xc(),A=n&&Mc(e),T=e[3]&&Hc(e);return $=new H3({}),{c(){w&&w.c(),t=de(),A&&A.c(),r=de(),i=G("div"),s=pe("This blog is powered by "),o=G("a"),o.textContent="Oracolo",a=pe(` and Nostr,
	`),c=G("a"),c.textContent="read more",d=G("br"),p=G("br"),h=de(),T&&T.c(),y=de(),zt($.$$.fragment),W(o,"href","https://github.com/dtonon/oracolo"),W(c,"href","https://njump.me"),W(i,"class","footer")},m(L,P){w&&w.m(L,P),te(L,t,P),A&&A.m(L,P),te(L,r,P),te(L,i,P),D(i,s),D(i,o),D(i,a),D(i,c),D(i,d),D(i,p),D(i,h),T&&T.m(i,null),te(L,y,P),_t($,L,P),k=!0},p(L,[P]){L[2]?w||(w=xc(),w.c(),w.m(t.parentNode,t)):w&&(w.d(1),w=null),P&2&&(n=L[1]&&Object.keys(L[1]).length>0),n?A?(A.p(L,P),P&2&&ce(A,1)):(A=Mc(L),A.c(),ce(A,1),A.m(r.parentNode,r)):A&&(dn(),le(A,1,1,()=>{A=null}),ln()),L[3]?T?T.p(L,P):(T=Hc(L),T.c(),T.m(i,null)):T&&(T.d(1),T=null)},i(L){k||(ce(A),ce($.$$.fragment,L),k=!0)},o(L){le(A),le($.$$.fragment,L),k=!1},d(L){L&&(ee(t),ee(r),ee(i),ee(y)),w&&w.d(L),A&&A.d(L),T&&T.d(),Et($,L)}}}function q3(e,t,n){let r="",i,s=!1,o,a=!1;const c=()=>{const d=window.location.hash.substring(1);d!==r&&n(0,r=d)};return ss(()=>{Cu().then(async({npub:d,relays:p,comments:h})=>{if(n(3,o=p),a=h,a)try{let y=document.createElement("script");y.src="https://unpkg.com/window.nostr.js/dist/window.nostr.js",y.onload=()=>{console.log("window.nostr.js has been successfully loaded")},document.head.appendChild(y)}catch(y){console.error("Failed to load window.nostr.js:",y)}c(),window.addEventListener("hashchange",c),n(1,i=await fs(d)),i?(i.metadata.name||i.shortName,i.image):n(2,s=!0)})}),zf(()=>{window.removeEventListener("hashchange",c)}),[r,i,s,o]}class W3 extends hn{constructor(t){super(),fn(this,t,q3,F3,vt,{})}}new W3({target:document.getElementById("app")});</script>
    <style rel="stylesheet" crossorigin>html{font-size:20px}@media only screen and (max-width: 768px){html{font-size:18px}}body{margin:0;padding:0}html.dark body{background-color:#242424;color:#cbcbcb}#app{box-sizing:border-box;width:80%;max-width:760px;margin:2rem auto;font-family:Arial,Helvetica,sans-serif;color:#242424}@media only screen and (max-width: 768px){#app{width:100%;padding:0 1rem;max-width:unset}}html.dark #app{background-color:#242424;color:#ebebeb}a,a:visited{color:#242424}html.dark a,html.dark a:visited{color:#f5f5f5}ol,ul{padding-left:1rem;margin:0}ol li,ul li{margin-bottom:1rem}blockquote{margin:0;padding-left:1rem;border-left:8px solid #ebebeb}code{font-size:.9rem;background-color:#f6f6f6}pre code{overflow:scroll;display:block;padding:1rem .5rem}.unfinished-setup{width:80%;margin:0 auto;text-align:center}.header.home h1{font-size:3rem}.header .external-link{text-align:right;margin-top:-1rem;font-size:.8em;color:#cbcbcb}@media only screen and (max-width: 768px){.header .external-link{margin-bottom:1rem;margin-right:2.5rem}}.header .external-link a{text-decoration:underline;color:#cbcbcb}.header .picture-container{position:relative;display:inline-block;width:2.5rem;height:2.5rem;overflow:hidden;border-radius:50%;margin-bottom:-.25rem}.header .picture-container img{position:absolute;top:50%;left:50%;width:100%;height:100%;object-fit:cover;transform:translate(-50%,-50%);clip-path:circle(50%)}.header.note .picture-container{width:1.5rem;height:1.5rem;margin-bottom:-.4rem}.header a{text-decoration:none}.header a span{text-decoration:underline}html.dark .header a:visited{color:#cbcbcb}html.dark .header .external-link,html.dark .header .external-link a{color:#747474}.topic-wrapper{margin-bottom:1.5rem;display:flex;flex-direction:row;flex-wrap:wrap;row-gap:1rem}.topic-wrapper div{display:inline-grid;margin-right:1rem}.topic-wrapper div a{padding:.4rem 1rem;background-color:#e0e0e0;text-decoration:none;border-radius:4px}.topic-wrapper div a:hover{background-color:#ebebeb}.topic-wrapper div a.selected{background-color:#242424;color:#f5f5f5}html.dark .topic-wrapper div a{background-color:#747474;color:#242424}html.dark .topic-wrapper div a:hover{background-color:#f5f5f5}html.dark .topic-wrapper div a.selected{background-color:#cbcbcb}.externalLink{display:block;text-align:right;margin-top:-1rem;font-size:.8em;color:#cbcbcb}.externalLink a{color:#cbcbcb}.about{margin-bottom:2rem;padding-bottom:1rem;border-bottom:8px solid #ebebeb}html.dark .about{border-bottom:8px solid #373737}.separator{margin-bottom:2rem;border-bottom:8px solid #ebebeb}html.dark .separator{border-bottom:8px solid #373737}.top-notes{display:flex;color:#747474;flex-wrap:wrap;justify-content:space-between;gap:2rem;width:100%;margin-bottom:1rem;padding-bottom:2rem;border-bottom:8px solid #f5f5f5}@media only screen and (max-width: 768px){.top-notes{display:block}}@media only screen and (max-width: 768px){.top-notes{padding-bottom:0rem}}.top-notes .note{flex:1 1 calc(50% - 2rem);box-sizing:border-box}@media only screen and (max-width: 768px){.top-notes .note{margin-bottom:2rem}}.top-notes .note a{text-decoration:none}.top-notes .note img{width:100%;height:200px;object-fit:cover;margin-bottom:.5rem;border-radius:4px}.top-notes .note .title{display:block;margin-bottom:.4rem;font-size:1.1rem;font-weight:bolder}.top-notes .note .summary{margin-bottom:.4rem;font-size:.9rem}.top-notes .note .date{font-size:.8rem;color:#a9a9a9}html.dark .top-notes{color:#cbcbcb;border-bottom:8px solid #373737}.short-notes{border-bottom:8px solid #f5f5f5;padding-bottom:1rem;margin-bottom:2rem}.short-notes .splide__slide{font-size:.9rem;overflow-wrap:break-word}.short-notes .splide__slide a{text-decoration:none}.short-notes .splide__slide .date{font-size:.8rem;color:#a9a9a9;margin-bottom:.3rem}.short-notes .splide__arrow--prev{left:-3em}.short-notes .splide__arrow--next{right:-3em}@media only screen and (max-width: 768px){.short-notes .splide__arrow--prev,.short-notes .splide__arrow--next{display:none}}.short-notes .splide__arrow{background:none}.short-notes .splide__arrow svg{fill:#a9a9a9}html.dark .short-notes{border-bottom:8px solid #373737}html.dark .short-notes a{color:#cbcbcb}.listing-notes{margin-top:1rem;color:#747474}.listing-notes.short-feed-full li{margin-bottom:2rem}.listing-notes.short-feed-full .summary{color:#242424}.listing-notes ul{list-style-type:none;padding:0;margin:0}.listing-notes ul li{margin-bottom:1rem}.listing-notes ul li h2{font-size:1.1rem;margin-bottom:.5rem}.listing-notes ul li h2 a{display:block;font-size:1.1rem}.listing-notes ul li .summary{margin-bottom:.4rem;overflow-wrap:break-word}.listing-notes ul li .summary p{margin:0}.listing-notes ul li .summary img{display:block;margin:2rem auto;max-width:100%;border-radius:4px}.listing-notes ul li .summary video{width:100%;margin:2rem auto}.listing-notes ul li .summary audio{width:100%;margin:2rem auto}.listing-notes ul li .date{font-size:.8rem;color:#a9a9a9}html.dark .listing-notes{color:#cbcbcb}html.dark .listing-notes.short-feed-full .summary{color:#fff}h1{font-size:2rem;line-height:.9;margin-top:0}@media only screen and (max-width: 768px){h1{font-size:1.6rem}}.note-wrapper{position:relative;margin-top:2rem;overflow-wrap:break-word}.note-wrapper h1,.note-wrapper h2,.note-wrapper h3{margin-top:1.4rem;margin-bottom:.6rem}.note-wrapper h1:first-of-type{margin-top:0rem}.note-wrapper .content{margin-top:1.5rem}.note-wrapper p{line-height:1.3rem;margin-top:0rem}.note-wrapper .date{display:block;margin-bottom:.5rem;font-size:.8rem;color:#a9a9a9}.note-wrapper img{display:block;margin:2rem auto;max-width:100%;border-radius:4px}.note-wrapper img.note-banner{margin:2.5rem auto 3.5rem;transform:scale(1.1)}.note-wrapper video{width:100%;margin:2rem auto}.note-wrapper audio{width:100%;margin:2rem auto}.footer{margin-top:4rem;padding-top:2rem;margin-bottom:2rem;border-top:8px solid #ebebeb;font-size:.8rem;text-align:center;color:#cbcbcb}.footer a{color:#cbcbcb}html.dark .footer{border-top:8px solid #373737;color:#747474}html.dark .footer a,html.dark .footer a:visited{color:#747474}zap-threads{font-size:.9rem}.splide__container{box-sizing:border-box;position:relative}.splide__list{backface-visibility:hidden;display:-ms-flexbox;display:flex;height:100%;margin:0!important;padding:0!important}.splide.is-initialized:not(.is-active) .splide__list{display:block}.splide__pagination{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;margin:0;pointer-events:none}.splide__pagination li{display:inline-block;line-height:1;list-style-type:none;margin:0;pointer-events:auto}.splide:not(.is-overflow) .splide__pagination{display:none}.splide__progress__bar{width:0}.splide{position:relative;visibility:hidden}.splide.is-initialized,.splide.is-rendered{visibility:visible}.splide__slide{backface-visibility:hidden;box-sizing:border-box;-ms-flex-negative:0;flex-shrink:0;list-style-type:none!important;margin:0;position:relative}.splide__slide img{vertical-align:bottom}.splide__spinner{animation:splide-loading 1s linear infinite;border:2px solid #999;border-left-color:transparent;border-radius:50%;bottom:0;contain:strict;display:inline-block;height:20px;left:0;margin:auto;position:absolute;right:0;top:0;width:20px}.splide__sr{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.splide__toggle.is-active .splide__toggle__play,.splide__toggle__pause{display:none}.splide__toggle.is-active .splide__toggle__pause{display:inline}.splide__track{overflow:hidden;position:relative;z-index:0}@keyframes splide-loading{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.splide__track--draggable{-webkit-touch-callout:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.splide__track--fade>.splide__list>.splide__slide{margin:0!important;opacity:0;z-index:0}.splide__track--fade>.splide__list>.splide__slide.is-active{opacity:1;z-index:1}.splide--rtl{direction:rtl}.splide__track--ttb>.splide__list{display:block}.splide__arrow{-ms-flex-align:center;align-items:center;background:#ccc;border:0;border-radius:50%;cursor:pointer;display:-ms-flexbox;display:flex;height:2em;-ms-flex-pack:center;justify-content:center;opacity:.7;padding:0;position:absolute;top:50%;transform:translateY(-50%);width:2em;z-index:1}.splide__arrow svg{fill:#000;height:1.2em;width:1.2em}.splide__arrow:hover:not(:disabled){opacity:.9}.splide__arrow:disabled{opacity:.3}.splide__arrow:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide__arrow--prev{left:1em}.splide__arrow--prev svg{transform:scaleX(-1)}.splide__arrow--next{right:1em}.splide.is-focus-in .splide__arrow:focus{outline:3px solid #0bf;outline-offset:3px}.splide__pagination{bottom:.5em;left:0;padding:0 1em;position:absolute;right:0;z-index:1}.splide__pagination__page{background:#ccc;border:0;border-radius:50%;display:inline-block;height:8px;margin:3px;opacity:.7;padding:0;position:relative;transition:transform .2s linear;width:8px}.splide__pagination__page.is-active{background:#fff;transform:scale(1.4);z-index:1}.splide__pagination__page:hover{cursor:pointer;opacity:.9}.splide__pagination__page:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide.is-focus-in .splide__pagination__page:focus{outline:3px solid #0bf;outline-offset:3px}.splide__progress__bar{background:#ccc;height:3px}.splide__slide{-webkit-tap-highlight-color:rgba(0,0,0,0)}.splide__slide:focus{outline:0}@supports (outline-offset:-3px){.splide__slide:focus-visible{outline:3px solid #0bf;outline-offset:-3px}}@media screen and (-ms-high-contrast:none){.splide__slide:focus-visible{border:3px solid #0bf}}@supports (outline-offset:-3px){.splide.is-focus-in .splide__slide:focus{outline:3px solid #0bf;outline-offset:-3px}}@media screen and (-ms-high-contrast:none){.splide.is-focus-in .splide__slide:focus{border:3px solid #0bf}.splide.is-focus-in .splide__track>.splide__list>.splide__slide:focus{border-color:#0bf}}.splide__toggle{cursor:pointer}.splide__toggle:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide.is-focus-in .splide__toggle:focus{outline:3px solid #0bf;outline-offset:3px}.splide__track--nav>.splide__list>.splide__slide{border:3px solid transparent;cursor:pointer}.splide__track--nav>.splide__list>.splide__slide.is-active{border:3px solid #000}.splide__arrows--rtl .splide__arrow--prev{left:auto;right:1em}.splide__arrows--rtl .splide__arrow--prev svg{transform:scaleX(1)}.splide__arrows--rtl .splide__arrow--next{left:1em;right:auto}.splide__arrows--rtl .splide__arrow--next svg{transform:scaleX(-1)}.splide__arrows--ttb .splide__arrow{left:50%;transform:translate(-50%)}.splide__arrows--ttb .splide__arrow--prev{top:1em}.splide__arrows--ttb .splide__arrow--prev svg{transform:rotate(-90deg)}.splide__arrows--ttb .splide__arrow--next{bottom:1em;top:auto}.splide__arrows--ttb .splide__arrow--next svg{transform:rotate(90deg)}.splide__pagination--ttb{bottom:0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;left:auto;padding:1em 0;right:.5em;top:0}.loader-container.svelte-1gbkpfy{display:flex;align-items:center;justify-content:center}.loader.svelte-1gbkpfy{display:inline-block;width:92px;height:92px;opacity:0;animation:svelte-1gbkpfy-fade-in .5s .4s forwards,svelte-1gbkpfy-loader-animation 2s linear infinite .4s}.loader.svelte-1gbkpfy:after{content:" ";display:block;width:64px;height:64px;margin:8px;border-radius:50%;border:6px solid #a9a9a9;border-color:#a9a9a9 transparent #a9a9a9 transparent;animation:svelte-1gbkpfy-loader-animation 2s linear infinite}@keyframes svelte-1gbkpfy-loader-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes svelte-1gbkpfy-fade-in{to{opacity:1}}html.dark .loader.svelte-1gbkpfy:after{border:6px solid #373737;border-color:#373737 transparent #373737 transparent}#theme-toggle.svelte-aypc0d.svelte-aypc0d{display:none}#theme-toggle.svelte-aypc0d+label.svelte-aypc0d{display:inline-block;cursor:pointer;height:1rem;width:1rem;position:absolute;top:1rem;right:3rem;border-radius:9px;transition-duration:.3s;content:""}@media only screen and (max-width: 768px){#theme-toggle.svelte-aypc0d+label.svelte-aypc0d{right:1rem}}#theme-toggle.svelte-aypc0d:not(:checked)+label.svelte-aypc0d{background-color:#e9e9e9}#theme-toggle.svelte-aypc0d:checked+label.svelte-aypc0d{background-color:transparent;box-shadow:inset -6px -6px 1px 1px #3f3f3f}</style>
  </head>
  <body>
    <div id="app"></div>
    <script>
      window.wnjParams = {
        position: 'bottom',
        accent: 'neutral',
        startHidden: true,
        compactMode: true,
      };
    </script>
  </body>
</html>
